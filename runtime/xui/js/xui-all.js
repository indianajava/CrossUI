var root,factory;root="undefined"!=typeof window?window:this,factory=function(){
/*!
* CrossUI(xui) JavaScript Library v3.0
* https://crossui.com
*
* Copyright ( 2004 ~ present) CrossUI.com
* Released under the MIT license
*
*/
var undefined,window=this,document=window.document,xui=window.xui=function(e,t){return xui.Dom.pack(e,t)},root,factory;return xui.window=window,xui.Class=function(e,t,i){var r,o,n,a,s,u,l=[],d=xui.Class,c=xui.window,p=d._fun,h=d._reg,f=d._all,x=function(e){return(e+"").replace(/(\s*\/\*[^*]*\*+([^\/][^*]*\*+)*\/)|(\s*\/\/[^\n]*)|(\)[\s\S]*)/g,(function(e){return")"!=e.charAt(0)?"":e}))};if(i=i||{},!d._ignoreNSCache&&(s=xui.get(c,e.split(".")))&&"function"==typeof s&&s.$xuiclass$)return d._last=s;for((s=xui.get(c,["xui","$cache","SC"]))&&delete s[e],t=t?"string"==typeof t?[t]:t:[],a=0;s=t[a];a++)if(!(l[a]=xui.get(c,s.split("."))||xui.get(window,s.split("."))||xui&&xui.SC&&xui.SC(s)))throw new Error("errNoParent--"+s);if(i.Required)for("string"==typeof i.Required&&(i.Required=[i.Required]),a=0;s=i.Required[a];a++)if(!(xui.get(c,s.split("."))||xui&&xui.SC&&xui.SC(s)))throw new Error("errNoRequiredClass--"+s);o=l[0];var g=i.$Start||o&&o.$Start;for(a in xui.tryF(g,[],i),s={},r=i.Static||{})h[a]&&(s[a]=1);for(a in s)delete r[a];r.Before=i.Before||o&&o.Before,r.After=i.After||o&&o.After,r.$Start=g,r.$End=i.$End||o&&o.$End,r.__gc=i.__gc||r.__gc||o&&o.__gc||function(){xui.Class.__gc(this.$key)};var m=function(){xui.Class.$instanceCreated&&xui.Class.$instanceCreated(this),"function"==typeof this.initialize&&this.initialize()};if("function"==typeof i.Constructor)(n=p(i.Constructor,"Constructor",e,o||m,"constructor")).Constructor=x(i.Constructor);else if(o){var b=m,v=o.Constructor;v&&(b=new Function(v.slice(v.indexOf("(")+1,v.indexOf(")")).split(","),v.slice(v.indexOf("{")+1,v.lastIndexOf("}")))),(n=p(b,"Constructor",e,o.upper,"constructor")).Constructor=x(v)}else n=m;for(u=xui.fun(),a=l.length-1;s=l[a--];)xui.merge(u,s),xui.merge(u.prototype,s.prototype);if(n.KEY=n.$key=n.prototype.KEY=n.prototype.$key=e,d._wrap(n,r,0,u,"static"),(s=i.Instance)&&d._wrap(n.prototype,s,1,u.prototype,"instance"),d._inherit(n,u),d._inherit(n.prototype,u.prototype),u=null,!1===xui.tryF(n.Before,arguments,n))return!1;for(a=0;s=l[a];a++){for(var y,A=0,_=(s=s.$children||(s.$children=[])).length;A<_;A++)if(s[_]==e){y=!0;break}y||(s[s.length]=e)}if(n.$xui$=n.$xuiclass$=1,n.$children=[],n.$parent=l,n.prototype.constructor=n,n.prototype.$xui$=1,n[e]=n.prototype[e]=!0,u=s=xui.get(c,e.split(".")),xui.set(c,e.split("."),n),"[object Object]"==Object.prototype.toString.call(u))for(a in u)n[a]=u[a];return xui.tryF(n.After,[],n),xui.tryF(i.Initialize,[],n),xui.tryF(n.$End,[],n),xui.breakO([i.Static,i.Instance,i],2),e in f||(f[e]=f.length,f.push(e)),d._last=n},xui.Namespace=function(e){var t=e.split("."),i=xui.window;return xui.get(i,t)||(xui.Namespace._all[t[0]]=1)&&xui.set(i,t,{})},xui.Namespace._all={},xui.merge=function(e,t,i,r){var o,n;switch("function"==typeof i&&(n=i,i="fun"),i){case"fun":for(o in t)(r||t.hasOwnProperty(o))&&!0===n(t[o],o)&&(e[o]=t[o]);break;case"all":for(o in t)(r||t.hasOwnProperty(o))&&(e[o]=t[o]);break;case"with":for(o in t)(r||t.hasOwnProperty(o))&&e.hasOwnProperty(o)&&(e[o]=t[o]);break;default:for(o in t)!r&&!t.hasOwnProperty(o)||e.hasOwnProperty(o)||(e[o]=t[o])}return e},new function(){for(var e,t=0,i=["ms","moz","webkit","o"],r=window,o=0,n=i.length;o<n&&!r.requestAnimationFrame&&(e=i[o++]);)r.requestAnimationFrame=r[e+"RequestAnimationFrame"],r.cancelAnimationFrame=r[e+"CancelAnimationFrame"]||r[e+"CancelRequestAnimationFrame"];r.requestAnimationFrame=r.requestAnimationFrame||function(e,i){var r=(new Date).getTime(),o=Math.max(0,1e3/60-(r-t)),n=setTimeout((function(){e(r+o)}),o);return t=r+o,n},r.cancelAnimationFrame=r.cancelAnimationFrame||function(e){clearTimeout(e)},r.requestIdleCallback=r.requestIdleCallback||function(e){return setTimeout((function(){var t=Date.now();e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},r.cancelIdleCallback=r.cancelIdleCallback||function(e){clearTimeout(e)}},new function(){var e=Object.prototype.toString;xui.merge(xui,{stamp:function(){return+new Date},rand:function(e,t){return(e||"")+parseInt(xui.stamp()*Math.random(),10).toString(36)+(t||"")},setTimeout:function(e,t){return!1===t||(t||0)>1e3/60?-1*setTimeout(e,t||0):requestAnimationFrame(e)},clearTimeout:function(e){e>=0?cancelAnimationFrame(e):clearTimeout(Math.abs(e))},fun:function(){return function(){}},exec:function(e,t,i){var r,o=document,n=o.getElementsByTagName("head")[0]||o.documentElement,a=o.createElement("script");return i&&(e="!function(){"+e+"}(xui.window)"),a.type="text/javascript",t&&((r=o.getElementById(t))&&r.parentNode==n&&n.removeChild(r),a.id=t),xui.browser.ie?a.text=e:a.appendChild(o.createTextNode(e)),n.appendChild(a),a.disalbed=!0,a.disabled=!1,t||n.removeChild(a),a},_s2a:function(e){return(e+"").replace(/^\[/,"").replace(/\]$/,"").split(/\s*[\[\]\.]\s*[\[\]\.]?\s*/)},get:function(e,t,i){if(!t)return e;if(!xui.isSet(e))return undefined;if(i&&(t=xui._s2a(t)),"string"==typeof t)return e[t];for(var r,o=0,n=t.length;o<n;)if((r=t[o++]+"")&&(!e||(e=r!=(r=r.replace("()",""))?"function"==typeof e[r]&&0!==r.indexOf("set")?e[r]():undefined:e[r])===undefined))return;return e},set:function(e,t,i,r){if(e){if(r&&(t=xui._s2a(t)),"string"!=typeof t){for(var o,n,a=0,s=t.length-1;a<s;)e=!e[o=t[a++]]||"object"!=(n=typeof e[o])&&"function"!=n?e[o]={}:e[o];t=t[s]}if(t!=(t=(t+"").replace("()",""))){if("function"==typeof e[t])return e[t](i),i}else{if(i!==undefined)return e[t]=i;e.hasOwnProperty&&e.hasOwnProperty(t)?delete e[t]:e[t]=undefined}}},clonePath:function(e,t){var i,r,o=[],n=t.length;return xui.clone(e,(function(e,a,s,u){if(i=0,o[s-1]=a,o.splice(s),(r=o.length)>n)return u[a]=e,!1;for(;i<=r-1;){if(t[i]!==o[i])return u[a]=e,!1;i++}}))},tryF:function(e,t,i,r){return e&&"function"==typeof e?e.apply(i||{},t||[]):r},asyRun:function(e,t,i,r){return xui.setTimeout("string"==typeof e?function(){xui.exec(e)}:function(){e.apply(r,i||[]),e=i=null},t)},idleRun:function(e,t,i){return window.requestIdleCallback("string"==typeof e?function(){xui.exec(e)}:function(){e.apply(i,t||[]),e=t=null})},asyHTML:function(e,t,i,r){var o=document.createElement("div"),n=document.createDocumentFragment(),a=function(){for(var e=r||10;--e&&o.firstChild;)n.appendChild(o.firstChild);o.firstChild?xui.setTimeout(a,i):t(n)};o.innerHTML=e,a()},isEmpty:function(e){if(xui.isSet(e)){if(!0===e)return!1;if(xui.isNumb(e))return!1;if(xui.isHash(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!!(xui.isArr(e)||xui.isStr(e)||xui.isArguments(e))&&0===e.length}return!0},resetRun:function(e,t,i,r,o){var n,a=xui.resetRun,s=a.$cache||(a.get=a.exists=function(e){return this.$cache[e]})&&(a.run=function(e,t){(t=this.$cache[e])&&(xui.clearTimeout(t.id),t.task(),delete this.$cache[e])})&&(a.cancel=function(e){xui.resetRun(e)})&&(a.$cache={});s[e]&&xui.clearTimeout(s[e].id),"function"==typeof t?(n=function(){delete s[e],t.apply(o||null,r||[])},s[e]={id:xui.setTimeout(n,i),task:n}):delete s[e]},observableRun:function(e,t,i,r){xui.Thread.observableRun(e,t,i,r)},breakO:function(e,t,i){var r,o=t||1,n=1+(i||0),a=xui.breakO,s="___gc_";if(e&&("object"==typeof e||"function"==typeof e)&&e!==window&&e!==document&&1!==e.nodeType){try{if(e.hasOwnProperty(s))return;e[s]=null}catch(e){return}try{for(r in e)if(e.hasOwnProperty(r)&&e[r]){"object"!=typeof e[r]&&"function"!=typeof e[r]||n<o&&a(e[r],o,n);try{e[r]=null}catch(e){}}}catch(e){return}e.length&&(e.length=0),delete e[s]}},each:function(e,t,i){for(var r in i=i||e,e)if(!1===t.call(i,e[r],r,e))break;return e},compareVar:function(e,t,i,r){return e===t||(xui.isObj(e)||xui.isObj(t)?xui.isDate(e)&&xui.isDate(t)||xui.isReg(e)&&xui.isReg(t)?e+""==t+"":!!(xui.isHash(e)&&xui.isHash(t)||xui.isArr(e)&&xui.isArr(t)||xui.isArguments(e)&&xui.isArguments(t))&&(e=xui.serialize(e,0,0,i||5,r||300),t=xui.serialize(t,0,0,i||5,r||300),-1==e.indexOf(xui.$_outofmilimted)&&-1==t.indexOf(xui.$_outofmilimted)&&e===t):void 0)},compareNumber:function(e,t,i){return xui.toFixedNumber(e,i)===xui.toFixedNumber(t,i)},toFixedNumber:function(e,t){xui.isSet(t)||(t=2);var i,r,o,n,a=Math.abs(e),s=""+Math.round(a*Math.pow(10,t));if(/\D/.test(s))i=""+a;else{for(;s.length<1+t;)s="0"+s;o=s.substring(0,r=s.length-t),(n=s.substring(r))&&(n="."+n),i=o+n}return parseFloat((e<0?"-":"")+i)},toNumeric:function(e,t,i,r){return xui.isNumb(e)||(e=parseFloat((e+"").replace(/\s*(e\+|[^0-9])/g,(function(e,t,i){return"e+"==t||"E+"==t||0==i&&"-"==t?t:t==r?".":""})))||0),xui.isSet(t)&&t>=0&&(e=xui.toFixedNumber(e,t)),e},formatNumeric:function(e,t,i,r,o,n){return xui.isSet(t)&&(t=parseInt(t,10)),t=t||0===t?t:0,i=xui.isSet(i)?i:",",r=r||".",-1==(e=""+parseFloat(e)).indexOf("e")&&(e=(e=xui.toFixedNumber(e,t)+"").split("."),!1!==o&&(e[1]?e[1].length:0)<t&&(e[1]=(e[1]||"")+xui.str.repeat("0",t-(e[1]?e[1].length:0))),e[0]=e[0].split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1"+i).split("").reverse().join(""),e=e.join(r)),n&&-1!=e.indexOf(r)?e.replace(new RegExp("["+r+"]?0+$"),""):e},replace:function(e,t,i,r){if(!e)return"";var o,n,a,s,u,l,d=[],c=[],p=arguments.callee,h=p.reg3||(p.reg3=/\$\d/),f=p.reg4||(p.reg4=/^\$\d+$/),x=p.reg5||(p.reg5=/'/),g=p.reg6||(p.reg6=/\\./g),m=p.reg11||(p.reg11=/(['"])\1\+(.*)\+\1\1$/);return xui.isArr(t)?r=i:t=[t,i],xui.isArr(t[0])||(t=[t]),xui.arr.each(t,(function(e){if(s="string"==typeof e[0]?e[0]:e[0].source,u=e[1]||"",n=new RegExp("("+s+")|[\\s\\S]").exec(" ").length-2,"function"!=typeof u&&h.test(u))if(f.test(u))(a=parseInt(u.slice(1),10))<=n&&(u=a);else{for(l=x.test(u.replace(g,""))?'"':"'",o=n;o+1;)u=u.split("$"+o).join(l+"+a[o+"+o--+"]+"+l);u=new Function("a,o","return"+l+u.replace(m,"$1")+l)}d.push(s||"^$"),c.push([u,n,typeof u])})),e.replace(new RegExp("("+d.join(")|(")+")",r?"gim":"gm"),(function(){var e,t=1,i=0,r=arguments;if(!r[0])return"";for(;e=c[i++];)if(r[t])switch(e[2]){case"function":return e[0](r,t,i-1);case"number":return r[e[0]+t];default:return e[0]}else t+=e[1]+1}))},copy:function(e,t){return xui.clone(e,t,1)},clone:function(e,t,i,r){if(r=r||0,e&&(xui.isHash(e)||xui.isArr(e))){if(xui.isObj(e)){var o,n,a=xui.clone,s=xui.isArr(e),u=s?[]:{},l=0;if(xui.isSet(i)){if(i<=0)return e}else i=100;if(s)for(n=e.length;l<n;l++)"function"==typeof t&&!1===t.call(e,e[l],l,r+1,u)||(u[u.length]=(o=e[l])&&i&&(xui.isHash(o)||xui.isArr(o))?a(o,t,i-1,r+1):o);else for(l in e)(!0===t?"_"!=l.charAt(0):!1===t?"_"!=l.charAt(0)&&"$"!=l.charAt(0):"function"!=typeof t||!1!==t.call(e,e[l],l,r+1,u))&&(u[l]=(o=e[l])&&i&&(xui.isHash(o)||xui.isArr(o))?a(o,t,i-1,r+1):o);return u}return e}return e},deepEquals:function(e,t,i,r,o){if(xui.isSet(i)||(i=100),xui.isSet(o)||(o=1),e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;for(let n in e)if((!r||!r(n))&&e.hasOwnProperty(n)){if(!t.hasOwnProperty(n))return!1;if(e[n]!==t[n]){if("object"!=typeof e[n])return!1;if(!(xui.isHash(e[n])&&xui.isHash(t[n])&&xui.isEmpty(e[n])&&xui.isEmpty(t[n])||xui.isArr(e[n])&&xui.isArr(t[n])&&0===e[n].length&&0===t[n].length))if(o>=i){if(e[n]!==t[n])return!1}else if(!xui.deepEquals(e[n],t[n],i,r,o+1))return!1}}for(let i in t)if(t.hasOwnProperty(i)&&!e.hasOwnProperty(i))return!1;return!0},filter:function(e,t,i){if(!i&&e&&xui.isArr(e)){var r,o=[];for(n=0,r=e.length;n<r;n++)o[o.length]=e[n];for(e.length=0,n=0,r=o.length;n<r;n++)"function"==typeof t&&!1===t.call(o,o[n],n)||(e[e.length]=o[n])}else{var n,a={};for(n in e)(!0===t?"_"==n.charAt(0):!1===t?"_"==n.charAt(0)||"$"==n.charAt(0):"function"==typeof t&&!1===t.call(e,e[n],n))&&(a[n]=1);for(n in a)delete e[n]}return e},toArr:function(e,t){if(!e)return[];var i=[];if("boolean"==typeof t)for(var r in e)i[i.length]=t?r:e[r];else if(xui.isHash(e))for(var r in e)i.push({key:r,value:e[r]});else if("string"==typeof e)i=e.split(t||",");else{r=0;for(var o=e.length;r<o;++r)i[r]=e[r]}return i},toUTF8:function(e){return e.replace(/[^\x00-\xff]/g,(function(e,t){return"\\u"+((t=e.charCodeAt())<16?"000":t<256?"00":t<4096?"0":"")+t.toString(16)}))},fromUTF8:function(e){return e.replace(/\\u([0-9a-f]{3})([0-9a-f])/g,(function(e,t,i){return String.fromCharCode(16*parseInt(t,16)+parseInt(i,16))}))},urlEncode:function(e){var t,i,r,o=[],n=[];for(t in e)o[i=o.length]=n[n.length]=encodeURIComponent(t),((r=e[t])||0===r)&&(o[i]+="="+encodeURIComponent("string"==typeof r?r:xui.serialize(r)));return(o=xui.arr.stableSort(o,(function(e,t,i,r){return n[i]>n[r]?1:n[i]==n[r]?0:-1}))).join("&")},urlDecode:function(e,t){if(!e)return t?"":{};for(var i,r={},o=e.split("&"),n=0,a=o.length;n<a;n++){i=o[n].split("=");try{r[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||"")}catch(e){r[i[0]]=i[1]||""}}return t?r[t]:r},getUrlParams:function(e){var t=(e||location.href).replace(/^[^#]*[#!]+|^[^#]*$/,"");return-1!=t.indexOf("?")&&(t=t.split("?")[1]),-1!=t.indexOf("=")?xui.urlDecode(t):{}},getUrlPath:function(e){var t=(e||location.href).replace(/^[^#]*[#!]+|^[^#]*$/,"");return t=-1!=t.indexOf("?")?t.split("?")[0]:-1==t.indexOf("=")?t:"","/"+decodeURIComponent(t).replace(/^\//,"").replace(/\/$/,"")},preLoadImage:function(e,t,i){if(xui.isArr(e)){for(var r=0,o=e.length;r<o;r++)xui.preLoadImage(e[r],t,i);return o}var n=document.createElement("img");return n.style.cssText="position:absolute;left:-999px;top:-999px",n.width=n.height=2,n.onload=function(){"function"==typeof t&&t.call(this),this.onload=this.onerror=null,document.body.removeChild(this)},n.onerror=function(){"function"==typeof i&&i.call(this),this.onload=this.onerror=null,document.body.removeChild(this)},document.body.appendChild(n),n.src=e,1},isDefined:function(e){return e!==undefined},isNull:function(e){return null===e},isSet:function(e){return e!==undefined&&null!==e&&NaN!==e},isObj:function(e){return!!e&&("object"==typeof e||"function"==typeof e)},isHash:function(t){return!!t&&"[object Object]"==e.call(t)&&t.constructor&&/^\s*function\s+Object\(\s*\)/.test(t.constructor.toString())&&!Object.prototype.hasOwnProperty.call(t,"callee")},isBool:function(e){return"boolean"==typeof e},isNumb:function(e){return"number"==typeof e&&isFinite(e)},isFinite:function(e){return(e||0===e)&&isFinite(e)&&!isNaN(parseFloat(e))},isDate:function(t){return"[object Date]"===e.call(t)&&isFinite(+t)},isFun:function(t){return"[object Function]"===e.call(t)},isAsyncFun:function(t){return"[object AsyncFunction]"===e.call(t)},isArr:function(t){return"[object Array]"===e.call(t)},isReg:function(t){return"[object RegExp]"===e.call(t)},isStr:function(t){return"[object String]"===e.call(t)},isFile:function(t){return"[object File]"===e.call(t)},isArguments:function(t){return t&&("[object Arguments]"===e.call(t)||Object.prototype.hasOwnProperty.call(t,"callee"))},isEvent:function(t){return t&&(/^(\[object (Keyboard|Mouse|Focus|Wheel|Composition|Storage)Event\])|(\[object Event\])$/.test(e.call(t))||xui.isHash(t)&&!(!t.$xuievent&&!t.$xuieventpara))},isElem:function(e){return!(!e||1!==e.nodeType)},isNaN:function(e){return"number"==typeof e&&e!=+e},str:{startWith:function(e,t){return 0===e.indexOf(t)},endWith:function(e,t){var i=e.length-t.length;return i>=0&&e.lastIndexOf(t)===i},repeat:function(e,t){return new Array(t+1).join(e)},initial:function(e){return e.charAt(0).toUpperCase()+e.substring(1)},trim:function(e){return e?e.replace(/^(\s|\uFEFF|\xA0)+|(\s|\uFEFF|\xA0)+$/g,""):e},ltrim:function(e){return e?e.replace(/^(\s|\uFEFF|\xA0)+/,""):e},rtrim:function(e){return e?e.replace(/(\s|\uFEFF|\xA0)+$/,""):e},toDom:function(e){var t=xui.$getGhostDiv(),i=[];t.innerHTML=e;for(var r=0,o=t.childNodes,n=o.length;r<n;r++)i[i.length]=o[r];return t=null,xui(i)}},arr:{fastSortObject:function(e,t){if(!e||e.length<2)return e;for(var i,r,o,n,a=e.length,s=[],u=(a+"").length,l=Object.prototype,d=0;d<u;d++)s[d]=new Array(u-d).join("0");for(var c=0;c<a;c++)r=c+"","object"==typeof(o=e[c])&&(o._xui_$s$=(xui.isSet(n=t.call(o,c))?n:"")+s[r.length-1]+r);try{i=l.toString,l.toString=function(){return this.hasOwnProperty("_xui_$s$")?this._xui_$s$:i.call(this)},e.sort()}finally{for(l.toString=i,c=0;c<a;c++)"object"==typeof e[c]&&delete e[c]._xui_$s$}return e},stableSort:function(e,t){if(e&&e.length>1){for(var i=0,r=e.length,o=[],n=[];i<r;i++)n[i]=e[o[i]=i];for(xui.isFun(t)?o.sort((function(i,r){return t.call(e,e[i],e[r],i,r)||(i>r?1:-1)})):o.sort((function(t,i){return e[t]>e[i]?1:e[t]<e[i]?-1:t>i?1:-1})),i=0;i<r;i++)e[i]=n[o[i]];o.length=n.length=0}return e},subIndexOf:function(e,t,i){if(i===undefined)return-1;for(var r=0,o=e.length;r<o;r++)if(e[r]&&e[r][t]===i)return r;return-1},removeFrom:function(e,t,i){return e.splice(t,i||1),e},removeValue:function(e,t){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1);return e},intersection:function(e,t){for(var i=0,r=0,o=[];i<e.length&&r<t.length;)e[i]<t[r]?i++:(e[i]>t[r]||(o.push(e[i]),i++),r++);return o},insertAny:function(e,t,i,r){var o,n=e.length;return r=!xui.isArr(t)||r,0===i?r?e.unshift(t):e.unshift.apply(e,t):((!i||i<0||i>n)&&(i=n),i!=n&&(o=e.splice(i,n-i)),r?e[e.length]=t:e.push.apply(e,t),o&&e.push.apply(e,o)),i},indexOf:function(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},each:function(e,t,i,r){var o,n,a=e;if(!a)return a;if(!xui.isArr(a)){if(!xui.isArr(a._nodes))return a;a=a._nodes,r===undefined&&(r=1)}if(n=a.length,i=i||e,r)for(o=n-1;o>=0&&!1!==t.call(i,a[o],o,a);o--);else for(o=0;o<n&&!1!==t.call(i,a[o],o,a);o++);return e},removeDuplicate:function(e,t){var i=e.length,r=e.concat();e.length=0;for(var o=i-1;o>=0;o--)(t?this.subIndexOf(r,t,r[o][t])===o:this.indexOf(r,r[o])===o)&&e.push(r[o]);return e.reverse()}},_scope_set:function(e){window.get&&(xui._scope_bak=window.get),xui._scope_datamap=e,window.get=function(e){if(e){var t,i=(e=""+e).indexOf("."),r=-1==i?e:e.substr(0,i),o=-1==i?null:e.substr(i+1,e.length);return(t=xui._scope_datamap)&&(t=t[r])&&(o?t[o]:t)}}},_scope_clear:function(e){(e=xui._scope_bak)&&(window.get=e,delete xui._scope_bak,delete xui._scope_datamap)}})},new function(){var e,t=/(\s*\/\*[^*]*\*+([^\/][^*]*\*+)*\/)|(\s*\/\/[^\n]*)|(\)[\s\S]*)/g,i=/^\s*(\([\w,\s]*\)|\s*[\w]+\s*)\s*=>\s*([\s\S]*)\s*$/;try{e=Object.getPrototypeOf((async function(){})).constructor}catch(e){}xui.merge(xui.fun,{body:function(e){var r=(""+e).replace(/^async\s+/,"").replace(t,(function(e){return")"!=e.charAt(0)?"":e})),o=i.exec(r);return o?"{"==o[2][0]?o[2].slice(1,-1):o[2]:r.slice(r.indexOf("{")+1,r.lastIndexOf("}"))},args:function(e){var r=(""+e).replace(/^async\s+/,"").replace(t,(function(e){return")"!=e.charAt(0)?"":e})),o=i.exec(r);return(r=xui.str.trim(o?"("==o[1][0]?o[1].slice(1,-1):o[1]:r.slice(r.indexOf("(")+1,r.indexOf(")"))).split(/\s*,\s*/))[0]?r:[]},clone:function(t){return xui.isAsyncFun(t)&&e?new e(xui.fun.args(t),xui.fun.body(t)):new Function(xui.fun.args(t),xui.fun.body(t))}})},xui.merge(xui.Class,{_reg:{$key:1,$parent:1,$children:1,KEY:1,Static:1,Instance:1,Constructor:1,Initialize:1},_reg2:{nodeType:1,constructor:1,prototype:1,toString:1,valueOf:1,hasOwnProperty:1,isPrototypeOf:1,propertyIsEnumerable:1,toLocaleString:1},_all:[],_fun:function(e,t,i,r,o){return e.$name$=t,e.$original$=i,o&&(e.$type$=o),r&&e!==r&&(e.upper=r),e},_other:["toString","valueOf"],_o:{},_inherit:function(e,t,i){var r,o,n=this._reg;for(r in t)r in e||!i&&n[r]||"$"==r.charAt(0)||(o=t[r])&&o.$xui$||(e[r]=o)},_wrap:function(e,t,i,r,o){var n,a,s,u=this,l=e.KEY,d=u._reg,c=u._reg2,p=u._fun,h=u._other;for(n in t)c[n]||!i&&d[n]||(s=t[n],e[n]="function"!=typeof s?s:p(s,n,l,"function"==typeof r[n]&&r[n],o));for(a=0;n=h[a++];)(s=t[n])&&s==u._o[n]||(e[n]="function"!=typeof s?s:p(s,n,l,"function"==typeof r[n]&&r[n],o))},__gc:function(e){var t=xui.Class._all;if(e){"object"==typeof e&&(e=e.KEY||"");var i,r,o,n=xui.get(window,e.split("."));if(n){if((i=xui.get(window,["xui","$cache","SC"]))&&delete i[e],n.$parent&&(n.$parent.length=0),i=n.$children){for(a=0;o=i[a];a++)(o=xui.get(window,o.split(".")))&&o.__gc&&o.__gc();i.length=0}for(a in n)if("upper"!=a&&"function"==typeof n[a])for(r in n[a])n[a].hasOwnProperty(r)&&delete n[a][r];for(a in xui.breakO(n),n=n.prototype)if("upper"!=a&&"function"==typeof n[a])for(r in n[a])n[a].hasOwnProperty(r)&&delete n[a][r];xui.breakO(n),xui.set(window,e.split("."))}t.splice(t[e],1),delete t[e]}else for(var a=t.length-1;a>0;a--)xui.Class.__gc(t[a])},destroy:function(e){xui.Class.__gc(e)}}),xui.merge(xui,{version:3,$DEFAULTHREF:"javascript:;",$IEUNSELECTABLE:function(){return xui.browser.ie?' onselectstart="return false;" ':""},SERIALIZEMAXLAYER:99,SERIALIZEMAXSIZE:9999,$localeKey:"en",$localeDomId:"xlid",$dateFormat:"",$rand:"_rnd_",_rnd:function(e){return xui.debugMode||e?xui.$rand+"="+xui.rand():null},_debugPre:function(e){return(e=xui.toArr(e))[0]="%c ["+e[0]+"@xui]",xui.arr.insertAny(e,"color:#0000ff; font-style: italic;",1),e},_debugInfo:function(){xui.debugMode&&xui.isDefined(window.console)&&"function"==typeof console.log&&console.log.apply(console,xui._debugPre(arguments))},_debugGroup:function(){xui.debugMode&&xui.isDefined(window.console)&&"function"==typeof console.group?console.group.apply(console,xui._debugPre(arguments)):xui._debugInfo.apply(xui,arguments)},_debugGroupEnd:function(){xui.debugMode&&xui.isDefined(window.console)&&"function"==typeof console.groupEnd?console.groupEnd():xui._debugInfo.apply(xui,arguments)},SpaceUnit:"em",$us:function(e){return xui.browser.ie6||xui.browser.ie7?e?-2:-1:"px"==(e=e?e._spaceUnit||e.properties&&e.properties.spaceUnit:"")?-2:"em"==e?2:"px"==xui.SpaceUnit?-1:"em"==xui.SpaceUnit?1:0},debugMode:!0,Locale:{},constant:{},$cache:{thread:{},SC:{},clsByURI:{},fetching:{},hookKey:{},hookKeyUp:{},snipScript:{},subscribes:{},ghostDiv:[],data:{},callback:{},functions:{},domPurgeData:{},profileMap:{},reclaimId:{},template:{},UIKeyMapEvents:{},droppable:{},unique:{}},subscribe:function(e,t,i,r){if(null!==e&&e!==undefined&&null!==t&&t!==undefined&&"function"==typeof i){var o,n=xui.$cache.subscribes;return n[e]=n[e]||[],-1!=(o=xui.arr.subIndexOf(n[e],"id",t))&&xui.arr.removeFrom(n[e],o),n[e].push({id:t,receiver:i,asy:!!r})}},unsubscribe:function(e,t){var i,r=xui.$cache.subscribes;t?r[e]&&-1!=(i=xui.arr.subIndexOf(r[e],"id",t))&&xui.arr.removeFrom(r[e],i):null===e||e===undefined?r={}:delete r[e]},publish:function(e,t,i,r){var o=xui.$cache.subscribes;if(null===e||e===undefined)for(var n in o)xui.arr.each(o[n],(function(e){if(!i||i===e.id||xui.isArr(i)&&-1!=xui.arr.indexOf(i,e.id)){if(!e.asy)return xui.tryF(e.receiver,t,r,!0);xui.asyRun(e.receiver,0,t,r)}}));else o[e]&&xui.arr.each(o[e],(function(e){if(!i||i===e.id||xui.isArr(i)&&-1!=xui.arr.indexOf(i,e.id)){if(!e.asy)return xui.tryF(e.receiver,t,r,!0);xui.asyRun(e.receiver,0,t,r)}}))},getSubscribers:function(e){return null===e||e===undefined?xui.$cache.subscribes:xui.$cache.subscribes[e]},setDateFormat:function(e){xui.$dateFormat=e},getDateFormat:function(e,t){return xui.isStr(t=e&&e.dateFormat)&&t||xui.isStr(t=e)&&t||xui.isStr(t=xui.$dateFormat)&&t||xui.isStr(t=xui.$cache.data.$DATE_FORMAT)&&t?t:"yyyy-mm-dd hh:mm:ss"},setFirstDayOfWeek:function(e){xui.$firstDayOfWeek=e},getFirstDayOfWeek:function(e,t){return xui.isNumb(t=e&&e.firstDayOfWeek)||xui.isNumb(t=e)||xui.isNumb(t=xui.$firstDayOfWeek)||xui.isNumb(t=xui.$cache.data.$DATE_WEEKFROM)?t:0},setAppLangKey:function(e){xui.$appLangKey=e},getAppLangKey:function(e){return xui.$appLangKey},getLang:function(){return xui.$localeKey},setLang:function(e,t,i){var r,o,n,a,s,u,l,d,c=xui.getRes,p=[];if(xui.$localeKey=e,o=document.getElementsByTagName?document.getElementsByTagName("span"):document.all&&document.all.tags?document.all.tags("span"):null){for(n=0;r=o[n];n++)r.id==xui.$localeDomId&&(p[p.length]=r);d=p.length,s=function(){var e=function(){for(a=p.splice(0,100),n=0;r=a[n];n++)r.className&&"string"==typeof(o=c(r.className))&&(r.innerHTML=o);p.length&&xui.setTimeout(e,0),xui.tryF(i,[p.length,d]),p.length||xui.tryF(t,[0,d])};e()},l="xui.Locale."+e,u=function(){var t=xui.$appLangKey;t?xui.include(l+"."+t,xui.getPath("Locale."+e,".js"),s,s):s()},xui.include(l+".inline.$_$",xui.getPath(l,".js"),u,u)}},getTheme:function(e,t){try{(t=document.createElement("xui")).className="setting-uikey",document.body.appendChild(t),e=xui(t).css("font-family"),document.body.removeChild(t)}catch(t){}finally{return e||"default"}},setTheme:function(e,t,i,r,o){e=e||"default";var n=xui.getTheme();if(e!=n){var a=function(e){if("default"!=n){for(var i;i=xui.CSS.$getCSSValue(".setting-uikey","fontFamily",n);)i.disabled=!0,i.parentNode.removeChild(i),i=null;for(;(i=document.getElementById("theme:"+n))&&"link"==i.tagName.toLowerCase();)i.parentNode.removeChild(i)}!1!==t&&xui.CSS.adjustFont(),xui.tryF(e)};if("default"==e)a(i);else{var s="theme:"+e,u=xui.getPath("xui.appearance."+e,"");o?xui.getFileAsync(u+"theme.css",(function(e){e=(e=xui.replace(e,[[/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)/,"$0"],[/\{[^}]*\}/,"$0"],[/([^\/{},]+)/,function(e){return xui.str.endWith(e[0],".setting-uikey")?e[0]:e[0].replace(/([^\s>]+)/,"$1"+o)}]])).replace(/url\(([^)]+)\)/g,"url("+u+"$1)"),xui.CSS._appendSS(xui("head"),e,s,!1)})):xui.CSS.includeLink(u+"theme.css",s);var l=0,d=function(){if(l++>4){if(d=l=null,!1!==xui.tryF(r))throw new Error("errLoadTheme:"+e)}else xui.getTheme()==e?(a(i),d=l=null):xui.asyRun(d,100*l)};d()}}else xui.tryF(i)},reLayout:function(){xui.UI&&xui.UI.getAll().reLayout(!0)},_langParamReg:/\x24(\d+)/g,_langscMark:/[$@{][\S]+/,_langReg:/((\$)([^\w\(]))|((\$)([\w][\w\.-]*[\w]+))|((\$)\(([\w][\w\.]*[^)\n\r]+))\)|((\$)([^\s]))|((\@)([\w][\w\.]*[\w]+)(\@?))|((\@)([^\s])(\@?))|((\{)([~!@#$%^&*+-\/?.|:][\w\[\]]*|[\w\[\]]+(\(\))?(\.[\w\[\]]+(\(\))?)*)(\}))/g,_escapeMap:{$:"",".":"","-":"",")":"","@":""},_unescapeMap:{"":"$","":".","":"-","":")","":"@"},getRes:function(e){var t,i,r,o=arguments;if(xui.isStr(e))"$"==(e=e.replace(/\$([$.-])/g,(function(e,t){return xui._escapeMap[t]||e}))).charAt(0)&&(e=e.slice(1)),-1!=e.indexOf("-")?(r=e.split("-"),e=r[0],o=r):xui.isArr(o[1])&&(o=o[1]).unshift(e),(t=e.split("."))[t.length-1]=t[t.length-1].replace(/([\x01\x02\x03\x04])/g,(function(e){return xui._unescapeMap[e]}));else{if(!xui.isArr(e))return e;t=e}return"function"==(r=typeof(i=xui.get(xui.Locale[xui.$localeKey],t)))?i.apply(null,o):"object"==r?i:(i="string"==r?i.replace(/\$([$.-])/g,(function(e,t){return xui._escapeMap[t]||e})):t[t.length-1],(o.length>1?i.replace(xui._langParamReg,(function(e,t,i){return null===(i=o[+t+1])||i===undefined?e:i})):i).replace(/([\x01\x02\x03])/g,(function(e){return xui._unescapeMap[e]})))},wrapRes:function(e){if(!xui.isStr(e))return e;var t,i,r=e;return"$"==r.charAt(0)&&(arguments[0]=r.substr(1,r.length-1)),(t=e)==(i=xui.getRes.apply(null,arguments))&&(i=r),'<span id="'+xui.$localeDomId+'" class="'+t.replace(/([\x01\x02\x03\x04])/g,(function(e){return"$"+xui._unescapeMap[e]}))+'" '+xui.$IEUNSELECTABLE()+">"+i+"</span>"},adjustRes:function(e,t,i,r,o,n,a){return xui.isStr(e)?(t=t?xui.wrapRes:xui.getRes,e=e.replace(/\$([\$\.\-\)])/g,(function(e,t){return xui._escapeMap[t]||e})),(e=xui._langscMark.test(e)?e.replace(xui._langReg,(function(e,s,u,l,d,c,p,h,f,x,g,m,b,v,y,A,_,w,C,I,E,S,D,k,$,N){return"$"==u?r?e:l:"$"==c?r?e:t(p,o):"$"==f?r?e:t(x,o):"$"==m?r?e:t(b,o):(i||"@"!=y&&"@"!=C)&&"{"!=D?e:(N=xui.SC.get("@"==y?A:"@"==C?I:k,n,a))||(xui.isSet(N)?N:"")})):e).replace(/([\x01\x02\x03\x04])/g,(function(e){return xui._unescapeMap[e]}))):e},_feval:function(e,t){try{return new Function("","with(this){return "+e+"}").apply(t||{})}catch(e){return""}},adjustVar:function(e,t,i){var r;return"string"==typeof e?"{[]}"==e?[]:"{{}}"==e?{}:"{}"==e?"":"{true}"==e||"{false}"!=e&&("{NaN}"==e?NaN:"{null}"==e?null:"{undefined}"==e?undefined:"{now}"==e?new Date:(r=/^\s*\{\s*eval\s*\((.*)\)\s*\}\s*$/.exec(e))?this._feval(r[1],t||i):(r=/^\s*\{((-?\d\d*\.\d*)|(-?\d\d*)|(-?\.\d\d*))\}\s*$/.exec(e))?parseFloat(r[1]):(r=/^\s*\{([\w\.]+\([^)]*\))\s*\}\s*$/.exec(e))&&(t||i)&&xui.isHash(t||i)?new Function("try{return this."+r[1]+"}catch(e){}").call(t||i):(r=/^\s*\{([^}]+)\}\s*$/.exec(e))?xui.SC.get(r[1],t,i):xui.adjustRes(e,!1,!0,!0,null,t,i)):e},_getrpc:function(e,t,i){var r=i&&i.proxyType?i.proxyType.toLowerCase():"";return"sajax"==r||"jsonp"==r?xui.JSONP:"iajax"==r||"xdmi"==r?xui.XDMI:"ajax"==r?xui.Ajax:"fetch"==r?xui.Fetch:i&&"object"==typeof i.data&&function(e){if(!xui.isHash(e))return 0;for(var t in e)if(e[t]&&1==e[t].nodeType&&"INPUT"==e[t].nodeName||e[t]&&e[t].$xuiFileCtrl)return 1}(i.data)?xui.XDMI:i&&i.method&&"post"==i.method.toLowerCase()?xui.absIO.isCrossDomain(e)?xui.XDMI:xui.Ajax:xui.absIO.isCrossDomain(e)?xui.JSONP:xui.Ajax},request:function(e,t,i,r,o,n){return xui._getrpc(e,t,n).apply(null,arguments).start()},ajax:function(e,t,i,r,o,n){return xui.Ajax.apply(null,arguments).start()},jsonp:function(e,t,i,r,o,n){return xui.JSONP.apply(null,arguments).start()},xdmi:function(e,t,i,r,o,n){return xui.XDMI.apply(null,arguments).start()},fetch:function(e,t,i,r,o,n){return xui.Fetch.apply(null,arguments).start()},restGet:function(e,t,i,r,o,n){return n||(n={}),n.method="get",xui.Ajax(e,t,i,r,o,n).start()},restPost:function(e,t,i,r,o,n){return n||(n={}),n.method="post",xui.Ajax(e,t,i,r,o,n).start()},restPut:function(e,t,i,r,o,n){return n||(n={}),n.method="put",xui.Ajax(e,t,i,r,o,n).start()},restDelete:function(e,t,i,r,o,n){return n||(n={}),n.method="delete",xui.Ajax(e,t,i,r,o,n).start()},getFileSync:function(e,t,i,r){return xui.Ajax(e,xui._rnd(r&&r.force),t,i,null,xui.merge({asy:!1,rspType:r&&r.rspType||"text"},r,"without")).start()||null},getFileAsync:function(e,t,i,r,o){xui.Ajax(e,xui._rnd(o&&o.force),t,i,r,xui.merge({asy:!0,rspType:o&&o.rspType||"text"},o,"without")).start()},include:function(e,t,i,r,o,n){if(e&&xui.SC.get(e))xui.tryF(i);else{n=n||{};var a=xui._rnd(n.force);n.rspType="script",n.keepDomNode=1,o?(n.asy=!o,xui.Ajax(t,a,(function(t){try{xui.exec(t,e)}catch(e){xui.tryF(r,[e])}xui.tryF(i)}),r,0,n).start()):(n.checkKey=e,xui.JSONP(t,a,i,r,0,n).start())}},mailTo:function(e,t,i,r,o){xui.isHash(t)&&(o=t.bcc||"",r=t.cc||"",i=t.body||"",t=t.subject||"");var n="mailto:"+e+"?subject="+encodeURIComponent(xui.adjustRes(t||""))+"&body= "+encodeURIComponent(xui.adjustRes(i||""))+"&cc= "+(r||"")+"&bcc= "+(o||"");xui.XDMI(n).start()},fetchAlienClass:function(e,t,i,r,o,n,a){return(a=a||{}).alien=!0,this.fetchClass(e,t,i,r,o,n,a)},_getIdUri:function(e,t){var i,r,o,n;return xui.isHash(e)?(r=e.id,o=e.uri,delete(i=xui.copy(e)).id,delete i.uri):(n=/^\[([\w][\w\.]*[\w])\](.+)/.exec(e))?(r=n[1],o=n[2]):/^[\w][\w\.]*[\w]$/.test(e)?(r=e,o=xui.getPath(r,".js","js",t)):(o=e,r=xui.getClassName(o)),{id:r,uri:o,attrs:i}},fetchClass:function(e,t,i,r,o,n,a){!(a=a||{}).hasOwnProperty("appPath")&&window["/"]&&(a.appPath=window["/"]);var s,u=xui.$cache.clsByURI,l=xui.$cache.fetching,d=function(){for(var t in l[e][3])xui.Thread.abort(l[e][3][t]);l[e]&&(l[e][0].length=0,l[e][1].length=0,l[e][2].length=0,l[e][3].length=0,l[e].length=0,delete l[e]),l=null},c=xui._rnd(a.force),p=xui._getIdUri(e,a),h=p.id,f=p.attrs;e=p.uri,!o&&xui.isSet(p=h&&xui.SC.get(h)||u[e])?xui.tryF(t,[e,p&&p.KEY],p):l[e]?(t&&l[e][0].push(t),i&&l[e][1].push(i),r&&l[e][2].push(r),n&&(l[e][3].push(n),xui.Thread.suspend(n))):(l[e]=[t=t?[t]:[],i=i?[i]:[],r=r?[r]:[],[]],a.useAjax?xui.Ajax(e,c,(function(o){xui.Class._ignoreNSCache=1,xui.Class._last=null;var n=xui.getClassName(e);a.alien&&(s=xui.window,xui.window={});try{xui.exec(o,n)}catch(e){for(var l=0,c=i.length;l<c;l++)xui.tryF(i[l],[e]);xui.Class._last=null}if(xui.Class._last&&(p=u[e]=xui.Class._last),xui.Class._ignoreNSCache=xui.Class._last=null,h){if(p)for(l=0,c=t.length;l<c;l++)xui.tryF(t[l],[e,p&&p.KEY],p);else for(l=0,c=i.length;l<c;l++)xui.tryF(i[l],['"'+e+'" is not an xui class!']);var f=xui.getClassName(e);if(p&&f&&p.KEY!=f){var x="[xui] > The last class name in '"+e+"' should be '"+f+"', but it's '"+p.KEY+"'!";for(l=0,c=r.length;l<c;l++)xui.tryF(r[l],[x,e,f,p.KEY]);xui.log(x)}}else for(l=0,c=t.length;l<c;l++)xui.tryF(t[l],[e,p&&p.KEY],p);a.alien&&(xui.window=s),d()}),(function(){a.alien&&(xui.window=s),xui.Class._ignoreNSCache=xui.Class._last=null;for(var e=0,t=i.length;e<t;e++)xui.tryF(i[e],xui.toArr(arguments));d()}),n,{rspType:"text",asy:!a.sync}).start():(xui.Class._ignoreNSCache=1,xui.Class._last=null,a.alien&&(s=xui.window,xui.window={}),xui.JSONP(e,c,(function(){if(xui.Class._last&&(p=u[e]=xui.Class._last),xui.Class._ignoreNSCache=xui.Class._last=null,h){if(p)for(var o=0,n=t.length;o<n;o++)xui.tryF(t[o],[e,p&&p.KEY],p);else for(o=0,n=i.length;o<n;o++)xui.tryF(i[o],['"'+e+'" is not an xui class!']);var l=xui.getClassName(e);if(p&&l&&p.KEY!=l){var c="[xui] > The last class name in '"+e+"' should be '"+l+"', but it's '"+p.KEY+"'!";for(o=0,n=r.length;o<n;o++)xui.tryF(r[o],[c,e,l,p.KEY]);xui.log(c)}}else for(o=0,n=t.length;o<n;o++)xui.tryF(t[o],[e,p&&p.KEY],p);a.alien&&(xui.window=s),d()}),(function(){a.alien&&(xui.window=s),xui.Class._ignoreNSCache=xui.Class._last=null;for(var e=0,t=i.length;e<t;e++)xui.tryF(i[e],xui.toArr(arguments));d()}),n,{rspType:"script",keepDomNode:!a.noDomNode,attrs:f,asy:!a.sync}).start()))},fetchClasses:function(e,t,i,r,o,n,a,s){xui.arr.removeDuplicate(e);for(var u={},l=function(e,t,a){a[t]=xui.Thread(null,[function(t){xui.fetchClass(e,i,r,o,n,t,s)}])},d=0,c=e.length;d<c;d++)l(e[d],d,u);return xui.Thread.group(null,u,null,(function(){xui.Thread.suspend(a)}),(function(){!1!==xui.tryF(t,arguments,this)&&xui.Thread.resume(a)})).start()},_collectClassRequired:function(e,t,i,r){if(e.$xuiclass$){var o,n,a,s;if(xui.isArr(o=e.prototype.Dependencies))for(var u=0,l=o.length;u<l;u++)n=xui.isHash(o[u])&&o[u].id,a=xui.isHash(o[u])?o[u].uri:o[u],n&&!xui.Dom.byId(n)?i.push(o[u]):xui.querySelector('link[href="'+a+'"]').get(0)||i.push(o[u]);if(xui.isArr(o=e.prototype.Required))for(u=0,l=o.length;u<l;u++)xui.isArr(o[u])?t.push(o[u]):(n=(s=xui._getIdUri(o[u],r)).id,a=s.uri,n&&xui.isSet(xui.SC.get(n))||xui.$cache.clsByURI[a]||xui.$cache.fetching[a]||t.push(o[u]));if(e["xui.Module"]&&xui.isFun(o=e.prototype.iniComponents))try{(o+"").replace(/\bappend\s*\(\s*xui.create\s*\(\s*['"]([\w.]+)['"]\s*[,)]/g,(function(e,i){return xui.SC.get(i)||t.push(i),e})).replace(/\.setRenderer\s*\(\s*['"]([a-zA-Z]+([\w]+\.?)+[\w]+)['"]\s*\)/g,(function(e,i){return xui.SC.get(i)||t.push(i),e})).replace(/['"](renderer|cellRenderer)['"]\s*:\s*['"]([a-zA-Z]+([\w]+\.?)+[\w]+)['"]\s*/g,(function(e,i,r){return xui.SC.get(r)||t.push(r),e})).replace(/['"]newbies['"]\s*:\s*\{([^}]+)\}/g,(function(e,i,r){for(var o=0,n=(i=i.split(/\s*,\s*/)).length;o<n;o++)(r=i[o].split(/\s*:s*/))[1]&&(r=r[1].replace(/['"\s]/g,""),xui.SC.get(r)||t.push(r));return e}))}catch(e){}e["xui.Module"]&&e.prototype.functions&&xui.each(e.prototype.functions,(function(e){xui.isHash(e)&&e.newbies&&xui.isHash(e.newbies)&&xui.each(e.newbies,(function(e){xui.SC.get(e)||t.push(e)}))}))}},require:function(e,t,i,r,o,n,a,s){xui.isStr(e)&&(e=[e]);var u={},l=function(a,d){var c=[],p=[];xui.filter(a,(function(e){if(xui.isArr(e))return s&&!s.stopRecursive&&Array.prototype.push.apply(c,e),!1})),xui.fetchClasses(a,(function(){for(var i,r,o,n,h=0,f=e.length;h<f;h++)r=(i=xui._getIdUri(e[h],s)).id,o=i.uri,u[r||o]=r?xui.SC.get(r):null;if(s&&!s.stopRecursive){for(h=0,f=a.length;h<f;h++)(i=xui.SC.get(a[h]))&&i.$xuiclass$&&xui._collectClassRequired(i,c,p,s);if(p.length){for(var x=0,g=p.length;x<g;x++)r=n=null,xui.isHash(p[x])?(r=p[x].id||null,o=p[x].uri,delete(n=xui.copy(p[x])).id,delete n.uri):o=p[x],o&&xui.isStr(o)&&xui.trim(url).length>0&&(r&&!xui.Dom.byId(r)?xui.CSS.includeLink(o,r,!1,n):xui.querySelector('link[href="'+o+'"]').get(0)||xui.CSS.includeLink(o,r,!1,n));p=null}}return c.length?(l(c,d),c=null,!1):(l=null,!t||t.call(null,u))}),i,r,o,n,d,s)};l(e,a)},_m:[],main:function(e){-1==xui.arr.indexOf(xui._m,e)&&xui._m.push(e),xui.isDomReady&&xui._domReadyFuns()},getPath:function(e,t,i,r){if(e=e.split("."),i){for(var o=[e[0],i],n=1,a=e.length;n<a;n++)o.push(e[n]);e.length=0,e=o}var s,u,l=xui.ini,d=function(e){return e&&"/"!=e.slice(-1)?e+"/":e};return"xui"==e[0]?(e.shift(),e.length==(i?1:0)&&e.push("xui"),s=d(r&&r.xuiPath||l.path)):(e.length==1+(i?1:0)&&".js"==t&&e.push("index"),(s=d(r&&r.appPath))?((u=r&&r.verPath)&&(s+=d(u)),(u=r&&r.ver)&&(s+=d(u))):(s=d(l.appPath))&&((u=l.verPath)&&(s+=d(u)),(u=l.ver)&&(s+=d(u)))),s+e.join("/")+(t||"/")},getClassName:function(e){if(e&&xui.isStr(e)){var t,i=e.split(/\/js\//g),r=i.length;if(r>=2)return i[r-2]+"/"==xui.ini.path&&(i[r-2]="xui"),((t=(t=i[r-2].split(/\//g))[t.length-1])+((i=i[r-1].replace(/\.js$/i,""))?".":"")+i.replace(/\//g,".")).replace(/^([^.]+)\.index$/,"$1")}},log:xui.fun(),echo:xui.fun(),message:xui.fun(),getErrMsg:function(e,t){return(e&&(e.stack||e.stacktrace||(console&&console.trace?console.trace():null)||e.description||e.message||e.toString())).replace(/\n/g,t||"<br />")},_pool:[],getObject:function(e){return xui._pool["$"+e]},getObjectByAlias:function(e){var t,i=[],r=0;for(var o in xui._pool)"alias"in(t=xui._pool[o])&&t.alias===e&&(i.push(t),r++);return 0===r?null:1===r?i[0]:i},_ghostDivId:"xui.ghost::",$getGhostDiv:function(){var e,t=xui.$cache.ghostDiv,i=0,r=t.length;do{e=t[i++]}while(i<r&&e&&e.firstChild);return e&&!e.firstChild||((e=document.createElement("div")).id=xui._ghostDivId,t.push(e)),e},$xid:0,$registerNode:function(e){var t,i,r=xui.$cache.domPurgeData;return e.$xid&&(i=r[e.$xid])&&i.element==e||((i=r[t="!"+xui.$xid++]||(r[t]={})).element=e,e.$xid=i.$xid=t),e=null,i},getId:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e?window===e?"!window":document===e?"!document":e.$xid||"":""},getNode:function(e){return xui.use(e).get(0)},getNodeData:function(e,t){if(e)return xui.get(xui.$cache.domPurgeData["string"==typeof e?e:xui.getId(e)],t)},setData:function(e,t){return xui.set(xui.$cache.data,e,t)},getData:function(e){return xui.get(xui.$cache.data,e)},setNodeData:function(e,t,i){if(e)return xui.set(xui.$cache.domPurgeData["string"==typeof e?e:xui.getId(e)],t,i)},$purgeChildren:function(e){var t,i,r,o,n,a,s,u=xui.$cache,l=u.profileMap,d=(u.UIKeyMapEvents,u.domPurgeData),c=xui.Event,p=c.$eventhandler,h=c.$eventhandler3,f=xui.browser.ie&&e.all?e.all:e.getElementsByTagName("*"),x=f.length,g=[];for(t=0;t<x;t++)if(n=f[t]){if(o=n.$xid){if(r=d[o]){if(a=r.eHandlers)for(i in xui.browser.isTouch&&a.onxuitouchdown&&c._removeEventListener(n,"xuitouchdown",p),a)c._removeEventListener(n,i,p),c._removeEventListener(n,i,h);for(i in r)r[i]=null;delete d[o]}xui.browser.ie?n.removeAttribute("$xid"):delete n.$xid}if((s=n.id)&&s in l){if(!(r=l[s]))continue;if("!window"===(o=r.renderId)||"!document"===o)continue;r.__gc(!0,!0),g[g.length]=s,r.$domId&&r.$domId!=r.domId&&(g[g.length]=r.$domId)}}for(t=0;t<g.length;)delete l[g[t++]];for(t=e.childNodes.length-1;t>=0;t--)e.removeChild(e.childNodes[t])},create:function(e,t){var i,r,o,n=/</;if(xui.isArr(e)){i=[];for(var a=0,s=e.length;a<s;a++)Array.prototype.push.apply(i,xui.create(e[a]).get());return xui(i)}if("string"==typeof e)if(o=xui.absBox.$type[e]){for(i=[],a=1,s=arguments.length;a<s;a++)i[a-1]=arguments[a];(r=new(xui.SC(o))(!1))._ini&&r._ini.apply(r,i)}else(o=xui.SC.get(e))&&o["xui.Module"]||"xui.Module"==t?o?r=new o:(r=new xui.UI.MoudluePlaceHolder,xui.require(e,(function(e){if(e&&e["xui.Module"]){var t=r.get(0);if(t)if(t.renderId){var i=new e;i.create((function(){r.replaceWithModule(i)}))}else t._module=new e}}))):/^[\w-]+$/.test(e)?((r=document.createElement(e)).id="string"==typeof id?id:xui.id(),r=xui(r)):(n.test(e)&&(r=xui.str.toDom(e)),r&&r.n0||(r=xui.str.toDom("<xui>"+e+"</xui>")));else e["xui.Module"]?(o=xui.SC.get(e.key))&&o["xui.Module"]?r=new o(e):(r=new xui.UI.MoudluePlaceHolder,(o=e.events)&&r.setEvents(o),(o=e.properties)&&r.setProperties(o),e.moduleClass&&e.moduleXid&&(r.get(0).moduleClass=e.moduleClass,r.get(0).moduleXid=e.moduleXid),xui.require(e.key,(function(t){if(t&&t["xui.Module"]){var i=new t(e);i.create((function(){r.replaceWithModule(i)}))}}))):r=new(xui.SC(e.key))(e);return r["xui.absObj"]&&(o=r.n0)&&o.host&&o.host!=o&&o.alias&&r.setHost(o.host,o.alias),r},query:function(){return xui.doc.query.apply(xui.doc,arguments)},querySelector:function(){return xui.doc.querySelector.apply(xui.doc,arguments)},querySelectorAll:function(){return xui.doc.querySelectorAll.apply(xui.doc,arguments)},use:function(e){var t=xui._tempBox||(xui._tempBox=xui()),i=t._nodes;return i[0]=e,1!=i.length&&(i.length=1),t}}),new function(){var e=xui.ini={rootModuleName:"_xui_root"};window.xui_ini&&xui.merge(e,window.xui_ini,"all");var t=window,i=navigator.userAgent.toLowerCase(),r=document,o=r.documentMode,n=xui.browser={kde:/webkit/.test(i),applewebkit:/applewebkit/.test(i),opr:/opera/.test(i),ie:/msie/.test(i)&&!/opera/.test(i),newie:/trident\/.* rv:([0-9]{1,}[.0-9]{0,})/.test(i),gek:/mozilla/.test(i)&&!/(compatible|webkit)/.test(i),isStrict:"CSS1Compat"==r.compatMode,isWebKit:/webkit/.test(i),isFF:/firefox/.test(i),isChrome:/chrome/.test(i),isSafari:!/chrome/.test(i)&&/safari/.test(i),isWin:/(windows|win32)/.test(i),isMac:/(macintosh|mac os x)/.test(i),isAir:/adobeair/.test(i),isLinux:/linux/.test(i),isSecure:0==location.href.toLowerCase().indexOf("https"),isTouch:!!(navigator.userAgent.match(/AppleWebkit.*Mobile.*/)||"ontouchend"in r&&!/hp-tablet/.test(i)||t.DocumentTouch&&r instanceof t.DocumentTouch||t.PointerEvent||t.MSPointerEvent),isIOS:/iphone|ipad|ipod/.test(i),isAndroid:/android/.test(i),isBB:/blackberry/.test(i)||/BB[\d]+;.+\sMobile\s/.test(navigator.userAgent)},a=function(e,t){return t=i.split(t)[1].split("."),e+(n.ver=parseFloat(t.length>0&&isFinite(t[1])?t[0]+"."+t[1]:t[0]))};if(t.matchMedia&&"function"==typeof t.matchMedia?(n.isTouch=t.matchMedia("(any-pointer: coarse)").matches,n.deviceType=n.isTouch?t.matchMedia("(any-hover: hover)").matches||t.matchMedia("(any-pointer: fine)").matches?"hybrid":"touchOnly":"mouseOnly"):n.deviceType=n.isTouch?"touchOnly":"mouseOnly",xui.ini.fakeTouch&&"mouseOnly"==n.deviceType&&(n.fakeTouch=!0),xui.$secureUrl=n.isSecure&&n.ie?'javascript:""':"about:blank",xui.filter(n,(function(e){return!!e})),n.newie)n["newie"+(n.ver=o)]=!0,n.cssTag1="-ms-",n.cssTag2="ms";else if(n.ie){if(xui.isNumb(o)?n["ie"+(n.ver=o)]=!0:n[a("ie","msie ")]=!0,n.ie6){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}t.XMLHttpRequest=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}(n.ie6||n.ie7)&&(n.ie67=1),(n.ie6||n.ie7||n.ie8)&&(n.ie678=1),n.cssTag1="-ms-",n.cssTag2="ms"}else n.gek?(n[a("gek",/.+\//)]=!0,n.cssTag1="-moz-",n.cssTag2="Moz"):n.opr?(n[a("opr","opera/")]=!0,n.cssTag1="-o-",n.cssTag2="O"):n.kde&&(n[a("kde","webkit/")]=!0,n.isSafari?/applewebkit\/4/.test(i)?n["safari"+(n.ver=2)]=!0:/version/.test(i)&&(n[a("safari","version/")]=!0):n.isChrome&&(n[a("chrome","chrome/")]=!0),n.isWebKit?(n.cssTag1="-webkit-",n.cssTag2="Webkit"):(n.cssTag1="-khtml-",n.cssTag2="Khtml"));if(n.isBB&&!n.ver&&(n.ver=parseFloat(i.split("/")[1].substring(0,3)),n["bb"+n.ver]=!0),!e.path)for(var s,u=document.getElementsByTagName("script"),l=/js\/xui(-[\w]+)?\.js$/,d=u.length;--d>=0;)if((s=u[d].src).match(l)){e.path=s.replace(l,"").replace(/\(/g,"%28").replace(/\)/g,"%29");break}xui.merge(e,{appPath:location.href.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,""),dummy_tag:"$_dummy_$"},"without"),e.path||(e.path=e.appPath+"/xui/"),e.basePath||(e.basePath=e.path.replace(/xui\/$/,"").replace(/runtime\/$/,"")),e.releasePath=e.appPath,e.verPath&&(e.releasePath+=(e.verPath?e.verPath+"/":"")+(e.ver?e.ver+"/":""));var c=new Image;c.onload=c.onerror=function(){var e=xui.ini.path+"appearance/_oldbrowser/";1==this.width&&1==this.height||(document.documentElement.className+=" xui-nodatauri",xui.merge(xui.ini,{img_dd:e+"ondrag.gif",img_busy:e+"busy.gif",img_pic:e+"picture.png",img_handler:e+"handler.gif",img_bg:e+"bg.gif",img_blank:e+"bg.gif",img_touchcur:e+"touchcur.png"},"without")),c.onload=c.onerror=null},c.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",xui.merge(xui.ini,{img_dd:"data:image/gif;base64,R0lGODlhEABAAPcAAAAAAAEBAQICAgMDAwUFBAUFBQcHBwgICAkJCQwMDA8PDx4eHiQkJDAwMD8/P0JCQl1dXf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAQAEAAAAj/AP8JHPigQQMHAxMOTAAAgIABAgAkUPgPQsMABAoQCNAQAISEFw0cMMCxI4CFAAIY+Eey4b+LCgSmXCnzpECVBf49AEBgJEWVBwg8WCCgQMuEQEkuYDBgo8uBIlsyeCCgJMWWAB68fPpP5cCOAhm6TLpV4teQI0tyrTgzrcmPChNoVIuAYsKCB+3qtQsgQt+/fgPb/Ce4MOCvEfb6HbhYb1/Eigc35ptYZmW7kw1rRgy48+S9oEOLHk26tGnRnlMzTl0Yst7Mgyk+tnzWpO3JfSPo3q274eXcfjv21rxbeHDBwE32VphbeHPmvYEvBzmc9+eXxa3Hxm69OHPbtk2zNO68WvNh2q8lb6fuuix434Ola5/Nvbt53tLhH8/unXpw49vlhx90/E2HmH3XyTcgSO91FBAAOw==",img_busy:"data:image/gif;base64,R0lGODlhEAAQAOMAAAQCBHx+fLy+vOTm5ERCRMTGxISGhAQGBISChMTCxOzq7FRSVMzKzP7+/gAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQANACwAAAAAEAAQAAAESrDJSau9OOvNe1VFonCFIBRcIiQJp7BjNySDxRjMNAQBUk+FAwCAaiR6gURhsUgYhgCEZIDgDRYEwqIALTZmNay2UTB4KwKmwBIBACH5BAkJAA8ALAAAAAAQABAAgwQCBHx+fLy+vERCRKSmpOTi5BQWFNTW1KyurIyKjMTCxERGRPTy9BwaHLSytP7+/gRE8MlJq7046827n47RIJwBAEZ5phsikg9TMNZBHBMj7PR0DEDco7ATFA6JhA04IEh0AgUjEQgomcLY7EG1PmzZClJpiQAAIfkECQkADQAsAAAAABAAEAAABEewyUmrtcywWxn4BTcZH4CIUlGGaFMYbOsuSywuBLHIuC4LNEFrkBjIBoEAwmhRFBKKRDKQuBQEgsIAoWRWEoJEleitRKGWCAAh+QQJCQAPACwAAAAAEAAQAIMEAgR8fny8vrxEQkSkpqTk4uQUFhTU1tSsrqyMiozEwsRERkT08vQcGhy0srT+/v4ERfDJ6UxDM2sDgHkHcWgT5x1DOpKIhRDpQJAaqtK1iJNHkqy7RyIQSAQlw+IR5APiGAXGkiGoSoOFqqBwpAoU1yA0vJxEAAAh+QQJCQANACwAAAAAEAAQAAAES7DJWdYqMzdmWFsEsTRDMkwMoFbhMgQBcjaGCiCCJQhwkEgFG2YyQMRmjYJhmCkhNVBFoqCAQgu7nzWTECS0W4k0UQ2bz+i0en2OAAAh+QQJCQAPACwAAAAAEAAQAIMEAgR8fny8vrxEQkSkpqTk4uQUFhTU1tSsrqyMiozEwsRERkT08vQcGhy0srT+/v4ERfDJeVI6M79DcApB8jAFQy3DUIEJI7zmQ6RDZx3FKxTSQWMTl0AR23Q0o5LEYWggkEgDAGCAaqRUawbRfGq/4LB4TC5DIwAh+QQJCQANACwAAAAAEAAQAAAER7DJqUpSM7eRRkuCUGjSgAQIJyQJ+QXwxWLkAKeuxnm5VCyLVk+yIBAWQ6IRmRQABclJwcCIMg4AwGhoyAIQyYJ3O5ySo9EIACH5BAkJAA8ALAAAAAAQABAAgwQCBHx+fLy+vERCRKSmpOTi5BQWFNTW1KyurIyKjMTCxERGRPTy9BwaHLSytP7+/gRG8MlJ62SFWcuE19tUeEIRXp4Cng+2hkeSHKyUBEFSP3e+x7Od5ECg1Q6LwcB4IigHBETD4NgcngcDAGCAFR9a7g5hMCAsEQA7",img_pic:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAJOgAACToB8GSSSgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA92SURBVHiczZt7fFTlmce/ZzKT66S5cQsChUC4yKVsFaEUYlAWi4ClfqTq6tYVrfVSy1W01roudPWj4H6ga6ygu3SpZdeu0iKIgLFoIZREBAIGSDDhHkLIhMncJzNz3v3jPScZkklyzkzYT5/5vJ9J5pzznvf3O8/7vM/zvM9RhBAkIoqiWAALYNNaMpCkHY4AIaBV+1aFEGpCN+xlURIhQAOfBKQCGUAmkI4kQUEC9wEewAv4gfDfEgnWeC9UFEVBPvk04BtAXyAXSUKqdloQCf4q4ABaAK+iKKG/FRLiJgAJPgUJuL/W+gHpAyBTBdEon74PqR2p2v0UJAmtZkjQCL9GRKLzlzgJiHr6KUAWkJMPgyfB8BkwdDjkW4DTcGU31B6D+jNgsUJSWF6nAJ6eSFAURcFJAWl8Cz9ZOKliPcd5iSAgFEVRkTzETURcNkCb+8lIlc8fDeN/CjO/D7f2gb5WsGoGIOSCli1QthEOfgE1yKlwCWhCTo+Y00HxKzeQyjsofO+aAxHqqWIR32I30rCGgEjcJAghTDek4csAhoyHO7fCe5ehQYCI1a6C869w8LvwPHA3UAwUAnlILbJc07+fIgTNiG4+VfwKyEfaH1vHPow2S1ysSVFSIHk2DJoKk/tJGxBTsiFrLIx6FeYXwY0a8IFIDbIDNk2rUAJKEal8BOR0e/fRrOBFpml9pANJsexET5IIAaIAlHtgUhbc0NPJmWCfCDe+Bt+fBqOJRYJTmaGBtxsYuY0fsRgYgLRDKYDFLAnxrgIqEJ4MDIZh1nbHp1vJgIwbYczLoD4P7IOTbQcrmEo2mzECXpc+FCI1L4D0MVq1sRmWRDQgMhWUTKmqhg1QJmRMhLFr4AdFuia8zmxu4j3MgJed5ZJEDlID0mlfZg1LXARoFlf9IzS0QoUwyXomZIyD0f8Kdw1/jNn8jNewkGZ6IE04iJBKu/dpSBOjJW5HSAihblCUsApVQi5pA8xcnwEZzmLGX1jLzVjj1MRTnEc+xCTa/YvrrwG6PCaEbyNsjMABs9d+VgT3bSctmBbnGAIEeJrdyIArrH2rmJiOkCABABUQcMEqAYeNXrPnVpi7A7wZcd9WsJZtHMaBNH5eZNxhPr4w6Pjorm90U9A8yR2Qch5GhOFAV86Q3v58KyLD062L09NH5U22ASuAx4F5wASgD9IOWLoab0xs3QH3+xkaibAyHOajcJjyQIC3Gxq4H2l0UpA2xAIo68HWBLcI+Or/AfxzwJPAAmAKMBiw4/PdQzi8nnC4nFBoB17vy3z++RhkIKYbScUQAeEwjwqBK9Zht5udK1cyFumGpugdb4P0Bhgfhr2dwBf3Avg3+Aj4OfAUcC8wDRjOW28VEgp9GBNIJOKhpmY50vHKoIPb3BX4BT3NDL+fc88+yzRkHqBtDV4ASZdgrArHosGnexME/zp/BlYCi4D7gOnACDZtGkckUtvjPC4tXappSpY+VWIS4HKRJwSXjcQSXi8XnniCmcigxK6TsB/SHDAlDOW9An4VB4H1wEvAo8BtwCg2bhxvCLwQgkDAye23/z0wlPYASon19P/BTEDl8XDxkUf4HjIeaCNhPdiKt/Ngqp9IvNAVFfHtxTj7wi7gbeBfgPuBSaxZc5Nh8Hr77W//DbhFG2s6YOlk7UMhXjdDgGYT6hcuZPY1JPi5HUHcz15REXOfQPwSgj+Guhvgv4EXgAd46KE5tLaeNjdKIfjss13AbGAM0oW3dvIDhCCl4289id1O/rp1/MfChUwAsjjGHVj5EEG62b4AFAFznoLv/gb6Q/IUyF8KE8dCDsXFfSkp2YDNNjSOrlOR6m9HWxU6usKKz8eRrCzzPesk1Exl3b5s/pkAaaSirQ/G+4kGn4lc3AdCagZ8c1BGxm0PvP/+4HBGRp75EQJHjtQjV60UtNWgkwYcPkypquKJp3+7nfxt97JsSCM+WpBBagTDzmkX4BkADIW0GV7viIfWrPEY7zFKgsEgGzee6vR7RxsApNTVscysHYhuzS6uDDlIMxcQuBGEEKjG5vwrIN4A8T8g/gKiBoQDRABECMQVcP9oxYpzCKGaGtWvf/1HYAnSiN6i8ZoSiwAbkFNfz5ZESHC00DSkAqcREoyAj2gtAKIWPD945pkLhknYt+8Q8CzwE2AuMBZpBG2dzkXO2vTsbL555gzbEyHhylWah5TT0h0JRsGrWguBaAFRCd55y5df6pGEsrJDWK3PA08jvcepSIcoHUiKRYCuBdmZmYyqrWXHdSRBvW0RLiPgda8yAiIIohnEIfDOWb68vksSysoOa+AXAQ/Qno3OpitHSCNB3/ToY7dz49dfs/M6kKAm/Ts7RsO6lVBrBHw0CQHtvEPgmRNLE/bu/Qqr9UVgMfAgcDsyBdeHqFR8l6PWSEgF+trtjO1lElTeYCvwnAWevgWW7oQ6I+CF9ns0CV+Cb240CXv21GC1rkFGjf8EzESm4/tqmNqCoS53hqK2v2xApt1O/8pKXi8oYFb3603X0uTk6k3VJJ3bSynPsB+ZzHDkgWMp5D4MP8+BiTbaA/quRGgthMyGnAHfi8uXt5TOmhUMzp69i0jEC9QDtfIwl5Cbs/o2fdtTjn0DeYKqXeD2eLg8+k/8/vOzVMVLQJ9scg6PJPSdLRxBbos5gAYHnF29cmX1iOZmb/WoUcf0/FZ3LoSe/LMhY9yhkL5qzZqsV2fN8g2JRNKQGaIQ0hvxaf9HosHrQLtt2n2SqGEml/FYqojsqeN4ItPh6lUai4tZBMwCxrJ69TgikWqEECk+X8P+wsJTzSC8mtXvaip0nA7NII6C9zdQWQjrkEmTecB4pPp33oYzMmLc3EoYN34EjQhLFZHSU9QkQkJLCw3z53M/jz46ndbWU9FHrR5P45ZRo47Vg3CDaDVIQhCEC0QdeLbCl38no8cFQBFQgIwDrERlhXoGLzcq3agIwog2Er5C3X2S2kRIONgw6ARe75lYR60uV9N7I0acO6+BMkpCSCPCAe49cGCKdIDmAZOQnnU6PWWE2g6GmK4tXEJLTXQm4QR18YCvduW3pLQ0NnZ3ltXpbN40cmS1URJ0IvTWAq59sL8IltG+DGYDth4J6AS+Iwm++Ek42ZLvSm6+5DBydpLL1fT7wsJaMyRENze4y2DvZHgYmT3ur9kCpUsC8DAAgaPL0CUBEk625LuSHfXNZvTF5nQ2by4sPK2T0JNhjFGfcOV92PRtmUobiKxriu0IAQoqW3rM2cQg4ZMeSIgHfLQmbBo58sR5zTCaJaERau6UgdAgjYDYGoCbvj2C75qESNkRjvU2eL31+fjj0r9C3SUQPs3oGSUgCIG9sGqcDITalsPOjpCNm7r1Zjp6I3q1kB3U3WwtnsTblZVURJ9W7cp3Twh/GW7Nze++6qM7KS+v8N111x9Ww6uX4ZBeCGA0M5IESf0hq0j+23bpNQQoiqKgkm1qYDoJ/8V2lrI/FCI4ZQolx49TBlDjzndNiBwKJQS+rOww06Z94AuF1K1wvgReCMFxM2khBUKZQKHcSA3rv3fWgEYqTQ/wbT7iCcqQvr0zEODS5Mm8uK1q2M4JHA205gzINd2nPvD9ZUcoLv6AcDgI+CLgKYW6Y/AzAUdMdBWKwL4T0CI0gVgEzKSOCLWGu32HHfyEfYCb9hK4i56HnvLfVVA1OpjZp5+JQV4jeeU7zj6/s2jQ4PxwCjKQcQCO0+BYCxUn4F4VvjDQlVBlUHR+vRC+a490XAHAxiFmIwxsaLzDDmTI+VNktqUIGMnq1eMIhWoSMXh55TvO/OplS2TtWsRbb3F54kQeQ26EDkGmtZNeAqsXJgm5IRvqwgCqETjph0diLvkxlsEkIJOj/JIwgZjAAwRYwwdIN/Mp5F5dEVBISckYPbDpDfC/+x2itBRRUUH9vHnMR25tZaFldE5BihOGqfC+KmsVVc0jjKgQUOFkCJa9BNZYt+uUD4iqAs1mCZN5jEX0YwzZ9OUKTZziPMsppZwmZCjuABqABkpKrDz++J+wWEYaU/LOklfx8dkln84dbE9XLXl5kJ8vW9++ANQvXszCzZupApxoiXchhLisKBm5cE8STFJk4OMX8JkKR6xC7O3qfrEIUDQtSEPW8A0A+pNEjlaQlISMq/3aIK4AjZSUJCcM/uDOs0s+mRMTfGYm2Gzg83HhySdZ+O67HIf23QchhEBRrC2QaYPUdAhfhdYcIVq6u2fMjJBGghUZOWXBNaVoOgFebQBOXnnFyooVH19v8BYLKAq43Vz44Q/5x507OYV8CEHirBfuLiWmV1+lILUhTfvbgiRAfxkiQCj0n1itC+IBDpB3cNe5JZ/cOcierlpyc2HgwK7B61JXx1+GD2cRcBn5IIJ0zPYYkO5SYirSYfBrN2hCLnH1yDnfBLjweot7E3z0k7fbY4MHKCigqKSEecgsbwZxFElCD1ViGpt6XlAvR/Vp3wEgRHLyDLM3bZMDByoXbLzTEQ1+4MB28MnJscHrMmEC30Gmutpqhc0OoccLRLuoQohIVJMlaYoy3uxNASgvr2T69P99Z4O62e3mC7PgAQYMYCjSPn0DLd1tdhiJ1gkqqGqz6avKyyuZNu0PhMPecBjHqlWsDoX43Ax4gJYWAkj1z6C9WMuUJFwoSSh0zNT5UeCBZqC+tZVz993Hc01NfGoUPEB1NQ20v65nshJBSuIE7Nu3GVV1Gjq3vPxoR/DAReCiy8WFqVNZdvYsnxoB7/fjf+01vkSGtaZLZHVJnIA77rhEdfULPZ5XXn6UoqJo8PqKcgW5ljudThpuvpklp0/zaU/drVvH9spKmpHGWN8EuT6lsl012jdnctm162n8/s6JzmAwyJtvfojF8hxyi/pB2vfq+iH9C6vW0oB+ycmM3bWLdaEQ/o63dblw/eIXvAs8A/wYmIPc788lKttrtCX05ii0OUypQC7Tp4/i4YdnM2zYOBQlnaNH69m06WsOHtSLmp1AI+1+hJtr3/LQ45BMoM/8+Yy7+25mFBQwyuuFQ4eo37CB6tOncdO+tXYRqUnNQECYfCGzNwjQ3eY05JLUD+mc6GW0oO0vaoNs0r69aOB17y1qQzYZadlztb70N1JtWn9BwKX11Yh8M1V/LdcUoETeHAWkn6Aoih4cgfQePciYPZoAD5IEN9KZCtPBddX6UmnXighyjrdo/UUT4EGS4Nbu3buxgOmO2qPIZK3p1eQKEmyrNvBWtI3frgas9RXdX4r2bUVa+3BUX60k8OJkrxEAnQau1+mDfJptzehgo6ZEdIvur1sijcj/AcgCrHU5y1W7AAAAAElFTkSuQmCC",img_handler:"data:image/gif;base64,R0lGODlhBAAEAPcAAAAAAGSMtP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAEAAQAAAgPAP8JFCDwX4B/BAUe/BcQADs=",img_touchcur:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAATCAMAAACqTK3AAAAAnFBMVEVKS0sAAAD6+vr39/fj4+OsrKxQUVHk5OTY2NjV1dVgYWHm5ube3t7c3NzV1dXT09PPz8/q6ur19fXNzc2/v7/v7+/u7u6QkJB1dnbt7e1SU1Pd3d3b29vW1tbU1NTT09Ps7Ozl5eXe39/e3t709PS7u7u5ublmZ2fp6enn5+fj4+Ph4eHg4ODc3Nzc3NzZ2dnZ2dnW1tbU1NTT09Pxrtv7AAAANHRSTlPmAP78+fHnyPf26NGiizAcBfr49fPu7e3q6Oedh08oDPr5+Pj38vLp3NfBuLGUkXRrSzgYlzzxjwAAAKFJREFUGNNl0NUOwzAMQFE7sDLzSmPm/f+/LY2atVXv45FlyQac1ZPnaCfLdgdqr4TF/KATq+nJS1gOXWZE35L8wlhAHw+bjuxAiCqyOgozGDKJC1hTGKeXgM52QnsN0DYmxM9iik0oFlMuWY6JVYCY8JHk5CvoSc2/LNY3edAlOCox0laSr1Eu92WrwlPPeaWE6Ru6u/soSfapyketXjjrB1sXCDrwyo6RAAAAAElFTkSuQmCC",img_bg:c.src,img_blank:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="},"without");var p=xui._domReadyFuns=function(){if(!xui.isDomReady&&(r.addEventListener?(r.removeEventListener("DOMContentLoaded",p,!1),t.removeEventListener("load",p,!1)):r.detachEvent&&(r.detachEvent("onreadystatechange",p),t.detachEvent("onload",p)),"touchOnly"!=xui.browser.deviceType&&!xui.Dom.getScrollBarSize()&&xui.UI)){var e=function(t){xui.arr.each(t,(function(t){(t=xui.SC.get(t))&&(t.$DataModel.overflow&&(t.$DataModel.overflow.ini="auto",t.$DataStruct.overflow="auto"),t.$children&&t.$children.length&&e(t.$children))}))};e(xui.UI.$children)}try{if(xui.ini.customStyle&&!xui.isEmpty(xui.ini.customStyle)){var i,o=[],n=xui.ini.customStyle;xui.each(n,(function(e,t){o.push(t+" : "+e+";")})),i=".xui-custom{\r\n"+o.join("\r\n")+"\r\n}",xui.CSS.addStyleSheet(i,"xui:css:custom",1)}for(var a=0,s=xui._m.length;a<s;a++)xui.tryF(xui._m[a]);xui._m.length=0,xui.History&&xui.History.activate(),xui.isDomReady=!0}catch(e){xui.asyRun((function(){throw e}))}};if(r.addEventListener)r.addEventListener("DOMContentLoaded",p,!1),t.addEventListener("load",p,!1);else{r.attachEvent("onreadystatechange",p),t.attachEvent("onload",p);var h=function(){if(!xui.isDomReady)try{r.activeElement.id,r.documentElement.doScroll("left"),p()}catch(e){xui.setTimeout(h,9)}};h()}var f=function(){xui.isDomReady||r.readyState&&!/in/.test(r.readyState)?xui.setTimeout(p,9):xui.setTimeout(f,9)};f()},new function(){xui._uriReg=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,xui._localReg=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,xui._curHref=function(e){try{return location.href}catch(t){return(e=document.createElement("a")).href="",e.href}}(),xui._localParts=xui._uriReg.exec(xui._curHref.toLowerCase())||[]},new function(){xui.pseudocode={getScope:function(e,t,i){return{temp:i,page:t,args:e,functions:xui.$cache.functions,constant:xui.constant,global:xui.$cache.data,getCookies:xui.Cookies.get,getFI:function(e){var t=xui.getUrlParams();return t&&t[e]}}},exec:function(e,t,i,r){var o,n,a,s,u,l,d,c,p,h,f,x=this,g=t.type||"other",m=function(e,t,i){switch(xui.str.trim(i)){case"=":case"is":return e===t;case"<>":case"is-not":case"!=":return e!==t;case"exists":case"defined":return xui.isDefined(e);case"not-exists":case"undefined":return!xui.isDefined(e);case"empty":return xui.isEmpty(e);case"non-empty":return!xui.isEmpty(e);case">":return parseFloat(e)>parseFloat(t);case"<":return parseFloat(e)<parseFloat(t);case">=":return parseFloat(e)>=parseFloat(t);case"<=":return parseFloat(e)<=parseFloat(t);case"inlist":return-1!==xui.arr.indexOf(xui.isArr(t)?t:(t+"").split(/[,;\s:|]+/),e);case"exlist":return-1==xui.arr.indexOf(xui.isArr(t)?t:(t+"").split(/[,;\s:|]+/),e);case"include":return-1!=(e+"").indexOf(t+"");case"exclude":return-1==(e+"").indexOf(t+"");case"begin":return 0===(e+"").indexOf(t+"");case"end":return(e+"").indexOf(t+"")===(e+"").length-(t+"").length;case"objhaskey":return"object"==typeof e&&t in e;case"objnokey":return"object"==typeof e&&!(t in e);case"arrhasvalue":return!!xui.isArr(e)&&-1!==xui.arr.indexOf(e,t);case"arrnovalue":return!!xui.isArr(e)&&-1==xui.arr.indexOf(e,t);case"objarrhaskey":return!!xui.isArr(e)&&-1!==xui.arr.subIndexOf(e,"id",t);case"objarrnokey":return!!xui.isArr(e)&&-1==xui.arr.subIndexOf(e,"id",t);default:return!1}},b=function(e,t){if("string"==typeof e){var i,r,o,a=e;xui.str.startWith(e,"[data]")&&(e=e.replace("[data]",""),r=1),e=xui.adjustVar(o=e,t),xui.isDefined(e)||(e=xui.adjustVar(o)),r&&"string"==typeof e?e=xui.unserialize(xui.getFileSync(e)):e&&xui.isStr(a)&&xui.isHash(e)&&(e.actions&&xui.isArr(e.actions)&&e.actions.length||e.return)?(a=(""+a).split(".functions"))&&2==a.length&&(a=xui.adjustVar(a[0]+"}",t))&&(o=e,e=function(){return xui.pseudocode._callFunctions(o,arguments,a,t.temp,null,"refer:"+(o.desc||o.id||""))}):e&&xui.isStr(a)&&xui.isFun(e)&&(a=a.replace(/\[(\d+)\]/,".$1"),(a=xui._s2a(a)).length>1?i=a.pop().replace(/[()}\s]/g,""):(i=a[0].replace(/[{()}\s]/g,""),a=["{window"]),a=a.join(".")+"}",a=xui.adjustVar(n=a,t),xui.isDefined(a)||(a=xui.adjustVar(n)),e=function(){return a[i].apply(a,arguments)})}else if(xui.isHash(e))for(var s in e)e[s]=b(e[s],t);else if(xui.isArr(e)){s=0;for(var u=e.length;s<u;s++)e[s]=b(e[s],t)}return e},v=t.redirection,y=t.target,A=t.method,_=xui.clone(t.args||t.params)||[],w=t.conditions||[],C=b(t.adjust,e)||null,I=xui.isSet(t.timeout)?parseInt(t.timeout,10):null,E=t.resetid||null,S='"'+t.desc+'"',D={type:g,target:y,method:A,args:_,pseudo:t,scope:e};if(-1!=A.indexOf("-")){o=A.split("-"),A=o[0];for(var k=1,$=o.length;k<$;k++)o[k]&&(_[k-1]=o[k])}for(k=0,$=w.length;k<$;k++)if(f=w[k],!m(xui.isDefined(l=xui.adjustVar(f.left,e))?l:xui.adjustVar(f.left),xui.isDefined(d=xui.adjustVar(f.right,e))?d:xui.adjustVar(f.right),f.symbol))return"function"==typeof i?(xui._debugInfo.apply(xui,["pseudo",xui.str.repeat("  ",r||1),"//",S,D]),i()):void xui._debugInfo.apply(xui,["pseudo",xui.str.repeat("  ",r||1),"//",S,D]);if(v&&(u=v.split(":"))&&xui.isArr(u)&&(c=g,p=y,u[0]&&(g=u[0]),u[1]&&(y=u[1]),u[2]&&(A=u[2])),y&&A&&"none"!=y&&"none"!=A){for(k=v?3:"other"!=g||"callback"!=y||"call"!=A&&"set"!=A?0:1,$=_.length;k<$;k++)_[k]=b(_[k],e);!v||"other"==g&&"callback"==y&&"call"==A||(_=_.slice(3));var N=function(){if(xui._debugInfo.apply(xui,["pseudo",xui.str.repeat("  ",r||1),S,D]),!1!==xui.tryF(x._Handlers,[g,A,_,C,y,t]))switch(g){case"page":if("switch"==A){xui.History._callbackTag||(xui.History._callbackTag=function(e,t){if(!t){var i=xui.urlDecode(e||"");return i.cls||(i.cls="App",i.cache=!0),xui("body").children().each((function(e){var t=xui.Module.getFromDom(e);t&&t._showed&&(i.cache?t.hide():t.destroy())})),xui.showModule(i.cls),!1}});var i={cls:y,cache:!!_[0]};return _[1]&&!xui.isEmpty(_[1])&&(i=xui.merge(i,_[1])),void xui.History.setFI(i,!0)}if("open"==A)return i={cls:y},_[0]&&!xui.isEmpty(_[0])&&(i=xui.merge(i,_[0])),void window.open("#!"+xui.urlEncode(i));var u;if(y&&"*"!=y){if(v=xui.get(window,y.split(".")))for(var l in v._cache){u=v._cache[l];break}}else u=e.page;if("destroy"==A)return void(u&&xui.isFun(o=xui.get(u,[A]))&&o.apply(u,_));if("show"==A&&_.unshift((function(e,t){e&&xui.message(e)})),u)xui.isFun(o=xui.get(u,[A]))&&o.apply(u,_);else{var d=e.temp._module_funs_=e.temp._module_funs_||{},f=d[y]=d[y]||[];f.push((function(e,t){xui.isFun(t=xui.get(e,[A]))&&t.apply(e,_)})),1===f.length&&xui.getModule(y,(function(t,i){if(!t){if(i)for(var r=0,o=f.length;r<o;r++)f[r].call(null,i);f.length=0,d=f=null,delete e.temp._module_funs_[y]}}))}break;case"control":case"module":if("{"==y.charAt(0)&&(o=xui.adjustVar(y,e))&&xui.isFun(o.getAlias)&&(y=o.getAlias()),"disable"==A||"enable"==A)xui.isFun(o=xui.get(e.page,[y,"setDisabled"]))&&o.apply(e.page[y],["disable"==A,!0]);else{if("setProperties"==A){var m=xui.merge(_[0],_[1],"all");_[1]=null,(a=m)&&(a.CA&&(xui.isFun(o=xui.get(e.page,[y,"setCustomAttr"]))&&o.apply(e.page[y],[a.CA]),delete a.CA),a.CC&&(xui.isFun(o=xui.get(e.page,[y,"setCustomClass"]))&&o.apply(e.page[y],[a.CC]),delete a.CC),a.CS&&(xui.isFun(o=xui.get(e.page,[y,"setCustomStyle"]))&&o.apply(e.page[y],[a.CS]),delete a.CS))}else"show"==A&&_.unshift((function(e,t){e&&xui.message(e)}));xui.isFun(o=xui.get(e.page,[y,A]))&&o.apply(e.page[y],_)}break;case"other":switch(y){case"url":switch(A){case"close":window.close();break;case"open":xui.Dom.submit(_[0],_[1],_[2],_[3]);break;case"mailTo":xui.mailTo.apply(xui,_);break;case"selectFile":xui.Dom.selectFile.apply(xui.Dom,_);break;case"readText":xui.getFileAsync.apply(xui,_);break;case"readJSON":_[4]={rspType:"json"},xui.getFileAsync.apply(xui,_)}break;case"msg":"busy"==A||"free"==A?xui.isFun(o=xui.get(xui.Dom,[A]))&&o.apply(xui.Dom,_):"console"==A&&xui.isDefined(window.console)&&"function"==typeof console.log?console.log.apply(console,_):xui.isFun(o=xui.get(xui,[A]))&&o.apply(xui,_);break;case"var":if(_[0].length){var b=_[1];if(_[2]&&(b=xui.get(b,xui._s2a(_[2]))),C)switch(C){case"serialize":b=xui.serialize(b);break;case"unserialize":b=xui.unserialize(b);break;case"stringify":b=xui.stringify(b);break;default:"function"==typeof C&&(b=C(b))}xui.set(e,xui._s2a(A+"."+xui.str.trim(_[0])),b)}break;case"callback":switch(A){case"setCookies":_[0]&&!xui.isEmpty(_[0])&&xui.Cookies.set(_[0]);break;case"setFI":_[0]&&!xui.isEmpty(_[0])&&xui.History.setFI(_[0],!0,!0);break;case"set":xui.set(e,xui._s2a("temp."+xui.str.trim(_[0])),_[1]);break;case"call":var v;if("page"==c&&(h=e.page,v=xui.get(window,p.split("."))))for(var l in v._cache){e.page=v._cache[l];break}var w,I,E,k=_.slice(3);if(o=_[0],xui.isStr(o)&&/^\{[\w][\w.]*[\w](\([^)]*\))?\}$/.test(o.replace(/\s/g,"").replace(/\[(\d+)\]/,".$1"))&&(o=o.replace(/\[(\d+)\]/,".$1"),(o=xui._s2a(o)).length>1?a=o.pop().replace(/[()}\s]/g,""):(a=o[0].replace(/[{()}\s]/g,""),o=["{window"]),o=o.join(".")+"}",o=xui.adjustVar(n=o,e),xui.isDefined(o)||(o=xui.adjustVar(n)),o&&o[a]))if(xui.isFun(o[a]))w=1;else if((o[a].actions&&xui.isArr(o[a].actions)&&o[a].actions.length||o[a].return)&&(o=o[a],I=1,k&&k.length&&o.params&&o.params.length)){l=0;for(var $=k.length;l<$;l++)(E=o.params[l]&&o.params[l].type)&&(k[l]="String"==E?xui.isSet(k[l])?k[l]+"":k[l]:"Number"==E?parseFloat(k[l])||0:"Boolean"==E?!!k[l]:k[l])}w?o=o[a].apply(o,k):I&&((s=(""+t.args[0]).split(".functions"))&&2==s.length&&(s=xui.adjustVar(s[0]+"}",e)),o=x._callFunctions(o,k,s||e.page,e.temp,null,"nested:"+(o.desc||o.id||""),(r||1)+1)),(w||I)&&_[1]&&_[2]&&xui.get(e,xui._s2a(_[1]))&&xui.set(e,xui._s2a(_[1]+"."+_[2]),o),h&&(e.page=h,h=null)}}}};null!==I?E?xui.resetRun(E,N,I):xui.asyRun(N,I):N()}return t.return},apply:function(e,t,i){var r=xui.$cache.functions;return xui.isStr(e)&&(e=r&&r[e]),xui.isObj(e)?xui.pseudocode._callFunctions(e,t||[],i||this):null},_callFunctions:function(e,t,i,r,o,n,a){r=r||{};var s,u,l,d,c=this,p=0,h=e.actions||e||[],f=e.return,x=e.newbies,g=1==h.length&&("function"==typeof h[0]||"string"==typeof h[0]),m=c.getScope(t,i,r),b=function(e){var t;xui.isStr(this)&&(m.temp[this+""]=e||"");for(var r=p,n=h.length;r<n;r++)if(p=r+1,s=h[r],i&&"string"==typeof s&&(s=i[s]),o&&"string"==typeof s&&(s=o[s]),"function"==typeof s){if(!1===(t=xui.tryF(s,m.args,m.page))){p=r;break}}else if(xui.isHash(s)){if(s.disabled)continue;if("onOK"in s||"onKO"in s){var u,l=function(e,t,i){if(b)return xui.isStr(i)&&(m.temp[i]=!0),!1!==u&&b.apply(e,t||[])};"onOK"in s&&((s.args||s.params||(s.args=[]))[parseInt(s.onOK,10)||0]=function(){l&&l("okData",arguments,s.okFlag)}),"onKO"in s&&((s.args||s.params||(s.args=[]))[parseInt(s.onKO,10)||0]=function(){l&&l("koData",arguments,s.koFlag)}),u=c.exec(m,s,l,a);break}if(!1===c.exec(m,s,null,a)){xui._debugInfo("pseudo",xui.str.repeat("  ",a||1),"The action returns false to stop the follow-up actions!"),p=r;break}}return p==r&&(p=b=null),t};if(!g&&(xui._debugGroup("pseudo",xui.str.repeat("  ",(a||1)-1),'"'+n+'"',{pseudo:e},{scope:m}),xui._debugInfo("pseudo",xui.str.repeat("  ",(a||1)-1),"{"),x))for(var v in r.newbies={},x)(l=xui.create(x[v])).setHost&&m.page&&l.setHost(m.page,l.getAlias()+"-"+xui.rand()),r.newbies[v]=l;return d=b(),f?(f=xui.adjustVar(u=f,m),xui.isDefined(f)||(f=xui.adjustVar(u))):f=d,g||(xui._debugInfo("pseudo",xui.str.repeat("  ",a||1),"return",f),xui._debugInfo("pseudo",xui.str.repeat("  ",(a||1)-1),"}"),xui._debugGroupEnd("pseudo",xui.str.repeat("  ",(a||1)-1))),f}}},new function(){var M={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","/":"\\/","\v":"\\u000b"},H={"@window":"window","@this":"this"},A1=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/:/[\\\"\x00-\x1f\x7f-\xff]/,A2=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,D=/^(-\d+|\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?((?:[+-](\d{2})(\d{2}))|Z)?$/,E=function(e,t,i,r,o,n,a){for(t in a||(a=[e]),e)"string"==(i=typeof(r=e[t]))&&(r=D.exec(r))?(n="Z"!=(o=r[8]&&r[8].charAt(0))?("-"==o?-1:1)*(60*(+r[9]||0))+(+r[10]||0):0,(n+=(o=new Date(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6],+r[7]||0)).getTimezoneOffset())&&o.setTime(o.getTime()+6e4*n),e[t]=o):"object"==i&&e[t]&&(xui.isHash(e[t])||xui.isArr(e[t]))&&-1==xui.arr.indexOf(a,e[t])&&(E(e[t],0,0,0,0,0,a),a.push(e[t]));return e},F="function",N="number",L="boolean",S="string",O="object",T={},PS=function(e,t){return("000"+(e||0)).slice(-t)},Z=((a=-(new Date).getTimezoneOffset()/60)>0?"+":"-")+(1==(a=""+Math.abs(a)).length?"0":"")+a+"00",a,safeW;T[void 0]=function(){return"null"},T[L]=function(e){return String(e)},T[N]=function(e){return(e||0===e)&&isFinite(e)?String(e):"null"},T[S]=function(e){return H[e]||'"'+(A1.test(e)?e.replace(A2,(function(e,t){return(t=M[e])?t:"\\u"+((t=e.charCodeAt())<16?"000":t<256?"00":t<4096?"0":"")+t.toString(16)})):e)+'"'},T[O]=function(e,t,i,r,o,n,a){var s={prototype:1,constructor:1,toString:1,valueOf:1,toLocaleString:1,propertyIsEnumerable:1,isPrototypeOf:1,hasOwnProperty:1};if(r=r||1,o=o||0,n=n||xui.SERIALIZEMAXLAYER,a=a||xui.SERIALIZEMAXSIZE,r>n||o>a)return xui.$_outofmilimted;if(o++,e){var u,l,d,c,p=[],h=[];if(e===window)return"window";if(e===document)return"document";if(!(typeof e!=O&&typeof e!=F||xui.isFun(e.constructor)))return e.nodeType?"document.getElementById('"+e.id+"')":"$alien";if(xui.isArr(e)){for(p[0]="[",d=e.length,l=0;l<d;++l)"function"==typeof t&&0==t.call(e,e[l],l,h)||(xui.isNaN(c=e[l])?h[h.length]="NaN":xui.isNull(c)?h[h.length]="null":xui.isDefined(c)?(u=T[typeof c])&&typeof(c=u(c,t,i,r+1,o,n,a))==S&&(h[h.length]=c):h[h.length]="undefined");p[2]="]"}else if(xui.isDate(e))switch(i){case"utc":return'"'+PS(e.getUTCFullYear(),4)+"-"+PS(e.getUTCMonth()+1,2)+"-"+PS(e.getUTCDate(),2)+"T"+PS(e.getUTCHours(),2)+":"+PS(e.getUTCMinutes(),2)+":"+PS(e.getUTCSeconds(),2)+"."+PS(e.getUTCMilliseconds(),3)+'Z"';case"gmt":return'"'+PS(e.getFullYear(),4)+"-"+PS(e.getMonth()+1,2)+"-"+PS(e.getDate(),2)+"T"+PS(e.getHours(),2)+":"+PS(e.getMinutes(),2)+":"+PS(e.getSeconds(),2)+"."+PS(e.getMilliseconds(),3)+Z+'"';case"date":return"new Date("+[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()].join(",")+")";default:return'"'+xui.Date.format(e,i||"yyyy-mm-dd hh:mm:ss")+'"'}else{if(xui.isReg(e))return String(e);if(typeof e.serialize==F&&(e=e.serialize()),typeof e!=O)return String(e);if(e.nodeType)return"document.getElementById('"+e.id+"')";for(l in p[0]="{",e)s[l]||(!0===t?"_"==l.charAt(0):"function"==typeof t&&!1===t.call(e,e[l],l,h))||(xui.isNaN(c=e[l])?h[h.length]=T.string(l)+":NaN":xui.isNull(c)?h[h.length]=T.string(l)+":null":xui.isDefined(c)?(u=T[typeof c])&&typeof(c=u(c,t,i,r+1,o,n,a))==S&&(h[h.length]=T.string(l)+":"+c):h[h.length]=T.string(l)+":undefined");p[2]="}"}return p[1]=h.join(", "),p[0]+p[1]+p[2]}return"null"},T[F]=function(e){return e.$path?e.$path:String(e)},xui.$_outofmilimted='"..."',xui.serialize=function(e,t,i,r,o){return xui.isNaN(e)?"NaN":xui.isNull(e)?"null":xui.isDefined(e)?T[typeof e](e,t,xui.getDateFormat(i),0,0,r,o)||"":"undefined"},xui.stringify=function(e,t,i,r,o){return xui.fromUTF8(xui.serialize(e,t,xui.getDateFormat(i),0,0,r,o))},xui.unserialize=function(str,dateformat){if("string"!=typeof str)return str;if(!str)return!1;if(!safeW){var ifr=document.createElement(xui.browser.ie&&xui.browser.ver<9?"<iframe>":"iframe"),w,d;for(var i in document.body.appendChild(ifr),w="contentWindow"in ifr?ifr.contentWindow:"window"in ifr?ifr.window:(d=ifr.contentDocument||ifr.document).defaultView||d.parentWindow,safeW={},w)safeW[i]=null;document.body.removeChild(ifr)}str="({ _ : (function(){ with(this){ return ("+str+"); } }).call(safeW) })";try{str=eval(str)}catch(e){return!1}return xui.getDateFormat(dateformat)&&E(str),str=str._,str}},new function(){xui.id=function(){var e=this;if(e.constructor!==xui.id||e.a)return(xui.id._||(xui.id._=new xui.id)).next();e.a=[-1],e.b=[""],e.value=""},xui.id.prototype={constructor:xui.id,_chars:"abcdefghijklmnopqrstuvwxyz".split(""),next:function(e){var t,i,r,o=this;if(e=e||0===e?e:o.b.length-1,(t=o.a[e])>=25)if(t=0,0===e){for(o.a.splice(0,0,1),o.b.splice(0,0,"a"),r=o.a.length,i=1;i<r;++i)o.a[i]=0,o.b[i]="0";++e}else o.next(e-1);else++t;return o.a[e]=t,o.b[e]=o._chars[t],o.value=o.b.join("")}}},xui.Class("xui.Thread",null,{Constructor:function(e,t,i,r,o,n,a){var s=arguments.callee.upper;s&&s.call(this),s=null;var u=this,l=arguments.callee,d=xui.$cache.thread;if(u.constructor!==l||u.id)return new l(e,t,i,r,o,n,a);"string"!=typeof e&&(e="$"+u.constructor.$xid++),u.id=e,u.profile=d[e]||(d[e]={id:e,_start:!1,time:0,_left:0,_asy:.1,index:0,tasks:t||[],delay:i||0,callback:r,onStart:o,onEnd:n,cache:{},status:"ini",cycle:!!a,instance:u})},Instance:{_fun:xui.fun(),__gc:function(){var e=xui.$cache.thread,t=e[this.id];if(t)for(var i in delete e[this.id],t.tasks.length=0,t)t[i]=null},_task:function(){var e=this,t=e.profile;if(t&&t.status&&t.tasks){t._asy=.1;var i,r,o={},n=t.tasks[t.index],a=typeof n;if("function"==a)o.task=n;else if("object"==a)for(r in n)o[r]=n[r];if("function"!=typeof o.callback&&(o.callback=t.callback),"function"==typeof o.task&&(o.args=o.args||[],o.args=o.args.concat([t.id,t.tasks,t.index])),t.index++,t.time=xui.stamp(),"function"==typeof o.task&&(i=xui.tryF(o.task,o.args||[t.id,t.tasks,t.index],o.scope||e,null)),t.status){if(o.id&&(t.cache[o.id]=i),o.callback&&!1===xui.tryF(o.callback,[t.id,t.tasks,t.index],e,!0))return e.abort("callback");"run"===t.status&&e.start()}}},start:function(e,t){var i=this,r=i.profile;if(r.__delaycb&&(xui.tryF(r.__delaycb,[r.id],i),delete r.__delaycb),t&&(r.__delaycb=t),!1===r._start&&(r._start=!0,r.onStart)){var o=xui.tryF(r.onStart,[r.id],i);if(!1===o)return i.abort("start");if(!0===o)return;if(xui.isNumb(o))return void i.suspend(o)}if(r.status="run",!r.tasks.length)return i.abort("empty");if(r.index>=r.tasks.length){if(!0!==r.cycle)return i.abort("normal");i.profile.index=0}var n=r.tasks[r.index],a="number"==typeof n?n:n&&"number"==typeof n.delay?n.delay:r.delay;return r._left=e||0===e?e:a,.1!=r._asy&&xui.clearTimeout(r._asy),r._asy=xui.asyRun(i._task,r._left,[],i),r.time=xui.stamp(),i},suspend:function(e,t){var i,r=this.profile;if("pause"!=r.status)return r.status="pause",.1!==r._asy&&(xui.clearTimeout(r._asy),r.index>0&&r.index--),i=r._left-(xui.stamp()-r.time),r._left=i>=0?i:0,Number(e)&&this.resume(e,t),this},resume:function(e,t){var i=this,r=i.profile;return"run"==r.status||(e=e===undefined?r._left:!0===e?r.delay:!1===e?0:Number(e)||0,r.status="run",i.start(e,t)),i},abort:function(e){var t=this.profile;if("stop"!=t.status){t.status="stop";var i=t.onEnd,r=t.id;xui.clearTimeout(t._asy),this.__gc(),xui.tryF(i,[r,e])}},links:function(e){var t=this.profile,i=t.onEnd;return t.id,t.onEnd=function(t,r){xui.tryF(i,[t,r]),e.start()},this},insert:function(e,t){var i,r=this,o=r.profile.tasks,n=o.length;return xui.isArr(e)||(e=[e]),(t=t||r.profile.index)<0&&(t=-1),-1==t?Array.prototype.push.apply(o,e):(t>n&&(t=n),i=o.splice(t,n-t),o.push.apply(o,e),o.push.apply(o,i)),r},getCache:function(e){return this.profile.cache[e]},setCache:function(e,t){return this.profile.cache[e]=t,this},isAlive:function(){return!!xui.$cache.thread[this.id]},getStatus:function(){return this.profile.status}},After:function(){for(var e=this,t=function(t){e[t]=function(e){var i;if(xui.$cache.thread[e])return(i=xui.Thread(e))[t].apply(i,Array.prototype.slice.call(arguments,1))}},i="start,suspend,resume,abort,links,insert,isAlive,getStatus".split(","),r=0,o=i.length;r<o;r++)t(i[r])},Static:{$asFunction:1,$xid:1,__gc:function(){xui.$cache.thread={}},get:function(e){return(e=xui.$cache.thread[e])&&e.instance},isAlive:function(e){return!!xui.$cache.thread[e]},observableRun:function(e,t,i,r){var o=xui.Thread,n=xui.Dom;xui.isArr(e)||(e=[e]),xui.$cache.thread[i]?("function"==typeof t&&e.push(t),o.insert(i,e)):o(i,e,0,null,(function(e){n&&n.busy(e,r)}),(function(e){xui.tryF(t,arguments,this),n&&n.free(e)})).start()},group:function(e,t,i,r,o){var n={},a=xui.Thread,s=function(e,t,r){if("string"==typeof e&&(e=a(e)),e){var o=function(){var e=arguments.callee;xui.tryF(e.onEnd,arguments,this),e.onEnd=null,delete n[t],xui.tryF(i,[t,r],this),xui.isEmpty(n)&&a.resume(r)};o.onEnd=e.profile.onEnd,e.profile.onEnd=o,e.start()}};for(var u in t)n[u]=1;return a(e,[function(e){if(!xui.isEmpty(t))for(var i in a.suspend(e),t)s(t[i],i,e)}],0,null,r,o)},repeat:function(e,t,i,r){return xui.Thread(null,[null],t||0,e,i,r,!0).start()}}}),xui.Class("xui.absIO",null,{Constructor:function(e,t,i,r,o,n){var a=arguments.callee.upper;a&&a.call(this),a=null,"object"==typeof e?n=e:(n=n||{},xui.merge(n,{uri:e,query:t,onSuccess:i,onFail:r,threadid:o}));var s=this,u=arguments.callee,l=s.constructor;if(l!==u||s.id)return new u(n);xui.merge(n,{id:n.id||""+l._id++,uid:""+l.uid++,uri:n.uri?xui.adjustRes(n.uri,0,1,1):"",username:n.username||undefined,password:n.password||undefined,query:n.query||n.params||"",data:n.data||n.body||"",contentType:n.contentType||"",Accept:n.Accept||"",headers:n.headers||n.header||null,asy:!1!==n.asy,scriptType:n.scriptType},"all"),n.method=(n.method||l.method).toUpperCase();for(var d="retry,timeout,reqType,rspType,optimized,customQS".split(","),c=0,p=d.length;c<p;c++)n[d[c]]=d[c]in n?n[d[c]]:l[d[c]],"string"==typeof n[d[c]]&&(n[d[c]]=n[d[c]].toLowerCase());return xui.merge(s,n,"all"),"xml"==s.reqType&&(s.method="POST"),l.events&&xui.merge(s,l.events),s.query=s.customQS(s.query,n&&n.exData),"object"==typeof s.query&&"xml"!=s.reqType&&(s.query=xui.copy(s.query,(function(e){return e!==undefined}))),!s._useForm&&xui.isHash(s.query)&&"xml"!=s.reqType&&(s.query=l._buildQS(s.query,"json"==s.reqType)),s},Instance:{_fun:xui.fun(),_flag:0,_response:!1,_txtresponse:"",_retryNo:0,_time:function(){var e=this;e.constructor,e._clear(),e._retryNo<e.retry?(e._retryNo++,xui.tryF(e.onRetry,[e._retryNo],e),e.start()):!1!==xui.tryF(e.onTimeout,[],e)&&e._onError(new Error("Request timeout"))},_onEnd:function(){var e=this;e._end||(e._end=!0,e._flag>0&&(xui.clearTimeout(e._flag),e._flag=0),xui.Thread.resume(e.threadid),xui.tryF(e.$onEnd,[],e),xui.tryF(e.onEnd,[],e),e._clear())},_onStart:function(){var e=this;xui.Thread.suspend(e.threadid),xui.tryF(e.$onStart,[],e),xui.tryF(e.onStart,[],e)},_onResponse:function(){var e=this;!1!==xui.tryF(e.beforeSuccess,[e._response,e.rspType,e.threadid],e)&&xui.tryF(e.onSuccess,[e._response,e.rspType,e.threadid],e),e._onEnd()},_onError:function(e,t,i,r){var o=this;!1!==xui.tryF(o.beforeFail,[e,o.threadid,t,i,r],o)&&xui.tryF(o.onFail,[e,o.rspType,o.threadid,t,i,r],o),o._onEnd()},isAlive:function(){return!this._end},abort:function(){this._onEnd()}},Static:{$abstract:!0,get:function(e,t,i,r,o,n){return(n=n||{}).method="GET",this.apply(this,arguments).start()},post:function(e,t,i,r,o,n){return(n=n||{}).method="POST",this.apply(this,arguments).start()},_id:1,uid:1,method:"GET",retry:0,timeout:6e4,reqType:"form",rspType:"json",optimized:!1,callback:"callback",_buildQS:function(e,t){return e=xui.clone(e,(function(e,t){return!(xui.isNaN(e)||!xui.isDefined(e)||xui.isFile(e))})),t?(t=xui.serialize(e))&&encodeURIComponent(t):xui.urlEncode(e)},customQS:function(e,t){return t&&("string"==typeof e?e=(e||"")+"&"+xui.urlEncode(t):xui.merge(e,t,"all")),e},_if:function(e,t,i){var r,o,n=xui.browser.ie&&xui.browser.ver<9,a=n?"<iframe "+(t?"name='xui_xdmi:"+t+"'":"")+(i?" onload='xui.XDMI._o(\""+t+"\")'":"")+">":"iframe",s=e.createElement(a);return t&&(s.id=s.name="xui_xdmi:"+t),!n&&i&&(s.onload=i),s.style.display="none",e.body.appendChild(s),[s,r="contentWindow"in s?s.contentWindow:"window"in s?s.window:(o=s.contentDocument||s.document).defaultView||o.parentWindow,r.document]},isCrossDomain:function(e){var t=xui._localParts;e=e.replace(/#.*$/,"").replace(/^\/\//,t[1]+"//");var i=xui._uriReg.exec((e||"").toLowerCase());return!(!i||i[1]===t[1]&&i[2]===t[2]&&(i[3]||("http:"===i[1]?80:443))===(t[3]||("http:"===t[1]?80:443)))},groupCall:function(e,t,i,r,o){var n,a=function(e,t,i){i[t]=xui.Thread(null,[function(t){e.threadid=t,e.start()}])};for(n in e)a(e[n],n,e);return xui.Thread.group(null,e,t,(function(){xui.Thread.suspend(o),xui.tryF(i,arguments,this)}),(function(){xui.tryF(r,arguments,this),xui.Thread.resume(o)})).start()}}}),xui.Class("xui.Fetch","xui.absIO",{Instance:{withCredentials:!0,credentials:"include",_init:"method,headers,body,referrer,referrerPolicy,mode,credentials,cache,redirect,integrity,keepalive,signal".split(","),start:function(){var e=this;if(!1!==xui.tryF(e.beforeStart,[],e)){if(!e._retryNo&&e.query&&(e.uri=e.uri.split("#")[0].split("?")[0]+"?"+e.query,e.query=null),e._retryNo||e._onStart(),e.data)if(xui.isHash(e.data))if(xui.isEmpty(e.data))e.body=null;else if("json"==e.reqType)e.body=JSON.stringify(e.data);else{var t=new FormData;xui.each(e.data,(function(e,i){xui.isFile(e)?t.append(i,e,e.name):t.append(i,e)})),e.body=t}else e.body=e.data;e.controller||(e.controller=new AbortController,e.signal=e.controller.signal),xui.get(e,["headers","Authorization"])&&!e.credentials&&(e.credentials="include");var i,r,o,n,a={};if(xui.arr.each(e._init,(function(t){e.hasOwnProperty(t)&&e[t]&&(a[t]=e[t])})),!1!==xui.tryF(e.beforeSend,[e.uri,a],e))return fetch(e.uri,a).then((function(t){var a;o=t.status,n=t.statusText;try{switch(e.rspType.toLowerCase()){case"arraybuffer":a=t.arrayBuffer();break;case"formData":a=t.formData();break;case"json":a=t.json();break;case"text":a=t.text();break;case"blob":a=t.blob();break;default:throw new Error("Unsupported rspType -- "+rspType)}}catch(e){return void(r=e)}return t.ok?i=!0:r=new Error("State error -- "+o+" "+n),a})).then((function(t){i?(e._response=t,e._onResponse()):e._onError(r,o,n,t)})).catch((function(t){"AbortError"===t.name||e._onError(t)})),e.timeout>0&&(e._flag=xui.asyRun((function(){e&&!e._end&&(e.controller&&e.controller.abort(),e._time())}),e.timeout)),e;e._onEnd()}else e._onEnd()},abort:function(){var e=this;e.controller&&e.controller.abort(),arguments.callee.upper.call(e)},_clear:function(){}}}),xui.Class("xui.Ajax","xui.absIO",{Instance:{_XML:null,_unsafeHeader:"Accept-Charset,Accept-Encoding,Access-Control-Request-Headers,Access-Control-Request-Method,Connection,Content-Length,Cookie,Cookie2,Date,DNT,Expect,Host,Keep-Alive,Origin,Referer,TE,Trailer,Transfer-Encoding,Upgrade,User-Agent,Via".toLowerCase().split(","),_isunsafe:function(e){return xui.browser.isWebKit&&(xui.str.startWith("Proxy-",e)||xui.str.startWith("Sec-",e)||-1!==xui.arr.indexOf(this._unsafeHeader,e.toLowerCase()))},_header:function(e,t){this._isunsafe(e)||this._XML&&this._XML.setRequestHeader(e,t)},start:function(){var e=this;if(!1!==xui.tryF(e.beforeStart,[],e)){e._retryNo||e._onStart();try{if(e._XML=new window.XMLHttpRequest,e.asy&&(e._XML.onreadystatechange=function(){e&&e._XML&&4==e._XML.readyState&&(e._complete.apply(e),e._clear())}),!e._retryNo&&e.query&&(e.uri=e.uri.split("#")[0].split("?")[0]+"?"+e.query,e.query=null),e.data)if(xui.isHash(e.data))if(xui.isEmpty(e.data))e.body=null;else{var t=new FormData;xui.each(e.data,(function(e,i){xui.isFile(e)?t.append(i,e,e.name):t.append(i,e)})),e.body=t}else e.body=e.data;if(e.username&&e.password?e._XML.open(e.method,e.uri,e.asy,e.username,e.password):e._XML.open(e.method,e.uri,e.asy),e.onUploadProgress&&request.upload&&e._XML.upload.addEventListener("progress",e._uploadProgress=function(t){xui.tryF(e.onUploadProgress,[t.loaded/t.total*100,t.loaded,t.total,t],e)}),e.onDownloadProgress&&(e._XML.onprogress=function(t){xui.tryF(e.onDownloadProgress,[t.loaded/t.total*100,t.loaded,t.total,t],e)}),e._header("Accept",e.Accept?e.Accept:"json"==e.rspType?"application/json,text/javascript,*/*;q=0.01":"xml"==e.rspType?"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8":"*/*"),!xui.absIO.isCrossDomain(e.uri)&&(e._header("Content-type",e.contentType?e.contentType:("xml"==e.reqType?"text/xml; ":"json"==e.reqType?"application/json; ":"POST"==e.method?"application/x-www-form-urlencoded; ":"")+"charset="+(e.charset||"UTF-8")),e._header("X-Requested-With","XMLHttpRequest"),e.optimized))try{e._header("User-Agent",null),e._header("Accept-Language",null),e._header("Connection","keep-alive"),e._header("Keep-Alive",null),e._header("Cookie",null),e._header("Cookie","")}catch(e){}try{xui.isHash(e.headers)&&xui.each(e.headers,(function(t,i){e._header(i,t)}))}catch(e){}if(!1===xui.tryF(e.beforeSend,[e._XML],e))return void e._onEnd();try{e._XML.send(e.body||null)}catch(e){}if(!e.asy)return e._complete();e._XML&&e.timeout>0&&(e._flag=xui.asyRun((function(){e&&!e._end&&e._time()}),e.timeout))}catch(t){e._onError(t)}return e}e._onEnd()},abort:function(){var e=this;e._XML&&(e._XML.abort(),e._clear()),arguments.callee.upper.call(e)},_clear:function(){var e=this;e._XML&&(e._XML.onreadystatechange=e._XML.onprogress=e._fun,e._uploadProgress&&e._XML.upload.removeEventListener("progress",e._uploadProgress),e._uploadProgress=e._XML=null)},_complete:function(){var e,t=this,i=t._XML.status,r=t._XML.statusText;return t._txtresponse="xml"==t.rspType?t._XML.responseXML:t._XML.responseText,t._response="blob"==t.rspType||"document"==t.rspType||"arraybuffer"==t.rspType?t._XML.response:"json"==t.rspType?/^\s*\</.test(t._txtresponse)&&(e=xui.XML.xml2json(xui.XML.parseXML(t._txtresponse)))&&e.data?e.data:!1===(e=xui.unserialize(t._txtresponse))?t._txtresponse:e:t._txtresponse,!i&&xui._localReg.test(xui._localParts[1])&&(i=t._XML.responseText?200:404),1223==i&&(i=204),i>=200&&i<300||304==i?t._onResponse():i===undefined||i<10?t._onError(new Error("Network problems--"+i),i,r,t._response):t._onError(new Error("XMLHTTP returns--"+i),i,r,t._response),t._response}},Static:{$asFunction:1}}),xui.Class("xui.JSONP","xui.absIO",{Instance:{start:function(){var e,t,i=this,r=i.constructor,o=!1;if(!1!==xui.tryF(i.beforeStart,[],i)){i._retryNo||i._onStart(),"script"==i.rspType&&(i.retry=0),e=i.id,r._pool[e]?r._pool[e].push(i):r._pool[e]=[i],r.No["_"+e]=function(t){r.$response(t,e)};var n=document,a=function(){o||(o=!0,"script"==i.rspType?"string"==typeof i.checkKey?xui.setTimeout((function(){xui.exec("!function(t){if(t=xui.get(xui.JSONP,['_pool','"+e+"',0])) {if(xui.SC.get('"+i.checkKey+"'))t._onResponse();else t._loaded();}}()")}),!1):i._onResponse():i._loaded())};t=i.node=n.createElement("script");var s=i.uri;i.query&&(s=s.split("#")[0].split("?")[0]+"?"+i.query),t.src=s,t.type=i.scriptType||"text/javascript",t.charset=i.charset||"UTF-8",t.async=!!i.asy,i.attrs&&xui.each(i.attrs,(function(e,i){t.setAttribute(i,e)})),t.onload=t.onreadystatechange=function(){if(!o){var e=this.readyState;e&&"loaded"!=e&&"complete"!=e||a(),"interactive"==e&&xui.browser.opr&&xui.Thread.repeat((function(){return!o&&(/loaded|complete/.test(document.readyState)?(a(),!1):void 0)}),50)}},"onerror"in t&&(t.onerror=function(e){i._clear(),i._onError(new Error("Not Found - "+s)),i=null}),(i.keepDomNode?n.getElementsByTagName("head")[0]:n.body).appendChild(t),t=null,i.timeout>0&&(i._flag=xui.asyRun((function(){i&&!i._end&&i._time()}),i.timeout))}else i._onEnd()},_clear:function(){var e=this,t=e.node,i=e.constructor,r=e.id,o=i._pool;if(o[r]&&(o[r].length=0,delete o[r]),delete i.No["_"+r],t){if(e.node=t.onload=t.onreadystatechange=t.onerror=null,!e.keepDomNode){var n=document.createElement("div");n.appendChild(t.parentNode&&t.parentNode.removeChild(t)||t),xui.browser.ie?xui.asyRun((function(){n.innerHTML=t.outerHTML="",xui.isEmpty(o)&&(i._id=1),o=i=t=n=null})):xui.asyRun((function(){n.innerHTML="",t=n=null,xui.isEmpty(o)&&(i._id=1)}))}}else xui.isEmpty(o)&&(i._id=1)},_loaded:function(){var e=this;xui.asyRun((function(){e.id&&e.constructor._pool[e.id]&&e._onError(new Error("JSONP return script doesn't match"))}),500)}},Static:{$asFunction:1,_pool:{},No:{},$response:function(e,t){var i;if(e&&(i=this._pool[t]))for(var r=0,o=i.length;r<o;r++)i[r]._response=e,i[r]._onResponse();else this._onError(new Error("JSONP return value formatting error--"+e))},customQS:function(e,t){var i=this.constructor.callback,r="script"!=this.rspType;return"string"==typeof e?(e=(e||"")+(r?"&"+i+"=xui.JSONP.No._"+this.id:""),t&&(e=(e||"")+(r?"&"+xui.urlEncode(t):""))):r&&(e[i]="xui.JSONP.No._"+this.id,t&&xui.merge(e,t,"all")),e}}}),xui.Class("xui.XDMI","xui.absIO",{Instance:{_useForm:!0,start:function(){var e,t,i,r,o,n,a,s=this,u=window,l=s.constructor;if(!1!==xui.tryF(s.beforeStart,[],s)){s._retryNo||s._onStart(),t=s.id,l._pool[t]?l._pool[t].push(s):l._pool[t]=[s];var d=l._if(document,t,a);s.node=d[0],s.frm=d[1],(n=s.form=document.createElement("form")).style.display="none",u.postMessage?(s._msgcb=function(e){if(s.node&&e.source===s.frm)if(e=e.data,"json"==s.rspType&&(e=xui.unserialize(e)||e),e&&(i=l._pool[s.id]))for(var t=0,r=i.length;t<r;t++)i[t]._response=e,i[t]._onResponse();else s._clear(),s._onError(new Error("XDMI return value formatting error"))},u.addEventListener?u.addEventListener("message",s._msgcb,!1):u.attachEvent("onmessage",s._msgcb)):s._onload=a=function(e){if(!s.OK&&s.node){var t,i,r=s.node.contentWindow,o=xui.XDMI;if(xui.browser.opr)try{if("about:blank"==r.location)return}catch(e){}s.OK=1;var n=0;try{r.name===undefined&&(n=1)}catch(e){n=1}n&&r.location.replace(o._getDummy()+"#"+xui.ini.dummy_tag);var a=function(){var e,n=0;try{r.name===undefined&&(n=1)}catch(e){n=1}if(n)return xui.asyRun(a);if("xui_xdmi:"+s.id==r.name)return s._clear(),void s._onError(new Error("XDMI no return value"));if((e=r.name)&&(t=xui.unserialize(e))&&(i=o._pool[s.id]))for(var u=0,l=i.length;u<l;u++)i[u]._response=t,i[u]._onResponse();else s._clear(),s._onError(new Error("XDMI return value formatting error, or no matched 'id'-- "+e))};a()}},s.query&&("GET"==s.method?xui.isHash(s.data)&&!xui.isEmpty(s.data)&&(xui.merge(s.query,s.data,"without"),s.data=s.query):xui.isHash(s.query)&&!xui.isEmpty(s.query)&&(s.data=s.data||{},xui.merge(s.data,s.query,"without")),s.query=null),n.action=s.uri,n.method=s.method,n.target="xui_xdmi:"+t,r=s.data||{};var c,p=[];for(e in r)r[e]&&r[e]["xui.UIProfile"]&&r[e].$xuiFileCtrl?(c=r[e].boxing().getUploadObj())&&(p.push({id:r[e].$xid,file:c}),c.id=c.name=e,n.appendChild(c),o=!0):r[e]&&1==r[e].nodeType?(r[e].id=r[e].name=e,n.appendChild(r[e]),o=!0):xui.isDefined(r[e])&&((i=document.createElement("textarea")).id=i.name=e,i.value="string"==typeof r[e]?r[e]:xui.serialize(r[e],(function(e){return e!==undefined})),n.appendChild(i));o&&(s.method="POST",n.enctype="multipart/form-data",n.encoding&&(n.encoding=n.enctype)),document.body.appendChild(n),n.submit(),p.length&&xui.arr.each(p,(function(e,t){(t=xui.getObject(e.id))&&t["xui.UIProfile"]&&t.boxing()&&t.boxing().setUploadObj&&t.boxing().setUploadObj(e.file)})),i=n=null,s.timeout>0&&(s._flag=xui.asyRun((function(){s&&!s._end&&s._time()}),s.timeout))}else s._onEnd()},_clear:function(){var e=this,t=e.node,i=e.form,r=e.constructor,o=window,n=document.createElement("div"),a=e.id,s=r._pool;if(s[a]&&(s[a].length=0,delete s[a]),t&&o.postMessage)o.removeEventListener?o.removeEventListener("message",e._msgcb,!1):o.detachEvent("onmessage",e._msgcb),e._msgcb=null;else if(xui.browser.gek&&t)try{t.onload=null;var u=t.contentWindow.document;u.write(" "),u.close()}catch(e){}e.form=e.node=e.frm=null,t&&n.appendChild(t.parentNode.removeChild(t)),i&&n.appendChild(i.parentNode.removeChild(i)),n.innerHTML="",xui.isEmpty(s)&&(r._id=1),i=n=null}},Static:{$asFunction:1,method:"POST",_pool:{},_o:function(e){var t=this._pool[e],i=t[t.length-1];xui.tryF(i._onload)},_getDummy:function(e){var t,i,r=this,o=(e=e||window).document,n=xui.ini,a=xui.browser,s=r.isCrossDomain;if(r.dummy)return r.dummy;if(n.dummy)return r.dummy=n.dummy;if(s(n.path)||o.getElementById("xui:img:bg")||((i=o.createElement("img")).id="xui:img:bg",i.src=n.img_bg,i.style.display="none",o.body.appendChild(i),i=null),i=o.getElementById("xui:img:bg"))return r.dummy=i.src.split("#")[0];for(var u=0,l=(t=o.getElementsByTagName("img")).length;u<l;u++)if((i=t[u]).src&&!s(i.src))return r.dummy=i.src.split("#")[0];if(a.gek)for(u=0,l=(t=o.getElementsByTagName("link")).length;u<l;u++)if("stylesheet"==(i=t[u]).rel&&!s(i.href))return r.dummy=i.href.split("#")[0];try{if(e!=e.parent&&(e=e.parent)&&!s(""+e.document.location.href))return r._getDummy(e)}catch(e){}return"/favicon.ico"},customQS:function(e,t){var i=this.constructor.callback,r=window;return"string"==typeof e&&(e=xui.urlDecode(e)),r.postMessage?e[i]=e.parentDomain=r.location.origin||r.location.protocol+"//"+r.location.hostname+(r.location.port?":"+r.location.port:""):e[i]="window.name",t&&xui.merge(e,t,"all"),e}}}),new function(){xui.SAjax=xui.JSONP,xui.IAjax=xui.XDMI,"fetch"in window||(xui.Fetch=xui.Ajax)},xui.Class("xui.SC",null,{Constructor:function(e,t,i,r,o,n){var a=arguments.callee.upper;a&&a.call(this),a=null;var s,u=xui.$cache.SC;return(s=u[e]||(u[e]=xui.get(xui.window,e.split("."))))?xui.tryF(t,[e,null,r],s):((o=o||{}).$cb=t,i&&(o.threadid=r),s=u[e]=xui.SC._call(e||"",o,i,n)),s},Static:{$asFunction:1,__gc:function(e){xui.$cache.SC={}},beforeGetScript:function(e,t,i){},get:function(e,t,i,r){if("string"==typeof e)return e=xui._s2a(e),t&&(r=xui.get(t,e)),i&&r===undefined&&(r=xui.get(i,e)),r===undefined&&(r=xui.get(xui.window,e)),r},_call:function(e,t,i,r){i=!!i;var o,n,a,s,u=xui.SC.get,l=xui.$cache.snipScript,d=function(t,i,r){var o,n=this,a=this.uri;if(t&&!u(e))if(n.$p)(n.$cache||l)[n.$tag]=t;else try{xui.exec(t,e)}catch(e){xui.asyRun((function(){throw e}))}o=xui.Class._last,xui.Class._ignoreNSCache=xui.Class._last=null,xui.tryF(n.$cb,[n.$tag,t,r],u(e)||o||{}),!u(e)&&o&&o.KEY!=e&&xui.log("[xui] > '"+e+"' doesn't in '"+a+"'. The last class '"+o.KEY+"' was triggered.")},c=function(e,t,i){var r=this;xui.tryF(r.$cb,[null,null,r.threadid],r)};return r||!(n=u(e))?(!r&&(o=l[e])&&(i=!1,d.call({$cb:t.$cb},o),delete l[e]),(r||!(n=u(e)))&&(t=t||{},a=xui.getPath(e,".js","js",t),t.$tag=e,xui.Class._ignoreNSCache=1,xui.Class._last=null,i&&!t.$p?(t.rspType="script",s=xui.JSONP):(t.asy=i,s=xui.Ajax),!1!==xui.SC.beforeGetScript(a,d,c)&&s(a,xui._rnd(t.force),d,c,null,t).start(),i||(n=u(e)))):t.$cb&&d.call(t),n},loadSnips:function(e,t,i,r,o,n,a){if(e&&e.length){var s,u={};n=xui.merge(n||{},{$p:1,$cache:t||xui.$cache.snipScript});for(var l=0,d=e.length;l<d;l++)u[e[l]]=1;for((i||r)&&(n.$cb=function(e){i&&xui.tryF(i,arguments,this),delete u[e||this.$tag],xui.isEmpty(u)&&(xui.tryF(r,[o]),r=null,xui.Thread.resume(o))}),xui.Thread.suspend(o),l=0;s=e[l++];)this._call(s,xui.merge({$tag:s},n,a),!0)}else xui.tryF(r,[o])},runInBG:function(e,t,i,r){var o,n,a=0,s=this;xui.Thread(null,[function(t){for(;e.length>a&&(n=s.get(o=e[a++])););n||s._call(o,{threadid:t},!0),e.length<a&&xui.Thread.abort(t),e.length==a&&a++}],1e3,t,i,r,!0).start()},execSnips:function(e){var t,i=e||xui.$cache.snipScript;for(t in i)try{xui.exec(i[t],t)}catch(e){xui.asyRun((function(){throw e}))}i={}},groupCall:function(e,t,i,r,o,n){if(e){var a=this;a.execSnips(),xui.Thread.suspend(r),a.loadSnips(e,0,i,(function(){a.execSnips(),xui.tryF(t,[r]),t=null,xui.Thread.resume(r)}),null,o,n)}else xui.tryF(t,[r])}}}),xui.Class("xui.absBox",null,{Constructor:function(){var e=arguments.callee.upper;e&&e.call(this),e=null,this._nodes=[],this.Class=this.constructor},Before:function(e){var t=xui.absBox;t&&((t=t.$type)[e.replace("xui.","")]=t[e]=e)},Instance:{__gc:function(){this.each((function(e){xui.tryF(e.__gc)})),this._nodes=0},_get:function(e){var t=this._nodes;return xui.isNumb(e)?t[e]:t},_empty:function(){return this._nodes.length=0,this},getProfile:function(e){return e?this._nodes:this._nodes[0]},get:function(e){return this._get(e)},size:function(){return this._nodes.length},_each:function(e,t,i){var r,o,n=this,a=n._nodes,s=a.length;if(i)for(r=s;r>=0&&(!(o=a[r])||!1!==e.call(t||n,o,r));r--);else for(r=0;r<s&&(!(o=a[r])||!1!==e.call(t||n,o,r));r++);return o=null,n},each:function(e,t,i){return this._each(e,t,i)},isEmpty:function(){return!this._nodes.length},merge:function(e){if(this==xui.win||this==xui.doc||this==xui("body")||this==xui("html"))return this;var t,i=this,r=i.constructor,o=0,n=i._nodes;if((e=e._nodes).length){for(;t=e[o++];)n[n.length]=t;i._nodes=r._unique(n)}return i},reBoxing:function(e,t){var i=this,r=xui.absBox.$type[e||"Dom"];return r?r==i.KEY?i:(r=xui.SC(r))?r.pack(i._nodes,t):void 0:xui.UI.pack([])}},Static:{$abstract:!0,$type:{},pack:function(e,t){var i=new this(!1);return i._nodes=e?!1===t?xui.isArr(e)?e:[e]:"function"==typeof this._ensureValues?this._ensureValues(e):xui.isArr(e)?e:[e]:[],i.n0=i._nodes[0],i},_unique:function(e){for(var t,i,r={},o=[],n=0,a=e.length;n<a;n++)o[n]=e[n];for(e.length=0,n=0;t=o[n++];)r[i="string"==typeof t?t:t.$xid]||(r[i]=1,e.push(t));return e},plugIn:function(e,t){return this.prototype[e]=t,this}}}),xui.Class("xui.absProfile",null,{Constructor:function(){var e=arguments.callee.upper;e&&e.call(this),e=null,this.$xid||(this.$xid=xui.absProfile.$xid.next())},Instance:{getId:function(){return this.$xid},getUid:function(e){return this.key+":"+this.$xid+(e?":"+e:"")},link:function(e,t,i,r){return xui.absProfile.prototype.$link(this,e,t,i,r)},$link:function(e,t,i,r,o){var n="$"+e.$xid;return r=r||e,t[n]&&e.unLink(i),t[n]=r,xui.isArr(t)&&xui.arr.insertAny(t,r,o,!0),e._links[i]=t,e},unLink:function(e){return xui.absProfile.prototype.$unLink(this,e)},$unLink:function(e,t){var i,r,o="$"+e.$xid;if(e._links&&(i=e._links[t]))return xui.isArr(i)&&-1!=(r=xui.arr.indexOf(i,i[o]))&&xui.arr.removeFrom(i,r),delete i[o],delete e._links[t],r},unLinkAll:function(){return xui.absProfile.prototype.$unLinkAll(this)},$unLinkAll:function(e){var t,i,r="$"+e.$xid,o=e._links;for(i in o)t=o[i],xui.isArr(t)&&xui.arr.removeValue(t,t[r]),delete t[r];return e._links={},e},getModule:function(e){var t,i=this,r=function(e){if(e.moduleClass&&e.moduleXid){var t=xui.SC.get(e.moduleClass);if(t&&(t=t.getInstance(e.moduleXid)))return r(t)}return e};if(i.moduleClass&&i.moduleXid&&(t=xui.SC.get(i.moduleClass))&&(t=t.getInstance(i.moduleXid)))return e?r(t):t},getParent:function(){return this.parent&&this.parent.boxing()},getChildrenId:function(){return this.childrenId}},Static:{$xid:new xui.id,$abstract:!0}}),xui.Class("xui.Profile","xui.absProfile",{Constructor:function(e,t,i,r,o,n,a){var s=arguments.callee.upper,u=xui.toArr(arguments);s.apply(this,u),s=null;var l=this;xui.merge(l,a),l.key=t||l.key||"",l.alias=i||l.alias||"",l.properties=o?xui.copy(o):l.properties||{},l.events=n?xui.copy(n):l.events||{},l.host=e||l.host||l,l.Class=l.constructor,l.box=r||l.box,l._dftProps={},l.events&&(l.setEvents(l.events),delete l.events),l._links={}},Instance:{setEvents:function(e,t){var i=this.box.$EventHandlers;if(xui.isHash(e))return xui.merge(this,e,"all",(function(e,t){return i[t]}));i[e]&&(this[e]=t)},getEvents:function(e){if(e)return this[e];var t=this,i={};return xui.each(t.box.$EventHandlers,(function(e,r){t[r]&&(i[r]=t[r])})),i},getProperties:function(e){var t=this,i=t.properties;return xui.isFun(t._propGetter)&&(i=t._propGetter(i)),xui.isFun(t.propGetter)&&(i=t.propGetter(i)),e?i[e]:xui.copy(i)},setProperties:function(e,t){var i=this;xui.isHash(e)?(xui.merge(e,i.box.$DataStruct,(function(t,i){i in e||(e[i]=xui.isObj(t)?xui.clone(t):t)})),i.properties=e,xui.isFun(i._propSetAction)&&i._propSetAction(e),xui.isFun(i.propSetAction)&&i.propSetAction(e)):i.properties[e]=t},_applySetAction:function(e,t,i,r,o,n){return e.call(this,t,i,r,o,n)},__gc:function(){var e,t=this,i=xui.toArr(arguments);t.$beforeDestroy&&(xui.each(t.$beforeDestroy,(function(e){xui.tryF(e,i,t)})),delete t.$beforeDestroy),xui.tryF(t.$ondestory,i,t),t.onDestroy&&t.boxing().onDestroy(),t.destroyTrigger&&t.destroyTrigger(),t.alias&&t.host&&(e=t.host[t.alias])&&(e=e._nodes)&&(0===e.length||1===e.length&&e[0]==t)&&delete t.host[t.alias],t.unLinkAll(),xui.tryF(t.clearCache,[],t),t.destroyed=!0,t.$afterDestroy&&(xui.each(t.$afterDestroy,(function(e){xui.tryF(e,i,t)})),delete t.$afterDestroy),t.afterDestroy&&t.boxing().afterDestroy(t),xui.breakO([t.properties,t.events,t],2),t._dftProps=null,t.destroyed=!0},boxing:function(){var e,t=this;return t.box?((e=t.Instace)&&e.get(0)==t&&1==e._nodes.length||(e=t.Instace=t.box.pack([t],!1)),e):null},serialize:function(e,t){var i,r=this,o=(i=r.box._beforeSerialized)?i(r):r,n={alias:o.alias,key:o.key,host:o.host};n.host===r?delete n.host:o.host&&!t&&(!1!==e?n.host="@this":delete n.host);var a={},s=o.box.$DataStruct,u=o.box[o.$inDesign?"__resetDftProp_in_Desinger":"__resetDftProp"],l=xui.absObj.$specialChars;xui.merge(a,o.properties,(function(e,t){return(u&&t in u?u:s)[t]!==e&&!l[t.charAt(0)]})),xui.isEmpty(a)||(n.properties=a),xui.isEmpty(i=this.getEvents())||(n.events=i);var d=o.box.$EventHandlers;return xui.filter(n.events,(function(e,t){return e!=d[t]})),xui.isEmpty(n.events)&&delete n.events,!1===e?n:xui.serialize(n)}}}),xui.Class("xui.absObj","xui.absBox",{Constructor:function(){var e=arguments.callee.upper,t=xui.toArr(arguments);if(e.apply(this,t),e=null,!1!==t[0]&&"function"==typeof this._ini)return this._ini.apply(this,t)},Before:function(e,t,i){return xui.absBox.$type[e]=e,!0},After:function(){var e,t,i,r,o,n,a,s,u,l=this,d=arguments.callee;for(l._nameId=0,l._nameTag=l.$nameTag||l.KEY.replace(/\./g,"_").toLowerCase(),l._cache=[],o=d.a1||(d.a1=xui.toArr("$Keys,$DataStruct,$EventHandlers,$DataModel")),a=0;u=o[a++];){if(i={},(t=l.$parent)&&(n=t.length))for(;n--;)xui.merge(i,t[n][u]);l[u]=i}for(l.setDataModel(l.DataModel),delete l.DataModel,l.setEventHandlers(l.EventHandlers),delete l.EventHandlers,o=d.a5||(d.a5=xui.toArr("RenderTrigger,LayoutTrigger")),a=0;u=o[a++];){if(e=[],(t=l.$parent)&&(s=t.length))for(n=0;n<s;n++)(r=(r=t[n])["$"+u])&&e.push.apply(e,r);l[u]&&e.push(l[u]),xui.arr.stableSort(e,(function(e,t){return(e=e.$order||0)>(t=t.$order||0)?1:e==t?0:-1})),l["$"+u]=e,delete l[u]}},Static:{$abstract:!0,$specialChars:{_:1,$:1},DataModel:{name:"",desc:"",tag:"",tagVar:{ini:{},action:function(){var e=this.properties.renderer;e&&/^\s*[a-zA-Z]+([\w]+\.?)+[\w]+\s*$/.test(e)&&this.boxing().refresh()}},propBinder:{hidden:1,ini:{}},dataBinder:{ini:"",set:function(e){var t=this,i=t.properties,r=i.dataBinder;r&&xui.DataBinder._unBind(r,t),i.dataBinder=e,xui.DataBinder._bind(e,t)}},dataField:{ini:""}},get:function(e){return this.pack([this._cache[e||0]])},getAll:function(){return this.pack(this._cache)},pickAlias:function(){return xui.absObj.$pickAlias(this)},$pickAlias:function(e){for(var t,i=e._nameTag,r=e._cache;t=i+ ++e._nameId;){for(var o=0,n=r.length;o<n;o++)if(r[o].alias===t){t=-1;break}if(-1!=t)return t}},setDataModel:function(e){var t,i,r,o,n,a,s,u=this,l=xui.absObj.$specialChars,d=u.$DataStruct,c=u.$DataModel,p=u.prototype;for(t in e)if(c[t]||(c[t]={}),null===(o=e[t])||undefined===o)s=xui.str.initial(t),delete d[t],delete c[t],p[i="get"+s]&&p[i].$auto$&&delete p[i],p[i="set"+s]&&p[i].$auto$&&delete p[i];else{for(i in"object"==(r=typeof o)&&o.constructor==Object||(o={ini:o}),d[t]="ini"in o?o.ini:t in d?d[t]:"",r=c[t])i in o||(o[i]=r[i]);c[t]=o}return xui.each(e,(function(e,t){if(null!==e&&undefined!==e&&!l[t.charAt(0)]){if(s=xui.str.initial(t),n="set"+s,null===e.set||e&&(e.readonly||e.inner))delete p[n];else{var i=e.set;a=p[n],p[n]="function"!=typeof i&&"function"==typeof a?a:xui.Class._fun((function(e,r,o,n){return this.each((function(a){var s;if(a.properties&&(delete a._dftProps[t],r||c[t]&&c[t].$spaceunit&&a.$forceu&&"auto"!=e&&(s=xui.$us(a),e=a.$forceu(e,2==s?"em":-2==s?"px":null)),(a.properties[t]!==e||r)&&(!a.$beforePropSet||!1!==a.$beforePropSet(t,e,r,o,n)))){var u=a.properties[t];if(!a.beforePropertyChanged||!1!==a.boxing().beforePropertyChanged(a,t,e,u)){if("function"==typeof i)i.call(a,e,r,o,n);else{var l=xui.get(a.box.$DataModel,[t,"action"]);a.properties[t]=e,"function"==typeof l&&!1===a._applySetAction(l,e,u,r,o,n)&&(a.properties[t]=u)}a.afterPropertyChanged&&a.boxing().afterPropertyChanged(a,t,e,u),a.$afterPropertyChanged&&xui.tryF(a.$afterPropertyChanged,[a,t,e,u],a)}}}))}),n,u.KEY,null,"instance"),p[n]!==a&&(p[n].$auto$=1)}if(n="get"+s,e&&e.inner)delete p[n];else{var r=e.get;a=p[n],p[n]="function"!=typeof r&&"function"==typeof a?a:xui.Class._fun((function(){var e=this.get(0),i=xui.toArr(arguments),o=function(){return"function"==typeof r?r.apply(e,i):e.properties[t]};return"function"==typeof e.$beforePropGet?e.$beforePropGet(t,o):o()}),n,u.KEY,null,"instance"),p[n]!==a&&(p[n].$auto$=1)}}})),u},setEventHandlers:function(e){var t=this;return xui.each(e,(function(e,i){if(null===e)delete t.$EventHandlers[i],delete t.prototype[i];else{t.$EventHandlers[i]=e;var r=function(e){var t,r=arguments.length;if(1==r&&("function"==typeof e||"string"==typeof e||xui.isHash(e)||xui.isArr(e)))return this.each((function(t){t.renderId&&t.clearCache(),t.box._addEventHanlder&&t.box._addEventHanlder(t,i,e),t[i]=e}));if(1==r&&null===e)return this.each((function(e){e.clearCache(),e.box._removeEventHanlder&&e.box._removeEventHanlder(e,i,e[i]),delete e[i]}));var o=[],n=this.get(0);if(n){var a=n[i],s=n.host||n;if(a&&(!xui.isArr(a)||a.length)){if(n.$inDesign&&!xui.get(n,["host","_PASSEVTS",n.alias,i]))return;for(n.$lastEvent=i,arguments[0]!=n&&(o[0]=n),t=0;t<r;t++)o[o.length]=arguments[t];return(xui.isStr(a)||xui.isFun(a))&&(a=[a]),xui.isArr(a.actions||a)&&xui.isNumb(t=(a.actions||a)[0].event)&&(o[t]=o[t]?xui.Event.getEventPara(o[t]):{}),xui.pseudocode._callFunctions(a,o,s,null,n.$holder,(s&&s.alias||n.$holder&&n.$holder.alias)+"."+n.alias+"."+i)}}};r.$event$=1,r.$original$=e.$original$||t.KEY,r.$name$=i,r.$type$="event",t.plugIn(i,r)}})),t},unserialize:function(e,t){"string"==typeof e&&(e=xui.unserialize(e));var i=function(e){xui.isArr(e)&&(e=e[0]),delete e.serialId,e.children&&xui.arr.each(e.children,i)},r=[];return xui.arr.each(e,(function(e){t||i(e),r.push(new(xui.SC(e.key))(e).get(0))})),this.pack(r,!1)}},Instance:{clone:function(){var e=[],t=arguments,i=function(e){delete e.alias;for(var r=0;r<t.length;r++)delete e[t[r]];var o;if(e.children)for(r=0;o=e.children[r];r++)i(o[0])};return this.each((function(t){t=t.serialize(!1,!0),i(t),e.push(t)})),this.constructor.unserialize(e)},serialize:function(e,t){var i=[];return this.each((function(e){i[i.length]=e.serialize(!1,t)})),!1===e?i:1==i.length?" new "+i[0].key+"("+xui.serialize(i[0])+")":"xui.UI.unserialize("+xui.serialize(i)+")"},getProperties:function(e){var t,i={},r=this.get(0).properties;if(!0===e)return xui.copy(r);if("string"==typeof e)return r[e];for(var o in r)"function"==typeof this[t="get"+xui.str.initial(o)]&&(i[o]=this[t].call(this));return i},setProperties:function(e,t,i){if("string"==typeof e){var r={};r[e]=t,e=r}return this.each((function(t){xui.each(e,(function(e,r){var o="set"+xui.str.initial(r),n=t.boxing();n&&"function"==typeof n[o]?n[o].call(n,e,!!i):t.properties[r]=e}))}))},getEvents:function(e){return this.get(0).getEvents(e)},setEvents:function(e,t){if("string"==typeof e){var i={};i[e]=t,e=i}return this.each((function(t){var i=t.boxing();xui.each(e,(function(e,t){"function"==typeof i[t]&&i[t].call(i,e)}))}))},alias:function(e){return e?this.setAlias(e):this.getAlias()},host:function(e,t){return e?this.setHost(e,t):this.getHost()},setHost:function(e,t){return this._setHostAlias(e,t)},_setHostAlias:function(e,t){var i=this,r=this.get(0),o=r.alias;if(t=t||r.alias,o&&r.host&&r.host!==r){try{delete r.host[o]}catch(e){r.host[o]=undefined}r.host._ctrlpool&&delete r.host._ctrlpool[o]}return r.alias=t,r.box&&r.box._syncAlias&&r.box._syncAlias(r,o,t),e&&(r.host=e),r.host&&r.host!==r&&(r.host[t]=i,r.host._ctrlpool&&(r.host._ctrlpool[t]=i.get(0))),i},setAlias:function(e){return this._setHostAlias(null,e)},getAlias:function(){return this.get(0).alias},getHost:function(){return this.get(0).host},reBindProp:function(e,t,i,r){var o,n,a,s;r||(t=t||xui._scope_set,i=i||xui._scope_clear);try{r||t.call(this,e),this.each((function(e){(o=e.properties).propBinder&&!xui.isEmpty(o.propBinder)&&(n=e.boxing(),xui.each(o.propBinder,(function(t,i){if(xui.isDefined(s=xui.isFun(t)?t(e):xui.adjustVar(t))&&!1!==xui.tryF(n._reBindProp,[e,s,i,t],n))switch(i){case"CA":n.setCustomAttr(s);break;case"CC":n.setCustomClass(s);break;case"CS":n.setCustomStyle(s);break;default:xui.isFun(n[a="set"+xui.str.initial(i)])&&n[a](s,!0)}})))}))}catch(e){r||i.call(this)}return this}}}),xui.Class("xui.Timer","xui.absObj",{Instance:{_ini:function(e,t,i){var r,o,n,a,s=this,u=s.constructor;for(var l in e&&e["xui.Profile"]?n=(r=e).alias||u.pickAlias():(e&&e.key&&xui.absBox.$type[e.key]?(o=e,e=null,n=o.alias||u.pickAlias()):n=u.pickAlias(),r=new xui.Profile(i,s.$key,n,u,e,t,o)),r._n=r._n||[],a=u.$DataStruct)l in r.properties||(r.properties[l]=r._dftProps[l]="object"==typeof a[l]?xui.copy(a[l]):a[l]);return r.link(u._cache,"self").link(xui._pool,"xui"),s._nodes.push(r),r.Instace=s,s.n0=r,s._after_ini&&s._after_ini(r,n),s},_after_ini:function(e){e.$inDesign||xui.asyRun((function(){e&&e.box&&e.properties.autoStart&&e.boxing().start()}))},destroy:function(){this.each((function(e){e._threadid&&xui.Thread.abort(e._threadid),e.__gc()}))},start:function(){return this.each((function(e){if(!e.$inDesign)if(e._threadid)xui.Thread.resume(e._threadid);else{var t=e.properties,i=e.boxing(),r=xui.Thread.repeat((function(t){return(!e.$onTime||!1!==e.$onTime(e,t))&&(!e.onTime||!1!==i.onTime(e,t))&&void 0}),t.interval,(function(t){e.onStart&&i.onStart(e,t)}),(function(t){e.onEnd&&i.onEnd(e,t)}));e._threadid=r.id}}))},suspend:function(){return this.each((function(e){e._threadid&&xui.Thread.suspend(e._threadid),e.onSuspend&&e.boxing().onSuspend(e,e._threadid)}))},getParent:function(){return this.parent&&this.parent.boxing()},getChildrenId:function(){return this.childrenId}},Static:{_objectProp:{tagVar:1,propBinder:1},_beforeSerialized:function(e){var t={};xui.merge(t,e,"all");var i=t.properties=xui.clone(e.properties,!0);if(e.box._objectProp)for(var r in e.box._objectProp)r in i&&i[r]&&(xui.isHash(i[r])||xui.isArr(i[r]))&&xui.isEmpty(i[r])&&delete i[r];return t},DataModel:{autoStart:!0,interval:1e3},EventHandlers:{onTime:function(e,t){},onStart:function(e,t){},onSuspend:function(e,t){},onEnd:function(e,t){}}}}),xui.Class("xui.MessageService","xui.absObj",{Instance:{_ini:xui.Timer.prototype._ini,_after_ini:function(e){if(!e.$inDesign){var t,i=e.properties;(t=i.recipientType||i.msgType)&&e.boxing().setRecipientType(t,!0)}},destroy:function(){this.each((function(e){if(!e.$inDesign){var t,i=e.$xid;(t=e.properties.msgType)&&xui.arr.each(t.split(/[\s,;:]+/),(function(e){xui.unsubscribe(e,i)})),e.__gc()}}))},broadcast:function(e,t,i,r,o,n,a,s,u,l,d){return this.each((function(c){var p=c.boxing();xui.arr.each(e.split(/[\s,;:]+/),(function(e){xui.publish(e,[t,i,r,o,n,a,s,u,l,function(){xui.tryF(d),c.onReceipt&&c.boxing().onReceipt.apply(p,[c,e,xui.toArr(arguments)])}],null,p)}))}))},getParent:xui.Timer.prototype.getParent,getChildrenId:xui.Timer.prototype.getChildrenId},Static:{_objectProp:xui.Timer._objectProp,_beforeSerialized:xui.Timer._beforeSerialized,DataModel:{dataBinder:null,dataField:null,recipientType:{ini:"",set:function(e){var t,i=this,r=i.properties,o=i.$xid;(t=r.recipientType)&&xui.arr.each(t.split(/[\s,;:]+/),(function(e){xui.unsubscribe(e,o)})),(t=r.recipientType=e||"")&&xui.arr.each(t.split(/[\s,;:]+/),(function(e){xui.subscribe(e,o,(function(){var e=xui.toArr(arguments),t=i.boxing();e.unshift(i),i.onMessageReceived&&t.onMessageReceived.apply(t,e)}),r.asynReceive)}))}},asynReceive:!1},EventHandlers:{onMessageReceived:function(e,t,i,r,o,n,a,s,u,l,d){},onReceipt:function(e,t,i){}}}}),xui.Class("xui.ExcelFormula",null,{Static:{MAXCOUNT:256,Supported:function(){var flatten=function(e){for(var t,i=[],r=0,o=(e=xui.toArr(e)).length;r<o;r++)xui.isArr(t=e[r])?i=i.concat(t):i.push(t);return i};return{SUM:function(){for(var e,t,i=0,r=flatten(arguments),o=0,n=r.length;o<n;++o)"number"==typeof(e=r[o])?i+=e:"string"==typeof e&&(t=parseFloat(e),xui.isNaN(t)||(i+=t));return i},AVERAGE:function(){for(var e,t,i=0,r=flatten(arguments),o=0,n=r.length;o<n;++o)"number"==typeof(e=r[o])?i+=e:"string"==typeof e&&(t=parseFloat(e),xui.isNaN(t)||(i+=t));return i/n},COUNT:function(){for(var e,t=0,i=flatten(arguments),r=0,o=i.length;r<o;++r)"string"!=(e=typeof i[r])&&"number"!==e||t++;return t},MIN:function(){return Math.min.apply(Math,flatten(arguments))},MAX:function(){return Math.max.apply(Math,flatten(arguments))},ROUND:function(){return Math.round.apply(Math,arguments)},FIXED:function(){return xui.toFixedNumber.apply(xui,arguments)},CHOOSE:function(){var e=arguments;return xui.isNumb(e[0])&&e[e[0]]||""},CONCATENATE:function(){return flatten(arguments).join("")},ABS:function(e){return Math.abs(e)},ISNUMBER:function(e){return xui.isFinite(e)},NOW:function(){return new Date},TODAY:function(){return xui.Date.getTimSpanStart(new Date,"DAY")},IF:function(a,b,c){return eval(a)?b:c},AND:function(){return!!eval(xui.toArr(arguments).join("&&"))},OR:function(){return!!eval(xui.toArr(arguments).join("||"))},NOT:function(e){return!e}}}(),toColumnChr:function(e){var t="";for(e-=1;e>=0;)t=String.fromCharCode(e%26+97)+t,e=Math.floor(e/26)-1;return t.toUpperCase()},toColumnNum:function(e){e=e.split("");for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=0,r=e.length-1,o=0;i<e.length;i+=1,r-=1)o+=Math.pow(t.length,r)*(t.indexOf(e[i])+1);return o},toCoordinate:function(e,t,i){var r,o,n=e.toUpperCase();return t||0===t||(t=-1),r=parseInt(n.match(/[0-9]+/)[0],10)+t,o=this.toColumnNum(n.match(/[A-Z]+/)[0])+t,i?[r,o]:{col:o,row:r}},toCellId:function(e,t,i){return this.toColumnChr(e+(i||1))+(t+(i||1))},getCellRanges:function(e,t,i,r){var o=this,n=/[A-Z]+/,a=/[0-9]+/;n.test(e)||(e="A"+e),a.test(e)||(e+="1"),n.test(t)||(t=o.toColumnChr(i||o.MAXCOUNT)+t),a.test(t)||(t+=r||o.MAXCOUNT);var s,u,l=o.toCoordinate(e,0),d=o.toCoordinate(t,0),c=l.col,p=d.col,h=l.row,f=d.row,x=[];if(c<p)for(u=c;u<=p;u++)if(h<f)for(s=h;s<=f;s++)x.push(o.toColumnChr(u)+s);else for(s=h;s>=f;s--)x.push(o.toColumnChr(u)+s);else for(u=c;u>=p;u--)if(h<f)for(s=h;s<=f;s++)x.push(o.toColumnChr(u)+s);else for(s=h;s>=f;s--)x.push(o.toColumnChr(u)+s);return x},validate:function(formula){var str;if(xui.isFun(formula))str=formula+"";else{if(!/^\s*\=\s*/.test(formula))return!1;str=formula.replace(/^\s*\=\s*/,"")}if(str=str.replace(/(\b)([\?_])([0-9]+\b)/g,"1").replace(/(\b[A-Z]+)([\?_])(\b)/g,"1"),/function\s*\(/.test(str))try{str=xui.fun.body(str),new Function("",str)}catch(e){return xui._debugInfo("throw","#VALUE! ",formula,str,e),!1}else{var fake=function(){return 1},reg=new RegExp(xui.toArr(this.Supported,!0).join("|"),"g");if(str=xui.replace(str,[[/"(\\.|[^"\\])*"/,"1"],[/'(\\.|[^'\\])*'/,"1"],[/\{[^}]+\}/,"1"],[/([A-Z\d]+\s*\:\s*[A-Z\d]+)/,"1"],[/([A-Z]+[\d]+)/,"1"],[/[=<>]+/g,function(e){return"="==e[0]?"==":"<>"==e[0]?"!=":e[0]}]]),/[A-Z_$]/.test(str.replace(reg,"")))return!1;str=str.replace(reg,"fake");try{eval(str)}catch(e){return xui._debugInfo("throw","#VALUE! ",formula,str,e),!1}}return!0},getRefCells:function(e,t,i){return this._parse(e,!1,t,i)},parse:function(e){return this._parse(e,null)},calculate:function(e,t,i,r){return this._parse(e,t||!0,i,r)},_parse:function(formula,cellsMap,colLimited,rowLimited){var ret,ns=this,Supported=ns.Supported,RANGE=function(e,t,i){for(var r=ns.getCellRanges(t,i,colLimited,rowLimited),o=0,n=r.length;o<n;o++)r[o]=e[r[o]];return r},doParse=function(formula,CELLS){var cellHash,rtn,str=formula,f=function(e){if(e[8])return cellHash&&(e[8]in cellHash||(cellHash[e[8]]=1)),'CELLS["'+e[8]+'"]';if(e[6]&&e[7]){if(cellHash)for(var t=ns.getCellRanges(e[6],e[7],colLimited,rowLimited),i=0,r=t.length;i<r;i++)t[i]in cellHash||(cellHash[t[i]]=1);return'RANGE(CELLS, "'+e[6]+'","'+e[7]+'")'}return e[10]&&e[11]?'Supported["'+e[10]+'"]'+e[11]:void 0};if(cellHash={},!ns.validate(str))return!1;if(xui.isFun(str)?str+="":str=str.replace(/^\s*\=\s*/,""),/function\s*\(/.test(str)){str=xui.fun.body(str),str=xui.replace(str,[[/\/\*[^*]*\*+([^\/][^*]*\*+)*\//,"$0"],[/\/\/[^\n]*/,"$0"],[/\/(\\[\/\\]|[^*\/])(\\.|[^\/\n\\])*\/[gim]*/,"$0"],[/"(\\.|[^"\\])*"/,"$0"],[/'(\\.|[^'\\])*'/,"$0"],[/\b([A-Z]+[\d]+)\b/,function(e){return cellHash[e[0]]=1,e[0]}]]);try{if(!1===cellsMap)rtn=cellHash;else{!0===cellsMap&&(cellsMap={});var pre="var map=arguments[0]";xui.each(cellHash,(function(e,t){pre+=", \n",pre+=t+" = map['"+t+"']"})),str=pre+";\n"+str,rtn=xui.isHash(cellsMap)?new Function("",str).call(null,CELLS,formula):str}}catch(e){xui._debugInfo("throw","#VALUE! ",formula,str,e)}finally{return rtn}}else{str=xui.replace(str,[[/"(\\.|[^"\\])*"/,"$0"],[/'(\\.|[^'\\])*'/,"$0"],[/([A-Z\d]+)\s*\:\s*([A-Z\d]+)/,f],[/[A-Z]+[\d]+/,f],[/([A-Z]+)(\s*\()/,f],[/[=<>]+/g,function(e){return"="==e[0]?"==":"<>"==e[0]?"!=":e[0]}]]);try{!1===cellsMap?rtn=cellHash:(!0===cellsMap&&(cellsMap={}),rtn=xui.isHash(cellsMap)?eval(str):str)}catch(e){xui._debugInfo("throw","#VALUE! ",formula,str,e)}finally{return rtn}}};return ret=doParse(formula,cellsMap),!xui.isNaN(ret)&&ret}}}),xui.Class("xui.APICaller","xui.absObj",{Instance:{_ini:xui.Timer.prototype._ini,_after_ini:function(e,t,i){e.name||e.Instace.setName(i)},destroy:function(){this.each((function(e){if(!e.destroyed){var t=e.box,i=e.properties.name;delete t._pool[i],e.__gc()}}))},setHost:function(e,t){var i=this;return e&&t&&i.setName(t),arguments.callee.upper.apply(i,arguments)},setQueryData:function(e,t){return this.each((function(i){t?xui.set(i.properties.queryData,(t||"").split("."),e):i.properties.queryData=e||{}}))},setQueryArgs:function(e,t){return this.each((function(i){t?xui.set(i.properties.queryArgs,(t||"").split("."),e):i.properties.queryArgs=e||{}}))},invoke:function(e,t,i,r,o,n,a){var s=this,u=s.constructor,l=s.get(0),d=l.properties,c=xui.$cache.functions,p=c["$APICaller:beforeInvoke"],h=c["$APICaller:beforeData"],f=c["$APICaller:onError"];if(!(xui.isFun(p)&&!1===p(l,m)||xui.isHash(p)&&xui.isArr(p.actions)&&!1===xui.pseudocode._callFunctions(p,[l,m],s.getHost(),null,null,"$APICaller:beforeInvoke")||l.beforeInvoke&&!1===l.boxing().beforeInvoke(l,m))){var x=d.responseType,g=d.requestType,m=d.requestId,b=d.queryURL,v=d.proxyType.toLowerCase(),y=d.queryUserName,A=d.queryPassword,_=d.queryData,w=xui.clone(d.queryArgs),C=d.oAuth2Token,I=xui.clone(d.queryOptions),E=xui.clone(d.queryHeader),S=d.requestDataSource,D=d.responseDataTarget,k=d.responseCallback;if(b=xui.adjustVar(b),"sajax"==v?v="jsonp":"iajax"==v&&(v="xdmi"),"FORM"!=g&&"JSON"!=g||(w="string"==typeof w?xui.unserialize(w):w),w||(w={}),d.avoidCache){for(var $=0,N="_rand_";w.hasOwnProperty(N);)N="_rand_"+ ++$;w[N]=xui.rand()}if(S&&S.length)for(var $ in S){var M,T,R=S[$];switch(R.type){case"databinder":if(P=xui.DataBinder.getFromName(R.name)){if("force"!==o&&!P.updateDataFromUI())return;T=(R.path||"").split("."),xui.isHash(M=xui.get(w,T))?xui.merge(M,P.getData(),"without"):xui.set(w,T,P.getData())}break;case"form":if((P=xui.get(l,["host",R.name]))&&P.Class["xui.absContainer"]&&P.getRootNode()){if(!("force"===o||P.checkValid()&&P.checkRequired()))return;T=(R.path||"").split("."),xui.isHash(M=xui.get(w,T))?xui.merge(M,P.getFormValues(),"without"):xui.set(w,T,P.getFormValues())}}}var B={header:{}};if(xui.isEmpty(E)||xui.merge(B.header,E),I.header&&!xui.isEmpty(I.header)&&(xui.merge(B.header,I.header),delete I.header),("SOAP"==x||"SOAP"==g)&&(u.WDSLCache||(u.WDSLCache={}),!u.WDSLCache[b])){var L=xui.SOAP.getWsdl(b,(function(e){l.afterInvoke&&l.boxing().afterInvoke(l,e,m),xui.isFun(f)?f(e,m,l):xui.isHash(f)&&xui.isArr(f.actions)&&xui.pseudocode._callFunctions(f,[e,m,l],s.getHost(),null,null,"$APICaller:onError"),l.onError&&l.boxing().onError(l,e,m),xui.tryF(t,arguments,this),xui.tryF(r,arguments,this)}));if(!L)return;u.WDSLCache[b]=L}switch(x){case"TEXT":B.rspType="text";break;case"JSON":B.rspType="json";break;case"XML":v="ajax",B.rspType="xml";break;case"SOAP":v="ajax",B.rspType="xml";var F=xui.SOAP.getNameSpace(u.WDSLCache[b]),O=(F.lastIndexOf("/")!=F.length-1?F+"/":F)+(w.methodName||"");B.header.SOAPAction=O}switch(g){case"FORM":w="string"==typeof w?xui.unserialize(w):w;break;case"JSON":B.reqType="json","auto"==d.queryMethod&&(B.method="POST"),w="string"==typeof w?w:xui.urlEncode(w);break;case"XML":B.reqType="xml",v="ajax",B.method="POST",y&&A&&(B.username=y,B.password=A,B.header.Authorization="Basic "+u._toBase64(y+":"+A)),w="string"==typeof w?w:xui.XMLRPC.wrapRequest(w);break;case"SOAP":B.reqType="xml",v="ajax",B.method="POST",y&&A&&(B.username=y,B.password=A,B.header.Authorization="Basic "+u._toBase64(y+":"+A)),w="string"==typeof w?w:xui.SOAP.wrapRequest(w,u.WDSLCache[b])}C&&(B.header.Authorization="Bearer "+C),"ajax"!=v&&(B.asy=!0),"jsonp"==v&&(B.method="GET"),"asy"in(a=a||{})||(a.asy=!!d.queryAsync),"method"in a||"auto"==d.queryMethod||(a.method=d.queryMethod),"onEnd"in a||(a.onEnd=r),"onStart"in a||(a.onStart=i),xui.merge(a,I),xui.merge(a,B,"all"),a.proxyType=v,_&&(a.data=_),xui.isEmpty(a.header)&&delete a.header;var P,H={};xui.isEmpty(d.fakeCookies)||(a.$onStart=function(){xui.each(d.fakeCookies,(function(e,t){xui.isSet(P=xui.Cookies.get(t))&&(H[t]=P,xui.Cookies.remove(t))})),xui.Cookies.set(d.fakeCookies,1,"/")}),xui.isEmpty(d.fakeCookies)||(a.$onEnd=function(){xui.each(d.fakeCookies,(function(e,t){xui.Cookies.remove(t)})),xui.Cookies.set(H)});var U=xui._getrpc(b,w,a).apply(null,[b,w,function(t){var i;return"XML"!=x&&"SOAP"!=x||xui.isHash(t)||(xui.isStr(t)&&(t=xui.XML.parseXML(t)),"XML"==x?t=xui.XMLRPC.parseResponse(t):"SOAP"==x&&(t=xui.SOAP.parseResponse(t,w.methodName,u.WDSLCache[b]))),l.afterInvoke&&(i=l.boxing().afterInvoke(l,t,m),xui.isSet(i)&&(t=i),i=null),(!xui.isFun(h)||!1!==h(t,m,l))&&(!xui.isHash(h)||!xui.isArr(h.actions)||!1!==xui.pseudocode._callFunctions(h,[t,m,l],s.getHost(),null,null,"$APICaller:beforeData"))&&(!l.beforeData||!1!==l.boxing().beforeData(l,t,m))&&(D&&D.length&&xui.arr.each(D,(function(e){var i,r=e.path?xui.get(t,e.path.split(".")):t;switch(e.type){case"alert":r=xui.stringify(r),xui.Coder&&(r=xui.Coder.formatText(r)),alert(r);break;case"log":xui.log(r,l);break;case"databinder":(i=xui.DataBinder.getFromName(e.name))&&(i.setData(r),i.updateDataToUI());break;case"form":(i=xui.get(l,["host",e.name]))&&i.Class["xui.absContainer"]&&i.setFormValues(r)}})),k&&k.length&&xui.arr.each(k,(function(e){var i,r;switch(e.type){case"host":(i=s.getHost())&&(i=i.functions)&&(i=i[e.name])&&(r=s.getHost());break;default:(i=xui.$cache.functions[e.name])&&(r=null)}i&&i.actions&&xui.isArr(i.actions)&&xui.pseudocode._callFunctions(i,[t,l],r,null,null,(r&&r.alias)+"."+s.alias+"."+e.name)})),l.onData&&l.boxing().onData(l,t,m),void xui.tryF(e,arguments,this))},function(e,i,r,o,n,a){l.afterInvoke&&l.boxing().afterInvoke(l,e,m),D&&D.length&&xui.arr.each(D,(function(t,i){switch(t.type){case"alert":e=xui.stringify(e),xui.Coder&&(e=xui.Coder.formatText(e)),alert(e);break;case"log":xui.log(e)}})),xui.isFun(f)?f(e,m,l,o,n,a):xui.isHash(f)&&xui.isArr(f.actions)&&xui.pseudocode._callFunctions(f,[e,m,l,o,n,a],s.getHost(),null,null,"$APICaller:onError"),l.onError&&l.boxing().onError(l,e,m,o,n,a),xui.tryF(t,arguments,this)},n,a]);if("busy"==o)xui.observableRun((function(e){U.threadid=e,U.start()}));else{if("return"==o)return U;U.start()}}}},Static:{WDSLCache:{},$nameTag:"api_",_pool:{},_objectProp:{tagVar:1,propBinder:1,queryArgs:1,queryHeader:1,queryOptions:1,fakeCookies:1,requestDataSource:1,responseDataTarget:1,responseCallback:1},destroyAll:function(){this.pack(xui.toArr(this._pool,!1),!1).destroy(),this._pool={}},getFromName:function(e){var t=this._pool[e];return t&&t.boxing()},_toBase64:function(e){var t,i,r,o,n,a,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=[],d=0;do{o=(t=e.charCodeAt(d++))>>2,n=(3&t)<<4|(i=e.charCodeAt(d++))>>4,a=(15&i)<<2|(r=e.charCodeAt(d++))>>6,s=63&r,isNaN(i)?a=s=64:isNaN(r)&&(s=64),l.push(u.charAt(o)+u.charAt(n)+u.charAt(a)+u.charAt(s))}while(d<e.length);return l.join("")},_beforeSerialized:xui.Timer._beforeSerialized,DataModel:{dataBinder:null,dataField:null,requestId:"",queryAsync:!0,queryURL:"",avoidCache:!0,oAuth2Token:"",queryUserName:"",queryPassword:"",queryMethod:{ini:"GET",listbox:["auto","GET","POST","PUT","DELETE","HEAD","PATCH","OPTIONS"]},requestType:{ini:"FORM",listbox:["JSON","FORM","XML","SOAP","BLOB","STREAM","ASIS"]},responseType:{ini:"JSON",listbox:["JSON","TEXT","XML","SOAP","FORMDATA","BLOB","ARRAYBUFFER"]},requestDataSource:{ini:[]},responseDataTarget:{ini:[]},responseCallback:{ini:[]},queryArgs:{ini:{}},queryData:{ini:{}},queryHeader:{ini:{}},queryOptions:{ini:{}},fakeCookies:{ini:{}},proxyType:{ini:"FETCH",listbox:["auto","AJAX","JSONP","XDMI","FETCH"]},name:{set:function(e){var t=this,i=t.properties.name,r=t.box._pool,o=r[i],n=r[e];r[t.properties.name=e]=t,n&&!o&&(t._n=n._n),o&&delete r[i]}},proxyInvoker:{inner:!0,trigger:function(){var e=this.get(0).properties,t=e.responseDataTarget,i=e.responseCallback,r=function(r){e.responseDataTarget=t,e.responseCallback=i,r=xui.stringify(r),xui.Coder&&(r=xui.Coder.formatText(r)),alert(r)};e.responseDataTarget=[],e.responseCallback=[],this.invoke(r,r)}}},EventHandlers:{beforeInvoke:function(e,t){},afterInvoke:function(e,t,i){},onData:function(e,t,i){},beforeData:function(e,t,i){},onError:function(e,t,i,r,o,n){}}}}),xui.Class("xui.MQTT","xui.absObj",{Instance:{_ini:xui.Timer.prototype._ini,_after_ini:function(e){var t=e.properties,i=function(){xui.asyRun((function(){e.$inDesign||e.host&&e.host.$inDesign||t.autoConn&&e.boxing().connect()}))};xui.get(window,"Paho.Client")?i():xui.include("Paho.Client",t.libCDN,(function(){e&&e.box&&i&&i()}),null,!1,{cache:!0})},destroy:function(){this.each((function(e){e.$inDesign||(e.boxing().disconnect(),e.__gc())}))},getParent:xui.Timer.prototype.getParent,getChildrenId:xui.Timer.prototype.getChildrenId,connect:function(){var e,t,i=this.get(0),r=i.properties,o=xui.str.trim(r.path),n=xui.str.trim(r.server);o.length&&"/"!=o[0]&&(o="/"+o),(e=i.$mqtt=new window.Paho.Client(n,parseInt(r.port,10),o,r.clientId)).onConnected=function(e){i.onConnSuccess&&i.boxing().onConnSuccess(i,e)},e.onConnectionLost=function(e){i&&i.box&&(i.boxing()._clear(),i.onConnLost&&i.boxing().onConnLost(i,e))},e.onMessageDelivered=function(e){i.onMsgDelivered&&i.boxing().onMsgDelivered(i,e.payloadString,e)},e.onMessageArrived=function(e){i.onMsgArrived&&i.boxing().onMsgArrived(i,e.payloadString,e)};var a={cleanSession:r.cleanSession,useSSL:r.useSSL,onSuccess:function(){i.$mqtt_connected=1,i.$mqtt_subed={},r&&r.autoSub&&xui.arr.each(r.subscribers,(function(e){var t=e.topic||e+"",r=xui.isHash(e)?xui.copy(e):{};delete r.topic,r.qos=parseInt(r.qos)||0,i.boxing().subscribe(t,r)}))},onFailure:function(e){i&&i.box&&(i.onConnFailed?i.boxing().onConnFailed(i,e):xui.log(e.errorMessage+"["+e.errorCode+"]"),i.boxing()._clear())}};if((t=r.timeout)&&(a.timeout=t),(t=r.userName)&&(a.userName=t),(t=r.password)&&(a.password=t),(t=r.keepAliveInterval)&&(a.keepAliveInterval=t),r.willTopic&&r.willMessage){var s=new window.Paho.Message(r.willTopic);s.destinationName=r.willMessage,s.qos=parseInt(r.willQos)||0,s.retained=r.willRetained,a.willMessage=s}e.connect(a)},_clear:function(){var e=this.get(0),t=e.$mqtt;t&&(delete t.onConnected,delete t.onConnectionLost,delete t.onMessageDelivered,delete t.onMessageArrived),delete e.$mqtt_connected,delete e.$mqtt_subed,delete e.$mqtt},disconnect:function(){var e=this.get(0),t=e.$mqtt;t&&e.$mqtt_connected&&t.disconnect(),this._clear()},subscribe:function(e,t){var i=this.get(0),r=i.properties,o=i.$mqtt;if(o&&i.$mqtt_connected){var n=xui.isHash(t)?xui.copy(t):{};i.$mqtt_subed||(i.$mqtt_subed={}),n.qos=parseInt(n.qos)||0,n.onSuccess=function(){i.$mqtt_subed[e]=new Date,i.onSubSuccess&&i.boxing().onSubSuccess(i,e)},n.onFailure=function(t){delete i.$mqtt_subed[e],i.onSubFailed&&i.boxing().onSubFailed(i,t,e)},n.timeout=r.timeout,o.subscribe(e,n)}},unsubscribe:function(e,t){var i=this.get(0),r=i.properties,o=i.$mqtt;if(o&&i.$mqtt_connected&&i.$mqtt_subed&&i.$mqtt_subed[e]){var n=xui.isHash(t)?xui.copy(t):{};n.onSuccess=function(){delete i.$mqtt_subed[e],i.onUnsubSuccess&&i.boxing().onUnsubSuccess(i,e)},n.onFailure=function(t){i.onUnsubFailed&&i.boxing().onUnsubFailed(i,t,e)},n.timeout=r.timeout,o.unsubscribe(e,n)}},publish:function(e,t,i,r){var o=this.get(0),n=(o.properties,o.$mqtt);n&&o.$mqtt_connected&&o.$mqtt_subed&&o.$mqtt_subed[e]&&n.publish(e,"string"==typeof t?t:xui.stringify(t),parseInt(i)||0,r||!1)}},Static:{_objectProp:{tagVar:1,propBinder:1,subscribers:1},_beforeSerialized:xui.Timer._beforeSerialized,DataModel:{dataBinder:null,dataField:null,libCDN:"https://cdn.jsdelivr.net/npm/paho-mqtt@1.1.0/paho-mqtt-min.js",autoConn:!0,autoSub:!0,subscribers:[],server:"broker.mqttdashboard.com",port:"8000",path:"mqtt",clientId:"xui_mqtt_client",timeout:30,userName:"",password:"",keepAliveInterval:60,cleanSession:!0,useSSL:!1,reconnect:!0,willTopic:"",willMessage:"",willQos:{ini:0,listbox:[0,1,2]},willRetained:!1},EventHandlers:{onConnSuccess:function(e,t){},onConnFailed:function(e,t){},onConnLost:function(e,t){},onSubSuccess:function(e,t){},onSubFailed:function(e,t,i){},onUnsubSuccess:function(e,t){},onUnsubFailed:function(e,t,i){},onMsgDelivered:function(e,t,i){},onMsgArrived:function(e,t,i){}}}}),xui.Class("xui.DataBinder","xui.absObj",{Instance:{_ini:xui.Timer.prototype._ini,destroy:function(){this.each((function(e){var t=e.box,i=e.properties.name;xui.arr.each(e._n,(function(e){e&&t._unBind(i,e)})),delete t._pool[i],e.__gc()}))},setHost:function(e,t){var i=this;return e&&t&&i.setName(t),arguments.callee.upper.apply(i,arguments)},isDirtied:function(){for(var e=this.constructor._getBoundElems(this.get(0)),t=0,i=e.length;t<i;t++){var r,o=e[t];if(o.box["xui.absValue"]&&(r=o.boxing()).getUIValue()+" "!=r.getValue()+" ")return!0}return!1},checkValid:function(e){var t=!0,i=this.get(0);return!!this.checkRequired(e)&&(xui.absValue.pack(this.constructor._getBoundElems(i),!1).each((function(r){if(!r.boxing().checkValid()){if(!e)return r.beforeInputAlert&&!1===r.boxing().prf.beforeInputAlert(i,r,"invalid")||xui.alert("$inline.invalid",xui.getRes("$inline.invalid")+(r.properties.labelCaption?" : "+r.properties.labelCaption:""),(function(){r&&r.renderId&&r.boxing().activate()})),t=!1;t=!1}})),t)},checkRequired:function(e){var t,i=!0,r=this.get(0);return xui.absValue.pack(this.constructor._getBoundElems(r),!1).each((function(o){if(o.properties.required&&!(t=o.boxing().getUIValue())&&0!==t){if(!e)return o.beforeInputAlert&&!1===o.boxing().prf.beforeInputAlert(r,o,"required")||xui.alert("$inline.required",xui.getRes("$inline.required")+(o.properties.labelCaption?" : "+o.properties.labelCaption:""),(function(){o&&o.renderId&&o.boxing().activate()})),i=!1;i=!1}})),i},getUI:function(e){var t;return e?xui.arr.each(this.constructor._getBoundElems(this.get(0)),(function(i){var r=i.properties;if((r.dataField||r.name||i.alias)==e)return t=i.boxing(),!1})):t=xui.UI.pack(this.constructor._getBoundElems(this.get(0)),!1),t},getUIValue:function(e,t){var i=this.get(0),r={};return xui.arr.each(this.constructor._getBoundElems(i),(function(i){if(i.box["xui.absValue"]){var o,n=i.properties,a=i.boxing(),s=a.getUIValue(),u=n.dataField||n.name||i.alias;t&&s+" "==a.getValue()+" "||(a.getCaption?(-1!=u.indexOf(":")&&(o=u.split(":")),o&&o[0]&&o[1]?(r[o[0]]=s,r[o[1]]=a.getCaption()):e?xui.set(r,u,{value:s,caption:a.getCaption()},!0):xui.set(r,u,s,!0)):xui.set(r,u,s,!0))}})),r},getDirtied:function(e){return this.getUIValue(e,!0)},getData:function(e,t,i){var r=this.get(0);(r.$inDesign||t)&&(r.properties.data={},this.updateDataFromUI(!1,!1,!1,null,null,i,!1));var o=r.properties.data;return xui.isSet(e)?xui.get(o,e,!0):o},setData:function(e,t,i){var r=this.get(0),o=r.properties;return!1===e?xui.each(o.data,(function(e,t){o.data[t]=null})):xui.isSet(e)?xui.isHash(e)?o.data=e:xui.set(o.data,e,t,!0):o.data={},(r.$inDesign||i)&&this.updateDataToUI(),this},resetValue:function(){return xui.arr.each(this.constructor._getBoundElems(this.get(0)),(function(e,t){(t=e.properties.value)!==e.properties.$UIvalue&&e.boxing().resetValue(t)})),this},clearValue:function(){return xui.absValue.pack(this.constructor._getBoundElems(this.get(0)),!1).resetValue(null),this},updateValue:function(){return xui.absValue.pack(this.constructor._getBoundElems(this.get(0)),!1).updateValue(),this},updateDataFromUI:function(e,t,i,r,o,n,a){var s,u=this,l=u.get(0),d=l.properties,c={};if(!n){if(!u.checkValid())return!1;if(!u.checkRequired())return!1}return xui.merge(c,d.data,(function(e,t){return!o||o===t||!!xui.isArr(o)&&-1!=xui.arr.indexOf(o,t)})),xui.arr.each(u.constructor._getBoundElems(l),(function(r){var n,a,s=r.properties,u=(r.box.$EventHandlers,r.boxing()),l=s.dataField||s.name||r.alias;if("function"==typeof u.setCaption&&-1!=l.indexOf(":")&&(n=l.split(":"))[1]&&n[2]&&(l=n[0],a=n[1]),!o||o===l||xui.isArr(o)&&-1!=xui.arr.indexOf(o,l)){var d,p=r.boxing(),h=r.box["xui.absValue"]?p.getUIValue(xui.isBool(i)?i:r.__returnArray):null,f=xui.get(c,l,!0);if(xui.isHash(f)){var x=f.properties,g=f.theme,m=f.CC,b=f.CA,v=f.CS;x&&delete f.properties,g&&delete f.theme,b&&delete f.CA,m&&delete f.CC,v&&delete f.CS,xui.filter(f,(function(e,t){return!!(t in s)})),xui.isEmpty(f)||xui.each(f,(function(e,t){t in s&&(f[t]=s[t])})),xui.isHash(x)&&(xui.filter(x,(function(e,t){return t in s&&!(t in f)})),xui.isEmpty(x)||(xui.each(x,(function(e,t){t in s&&(x[t]=s[t])})),f.properties=x)),g&&(f.theme=r.theme),b&&(f.CA=xui.clone(r.CA,!0)),m&&(f.CC=xui.clone(r.CC,!0)),v&&(f.CS=xui.clone(r.CS,!0)),"caption"in s&&p.getCaption&&(a?c[a]=p.getCaption():("caption"in f||t)&&(x&&"caption"in x?x.caption=p.getCaption():f.caption=p.getCaption())),xui.isDefined(h)&&"value"in s&&(x&&"value"in x?x.value=h:f.value=h)}else r.box["xui.UI.ComboInput"]&&"file"==s.type?f=r:"caption"in s?(d="function"==typeof p.getCaption?p.getCaption():s.caption,a?(f=h,c[a]=d):f=t?!d&&!h||d==h?h:{value:h,caption:d}:h):f=h,xui.set(c,l,f,!0);!1!==e&&r.renderId&&r.box["xui.absValue"]&&p.updateValue()}})),r&&(c=xui.tryF(r,[c,l],this)),!a&&l.afterUpdateDataFromUI&&(s=this.afterUpdateDataFromUI(l,c),xui.isHash(s)&&(c=s),s=null),xui.merge(l.properties.data,c,"all"),!0},updateDataToUI:function(e,t,i){var r,o,n,a,s,u,l,d,c,p,h=this,f=h.get(0),x=f.properties,g={};return xui.merge(g,x.data,(function(e,i){return!t||t===i||!!xui.isArr(t)&&-1!=xui.arr.indexOf(t,i)})),e&&(g=xui.tryF(e,[g,f],h)),!i&&f.beforeUpdateDataToUI&&(p=h.beforeUpdateDataToUI(f,g),xui.isHash(p)&&(g=p),p=null),xui.arr.each(h.constructor._getBoundElems(f),(function(e){a=e.properties,e.box.$EventHandlers,r=a.dataField||a.name||e.alias,"function"==typeof e.boxing().setCaption&&-1!=r.indexOf(":")&&(o=r.split(":"))[1]&&o[2]&&(r=o[0],n=o[1]),(!t||t===r||xui.isArr(t)&&-1!=xui.arr.indexOf(t,r))&&g&&xui.isDefined(xui.get(g,r,!0))&&(s=xui.clone(xui.get(g,r,!0),null,2),c=u=undefined,l=e.boxing(),xui.isHash(s)?((d=s.properties)&&(xui.filter(d,(function(e,t){return t in a})),u=n&&d[n]||(xui.isSet(d.caption)?d.caption:null),c=xui.isSet(d.value)?d.value:null,delete d.caption,delete d.value,xui.isEmpty(d)||l.setProperties(d),delete s.properties),(d=s.theme)&&("function"==typeof l.setTheme&&l.setTheme(d),delete s.theme),(d=s.CS)&&(xui.isEmpty(d)||l.setCustomStyle(d),delete s.CS),(d=s.CC)&&(xui.isEmpty(d)||l.setCustomClass(d),delete s.CC),(d=s.CA)&&(xui.isEmpty(d)||l.setCustomAttr(d),delete s.CA),xui.isEmpty(s)||(xui.filter(s,(function(e,t){return t in a||t in s})),xui.isEmpty(s)||(u=xui.isSet(u)?u:n&&d[n]||xui.isSet(s.caption)?s.caption:null,c=xui.isSet(c)?c:xui.isSet(s.value)?s.value:null,delete s.caption,delete s.value,xui.isEmpty(s)||l.setProperties(s)))):(c=s,u=n&&d[n]||undefined),xui.isDefined(c)&&xui.isFun(l.resetValue)&&(l.resetValue(c),e.__returnArray=xui.isArr(c)),xui.isDefined(u)&&xui.isFun(l.setCaption)&&xui.tryF(l.setCaption,[u,!0],l))})),h}},Static:{$nameTag:"databinder_",_pool:{},_objectProp:{tagVar:1,propBinder:1,data:1},destroyAll:function(){this.pack(xui.toArr(this._pool,!1),!1).destroy(),this._pool={}},getFromName:function(e){var t=this._pool[e];return t&&t.boxing()},_beforeSerialized:xui.Timer._beforeSerialized,_getBoundElems:function(e){var t=[];return xui.arr.each(e._n,(function(e){e.behavior.PanelKeys?xui.absValue.pack(e.boxing().getChildren(null,!0)).each((function(e){t.push(e)})):e.box["xui.absValue"]&&t.push(e)})),xui.arr.removeDuplicate(t)},_bind:function(e,t){if(e){var i,r=this._pool[e];r||((i=new xui.DataBinder).setName(e),r=i.get(0)),t&&-1==xui.arr.indexOf(r._n,t)&&t.link(r._n,"databinder."+e)}},_unBind:function(e,t){t&&t.box&&this._pool[e]&&t.unLink("databinder."+e)},DataModel:{dataBinder:null,dataField:null,name:{set:function(e){var t=this,i=t.properties.name,r=t.box._pool,o=r[i],n=r[e];if(r[t.properties.name=e]=t,o&&!n&&t._n.length)for(var a=0,s=t._n.length;a<s;a++)xui.set(t._n[a],["properties","dataBinder"],e);n&&!o&&(t._n=n._n),o&&delete r[i]}},data:{ini:{}}},EventHandlers:{beforeInputAlert:function(e,t,i){},beforeUpdateDataToUI:function(e,t){},afterUpdateDataFromUI:function(e,t){}}}}),(xui.Locale.en||(xui.Locale.en={})).inline={$_$:1,ok:"O K",cancel:"Cancel",set:"SET",today:"Today",now:"Now",yes:"Yes",no:"No",noFlash:"No Flash PlugIn!",transparent:"transparent",required:"Required field",required2:"There is required field need to be filled out",invalid:"Invalid field",invalid2:"There is invalid field"},xui.Locale.en.date={WEEKS:{0:"Su",1:"Mo",2:"Tu",3:"We",4:"Th",5:"Fr",6:"Sa",7:"WK"},VIEWS:{"10 ms":"10 millisecond","100 ms":"100 milliseconds","1 s":"1 second","10 s":"10 seconds","1 n":"1 minute","5 n":"5 minutes","10 n":"10 minutes","30 n":"30 minutes","1 h":"1 hour","2 h":"2 hours","6 h":"6 hours","1 d":"1 day","1 w":"1 week","15 d":"15 days","1 m":"1 month","1 q":"1 quarter","1 y":"1 year","1 de":"10 years","1 c":"1 century"},MONTHS:{1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."},MS:"ms",S:"s",N:"n",H:"h",D:"d",W:"w",M:"m",Q:"q",Y:"y",DE:"de",C:"c",HN:function(e,t,i){return(1==t.length?"0":"")+t+":"+(1==i.length?"0":"")+i},DHN:function(e,t,i,r){return t+"th "+(1==i.length?"0":"")+i+":"+(1==r.length?"0":"")+r},MDHN:function(e,t,i,r,o){return i+"th "+xui.getRes("date.MONTHS."+t)+" "+(1==r.length?"0":"")+r+":"+(1==o.length?"0":"")+o},HNS:function(e,t,i,r){return(1==t.length?"0":"")+t+":"+(1==i.length?"0":"")+i+":"+(1==r.length?"0":"")+r},HNSMS:function(e,t,i,r,o){return(1==t.length?"0":"")+t+":"+(1==i.length?"0":"")+i+":"+(1==r.length?"0":"")+r+" "+(1==o.length?"00":2==o.length?"0":"")+o},YM:function(e,t,i){return xui.getRes("date.MONTHS."+i)+" "+t},YQ:function(e,t,i){return i+"Q "+t},YMD:function(e,t,i,r){return t+"-"+(1==i.length?"0":"")+i+"-"+(1==r.length?"0":"")+r},YMD2:function(e,t,i,r){return xui.getRes("date.MONTHS."+i)+" "+r+", "+t},MD:function(e,t,i){return xui.getRes("date.MONTHS."+t)+" "+i},YMDH:function(e,t,i,r,o){return t+"-"+(1==i.length?"0":"")+i+"-"+(1==r.length?"0":"")+r+" "+(1==o.length?"0":"")+o+":00"},YMDHN:function(e,t,i,r,o,n){return t+"-"+(1==i.length?"0":"")+i+"-"+(1==r.length?"0":"")+r+" "+(1==o.length?"0":"")+o+":"+(1==n.length?"0":"")+n},YMDHNS:function(e,t,i,r,o,n,a){return t+"-"+(1==i.length?"0":"")+i+"-"+(1==r.length?"0":"")+r+" "+(1==o.length?"0":"")+o+":"+(1==n.length?"0":"")+n+":"+(1==a.length?"0":"")+a},ALL:function(e,t,i,r,o,n,a,s){return t+"-"+(1==i.length?"0":"")+i+"-"+(1==r.length?"0":"")+r+" "+(1==o.length?"0":"")+o+":"+(1==n.length?"0":"")+n+":"+(1==a.length?"0":"")+a+" "+(1==s.length?"00":2==s.length?"0":"")+s}},xui.Locale.en.color={LIST:{FFFFFF:"White",FFFFF0:"Ivory",FFFFE0:"Light Yellow",FFFF00:"Yellow",FFFAFA:"Snow",FFFAF0:"Floral White",FFFACD:"Lemon Chiffon",FFF8DC:"Cornislk",FFF5EE:"Sea Shell",FFF0F5:"Lavender Blush",FFEFD5:"Papaya Whip",FFEBCD:"Blanched Almond",FFE4E1:"Misty Rose",FFE4C4:"Bisque",FFE4B5:"Moccasin",FFDEAD:"Navajo White",FFDAB9:"Peach Puff",FFD700:"Gold",FFC0CB:"Pink","FFB6C1 ":"Light Pink",FFA500:"Orange",FFA07A:"Light Salmon",FF8C00:"Dark Orange",FF7F50:"Coral",FF69B4:"Hot Pink",FF6347:"Tomato",FF4500:"Orange Red",FF1493:"Deep Pink",FF00FF:"Magenta",FF0000:"Red",FDF5E6:"Old Lace",FAFAD2:"Light Goldenrod Yellow",FAF0E6:"Linen",FAEBD7:"Antique White",FA8072:"Salmon",F8F8FF:"Ghost White",F5FFFA:"Medium Spring Green",F5F5F5:"White Smoke",F5DEB3:"Wheat",F4A460:"Sandy Brown",F0FFFF:"Azure",F0FFF0:"Honeydew",F0F8FF:"Alice Blue",F0E68C:"Khaki",F08080:"Light Coral",EEE8AA:"Pale Godenrod",EE82EE:"Violet",E9967A:"Dark Salmon",E6E6FA:"Lavender",E1FFFF:"Light Cyan",DEB887:"Bruly Wood",DDA0DD:"plum",DCDCDC:"Gainsboro",DC143C:"Crimson",DB7093:"Pale Violet Red",DAA520:"Gold Enrod",DA70D6:"Orchid",D8BFD8:"Thistle",D3D3D3:"Light Grey",D2B48C:"Tan",D2691E:"Chocolate",CD853F:"Peru",CD5C5C:"Indian Red",C71585:"Medium Violet Red",C0C0C0:"Silver",BDB76B:"Dark Khaki",BC8F8F:"Rosy Brown",BA55D3:"Medium Orchid",B22222:"Fire Brick",B0E0E6:"Pow Der Blue",B0C4DE:"Light Steel Blue",AFEEEE:"Pale Turquoise",ADFF2F:"Green Yellow",ADD8E6:"Light BLue",A9A9A9:"Dark Gray",A52A2A:"Brown",A0522D:"Sienna","9932CC":"Dark Orchid","98FB98":"Pale Green","9400D3":"Dark Voilet","9370DB":"Medium Purple","90EE90":"Light Green","8FBC8F":"Dark Sea Green","8B4513":"Saddle Brown","8B008B":"Dark Magenta","8B0000":"Dark Red","8A2BE2":"Blue Violet","87CEFA":"Light Sky Blue","87CEEB":"Sky Blue",808080:"Gray",808e3:"Olive",800080:"Purple",8e5:"Maroon","7FFFAA":"Auqamarin","7FFF00":"Chartreuse","7CFC00":"Lawn Green","7B68EE":"Medium Slate Blue",778899:"Light Slate Gray",708090:"Slate Gray","6B8E23":"Beige","6A5ACD":"Slate Blue",696969:"Dim Gray","6495ED":"Cornflower Blue","5F9EA0":"Cadet Blue","556B2F":"Olive Drab","4B0082":"Indigo","48D1CC":"Medium Turquoise","483D8B":"Dark Slate Blue","4682B4":"Steel Blue","4169E1":"Royal Blue","40E0D0":"Turquoise","3CB371":"Spring Green","32CD32":"Lime Green","2F4F4F":"Dark Slate Gray","2E8B57":"Sea Green","228B22":"Forest Green","20B2AA":"Light Sea Green","1E90FF":"Doder Blue",191970:"Midnight Blue","00FFFF":"Aqua","00FF7F":"Mint Cream","00FF00":"Lime","00FA9A":"Medium Aquamarine","00CED1":"Dark Turquoise","00BFFF":"Deep Sky Blue","008B8B":"Dark Cyan","008080":"Teal","008000":"Green","006400":"Dark Green","0000FF":"Blue","0000CD":"Medium Blue","00008B":"Dark Blue","000080":"Navy","000000":"Black"}},xui.Locale.en.editor={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",forecolor:"Font Color",bgcolor:"Background Color",left:"Align Left",center:"Align Center",right:"Align Right",justify:"Justify",indent:"Indent",outdent:"Outdent",ol:"Ordered List",ul:"Unordered List",hr:"Insert Horizontal Rule",unlink:"Remove Link",removeformat:"Remove Formatting",html:"HTML Editor",insertimage:"Insert Image",insertimage2:"Image URL:",createlink:"Insert Link",createlink2:"Link URL:",fontsize:"Font Size",fontname:"Font Family",formatblock:"Font Block",fontsizeList:"1,1(8pt);2,2(10pt);3,3(12pt);4,4(14pt);5,5(18pt);6,6(24pt);...,...",fontnameList:"Arial;Arial Black;Comic Sans MS;Courier New;Impact;Tahoma;Times New Roman;Trebuchet MS;Verdana;...",formatblockList:"p,Normal;h1,Heading1;h2,Heading2;h3,Heading3;h4,Heading4;h5,Heading5;h6,Heading6;...,..."},xui.Class("xui.Event",null,{Constructor:function(e,t,i,r){var o,n,a,s,u,l=xui.Event,d=window,c=document,p=0,h=xui.DragDrop;if(!(e=e||d.event)||!(a=t))return a=t=null,!1;t=null;var f=e.type,x=e.$xuievent,g=e.$xuitype,m=e.$xuiall;if(xui.browser.fakeTouch&&"click"==f&&xui.getData(["!document","$fakescrolling"]))return!1;if("xuitouchdown"==f&&(f="mousedown",x=1,m=0,g="beforeMousedown"),"mouseover"==f||"mouseout"==f){if(1!=(p=h&&h._profile.isWorking?1:2)&&i)return a=null,l.$FALSE;if(!l._handleMouseHover(e,a,1==p))return a=null,l.$FALSE;1==p&&(s=h&&h._dropElement)}else if((u=l._tabHookStack).length&&l._kb[f]&&9==(e.$key||e.keyCode||e.charCode)&&!1===l._handleTabHook(l.getSrc(e),u=u[u.length-1]))return void(a=null);if(o=r||l.getId(a),u=l._getProfile(o)){if("DOMMouseScroll"==f&&(f="mousewheel"),"mousedown"==f||"mousewheel"==f)xui.tryF(xui.Dom._blurTrigger,[u,e]);else if("resize"==f&&(f="size",xui.browser.ie&&d===a)){var b=xui.browser.contentBox&&c.documentElement.clientWidth||c.body.clientWidth,v=xui.browser.contentBox&&c.documentElement.clientHeight||c.body.clientHeight;if(u._w==b&&u._h==v)return void(a=null);u._w=b,u._h=v}var y,A,_,w=!0,C=[];for(y=0;y<=2&&(1!=p||0===y||e.$force);++y)2==p&&0===y||(_=l._type[f+y]||(l._type[f+y]=l._getEventName(f,y)),x&&!m&&_!==g||u._getEV(C,o,_,a.$xid));return(A=function(e,t){for(var i,r=0;i=arguments.callee.tasks[r++];)if(!1===i(u,e,t))return!1;return!0}).tasks=C,w=A(e,a.$xid),d===a&&"size"==f&&xui.asyRun((function(){A(e,a.$xid),A.tasks.length=0,delete A.tasks,A=a=null}),150),h?"drag"==f?h._onDrag=A:"dragover"==f&&(h._onDragover=A):"size"!==f&&(A.tasks.length=0,delete A.tasks,A=null),1==p&&("mouseover"==f&&h._dropElement==a.$xid&&s&&s!=a.$xid&&(l({type:"mouseout",target:n=xui.use(s).get(0),$xui:!0,$xuitype:"beforeMouseout",preventDefault:function(e){xui.Event.stopDefault(e)},stopPropagation:function(e){xui.Event.stopBubble(e)}},n),h.setDropElement(a.$xid)),"mouseout"==f&&!h._dropElement&&s&&s==a.$xid&&(l._preDroppable=o,xui.asyRun((function(){delete xui.Event._preDroppable}))),a.$xid==h._dropElement&&(w=!1)),!1===w&&l.stopBubble(e),w}},Static:{$FALSE:!!xui.browser.opr&&undefined,_type:{},_kb:{keydown:1,keypress:1,keyup:1},_reg:/(-[\w]+)|([\w]+$)/g,$eventhandler:function(){return xui.Event(arguments[0],this)},$eventhandler2:function(){return xui.Event(arguments[0],this,1)},$eventhandler3:function(){var e=arguments[0],t=xui.Event.getSrc(e||window.event),i=xui.Event(e,t);return!1===i?i:t!==this?xui.Event(e,this):void 0},$lastMouseupTime:0,$dblcInterval:500,$lastClickFunMark:0,_events:"mouseover,mouseout,mouseleave,mouseenter,mousedown,mouseup,mousemove,mousewheel,click,dblclick,contextmenu,keydown,keypress,keyup,scroll,blur,focus,load,unload,beforeunload,abort,change,select,submit,reset,error,move,size,dragbegin,drag,dragstop,dragleave,dragenter,dragover,drop,touchstart,touchmove,touchend,touchcancel,mspointerdown,mspointermove,mspointerup,mspointercancel,pointerdown,pointermove,pointerup,pointercancel".split(","),_addEventListener:function(e,t,i){var r,o,n,a,s,u=function(e){return e.replace(/^on|before|after/,"").toLowerCase()};if(e.addEventListener){var l=!1;try{var d=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("test",null,d)}catch(e){}return e.addEventListener(u(t),i,!!l&&{passive:!1}),!0}return s=!0,a=u(a=t),"function"==typeof e[t=s||!{touchstart:1,touchmove:1,touchend:1,touchcancel:1}[a]?"on"+a:a]&&(r=e[t],o=i,(n=function(){for(var e=arguments.callee._funs,t=0,i=e.length;t<i;t++)e[t].apply(this,arguments)})._funs=r._funs||[r],r._funs=null,n._funs.push(o),i=n),e[t]=i,!0},_removeEventListener:function(e,t,i){var r,o,n=function(e){return e.replace(/^on|before|after/,"").toLowerCase()};if(e.removeEventListener){var a=!1;try{var s=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,s)}catch(e){}return e.removeEventListener(n(t),i,!!a&&{passive:!1}),!0}return o=!0,r=n(r=t),e[t=o||!{touchstart:1,touchmove:1,touchend:1,touchcancel:1}[r]?"on"+r:r]===i?(e[t]=null,!0):!(!e[t]||!e[t]._funs||-1==xui.arr.indexOf(e[t]._funs,i)||(xui.arr.removeValue(e[t]._funs,i),0))},simulateEvent:function(e,t,i,r){i=i||{},e[0]&&(e=e[0]),xui.tryF(xui.Event.$eventsforSimulation[r||t],[e,t,i])},_getEventName:function(e,t){return(e=this._map1[e])&&(0===t||1==t||2==t?e[t]:e)},_getProfile:function(e,t,i){return e&&"string"==typeof e&&((t=(i=xui.$cache.profileMap)[e])?t["xui.UIProfile"]?t:(i=i[e.replace(this._reg,"")])?i:t:i[e.replace(this._reg,"")])},_handleTabHook:function(e,t){if(e===document)return!0;var i=e,r=i.tabIndex;do{if(xui.getId(i)==t[0])return i=e=null,!0}while(i&&(i=i.parentNode)&&i!==document&&i!==window);return xui.tryF(t[1],[t[0],r],e),i=e=null,!1},_handleMouseHover:function(e,t,i){if(t==document)return t=null,!0;var r=("mouseover"==e.type?e.fromElement:e.toElement)||e.relatedTarget;if(i&&"mouseover"==e.type&&this._preDroppable)try{do{if(r&&r.id&&r.id==this._preDroppable)return t=r=null,!0}while(r&&(r=r.parentNode)&&r!==document&&r!==window)}catch(e){}if(xui.browser.gek)try{do{if(r==t)return t=r=null,!1}while(r&&(r=r.parentNode))}catch(i){r=xui([t]);var o=this.getPos(e),n=r.offset(),a=r.cssSize(),s=o.left<n.left||o.left>n.left+a.width||o.top<n.top||o.top>n.top+a.height;return t=r=null,"mouseover"==e.type?!s:s}else do{if(r==t)return t=r=null,!1}while(r&&(r=r.parentNode));return t=r=null,!0},_tabHookStack:[],pushTabOutTrigger:function(e,t){return this._tabHookStack.push([xui(e)._nodes[0],t]),this},popTabOutTrigger:function(e){return e?this._tabHookStack=[]:this._tabHookStack.pop(),this},getSrc:function(e){var t;return(t=e.target||e.srcElement||null)&&xui.browser.kde&&3==t.nodeType?t.parentNode:t},getId:function(e){return window===e?"!window":document===e?"!document":e.id},getBtn:function(e){return xui.browser.ie?4==e.button?"middle":2==e.button?"right":"left":2==e.which?"middle":3==e.which?"right":"left"},getPos:function(e,t){if(e=e||window.event,xui.browser.isTouch&&e.changedTouches&&e.changedTouches[0]&&(e=e.changedTouches[0]),"pageX"in e){var i=t?1:xui.ini.$zoomScale||1;return{left:e.pageX/i,top:e.pageY/i}}var r,o=document,n=o.documentElement,a=o.body,s=(xui.isSet(r=n&&n.scrollLeft)||xui.isSet(r=a&&a.scrollLeft)?r:0)-(xui.isSet(r=n.clientLeft)?r:0),u=(xui.isSet(r=n&&n.scrollTop)||xui.isSet(r=a&&a.scrollTop)?r:0)-(xui.isSet(r=n.clientTop)?r:0);return{left:e.clientX+s,top:e.clientY+u}},getKey:function(e){if(e&&e.$xuievent)return e;var t,i=[],r=(e=e||window.event).$key||e.keyCode||e.charCode||0;if("string"==typeof r)i[0]=r;else{var o=String.fromCharCode(r),n=e.type;if("keypress"==n&&r>=33&&r<=128||r>=48&&r<=57||r>=65&&r<=90)i[0]=o;else{if(!(t=arguments.callee.map)){t=arguments.callee.map={};for(var a="3,enter,8,backspace,9,tab,12,numlock,13,enter,19,pause,20,capslock,27,esc,32, ,33,pageup,34,pagedown,35,end,36,home,37,left,38,up,39,right,40,down,44,printscreen,45,insert,46,delete,50,down,52,left,54,right,56,up,91,win,92,win,93,apps,96,0,97,1,98,2,99,3,100,4,101,5,102,6,103,7,104,8,105,9,106,*,107,+,109,-,110,.,111,/,112,f1,113,f2,114,f3,115,f4,116,f5,117,f6,118,f7,119,f8,120,f9,121,f10,122,f11,123,f12,144,numlock,145,scroll,186,;,187,=,189,-,190,.,191,/,192,`,219,[,220,\\,221,],222,',224,meta,63289,numlock,63276,pageup,63277,pagedown,63275,end,63273,home,63234,left,63232,up,63235,right,63233,down,63272,delete,63302,insert,63236,f1,63237,f2,63238,f3,63239,f4,63240,f5,63241,f6,63242,f7,63243,f8,63244,f9,63245,f10,63246,f11,63247,f12,63248,print".split(","),s=1,u=a.length;s<u;s+=2)t[a[s-1]]=a[s];a.length=0,t[188]=","}i[0]=t[r]||o}}return(e.modifiers?e.modifiers&Event.CONTROL_MASK:e.ctrlKey||e.ctrlLeft||17==r||57391==r)?(17!=r&&57391!=r||(i[0]=""),i.push("1")):i.push(""),(e.modifiers?e.modifiers&Event.SHIFT_MASK:e.shiftKey||e.shiftLeft||16==r||57390==r)?(16!=r&&57390!=r||(i[0]=""),i.push("1")):i.push(""),e.modifiers||!e.altKey&&!e.altLeft&&18!=r&&57388!=r?i.push(""):(18!=r&&57388!=r||(i[0]=""),i.push("1")),i[0]=i[0],i.key=i[0],i.keyCode=r,i.type=n,i.ctrlKey=!!i[1],i.shiftKey=!!i[2],i.altKey=!!i[3],"keypress"==n?this.$keydownchar&&this.$keydownchar.length>1&&(i.key=this.$keydownchar):"keydown"==n?i[0].length>1?this.$keydownchar=i[0]:this.$keydownchar&&(this.$keydownchar=null):"keyup"==n&&this.$keydownchar&&(this.$keydownchar=null),i},getEventPara:function(e,t){t||(t=xui.Event.getPos(e));var i=this.getKey(e),r={button:this.getBtn(e),pageX:t&&t.left,pageY:t&&t.top,key:i.key,keyCode:i.keyCode,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,altKey:i.altKey,$xuieventpara:!0};for(var o in e)"$"==o.charAt(0)&&(r[o]=e[o]);return r},stopBubble:function(e){(e=e||window.event).stopPropagation&&e.stopPropagation(),"cancelBubble"in e&&(e.cancelBubble=!0),this.stopDefault(e)},stopDefault:function(e){(e=e||window.event).preventDefault?e.preventDefault():"returnValue"in e&&(e.returnValue=!1)},_kbh:function(e,t,i,r,o,n,a,s,u,l){if(t){if(a=a||("string"==typeof n?n:null),e[t=(t||"").toLowerCase()+":"+(i?"1":"")+":"+(r?"1":"")+":"+(o?"1":"")]=e[t]||[],"function"==typeof n)return a?(delete e[t][a],xui.arr.removeValue(e[t],a)):a=xui.rand(),e[t][a]=[n,s,u,l],e[t].push(a),a;a?(delete e[t][a],xui.arr.removeValue(e[t],a)):delete e[t]}return this},keyboardHook:function(e,t,i,r,o,n,a,s,u){return this._kbh(xui.$cache.hookKey,e,t,i,r,o,n,a,s,u)},keyboardHookUp:function(e,t,i,r,o,n,a,s,u){return this._kbh(xui.$cache.hookKeyUp,e,t,i,r,o,n,a,s,u)},getWheelDelta:function(e){return e.wheelDelta?e.wheelDelta/120:-e.detail/3},$TAGNAMES:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},_supportCache:{},isSupported:function(e,t){var i=this._supportCache,r=(t?t.tagName.toLowerCase():"div")+":"+e;if(r in i)return i[r];t=t||document.createElement(this.$TAGNAMES[e]||"div");var o=(e="on"+e)in t;return o||(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&(t.setAttribute(e,""),o="function"==typeof t[e],void 0!==t[e]&&(t[e]=undefined),t.removeAttribute(e))),t=null,i[r]=o},_simulateMousedown:function(e){if(!e.touches)return!0;var t=xui.Event,i=e.changedTouches[0];return e.touches.length>1||(t.__simulatedMousedownNode=i.target,t.isSupported("mousedown")?t._xuitouchdowntime=xui.setTimeout((function(){t._xuitouchdowntime=0,t.simulateEvent(i.target,"xuitouchdown",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY},"mousedown")}),100):t.simulateEvent(i.target,"mousedown",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY})),!0},_simulateMouseup:function(e){if(!e.touches)return!0;var t=xui.Event,i=(new Date).getTime(),r=i-t.$lastMouseupTime,o=e.changedTouches[0];return t._xuitouchdowntime&&xui.clearTimeout(t._xuitouchdowntime),t.__simulatedMouseupNode=o.target,t.isSupported("mouseup")||t.simulateEvent(o.target,"mouseup",{screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY}),t.__simulatedMouseupNode===t.__simulatedMousedownNode&&(t.isSupported("click")||t.simulateEvent(o.target,"click",{screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY}),r<=t.$dblcInterval&&xui.asyRun((function(){t.$lastMouseupTime=0,t.simulateEvent(o.target,"dblclick",{screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY})}))),t.__simulatedMouseupNode=t.__simulatedMousedownNode=null,t.$lastMouseupTime=i,!0},stopPageTouchmove:function(){xui.Event._addEventListener(document,xui.browser.ie&&xui.browser.ver>=11?"pointermove":xui.browser.ie&&xui.browser.ver>=10?"MSPointerMove":"touchmove",xui.Event.stopDefault)},allowPageTouchmove:function(){xui.Event._removeEventListener(document,xui.browser.ie&&xui.browser.ver>=11?"pointermove":xui.browser.ie&&xui.browser.ver>=10?"MSPointerMove":"touchmove",xui.Event.stopDefault)}},Initialize:function(){var e,t,i,r=this,o=window,n=document,a={move:null,size:null,drag:null,dragstop:null,dragover:null,mousewheel:null,dragbegin:"onmousedown",dragenter:"onmouseover",dragleave:"onmouseout",drop:"onmouseup"},s=["before","on","after"];e=r._map1={},xui.arr.each(r._events,(function(t){i=xui.str.initial(t),e[t]=[s[0]+i,s[1]+i,s[2]+i]})),e=r._eventMap={},t=r._eventHandler={},xui.arr.each(r._events,(function(r){i=xui.str.initial(r),e[r]=e[s[1]+r]=e[s[0]+i]=e[s[1]+i]=e[s[2]+i]=r,t[r]=t[s[1]+r]=t[s[0]+i]=t[s[1]+i]=t[s[2]+i]=r in a?a[r]:"on"+r})),r._addEventListener(o,"resize",r.$eventhandler),r._addEventListener(o,"DOMMouseScroll",r.$eventhandler3),xui.browser.isTouch&&(r._addEventListener(n,xui.browser.ie&&xui.browser.ver>=11?"pointerdown":xui.browser.ie&&xui.browser.ver>=10?"MSPointerDown":"touchstart",r._simulateMousedown),r._addEventListener(n,xui.browser.ie&&xui.browser.ver>=11?"pointerup":xui.browser.ie&&xui.browser.ver>=10?"MSPointerUp":"touchend",r._simulateMouseup),r._addEventListener(n,"xuitouchdown",r.$eventhandler)),r._addEventListener(o,"mousewheel",r.$eventhandler3);var u=function(e,t,i){switch(t){case"textevent":t="keypress"}xui.merge(i,{bubbles:!0,cancelable:!0,view:o,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:0},"without");var r=i.bubbles,a=i.cancelable,s=i.view,u=i.ctrlKey,l=i.altKey,d=i.shiftKey,c=i.metaKey,p=i.keyCode,h=i.charCode,f=null;if(n.createEvent){try{(f=n.createEvent("KeyEvents")).initKeyEvent(t,r,a,s,u,l,d,c,p,h)}catch(e){try{f=n.createEvent("Events")}catch(e){f=n.createEvent("UIEvents")}finally{f.initEvent(t,r,a),f.view=s,f.altKey=l,f.ctrlKey=u,f.shiftKey=d,f.metaKey=c,f.keyCode=p,f.charCode=h}}e.dispatchEvent(f)}else{if(!n.createEventObject)throw t+" cant be simulated in "+navigator.userAgent;(f=n.createEventObject()).bubbles=r,f.cancelable=a,f.view=s,f.ctrlKey=u,f.altKey=l,f.shiftKey=d,f.metaKey=c,f.keyCode=h>0?h:p,e.fireEvent("on"+t,f)}},l=function(e,t,i){i=i||{},xui.merge(i,{bubbles:!0,cancelable:!0,view:o,detail:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,screenX:0,screenY:0,clientX:0,clientY:0,button:0,relatedTarget:null},"without");var r=i.bubbles,a=i.cancelable,s=i.view,u=i.detail,l=i.ctrlKey,d=i.altKey,c=i.shiftKey,p=i.metaKey,h=i.screenX,f=i.screenY,x=i.clientX,g=i.clientY,m=i.button,b=i.relatedTarget,v=null;if(n.createEvent)(v=n.createEvent("MouseEvents")).initMouseEvent?v.initMouseEvent(t,r,a,s,u,h,f,x,g,l,d,c,p,m,b):((v=n.createEvent("UIEvents")).initEvent(t,r,a),v.view=s,v.detail=u,v.screenX=h,v.screenY=f,v.clientX=x,v.clientY=g,v.ctrlKey=l,v.altKey=d,v.metaKey=p,v.shiftKey=c,v.button=m,v.relatedTarget=b),b&&!v.relatedTarget&&("mouseout"===t?v.toElement=b:"mouseover"===t&&(v.fromElement=b)),e.dispatchEvent(v);else{if(!n.createEventObject)throw t+" cant be simulated in "+navigator.userAgent;switch((v=n.createEventObject()).bubbles=r,v.cancelable=a,v.view=s,v.detail=u,v.screenX=h,v.screenY=f,v.clientX=x,v.clientY=g,v.ctrlKey=l,v.altKey=d,v.metaKey=p,v.shiftKey=c,m){case 0:v.button=1;break;case 1:v.button=4;break;case 2:break;default:v.button=0}v.relatedTarget=b,e.fireEvent("on"+t,v)}},d=function(e,t,i){xui.merge(i,{bubbles:!0,cancelable:"submit"===t,view:o,detail:1},"without");var r=i.bubbles,a=i.cancelable,s=i.view,u=i.detail,l=null;if(n.createEvent)(l=n.createEvent("UIEvents")).initUIEvent(t,r,a,s,u),e.dispatchEvent(l);else{if(!n.createEventObject)throw t+" cant be simulated in "+navigator.userAgent;(l=n.createEventObject()).bubbles=r,l.cancelable=a,l.view=s,l.detail=u,e.fireEvent("on"+t,l)}},c=function(e,t,i){xui.merge(i,{bubbles:!0,cancelable:!0,detail:2,view:o,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,scale:1,rotation:0},"without");var r,a=i.bubbles,s=i.cancelable,u=i.detail,l=i.view,d=i.screenX,c=i.screenY,p=i.clientX,h=i.clientY,f=i.ctrlKey,x=i.altKey,g=i.shiftKey,m=i.metaKey,b=i.scale,v=i.rotation;(r=n.createEvent("GestureEvent")).initGestureEvent(t,a,s,l,u,d,c,p,h,f,x,g,m,e,b,v),e.dispatchEvent(r)},p=function(e,t,i){if("touchstart"===t||"touchmove"===t){if(!i.touches||!i.touches.length)throw new Error("No touch object in touches.")}else if(!("touchend"!==t||i.changedTouches&&i.changedTouches.length))throw new Error("No touch object in changedTouches.");xui.merge(i,{bubbles:!0,cancelable:"touchcancel"!==t,detail:1,view:o,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,screenX:0,screenY:0,clientX:0,clientY:0,scale:1,rotation:0},"without");var r,a=i.bubbles,s=i.detail,u=i.view,l=i.scale,d=i.rotation,c=i.touches,p=i.targetTouches,h=i.changedTouches,f=i.ctrlKey,x=i.altKey,g=i.shiftKey,m=i.metaKey,b=i.screenX,v=i.screenY,y=i.clientX,A=i.clientY,_="touchcancel"!=t&&i.cancelable;if(!n.createEvent)throw t+" cant be simulated in "+navigator.userAgent;if(xui.browser.isAndroid)xui.browser.ver<4?((r=n.createEvent("MouseEvents")).initMouseEvent(t,a,_,u,s,b,v,y,A,f,x,g,m,0,e),r.touches=c,r.targetTouches=p,r.changedTouches=h):(r=n.createEvent("TouchEvent")).initTouchEvent(c,p,h,t,u,b,v,y,A,f,x,g,m);else{if(!xui.browser.isIOS)throw t+" cant be simulated in "+navigator.userAgent;if(!(xui.browser.ver>=2))throw t+" cant be simulated in "+navigator.userAgent;(r=n.createEvent("TouchEvent")).initTouchEvent(t,a,_,u,s,b,v,y,A,f,x,g,m,c,p,h,l,d)}e.dispatchEvent(r)};r.$eventsforSimulation={click:l,dblclick:l,mouseover:l,mouseout:l,mouseenter:l,mouseleave:l,mousedown:l,mouseup:l,mousemove:l,pointerover:l,pointerout:l,pointerdown:l,pointerup:l,pointermove:l,MSPointerOver:l,MSPointerOut:l,MSPointerDown:l,MSPointerUp:l,MSPointerMove:l,keydown:u,keyup:u,keypress:u,submit:d,blur:d,change:d,focus:d,resize:d,scroll:d,select:d,touchstart:p,touchmove:p,touchend:p,touchcancel:p,gesturestart:c,gesturechange:c,gestureend:c}}}),xui.Class("xui.Date",null,{Initialize:function(){var e=this;e._mapKeys(e.$TIMEUNIT);for(var t=e._key1,i=e._key2,r=e.$UNIT={},o=0,n=t.length;o<n;o++)r[t[o]]=1;for(o=0,n=i.length;o<n;o++)r[i[o]]=1;r.w=1},Static:{_key1:"MILLISECOND,SECOND,MINUTE,HOUR,DAY,WEEK,MONTH,QUARTER,YEAR,DECADE,CENTURY".split(","),_key2:"ms,s,n,h,d,ww,m,q,y,de,c".split(","),$TIMEUNIT:{MILLISECOND:1,SECOND:1e3,MINUTE:6e4,HOUR:36e5,DAY:864e5,WEEK:6048e5,MONTH:2592e6,QUARTER:7776e6,YEAR:315576e5,DECADE:315576e6,CENTURY:315576e7},$TEXTFORMAT:{utciso:function(e,t,i){return i=xui.Date._fix,e.getUTCFullYear()+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"Z"},iso:function(e,t,i){return i=xui.Date._fix,e.getFullYear()+"-"+i(e.getMonth()+1)+"-"+i(e.getDate())+"T"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())},ms:function(e,t){return xui.Date._fix(e.getMilliseconds(),3)+(t?"":xui.wrapRes("date.MS"))},s:function(e,t){return e.getSeconds()+(t?"":xui.wrapRes("date.S"))},ss:function(e,t){return xui.Date._fix(e.getSeconds())+(t?"":xui.wrapRes("date.S"))},n:function(e,t){return e.getMinutes()+(t?"":xui.wrapRes("date.N"))},nn:function(e,t){return xui.Date._fix(e.getMinutes())+(t?"":xui.wrapRes("date.N"))},h:function(e,t){return e.getHours()+(t?"":xui.wrapRes("date.H"))},hh:function(e,t){return xui.Date._fix(e.getHours())+(t?"":xui.wrapRes("date.H"))},d:function(e,t){return e.getDate()+(t?"":xui.wrapRes("date.D"))},dd:function(e,t){return xui.Date._fix(e.getDate())+(t?"":xui.wrapRes("date.D"))},w:function(e,t,i){var r=(e.getDay()-i+7)%7;return t?r:xui.wrapRes("date.WEEKS."+r)},ww:function(e,t,i){return xui.Date.getWeek(e,i)+(t?"":xui.wrapRes("date.W"))},m:function(e,t){return e.getMonth()+1+(t?"":xui.wrapRes("date.M"))},mm:function(e,t){return xui.Date._fix(e.getMonth()+1)+(t?"":xui.wrapRes("date.M"))},q:function(e,t){return parseInt((e.getMonth()+3)/3-1,10)+1+(t?"":xui.wrapRes("date.Q"))},y:function(e,t){return e.getYear()+(t?"":xui.wrapRes("date.Y"))},yyyy:function(e,t){return e.getFullYear()+(t?"":xui.wrapRes("date.Y"))},de:function(e,t){return parseInt(e.getFullYear()/10,10)+(t?"":xui.wrapRes("date.DE"))},c:function(e,t){return parseInt(e.getFullYear()/100,10)+(t?"":xui.wrapRes("date.C"))},hn:function(e,t){return xui.wrapRes("date.HN-"+e.getHours()+"-"+e.getMinutes())},dhn:function(e,t){return xui.wrapRes("date.DHN-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes())},mdhn:function(e,t){return xui.wrapRes("date.MDHN-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes())},hns:function(e,t){return xui.wrapRes("date.HNS-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds())},hnsms:function(e,t){return xui.wrapRes("date.HNSMS-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds()+"-"+e.getMilliseconds())},yq:function(e,t){return xui.wrapRes("date.YQ-"+e.getFullYear()+"-"+(parseInt((e.getMonth()+3)/3-1,10)+1))},ym:function(e,t){return xui.wrapRes("date.YM-"+e.getFullYear()+"-"+(e.getMonth()+1))},md:function(e,t){return xui.wrapRes("date.MD-"+(e.getMonth()+1)+"-"+e.getDate())},ymd:function(e,t){return xui.wrapRes("date.YMD-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate())},ymd2:function(e,t){return xui.wrapRes("date.YMD2-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate())},ymdh:function(e,t){return xui.wrapRes("date.YMDH-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours())},ymdhn:function(e,t){return xui.wrapRes("date.YMDHN-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes())},ymdhns:function(e,t){return xui.wrapRes("date.YMDHNS-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds())},all:function(e,t){return xui.wrapRes("date.ALL-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds()+"-"+e.getMilliseconds())}},$TIMEZONE:[{id:"Asia(East,North)",sub:[{id:"Brunei",v:"+0800"},{id:"Burma",v:"+0630"},{id:"Cambodia",v:"+0700"},{id:"China",v:"+0800"},{id:"China(HK,Macau)",v:"+0800"},{id:"China(TaiWan)",v:"+0800"},{id:"China(Urumchi)",v:"+0700"},{id:"East Timor",v:"+0800"},{id:"Indonesia",v:"+0700"},{id:"Japan",v:"+0900"},{id:"Kazakhstan(Aqtau)",v:"+0400"},{id:"Kazakhstan(Aqtobe)",v:"+0500"},{id:"Kazakhstan(Astana)",v:"+0600"},{id:"Kirghizia",v:"+0500"},{id:"Korea",v:"+0900"},{id:"Laos",v:"+0700"},{id:"Malaysia",v:"+0800"},{id:"Mongolia",v:"+0800",tag:"03L03|09L03"},{id:"Philippines",v:"+0800"},{id:"Russia(Anadyr)",v:"+1300",tag:"03L03|10L03"},{id:"Russia(Kamchatka)",v:"+1200",tag:"03L03|10L03"},{id:"Russia(Magadan)",v:"+1100",tag:"03L03|10L03"},{id:"Russia(Vladivostok)",v:"+1000",tag:"03L03|10L03"},{id:"Russia(Yakutsk)",v:"+0900",tag:"03L03|10L03"},{id:"Singapore",v:"+0800"},{id:"Thailand",v:"+0700"},{id:"Vietnam",v:"+0700"}]},{id:"Asia(South,West)",sub:[{id:"Afghanistan",v:"+0430"},{id:"Arab Emirates",v:"+0400"},{id:"Bahrain",v:"+0300"},{id:"Bangladesh",v:"+0600"},{id:"Bhutan",v:"+0600"},{id:"Cyprus",v:"+0200"},{id:"Georgia",v:"+0500"},{id:"India",v:"+0530"},{id:"Iran",v:"+0330",tag:"04 13|10 13"},{id:"Iraq",v:"+0300",tag:"04 13|10 13"},{id:"Israel",v:"+0200",tag:"04F53|09F53"},{id:"Jordan",v:"+0200"},{id:"Kuwait",v:"+0300"},{id:"Lebanon",v:"+0200",tag:"03L03|10L03"},{id:"Maldives",v:"+0500"},{id:"Nepal",v:"+0545"},{id:"Oman",v:"+0400"},{id:"Pakistan",v:"+0500"},{id:"Palestine",v:"+0200"},{id:"Qatar",v:"+0300"},{id:"Saudi Arabia",v:"+0300"},{id:"Sri Lanka",v:"+0600"},{id:"Syria",v:"+0200",tag:"04 13|10 13"},{id:"Tajikistan",v:"+0500"},{id:"Turkey",v:"+0200"},{id:"Turkmenistan",v:"+0500"},{id:"Uzbekistan",v:"+0500"},{id:"Yemen",v:"+0300"}]},{id:"North Europe",sub:[{id:"Denmark",v:"+0100",tag:"04F03|10L03"},{id:"Faroe Is.(DK)",v:"+0100"},{id:"Finland",v:"+0200",tag:"03L01|10L01"},{id:"Iceland",v:"+0000"},{id:"Jan Mayen(Norway)",v:"-0100"},{id:"Norwegian",v:"+0100"},{id:"Svalbard(NORWAY)",v:"+0100"},{id:"Sweden",v:"+0100",tag:"03L01|10L01"}]},{id:"Eastern Europe",sub:[{id:"Armenia",v:"+0400"},{id:"Austria",v:"+0100",tag:"03L01|10L01"},{id:"Azerbaijan",v:"+0400"},{id:"Belarus",v:"+0200",tag:"03L03|10L03"},{id:"Czech",v:"+0100"},{id:"Estonia",v:"+0200"},{id:"Georgia",v:"+0500"},{id:"Germany",v:"+0100",tag:"03L01|10L01"},{id:"Hungarian",v:"+0100"},{id:"Latvia",v:"+0200"},{id:"Liechtenstein",v:"+0100"},{id:"Lithuania",v:"+0200"},{id:"Moldova",v:"+0200"},{id:"Poland",v:"+0100"},{id:"Rumania",v:"+0200"},{id:"Russia(Moscow)",v:"+0300",tag:"03L03|10L03"},{id:"Slovakia",v:"+0100"},{id:"Switzerland",v:"+0100",tag:"03L01|10L01"},{id:"Ukraine",v:"+0200"},{id:"Ukraine(Simferopol)",v:"+0300"}]},{id:"Western Europe",sub:[{id:"Andorra",v:"+0100",tag:"03L01|10L01"},{id:"Belgium",v:"+0100",tag:"03L01|10L01"},{id:"Channel Is.(UK)",v:"+0000",tag:"03L01|10L01"},{id:"France",v:"+0100",tag:"03L01|10L01"},{id:"Gibraltar(UK)",v:"+0100",tag:"03L01|10L01"},{id:"Ireland",v:"+0000",tag:"03L01|10L01"},{id:"Isle of Man(UK)",v:"+0000",tag:"03L01|10L01"},{id:"Luxembourg",v:"+0100",tag:"03L01|10L01"},{id:"Monaco",v:"+0100"},{id:"Netherlands",v:"+0100",tag:"03L01|10L01"},{id:"United Kingdom",v:"+0000",tag:"03L01|10L01"}]},{id:"South Europe",sub:[{id:"Albania",v:"+0100"},{id:"Bosnia",v:"+0100"},{id:"Bulgaria",v:"+0200"},{id:"Croatia",v:"+0100"},{id:"Greece",v:"+0200",tag:"03L01|10L01"},{id:"Holy See",v:"+0100"},{id:"Italy",v:"+0100",tag:"03L01|10L01"},{id:"Macedonia",v:"+0100"},{id:"Malta",v:"+0100"},{id:"Montenegro",v:"+0100"},{id:"Portugal",v:"+0000",tag:"03L01|10L01"},{id:"San Marino",v:"+0100"},{id:"Serbia",v:"+0100"},{id:"Slovenia",v:"+0100"},{id:"Span",v:"+0100",tag:"03L01|10L01"}]},{id:"North America",sub:[{id:"Canada(AST)",v:"-0400",tag:"04F02|10L02"},{id:"Canada(CST)",v:"-0600",tag:"04F02|10L02"},{id:"Canada(EST)",v:"-0500",tag:"04F02|10L02"},{id:"Canada(MST)",v:"-0700",tag:"04F02|10L02"},{id:"Canada(NST)",v:"-0330",tag:"04F02|10L02"},{id:"Canada(PST)",v:"-0800",tag:"04F02|10L02"},{id:"Greenland(DK)",v:"-0300"},{id:"US(Central)",v:"-0600",tag:"03S02|11F02"},{id:"US(Eastern)",v:"-0500",tag:"03S02|11F02"},{id:"US(Mountain)",v:"-0700",tag:"03S02|11F02"},{id:"US(Pacific)",v:"-0800",tag:"03S02|11F02"},{id:"US(Alaska)",v:"-0900"},{id:"US(Arizona)",v:"-0700"}]},{id:"South America",sub:[{id:"Anguilla(UK)",v:"-0400"},{id:"Antigua&amp;Barbuda",v:"-0400"},{id:"Antilles(NL)",v:"-0400"},{id:"Argentina",v:"-0300"},{id:"Aruba(NL)",v:"-0400"},{id:"Bahamas",v:"-0500"},{id:"Barbados",v:"-0400"},{id:"Belize",v:"-0600"},{id:"Bolivia",v:"-0400"},{id:"Brazil(AST)",v:"-0500",tag:"10F03|02L03"},{id:"Brazil(EST)",v:"-0300",tag:"10F03|02L03"},{id:"Brazil(FST)",v:"-0200",tag:"10F03|02L03"},{id:"Brazil(WST)",v:"-0400",tag:"10F03|02L03"},{id:"British Virgin Is.(UK)",v:"-0400"},{id:"Cayman Is.(UK)",v:"-0500"},{id:"Chilean",v:"-0300",tag:"10F03|03F03"},{id:"Chilean(Hanga Roa)",v:"-0500",tag:"10F03|03F03"},{id:"Colombia",v:"-0500"},{id:"Costa Rica",v:"-0600"},{id:"Cuba",v:"-0500",tag:"04 13|10L03"},{id:"Dominican",v:"-0400"},{id:"Ecuador",v:"-0500"},{id:"El Salvador",v:"-0600"},{id:"Falklands",v:"-0300",tag:"09F03|04F03"},{id:"Grenada",v:"-0400"},{id:"Guadeloupe(FR)",v:"-0400"},{id:"Guatemala",v:"-0600"},{id:"Guiana(FR)",v:"-0300"},{id:"Guyana",v:"-0400"},{id:"Haiti",v:"-0500"},{id:"Honduras",v:"-0600"},{id:"Jamaica",v:"-0500"},{id:"Martinique(FR)",v:"-0400"},{id:"Mexico(Mazatlan)",v:"-0700"},{id:"Mexico(Tijuana)",v:"-0800"},{id:"Mexico(Mexico)",v:"-0600"},{id:"Montserrat(UK)",v:"-0400"},{id:"Nicaragua",v:"-0500"},{id:"Panama",v:"-0500"},{id:"Paraguay",v:"-0400",tag:"10F03|02L03"},{id:"Peru",v:"-0500"},{id:"Puerto Rico(US)",v:"-0400"},{id:"So. Georgia&amp;So. Sandwich Is.(UK)",v:"-0200"},{id:"St. Kitts&amp;Nevis",v:"-0400"},{id:"St. Lucia",v:"-0400"},{id:"St. Vincent&amp;Grenadines",v:"-0400"},{id:"Suriname",v:"-0300"},{id:"Trinidad&amp;Tobago",v:"-0400"},{id:"Turks&amp;Caicos Is.(UK)",v:"-0500"},{id:"Uruguay",v:"-0300"},{id:"Venezuela",v:"-0400"},{id:"Virgin Is.(US)",v:"-0400"}]},{id:"Africa(North)",sub:[{id:"Algeria",v:"+0100"},{id:"Egypt",v:"+0200",tag:"04L53|09L43"},{id:"Libyan",v:"+0200"},{id:"Morocco",v:"+0000"},{id:"Sudan",v:"+0200"},{id:"Tunisia",v:"+0100"}]},{id:"Africa(Western)",sub:[{id:"Benin",v:"+0100"},{id:"Burkina Faso",v:"+0000"},{id:"Canary Is.(SP)",v:"-0100"},{id:"Cape Verde",v:"-0100"},{id:"Chad",v:"+0100"},{id:"Gambia",v:"+0000"},{id:"Ghana",v:"+0000"},{id:"Guinea",v:"+0000"},{id:"Guinea-Bissau",v:"+0000"},{id:"Ivory Coast",v:"+0000"},{id:"Liberia",v:"+0000"},{id:"Mali",v:"+0000"},{id:"Mauritania",v:"+0000"},{id:"Niger",v:"+0100"},{id:"Nigeria",v:"+0100"},{id:"Senegal",v:"+0000"},{id:"Sierra Leone",v:"+0000"},{id:"Togo",v:"+0000"},{id:"Western Sahara",v:"+0000"}]},{id:"Africa(Central)",sub:[{id:"Cameroon",v:"+0100"},{id:"Cen.African Rep.",v:"+0100"},{id:"Congo,Democratic",v:"+0100"},{id:"Congo,Republic",v:"+0100"},{id:"Equatorial Guinea",v:"+0100"},{id:"Gabon",v:"+0100"},{id:"Sao Tome&amp;Principe",v:"+0000"}]},{id:"Africa(East)",sub:[{id:"Burundi",v:"+0200"},{id:"Comoros",v:"+0300"},{id:"Djibouti",v:"+0300"},{id:"Eritrea",v:"+0300"},{id:"Ethiopia",v:"+0300"},{id:"Kenya",v:"+0300"},{id:"Madagascar",v:"+0300"},{id:"Malawi",v:"+0200"},{id:"Mauritius",v:"+0400"},{id:"Mayotte(FR)",v:"+0300"},{id:"Mozambique",v:"+0200"},{id:"Reunion(FR)",v:"+0400"},{id:"Rwanda",v:"+0200"},{id:"Seychelles",v:"+0300"},{id:"Somalia",v:"+0300"},{id:"Tanzania",v:"+0300"},{id:"Uganda",v:"+0300"}]},{id:"Africa(South)",sub:[{id:"Angola",v:"+0100"},{id:"Botswana",v:"+0200"},{id:"Lesotho",v:"+0200"},{id:"Namibia",v:"+0200",tag:"09F03|04F03"},{id:"Saint Helena(UK)",v:"-0100"},{id:"South Africa",v:"+0200"},{id:"Swaziland",v:"+0200"},{id:"Zambia",v:"+0200"},{id:"Zimbabwe",v:"+0200"}]},{id:"Oceania",sub:[{id:"American Samoa(US)",v:"-1100"},{id:"Australia(Adelaide)",v:"+0930",sub:"10L03|03L03"},{id:"Australia(Brisbane)",v:"+1000"},{id:"Australia(Darwin)",v:"+0930"},{id:"Australia(Hobart)",v:"+1000",sub:"10L03|03L03"},{id:"Australia(Perth)",v:"+0800"},{id:"Australia(Sydney)",v:"+1000",sub:"10L03|03L03"},{id:"Cook Islands(NZ)",v:"-1000"},{id:"Eniwetok",v:"-1200"},{id:"Fiji",v:"+1200",sub:"11F03|02L03"},{id:"Guam",v:"+1000"},{id:"Hawaii(US)",v:"-1000"},{id:"Kiribati",v:"+1100"},{id:"Marshall Is.",v:"+1200"},{id:"Micronesia",v:"+1000"},{id:"Midway Is.(US)",v:"-1100"},{id:"Nauru Rep.",v:"+1200"},{id:"New Calednia(FR)",v:"+1100"},{id:"New Zealand",v:"+1200",sub:"10F03|04F63"},{id:"New Zealand(CHADT)",v:"+1245",sub:"10F03|04F63"},{id:"Niue(NZ)",v:"-1100"},{id:"Nor. Mariana Is.",v:"+1000"},{id:"Palau",v:"+0900"},{id:"Papua New Guinea",v:"+1000"},{id:"Pitcairn Is.(UK)",v:"-0830"},{id:"Polynesia(FR)",v:"-1000"},{id:"Solomon Is.",v:"+1100"},{id:"Tahiti",v:"-1000"},{id:"Tokelau(NZ)",v:"-1100"},{id:"Tonga",v:"+1300",tag:"10F63|04F63"},{id:"Tuvalu",v:"+1200"},{id:"Vanuatu",v:"+1100"},{id:"Western Samoa",v:"-1100"},{id:"Data Line",v:"-1200"}]}],_mapKeys:function(e){for(var t=this._key2,i=this._key1,r=0,o=i.length;r<o;r++)e[t[r]]=e[i[r]]},_validUnit:function(e){return this.$UNIT[e]?e:"d"},_date:function(e,t){return xui.isDate(e)?e:(e||0===e)&&isFinite(e)?new Date(parseInt(e,10)):xui.isDate(t)?t:new Date},_isNumb:function(e){return"number"==typeof e&&isFinite(e)},_numb:function(e,t){return this._isNumb(e)?e:this._isNumb(t)?t:0},_timeZone:-(new Date).getTimezoneOffset()/60,isDayLightTime:function(e){var t=this.getTimSpanStart(e,"y"),i=new Date(t.getTime());return i.setMonth(6),i.getTimezoneOffset()-t.getTimezoneOffset()!=0&&e.getTimezoneOffset()==(e.getTimezoneOffset()<0?t:i).getTimezoneOffset()},get:function(e,t,i){var r=this;e=r._date(e),t=r._validUnit(t),i=r._numb(i);var o=arguments.callee.map||(arguments.callee.map={ms:function(e){return e.getMilliseconds()},s:function(e){return e.getSeconds()},n:function(e){return e.getMinutes()},h:function(e){return e.getHours()},d:function(e){return e.getDate()},ww:function(e,t){return xui.Date.getWeek(e,t)},w:function(e,t){return(7+e.getDay()-t)%7},m:function(e){return e.getMonth()},q:function(e){return parseInt((e.getMonth()+3)/3-1,10)},y:function(e){return e.getFullYear()},de:function(e){return parseInt(e.getFullYear()/10,10)},c:function(e){return parseInt(e.getFullYear()/100,10)}});return o[t](e,i)},_fix:function(e,t,i){if(i=i||"0",(e+="").length<(t=t||2))for(var r=e.length;r<t;r++)e=i+e;return e},add:function(e,t,i){var r,o,n=this,a=n.$TIMEUNIT;return e=n._date(e),t=n._validUnit(t),(r=arguments.callee.map)||(r=arguments.callee.map={MILLISECOND:function(e,t){e.setTime(e.getTime()+t*a.ms)},SECOND:function(e,t){e.setTime(e.getTime()+t*a.s)},MINUTE:function(e,t){e.setTime(e.getTime()+t*a.n)},HOUR:function(e,t){e.setTime(e.getTime()+t*a.h)},DAY:function(e,t){e.setDate(e.getDate()+t)},WEEK:function(e,t){e.setDate(e.getDate()+7*t)},MONTH:function(e,t){var i,r=e.getDate();t=e.getMonth()+t,this.YEAR(e,Math.floor(t/12)),e.setMonth((t%12+12)%12),(i=e.getDate())!=r&&this.DAY(e,-i)},QUARTER:function(e,t){this.MONTH(e,3*t)},YEAR:function(e,t){var i,r=e.getDate();e.setFullYear(e.getFullYear()+t),(i=e.getDate())!=r&&this.DAY(e,-i)},DECADE:function(e,t){this.YEAR(e,10*t)},CENTURY:function(e,t){this.YEAR(e,100*t)}},n._mapKeys(r)),r[t](o=new Date(e),i),o},diff:function(e,t,i,r){var o=this;e=o._date(e),t=o._date(t),i=o._validUnit(i),r=o._numb(r);var n,a=o.$TIMEUNIT;return(n=arguments.callee.map)||(n=arguments.callee.map={MILLISECOND:function(e,t){return t.getTime()-e.getTime()},SECOND:function(e,t){return e=o.getTimSpanStart(e,"s"),((t=o.getTimSpanStart(t,"s")).getTime()-e.getTime())/a.s},MINUTE:function(e,t){return e=o.getTimSpanStart(e,"n"),((t=o.getTimSpanStart(t,"n")).getTime()-e.getTime())/a.n},HOUR:function(e,t){return e=o.getTimSpanStart(e,"h"),((t=o.getTimSpanStart(t,"h")).getTime()-e.getTime())/a.h},DAY:function(e,t){return e=o.getTimSpanStart(e,"d",1),t=o.getTimSpanStart(t,"d",1),Math.floor((t.getTime()-e.getTime())/a.d)},WEEK:function(e,t,i){return e=o.getTimSpanStart(e,"ww",1,i),t=o.getTimSpanStart(t,"ww",1,i),Math.floor((t.getTime()-e.getTime())/a.ww)},MONTH:function(e,t){return 12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth())},QUARTER:function(e,t){return 4*(t.getFullYear()-e.getFullYear())+parseInt((t.getMonth()-e.getMonth())/3,10)},YEAR:function(e,t){return parseInt(t.getFullYear()-e.getFullYear(),10)},DECADE:function(e,t){return parseInt((t.getFullYear()-e.getFullYear())/10,10)},CENTURY:function(e,t){return parseInt((t.getFullYear()-e.getFullYear())/100,10)}},o._mapKeys(n)),n[i](new Date(e),new Date(t),r)},getTimSpanStart:function(e,t,i,r){var o,n,a=this,s=a.$TIMEUNIT;if(e=a._date(e),t=a._validUnit(t),r=a._numb(r),i=a._numb(i,1),!(o=arguments.callee.map)){var u=function(e){e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0)},l=function(e){u(e),e.setDate(1),e.setMonth(0)};o=arguments.callee.map={MILLISECOND:function(e,t){var i=e.getMilliseconds();e.setMilliseconds(i-i%t)},SECOND:function(e,t){e.setMilliseconds(0);var i=e.getSeconds();e.setSeconds(i-i%t)},MINUTE:function(e,t){e.setMilliseconds(0),e.setSeconds(0);var i=e.getMinutes();e.setTime(e.getTime()-i%t*s.n)},HOUR:function(e,t){e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0);var i=e.getHours();e.setHours(i-i%t)},DAY:function(e,t){u(e);var i=e.getDate();e.setDate(i-i%t)},WEEK:function(e,t,i){u(e);var r=(e.getDay()+7-i)%7;e.setDate(e.getDate()-r-7*(t-1))},MONTH:function(e,t){u(e),e.setDate(1);var i=e.getMonth();e.setMonth(i-i%t)},QUARTER:function(e,t){return t=a._numb(t,1),this.MONTH(e,3*t)},YEAR:function(e,t){l(e);var i=e.getFullYear();e.setFullYear(i-i%t)},DECADE:function(e,t){l(e),e.setFullYear(10*Math.floor(e.getFullYear()/10))},CENTURY:function(e,t){l(e),e.setFullYear(100*Math.floor(e.getFullYear()/100))}},a._mapKeys(o)}return o[t](n=new Date(e),i,r),n},getTimSpanEnd:function(e,t,i,r){var o=this;e=o._date(e),t=o._validUnit(t),r=o._numb(r),i=o._numb(i,1);var n=e.getTime(),a=o.getTimSpanStart(e,t,i,r);return a.getTime()<n&&(a=o.add(a,t,i)),a},offsetTimeZone:function(e,t,i){var r=this;return e=r._date(e),new Date(e.getTime()+(i?-1:1)*(t-r._timeZone)*r.$TIMEUNIT.h)},getWeek:function(e,t){var i,r,o,n,a=this,s=xui.Date._timeZone;return e=a._date(e),t=a._numb(t),r=e.getFullYear(),o=-e.getTimezoneOffset()/60,(e=a.add(a.getTimSpanStart(e,"ww",1,t),"d",6)).getFullYear()!=r?1:(n=-(i=a.getTimSpanStart(e,"y",1)).getTimezoneOffset()/60,i=a.add(a.getTimSpanStart(i,"ww",1,t),"d",6),a.diff(i,e,"ww")+1+(o>s?1:0)-(n>s?1:0))},parse:function(e,t){var i;if(xui.isDate(e))i=e;else if(e+="",isFinite(e))i=new Date(parseInt(e,10));else if("string"==typeof t){var r=t.split(/[^ymdhns]+/),o=e.split(/[^0-9]+/),n={y:0,m:0,d:0,h:0,n:0,s:0,ms:0};if(r.length&&r.length===o.length){for(var a=0;a<r.length;a++)r[a].length&&(n["ms"==r[a]?"ms":r[a].charAt(0)]=parseInt(o[a].replace(/^0*/,""),10));i=new Date(n.y,n.m-1,n.d,n.h,n.n,n.s,n.ms)}else i=null}else{var s,u=arguments.callee,l=u.dp||(u.dp={FullYear:2,Month:4,Date:6,Hours:8,Minutes:10,Seconds:12,Milliseconds:14}),d=e.match(u.iso||(u.iso=/^((-\d+|\d{4,})(-(\d{2})(-(\d{2}))?)?)?T((\d{2})(:(\d{2})(:(\d{2})(\.(\d{1,3})(\d)?\d*)?)?)?)?(([+-])(\d{2})((\d{2}))?|Z)?$/)),c=new Date(0);if(d){for(var a in d[4]&&d[4]--,d[15]>=5&&d[14]++,s=d[16]||d[18]?"UTC":"",l){var p=d[l[a]];p&&(c["set"+s+a](p),c["get"+s+a]()!=d[l[a]]&&(i=null))}if(d[18]){var h=Number(d[17]+d[18]),f=Number(d[17]+(d[20]||0));c.setUTCMinutes(c.getUTCMinutes()+60*h+f)}i=c}else{/^((-\d+|\d{4,})(-(\d{1,2})(-(\d{1,2}))))/.test(e)&&(e=e.replace(/-/g,"/"));var x=Date.parse(e);i=x?c.setTime(x)&&c:null}}return null===i?null:isFinite(+i)?i:null},getText:function(e,t,i){var r=this,o=r.$TEXTFORMAT;return e=r._date(e),i=r._numb(i),o[t]?o[t](e,!1,i):xui.Date.format(e,t)},format:function(e,t,i){var r=this,o=r.$TEXTFORMAT;return e=r._date(e),i=r._numb(i),t.replace(/(utciso|iso|yyyy|mm|ww|dd|hh|nn|ss|ms|de|c|y|q|m|w|d|h|n|s)/g,(function(t,r){return o[r]?o[r](e,!0,i):xui.Date.format(e,r)}))}}}),xui.Class("xui.CSS",null,{Static:{_r:xui.browser.ie?"rules":"cssRules",_baseid:"xui:css:base",_firstid:"xui:css:first",_lastid:"xui:css:last",_reg1:/\.(\w+)\[CLASS~="\1"\]/g,_reg2:/\[ID"([^"]+)"\]/g,_reg3:/\*([.#])/g,_reg4:/\s+/g,_reg5:/\*\|/g,_reg6:/(\s*,\s*)/g,_rep:function(e){var t=this;return e.replace(t._reg1,".$1").replace(t._reg2,"#$1").replace(t._reg3,"$1").replace(t._reg4," ").replace(t._reg5,"").replace(t._reg6,",").toLowerCase()},_appendSS:function(e,t,i,r,o){var n=document.createElement("style");if(n.type="text/css",i&&(n.id=i),xui.browser.ie&&n.styleSheet&&"cssText"in n.styleSheet)n.styleSheet.cssText=t||"";else try{n.appendChild(document.createTextNode(t||""))}catch(e){n.styleSheet.cssText=t||""}return o&&xui(n).attr(o),r?xui(e).prepend(n):xui(e).append(n),n},_createCss:function(e,t,i){var r,o,n=this._getHead(),a=this._firstid,s=this._lastid;if((r=document.createElement("style")).type="text/css",r.id=e,t)if(xui.browser.ie&&r.styleSheet&&"cssText"in r.styleSheet)r.styleSheet.cssText=t||"";else try{r.appendChild(document.createTextNode(t||""))}catch(e){r.styleSheet.cssText=t||""}if(i)n.appendChild(r);else{for(o=document.getElementById(a)||n.firstChild;(o=o.nextSibling)&&!/^(script|link|style)$/i.test(""+o.tagName););o||(o=document.getElementById(s))?n.insertBefore(r,o):n.appendChild(r)}return r},_getCss:function(e,t,i){return document.getElementById(e)||this._createCss(e,t,i)},_getBase:function(){return this._getCss(this._baseid)},_getFirst:function(){return this._getCss(this._firstid)},_getLast:function(){return this._getCss(this._lastid,null,!0)},_getHead:function(){return this._head||(this._head=document.getElementsByTagName("head")[0]||document.documentElement)},_check:function(){if(xui.browser.ie){for(var e,t=0,i=0,r=this._getHead().childNodes;e=r[i++];)"text/css"==e.type&&t++;return t>20}},get:function(e,t){for(var i,r=0,o=this._getHead().childNodes;i=o[r++];)if("text/css"==i.type&&e in i&&i[e]==t)return i},addStyleSheet:function(e,t,i,r){var o,n=this,a=n._getHead();if(t&&(t=t.replace(/[^\w\-\_\.\:]/g,"_"))&&(o=n.get("id",t))){if(!r)return o;o.disabled=!0,a.removeChild(o)}return n._check()?function(e,t){var i=t?n._getLast():n._getBase();return i.styleSheet.cssText+=e,i}(e,i):function(e,t,i){var r=document.createElement("style");if(r.type="text/css",t&&(r.id=t),xui.browser.ie&&r.styleSheet&&"cssText"in r.styleSheet)r.styleSheet.cssText=e||"";else try{r.appendChild(document.createTextNode(e||""))}catch(t){r.styleSheet.cssText=e||""}return-1===i?a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r):1===i?a.appendChild(r):a.insertBefore(r,i?n._getLast():n._getBase()),r.disabled=!0,r.disabled=!1,r}(e,t,i)},includeLink:function(e,t,i,r){var o,n=this,a=n._getHead();return e&&(o=n.get("href",e))||((o=document.createElement("link")).type="text/css",o.rel="stylesheet",o.href=e,t&&(o.id=t),o.media="all",xui.each(r,(function(e,t){o.setAttribute(t,e)}))),a.insertBefore(o,i?n._getBase():n._getLast()),o.disabled=!0,o.disabled=!1,o},remove:function(e,t){var i=this._getHead();(t=this.get(e,t))&&(t.disabled=!0,i.removeChild(t))},replaceLink:function(e,t,i,r){var o,n,a=this,s=a._getHead(),u={};u[t]=r,o=a.includeLink(e,null,!1,u),(n=a.get(t,i))&&s.replaceChild(o,n),o.disabled=!0,o.disabled=!1},_build:function(e,t,i){var r="";return xui.each(t,(function(e,t){r+=t.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+e+";"})),i?r:e+"{"+r+"}"},setStyleRules:function(e,t,i){var r,o,n,a,s,u,l=this,d=!0,c=document.styleSheets;return e=xui.str.trim(e.replace(/\s+/g," ")),t&&i||(a=e.toLowerCase(),xui.arr.each(xui.toArr(c),(function(i){try{i[l._r]}catch(e){return}if(xui.arr.each(xui.toArr(i[l._r]),(function(e,c){if(e.selectorText&&!e.disabled)if(n=l._rep(e.selectorText),u=n.split(","),t){if(n==a)return r=e,!1;if(-1!=xui.arr.indexOf(u,a))return o=e,!1}else d=!1,-1!=xui.arr.indexOf(u,a)&&u.length>1?(u=xui.arr.removeFrom(u,xui.arr.indexOf(u,a)).join(","),s=e.cssText.slice(e.cssText.indexOf("{")+1,e.cssText.lastIndexOf("}")),i.insertRule?i.insertRule(u+"{"+s+"}",i[l._r].length):i.addRule&&i.addRule(u,s||"{}"),i.deleteRule?i.deleteRule(c):i.removeRule(c),i.disabled=!0,i.disabled=!1):n==a&&(i.deleteRule?i.deleteRule(c):i.removeRule(c),i.disabled=!0,i.disabled=!1)}),null,!0),r){d=!1;try{xui.each(t,(function(e,t){t=t.replace(/(-[a-z])/gi,(function(e,t){return t.charAt(1).toUpperCase()})),r.style[t]="function"==typeof e?e(r.style[t]):e}))}catch(e){}return i.disabled=!0,i.disabled=!1,!1}if(o)return d=!1,i.insertRule(l._build(e,t),i[l._r].length),i.disabled=!0,i.disabled=!1,!1}),null,!0)),(i||d)&&l._addRules(e,t),l},$getCSSValue:function(e,t,i,r){var o,n,a,s,u,l,d=this._r,c=document.styleSheets,p=c.length;for(e=xui.str.trim(e.replace(/\s+/g," ").toLowerCase()),s=p-1;s>=0;s--){try{n=c[s][d]}catch(e){continue}if(!c[s].disabled&&(n=c[s][d]))for(u=n.length-1;u>=0;u--)if((a=n[u]).selectorText&&!a.disabled&&(l=this._rep(a.selectorText),-1!=xui.arr.indexOf(l.split(/\s*,\s*/g),e)))if(t){if(i){if(i===a.style[t])return c[s].ownerNode||c[s].owningElement}else if((!r||r==c[s].ownerNode||c[s].owningElement)&&""!==a.style[t])return(a.style[t]||"").replace(/^\"|\"$/g,"")}else(o=o||[]).push(a)}return o},_addRules:function(e,t){var i=this,r=i._getLast(),o=r.sheet||r.styleSheet;return o.insertRule?o.insertRule(i._build(e,t),o[i._r].length):o.addRule&&o.addRule(e,i._build(e,t,!0)||"{}"),r.disabled=!0,r.disabled=!1,i},adjustFont:function(e,t,i,r){e&&xui("html").css("font-size",e),t&&xui("html").css("font-family",t),i&&xui("html").css("font-weight",i),r&&xui("html").css("font-style",r),this._dftEmStr="",this._getDftEmSize(!0),this._dftRemStr="",this._getDftRemSize(!0),xui.UI&&xui.UI.getAll().reLayout(!0)},_dftEmStr:"",_dftEm:0,_getDftEmSize:function(e){var t=this;if(e||!t._dftEm){var i,r=t.$getCSSValue(".xui-ui-ctrl","fontSize");if(!t._dftEmStr||t._dftEmStr!=r)if((i=parseFloat(r))&&t.$isPx(r))t._dftEm=i,t._dftEmStr=r;else if(i&&t.$isRem(r))t._dftEm=i*t._getDftRemSize(),t._dftEmStr=r;else{var o;xui("body").append(o=xui.create('<div class="xui-ui-ctrl" style="height:1em;visibility:hidden;position:absolute;border:0;margin:0;padding:0;left:-10000px;"></div>')),t._dftEm=o.get(0).offsetHeight,o.remove(),t._dftEmStr=t._dftEm+"px"}}return t._dftEm},$resetEm:function(){delete xui.CSS._dftEm},_dftRemStr:"",_dftRem:0,_getDftRemSize:function(e){var t=this;return!e&&t._dftRem||(t._dftRem=parseFloat(xui("html").css("font-size"))||16),t._dftRem},$resetRem:function(){delete xui.CSS._dftRem},$isEm:function(e){return e&&"auto"!=e?/^-?((\d\d*\.\d*)|(^\d\d*)|(^\.\d\d*))em$/i.test(xui.str.trim(e+"")):1==xui.$us()},$isRem:function(e){return e&&"auto"!=e?/^-?((\d\d*\.\d*)|(^\d\d*)|(^\.\d\d*))rem$/i.test(xui.str.trim(e+"")):1==xui.$us()},$isPx:function(e){return e&&"auto"!=e?/^-?((\d\d*\.\d*)|(^\d\d*)|(^\.\d\d*))px$/i.test(xui.str.trim(e+"")):1==xui.$us()},$em2px:function(e,t,i){return e=e&&"auto"!=e&&(xui.isFinite(e)||this.$isEm(e))?(parseFloat(e)||0)*(t?xui.isFun(t)?t():xui.isFinite(t)?t:xui(t)._getEmSize():this._getDftEmSize()||this._getDftEmSize()):e,i?Math.round(parseFloat(e)||0):e},$px2em:function(e,t,i){return e&&"auto"!=e&&(xui.isFinite(e)||this.$isPx(e))?(i?Math.round(parseFloat(e)||0):parseFloat(e)||0)/(t?xui.isFun(t)?t():xui.isFinite(t)?t:xui(t)._getEmSize():this._getDftEmSize()||this._getDftEmSize()):e},$rem2px:function(e,t){return e=e&&"auto"!=e&&(xui.isFinite(e)||this.$isRem(e))?(parseFloat(e)||0)*this._getDftRemSize():e,t?Math.round(parseFloat(e)||0):e},$px2rem:function(e,t){return e&&"auto"!=e&&(xui.isFinite(e)||this.$isPx(e))?(t?Math.round(parseFloat(e)||0):parseFloat(e)||0)/this._getDftRemSize():e},$em2rem:function(e,t){return e&&"auto"!=e&&(xui.isFinite(e)||this.$isEm(e))?(parseFloat(e)||0)*(t?xui.isFinite(t)?t:xui(t)._getEmSize():this._getDftEmSize()||this._getDftEmSize())/this._getDftRemSize():e},$rem2em:function(e,t){return e&&"auto"!=e&&(xui.isFinite(e)||this.$isRem(e))?(parseFloat(e)||0)*this._getDftRemSize()/(t?xui.isFinite(t)?t:xui(t)._getEmSize():this._getDftEmSize()||this._getDftEmSize()):e},$px:function(e,t,i){return e=!xui.isFinite(e)&&this.$isRem(e)?this.$rem2px(e,i):this.$isEm(e)?this.$em2px(e,t,i):e&&"auto"!=e?parseFloat(e)||0:e,i?Math.round(parseFloat(e)||0):e},$em:function(e,t,i){return xui.isFinite(e)||this.$isPx(e)?this.$px2em(e,t,i):this.$isRem(e)?this.$rem2em(e,t):e&&"auto"!=e?parseFloat(e)||0:e},$rem:function(e,t,i){return xui.isFinite(e)||this.$isPx(e)?this.$px2rem(e,i):this.$isEm(e)?this.$em2rem(e,t):e&&"auto"!=e?parseFloat(e)||0:e},$addpx:function(e,t,i){return"auto"==e?e:this.$isRem(e)?this.$px2rem(Math.round(this.$rem2px(e)+(parseFloat(t)||0)))+"rem":this.$isEm(e)?this.$px2em(Math.round(this.$em2px(e,!1,i)+(parseFloat(t)||0)))+"em":Math.round((parseFloat(e)||0)+(parseFloat(t)||0))+"px"},$forceu:function(e,t,i,r){return null===e||e===undefined||""===e||"auto"==e?e:(t?"rem"==t:0===xui.$us())?this.$rem(e,i,!1!==r)+"rem":(t?"em"==t:1==xui.$us())?this.$em(e,i,!1!==r)+"em":Math.round(this.$px(e,i,!1!==r))+"px"},$picku:function(e){return e&&"auto"!=e&&(e+"").replace(/[-\d\s.]*/g,"")||(1==xui.$us()?"em":"px")},$addu:function(e){return"auto"==e?e:xui.isFinite(e)||this.$isPx(e)?Math.round(parseFloat(e)||0)+"px":e+""}},Initialize:function(){var e=xui.browser,t=(e.gek?e.ver<3?(e.ver<3?"-moz-outline-offset:-1px !important;":"")+"display:-moz-inline-block;display:-moz-inline-box;display:inline-block;":"display:inline-block;":e.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(e.ie?"zoom:1;":""),i=".xui-node{margin:0;padding:0;line-height:1.22;-webkit-text-size-adjust:none;}.xui-node-highlight{color:#000;}.xui-title-node{}.xuifont-hover, .xuicon-hover{ color: #686868; }"+(xui.browser.fakeTouch||"touchOnly"==xui.browser.deviceType?"":".xuifont-active, .xuicon-active{ color: #3393D2; }")+".xuifont-checked, .xuicon-checked{ color: #3393D2; }.xui-wrapper{color:#000;font-family:arial,helvetica,clean,sans-serif;font-style:normal;font-weight:normal;vertical-align:middle;}.xui-cover{cursor:wait;background:url("+xui.ini.img_bg+") transparent repeat;opacity:1;}.xui-node-table{border-collapse:collapse;border-spacing:0;empty-cells:show;font-size:inherit;"+(e.ie?"font:100%;":"")+"}.xui-node-fieldset,.xui-node-img{border:0;}.xui-node-ol,.xui-node-ul,.xui-node-li{list-style:none;}.xui-node-caption,.xui-node-th{text-align:left;}.xui-node-th{font-weight:normal;}.xui-node-q:before,.xui-node-q:after{content:'';}.xui-node-abbr,.xui-node-acronym{border:0;font-variant:normal;}.xui-node-sup{vertical-align:text-top;}.xui-node-sub{vertical-align:text-bottom;}.xui-node-input,.xui-node-textarea,.xui-node-select{cursor:text;font-family:inherit;font-size:inherit;font-weight:inherit;"+(e.ie?"font-size:100%;":"")+"}.xui-node-del,.xui-node-ins{text-decoration:none;}.xui-node-pre,.xui-node-code,.xui-node-kbd,.xui-node-samp,.xui-node-tt{font-family:monospace;"+(e.ie?"font-size:108%;":"")+"line-height:100%;}.xui-node-select,.xui-node-input,.xui-node-textarea{font-family:arial,helvetica,clean,sans-serif;border-width:1px;}"+(e.ie&&e.ver<=8?".xui-node-input{overflow:hidden;}":"")+".xui-node-a, .xui-node-a .xui-node{cursor:pointer;color:#0000ee;text-decoration:none;}.xui-node-a:hover, .xui-node-a:hover .xui-node{color:red}"+(e.gek?".xui-node-a:focus{outline-offset:-1px;"+(e.ver<3?"-moz-outline-offset:-1px !important":"")+"}":"")+".xui-node-span, .xui-node-div{border:0;}"+(e.ie&&e.ver<=8?"":".xui-node-span:not(.xui-showfocus):focus, .xui-node-div:not(.xui-showfocus):focus{outline:0;}.xui-showfocus:focus{outline-width: 1px;outline-style: dashed;}")+".xui-node-span, .xui-wrapper span"+(e.ie&&e.ver<=7?"":", .xui-v-wrapper:before, .xui-v-wrapper > .xui-v-node")+"{outline-offset:-1px;"+t+"}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6{font-size:100%;font-weight:normal;}.xui-node-h1{font-size:138.5%;}.xui-node-h2{font-size:123.1%;}.xui-node-h3{font-size:108%;}.xui-node-h1,.xui-node-h2,.xui-node-h3{margin:1em 0;}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6,.xui-node-strong{font-weight:bold;}.xui-node-em{font-style:italic;}.xui-node-legend{color:#000;}"+(e.ie6?"#"+xui.$localeDomId+"{vertical-align:baseline;}":"")+".xui-nofocus:focus{outline:0;}.xui-cls-wordwrap{white-space: pre-wrap;word-break: break-all;"+(e.gek?"white-space: -moz-pre-wrap;":"")+(e.opr?"white-space: -pre-wrap;":"")+(e.opr?"white-space: -o-pre-wrap;":"")+(e.ie?"word-wrap: break-word;":"")+"}"+(e.ie&&e.ver<=8?"":".xui-v-wrapper:before{content:'';height:100%;font-size:0;vertical-align:middle;}.xui-v-wrapper > .xui-v-node{vertical-align:middle;}.xui-v-top > .xui-v-wrapper:before{vertical-align:top;}.xui-v-top > .xui-v-wrapper > .xui-v-node{vertical-align:top;}.xui-v-bottom > .xui-v-wrapper:before{vertical-align:bottom;}.xui-v-bottom > .xui-v-wrapper > .xui-v-node{vertical-align:bottom;}")+".xui-node-tips{background-color:#FDF8D2;}.xuifont, .xuicon{font-size:1.3333333333333333em;line-height:1em;}.xuicon{margin: 0 .25em;"+t+"}.xuicon:before{height:1em;width:1em;}.xui-ui-ctrl, .xui-ui-reset{font-family:arial,helvetica,clean,sans-serif; font-style:normal; font-weight:normal; vertical-align:middle; color:#000; }.xui-ui-reset{font-size: inherit;}.xui-ui-ctrl{cursor:default;font-size:.875rem;}.xui-title-node{font-size:1.1667em  !important;}.setting-uikey{font-family:'default'}";this.addStyleSheet(i,"xui.CSS")}}),xui.Class("xui.DomProfile","xui.absProfile",{Constructor:function(e){var t=arguments.callee.upper;t&&t.call(this),t=null,xui.$cache.profileMap[this.domId=e]=this},Instance:{__gc:function(){delete xui.$cache.profileMap[this.domId]},_getEV:function(e,t,i){var r=xui.$cache.profileMap[t];if(r&&(r=r.events)&&(r=r[i]))for(var o=0,n=r.length;o<n;o++)"function"==typeof r[r[o]]&&(e[e.length]=r[r[o]])}},Static:{get:function(e){return xui.$cache.profileMap[e]},$abstract:!0}}),xui.Class("xui.Dom","xui.absBox",{Instance:{get:function(e){var t,i=xui.$cache.domPurgeData,r=this._nodes;if(xui.isNumb(e))return(t=r[e])&&(t=i[t])&&t.element;for(var o=[],n=r.length,a=0;a<n;a++)o[o.length]=(t=i[r[a]])&&t.element;return o},each:function(e,t){var i,r,o=this,n=xui.$cache.domPurgeData,a=o._nodes,s=a.length;if(t)for(r=s;r>=0&&(!(i=n[a[r]])||!(i=i.element)||!1!==e.call(o,i,r));r--);else for(r=0;r<s&&(!(i=n[a[r]])||!(i=i.element)||!1!==e.call(o,i,r));r++);return i=null,o},serialize:function(){var e=[];return this.each((function(t){e[e.length]=t.id})),"xui(['"+e.join("','")+"'])"},xid:function(){return xui.getId(this.get(0))},id:function(e,t){var i,r,o=xui.$cache.profileMap;return"string"==typeof e?this.each((function(n){(r=n.id)!==e&&(!t&&(i=o[r])&&(o[e]=i,delete o[r]),n.id=e)})):this.get(0)&&this.get(0).id},$sum:function(e,t){var i,r,o=[];return this.each((function(n){if(i=e.apply(n,t||[]))if(xui.isArr(i))for(r=0;n=i[r];r++)o[o.length]=n;else o[o.length]=i})),xui(o)},children:function(){return this.$sum((function(){return xui.toArr(this.childNodes)}))},clone:function(e){return this.$sum((function(){var t,i=this.cloneNode(!!e),r=i.getElementsByTagName("*"),o=xui.browser.ie&&xui.browser.ver<9,n=0;for(o?i.removeAttribute("$xid"):delete i.$xid;t=r[n];n++)o?t.removeAttribute("$xid"):delete t.$xid;return i}),arguments)},$iterator:function(e,t,i,r,o){return this.$sum((function(e,t,i,r,o){var n=arguments.callee;if("function"!=typeof r){var a=r||0;r=function(e,t){return t==a}}for(var s,u,l=0,d=this,c=0;d&&(1!=d.nodeType||!0!==r(d,l++));)if("x"==e)d=t?d.nextSibling:d.previousSibling;else if("y"==e)d=t?n.call(1===t?d.lastChild:d.firstChild,"x",1!==t,!0,0,o):d.parentNode;else{if(i=!xui.isBool(i)||i,s=null,d=t?(u=i&&d.firstChild)||(u=d.nextSibling)?u:s=d.parentNode:(u=i&&d.lastChild)||(u=d.previousSibling)?u:s=d.parentNode,s){for(;!(s=t?d.nextSibling:d.previousSibling);)if(!(d=d.parentNode)){if(c)return null;c=!0,s=t?document.body.firstChild:document.body.lastChild;break}d=s}i=!0}return d}),arguments)},query:function(e,t,i){e=e||"*";var r="getElementsByTagName",o=arguments.callee,n=o.f1||(o.f1=function(e,t,i){var o=this[r](e),n=[];i.test(this[t])&&(n[n.length]=this);for(var a,s=0;a=o[s];s++)i.test(a[t])&&(n[n.length]=a);return n}),a=o.f2||(o.f2=function(e,t,i){var o=this[r](e),n=[];this[t]==i&&(n[n.length]=this);for(var a,s=0;a=o[s];s++)a[t]==i&&(n[n.length]=a);return n}),s=o.f3||(o.f3=function(e,t,i){var o=this[r](e),n=[];this[t]&&(n[n.length]=this);for(var a,s=0;a=o[s];s++)a[t]&&(n[n.length]=a);return n}),u=o.f4||(o.f4=function(e){return xui.toArr(this[r](e))}),l=o.f5||(o.f5=function(e,t){var i=this[r](e),o=[];t(this)&&(o[o.length]=this);for(var n,a=0;n=i[a];a++)t(n)&&(o[o.length]=n);return o});return this.$sum(t?"function"==typeof t?l:i?xui.isReg(i)?n:a:s:u,[e,t,i])},querySelector:function(e){return this.$sum((function(){return this.querySelector(e)}))},querySelectorAll:function(e){return this.$sum((function(){return xui.toArr(this.querySelectorAll(e))}))},$add:function(e,t,i){if((xui.isHash(t)||xui.isStr(t))&&(t=xui.create(t)),i?(i=xui(t),t=this):(t=xui(t),i=this),t._nodes.length){var r,o,n,a,s,u,l,d=i.get(0),c=t.get(),p=xui.Dom,h=xui.$cache.profileMap,f=[];if(t.each((function(e){(l=(o=e.id)&&(o=h[o])&&o.LayoutTrigger&&(d===xui("body").get(0)||"none"!=p.getStyle(d,"display"))&&o.LayoutTrigger)&&f.push([l,o])})),1==c.length)r=c[0];else for(r=document.createDocumentFragment(),n=0;a=c[n];n++)r.appendChild(a);for(e.call(d,r),n=0;a=f[n];n++){for(s=0;u=a[0][s];s++)u.call(a[1]);a[1].onLayout&&a[1].boxing().onLayout(a[1])}f.length=0,d=a=r=null}return this},prepend:function(e,t){return this.$add((function(e){this.previousSibling!=e&&(this.firstChild?this.insertBefore(e,this.firstChild):this.appendChild(e))}),e,t)},append:function(e,t,i){return this.$add((function(e){(i||this!=e.parentNode)&&this.appendChild(e)}),e,t)},addPrev:function(e,t){return this.$add((function(e){this.firstChild!=e&&this.parentNode.insertBefore(e,this)}),e,t)},addNext:function(e,t){return this.$add((function(e){this.nextSibling!=e&&(this.nextSibling?this.parentNode.insertBefore(e,this.nextSibling):this.parentNode.appendChild(e))}),e,t)},replace:function(e,t){(xui.isHash(e)||xui.isStr(e))&&(e=xui.create(e)),e=xui(e);var i,r,o=this.get(0),n=e.get(),a=n.length;if(a>0&&(i=n[a-1])){for(o.parentNode.replaceChild(i,o),r=0;r<a-1;r++)i.parentNode.insertBefore(n[r],i);t&&this.remove()}return o=i=null,e},swap:function(e){var t=this,i=xui.Dom.getEmptyDiv().html("*",!1);return(xui.isHash(e)||xui.isStr(e))&&(e=xui.create(e)),e=xui(e),t.replace(i,!1),e.replace(t,!1),i.replace(e,!1),i.get(0).innerHTML="",document.body.insertBefore(i.get(0),document.body.firstChild),t},remove:function(e,t,i){if(!1===e)this.each((function(e,t){e.raphael&&e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}));else{var r=xui.$getGhostDiv();this.each((function(e){r.appendChild(e)}),!0);var o=function(){xui.$purgeChildren(r),i&&(xui.tryF(i),i=null),r=null};t?o():xui.asyRun(o)}return this},empty:function(e,t){return this.each((function(i){xui([i]).html("",e,null,t)}))},html:function(e,t,i,r,o){var n,a="",s=this.get(0);if(t=!1!==t,e!==undefined){if(s){if(3==s.nodeType)s.nodeValue=e;else{if(!s.firstChild&&""===e)return this;if(t){var u=xui.$getGhostDiv();for(n=s.childNodes.length-1;n>=0;n--)u.appendChild(s.childNodes[n]);var l=function(){xui.$purgeChildren(u),o&&(xui.tryF(o),o=null),u=null};r?l():xui.asyRun(l)}var d;if(i){var c,p,h,f=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/gi,x=/\ssrc=([\'\"])(.*?)\1/i;for(d=[];c=f.exec(e);)(h=!!(p=c[1])&&p.match(x))&&h[2]?d.push([1,h[2]]):c[2]&&c[2].length>0&&d.push([2,c[2]]);e=e.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,"")}s.innerHTML=e,d&&d.length>0&&xui.arr.each(d,(function(e){1==e[0]?xui.include(null,e[1]):xui.exec(e[1])}))}s=null}return this}return s&&(a=3==s.nodeType?s.nodeValue:s.innerHTML,s=null),a},loadHtml:function(e,t,i){var r=this;"string"==typeof e&&(e={url:e}),xui.tryF(t),xui.Ajax(e.url,e.query,(function(e){var t=xui.create("div");t.html(e,!1,!0),r.append(t.children()),xui.tryF(i)}),(function(e){r.append("<div>"+e+"</div>"),xui.tryF(i)}),null,e.options).start()},loadIframe:function(e,t){"string"==typeof e&&(e={url:e});var i,r=t||"aiframe_"+xui.stamp();(i=xui.Dom.byId(t))&&xui(i).remove();var o=xui.browser.ie&&xui.browser.ver<9,n=document.createElement(o?"<iframe name='"+r+"'>":"iframe");n.id=n.name=r,n.src=e.url,n.frameBorder="0",n.marginWidth="0",n.marginHeight="0",n.vspace="0",n.hspace="0",n.allowTransparency="true",n.width="100%",n.height="100%",this.append(n),xui.Dom.submit(e.url,e.query,e.method,n.name,e.enctype)},outerHTML:function(e,t){var i=this,r="",o=i.get(0);if(o.id,e!==undefined){var n=i.replace(xui.str.toDom(e),!1);return i._nodes[0]=n._nodes[0],xui([o]).remove(t),i}if(xui.browser.gek){var a=xui.$getGhostDiv();a.appendChild(i.get(0).cloneNode(!0)),r=a.innerHTML,a.innerHTML="",a=null}else r=o.outerHTML;return o=null,r},text:function(e){return e!==undefined?(this.each((function(t){for(var i,r=t.childNodes.length-1;r>=0;r--)(i=t.childNodes[r])&&3==i.nodeType&&(i.nodeValue="");t.appendChild(document.createTextNode(e))})),this):(t=this.get(0))?t.textContent||t.innerText:"";var t},attr:function(e,t){var i=this,r=arguments.callee,o=r.map1||(r.map1={class:"className",readonly:"readOnly",tabindex:"tabIndex",for:"htmlFor",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",value:"value"}),n=r.map2||(r.map2={href:1,src:1,style:1});if("object"==typeof e){for(var a in e)r.call(i,a,e[a]);return i}var s=xui.browser.ie&&"style"==e,u=!n[e=o[e]||e];if(t!==undefined)return i.each((function(i){if(null===t){if(s)i.style.cssText="";else if(u)try{i[e]=null,1==i.nodeType&&i.removeAttribute(e)}catch(e){}}else t="style"==e?(t+"").replace(/[;]+/g,";").replace(/^;/,""):t,s?i.style.cssText=""+t:u?(i[e]=t,1==i.nodeType&&"value"!=e&&"string"==typeof t&&i.setAttribute(e,t)):i.setAttribute(e,t)}));var l,d=i.get(0);return s?d.style.cssText:"selected"==e&&xui.browser.kde?d.parentNode.selectedIndex:(l=e in d&&u?d[e]:d.getAttribute(e,xui.browser.ie&&!u?2:undefined),d=null,"style"==e?(l||"").replace(/[;]+/g,";").replace(/^;/,""):l)},$touchscroll:function(e){if(xui.browser.fakeTouch||xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){var t={x:1,y:1,xy:1},i=this._nodes,r=function(e){var t=xui.getNodeData(e,"_wheelscroll");return t||xui.setNodeData(e,"_wheelscroll",t={}),t},o=function(e){var t=r(e);if((t._speedx||t._speedy)&&(new Date).getTime()-t._lastTime<50){var i,o={},n=e.scrollLeft,a=e.scrollTop;if(t._speedx&&(i=[Math.max(0,n),Math.max(0,n+Math.sign(t._speedx)*Math.min(50,Math.abs(t._speedx))*40)])[0]!==i[1]&&(o.scrollLeft=i),t._speedy&&(i=[Math.max(0,a),Math.max(0,a+Math.sign(t._speedy)*Math.min(50,Math.abs(t._speedy))*40)])[0]!==i[1]&&(o.scrollTop=i),!xui.isEmpty(o)){var s=xui.getNodeData(e,"_inthread");s&&(xui.Thread.abort(s),xui.setNodeData(e,"_inthread"),xui.setData(["!document","$fakescroll"])),xui(e).animate(o,null,null,2e3,null,"expoOut").start()}}t._opx=t._opy=t._ox=t._oy=t._lastTime=t._speedx=t._speedy=null};t[e]||(e=null),xui(i)[xui.browser.fakeTouch?"onMousedown":"onTouchstart"](t[e]?function(t,i,n){if(xui.DragDrop._profile.isWorking)return!0;if(!xui(n).scrollable("x")&&!xui(n).scrollable("y"))return!0;var a,s=xui(n).get(0),u=xui.getNodeData(s,"_inthread");u&&(xui.Thread.abort(u),xui.setNodeData(s,"_inthread"));var l=r(s);if(xui.browser.fakeTouch){if("left"!==xui.Event.getBtn(i))return!0;a=i}else{if(i.touches.length>1)return!0;a=i.touches[0]}return s&&("xy"!=e&&"x"!=e||(l._ox=s.scrollLeft,l._opx=a.pageX),"xy"!=e&&"y"!=e||(l._oy=s.scrollTop,l._opy=a.pageY)),!xui.browser.fakeTouch||(xui.setData(["!document","$fakescroll"],n),xui.doc.onMouseup((function(e,t,i){xui.setData(["!document","$fakescroll"]),xui.asyRun((function(){xui.setData(["!document","$fakescrolling"])})),xui.doc.onMouseup(null,"touchscroll"),o(s)}),"touchscroll"),!0)}:null,"touchscroll"),xui(i)[xui.browser.fakeTouch?"onMousemove":"onTouchmove"](t[e]?function(t,i,o){if(xui.DragDrop._profile.isWorking)return!0;if(xui.browser.fakeTouch&&xui.getData(["!document","$fakescroll"])!=o)return!0;var n,a,s,u=xui(o).get(0);if(xui.browser.fakeTouch){if("left"!==xui.Event.getBtn(i))return!0;n=i}else{if(i.touches.length>1)return!0;n=i.touches[0]}if(u){var l=r(u);return l._lastTime=(new Date).getTime(),a=u.scrollLeft,s=u.scrollTop,"xy"!=e&&"x"!=e||(u.scrollLeft=l._ox+l._opx-n.pageX,a==u.scrollLeft?(l._ox=u.scrollLeft,l._opx=n.pageX):l._speedx=u.scrollLeft-a),"xy"!=e&&"y"!=e||(null===l._oy&&(l._oy=u.scrollTop+l._opy),u.scrollTop=l._oy+l._opy-n.pageY,s==u.scrollTop?(l._oy=u.scrollTop,l._opy=n.pageY):l._speedy=u.scrollTop-s),xui.browser.fakeTouch&&(a===u.scrollLeft&&s===u.scrollTop||xui.setData(["!document","$fakescrolling"],1)),a==u.scrollLeft&&s==u.scrollTop}}:null,"touchscroll"),xui(i).onTouchend(t[e]?function(e,t,i){return!!xui.DragDrop._profile.isWorking||t.touches.length>1||void o(xui(i).get(0))}:null,"touchscroll")}return this},isScrollBarShowed:function(e){var t=this.get(0);if(t)return"y"==e?(t.offsetWidth||0)>(t.clientWidth||0):(t.offsetHeight||0)>(t.clientHeight||0)},scrollable:function(e){return 0!==this[e="x"==e?"scrollLeft":"scrollTop"]()||(this[e](1),0!==this[e]()&&(this[e](0),!0))},scrollIntoView:function(){return this.each((function(e){e.scrollIntoView()}))},css:function(e,t,i){return"object"==typeof e||t!==undefined?(this.each((function(i){xui.Dom.setStyle(i,e,t)})),(xui.browser.fakeTouch||xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB))&&("overflow"!=e&&"overflow-x"!=e&&"overflow-y"!=e||("auto"==t||"scroll"==t?this.$touchscroll("overflow"==e?"xy":"overflow-x"==e?"x":"y"):this.$touchscroll(null))),this):xui.Dom.getStyle(this.get(0),e,i)},_getEmSize:function(e){return this.get(0)?(parseFloat(xui.Dom.getStyle(this.get(0),"fontSize",!0))||xui.CSS._getDftEmSize())*(e||1):null},rotate:function(e){if(xui.isSet(e))return e=parseFloat(e)||0,(e%=360)<0&&(e+=360),this.each((function(t){if(t.raphael&&t.id){var i=xui.Event._getProfile(t.id);(i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))&&t.transform("r"+e)}else{e+="deg";var r=t.style.transform||"";/rotate\([^)]*\)/i.test(r)?r=r.replace(/(rotate\()([^)]+)/i,"$1"+e):r+=" rotate("+e+")",xui.Dom.setStyle(t,"transform",r)}}));var t=this.get(0);if(t.raphael&&t.id){var i=xui.Event._getProfile(t.id);if((i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))){t=t.transform(),t=xui.isArr(t)?t.length?t.join():"":t?window.Raphael.parseTransformString(t).join():"";var r=/r,([-\d.]+)/i.exec(t);return e=r?parseFloat(r[1]||0):0,(e%=360)<0&&(e+=360),e}return 0}return(r=/rotate\(([-\d.]+)/i.exec(t.style.transform))?parseFloat(r[1]||0):0},scaleX:function(e){if(xui.isSet(e))return this.each((function(t){if(e=parseFloat(e),t.raphael&&t.id){e=e||0;var i,r=xui.Event._getProfile(t.id);(r=r&&r.parent&&r.parent._paper)&&(t=r.getById(t.raphaelid))&&((i=xui.clone(window.Raphael.parseTransformString(t.transform()),!0))&&i[0]&&"s"==i[0][0]?i[0][1]=e:(i=i||[]).unshift(["s",e,1]),t.transform(i))}else{xui.isNaN(e)&&(e=1);var o=t.style.transform||"";/(scale\()([^,]+),([^)]+)/i.test(o)?o=o.replace(/(scale\()([^,]+),([^)]+)/i,"$1"+e+",$3"):/scale\([-\d.]*\)/i.test(o)?o=o.replace(/scale\([-\d.]*\)/i,"scale("+e+",1)"):o+=" scale("+e+",1)",xui.Dom.setStyle(t,"transform",o)}}));var t=this.get(0);if(t.raphael&&t.id){e=1;var i=xui.Event._getProfile(t.id);return(i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))&&xui.arr.each(window.Raphael.parseTransformString(t.transform()),(function(t){"s"==t[0]&&(e*=t[1])})),e}var r=/(scale\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return r?parseFloat(r[2]||1):(r=/scale\(([-\d.]*)\)/i.exec(this.get(0).style.transform))?r[1]:1},scaleY:function(e){if(xui.isSet(e))return this.each((function(t){if(e=parseFloat(e),t.raphael&&t.id){e=e||0;var i,r=xui.Event._getProfile(t.id);(r=r&&r.parent&&r.parent._paper)&&(t=r.getById(t.raphaelid))&&((i=xui.clone(window.Raphael.parseTransformString(t.transform()),!0))&&i[0]&&"s"==i[0][0]?i[0][2]=e:(i=i||[]).unshift(["s",1,e]),t.transform(i))}else{xui.isNaN(e)&&(e=1);var o=t.style.transform||"";/(scale\()([^,]+),([^)]+)/i.test(o)?o=o.replace(/(scale\()([^,]+),([^)]+)/i,"$1$2,"+e):/scale\([-\d.]*\)/i.test(o)?o=o.replace(/scale\([-\d.]*\)/i,"scale(1,"+e+")"):o+=" scale(1,"+e+")",xui.Dom.setStyle(t,"transform",o)}}));var t=this.get(0);if(t.raphael&&t.id){e=1;var i=xui.Event._getProfile(t.id);return(i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))&&xui.arr.each(window.Raphael.parseTransformString(t.transform()),(function(t){"s"==t[0]&&(e*=t[2])})),e}var r=/(scale\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return r?parseFloat(r[3]||1):(r=/scale\(([-\d.]*)\)/i.exec(this.get(0).style.transform))?r[1]:1},translateX:function(e){if(xui.isSet(e))return this.each((function(t){if(t.raphael&&t.id){e=parseFloat(e)||0;var i,r=xui.Event._getProfile(t.id);(r=r&&r.parent&&r.parent._paper)&&(t=r.getById(t.raphaelid))&&((i=xui.clone(window.Raphael.parseTransformString(t.transform()),!0))&&i.length&&i[i.length-1]&&"t"==i[i.length-1][0]?i[i.length-1][1]=e:(i=i||[]).push(["t",e,0]),t.transform(i))}else{e=xui.CSS.$addu(e);var o=t.style.transform||"";/translate\([^)]*\)/i.test(o)?o=o.replace(/(translate\()([^,]+),([^)]+)/i,"$1"+e+",$3"):o+=" translate("+e+",0)",xui.Dom.setStyle(t,"transform",o)}}));var t=this.get(0);if(t.raphael&&t.id){e=0;var i=xui.Event._getProfile(t.id);return(i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))&&xui.arr.each(window.Raphael.parseTransformString(t.transform()),(function(t){"t"==t[0]&&(e+=t[1])})),e}var r=/(translate\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return r?(r[2]||"").replace(/\s/g,""):""},translateY:function(e){if(xui.isSet(e))return this.each((function(t){if(t.raphael&&t.id){e=parseFloat(e)||0;var i,r=xui.Event._getProfile(t.id);(r=r&&r.parent&&r.parent._paper)&&(t=r.getById(t.raphaelid))&&((i=xui.clone(window.Raphael.parseTransformString(t.transform()),!0))&&i.length&&i[i.length-1]&&"t"==i[i.length-1][0]?i[i.length-1][2]=e:(i=i||[]).push(["t",0,e]),t.transform(i))}else{e=xui.CSS.$addu(e);var o=t.style.transform||"";/translate\([^)]*\)/i.test(o)?o=o.replace(/(translate\()([^,]+),([^)]+)/i,"$1$2,"+e):o+=" translate(0,"+e+")",xui.Dom.setStyle(t,"transform",o)}}));var t=this.get(0);if(t.raphael&&t.id){e=0;var i=xui.Event._getProfile(t.id);return(i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))&&xui.arr.each(window.Raphael.parseTransformString(t.transform()),(function(t){"t"==t[0]&&(e+=t[2])})),e}var r=/(translate\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return r?(r[3]||"").replace(/\s/g,""):""},skewX:function(e){if(xui.isSet(e))return xui.isFinite(e)&&(e+="deg"),this.each((function(t){var i=t.style.transform||"";/skew\([^)]*\)/i.test(i)?i=i.replace(/(skew\()([^,]+),([^)]+)/i,"$1"+(e||0)+",$3"):i+=" skew("+e+",0deg)",xui.Dom.setStyle(t,"transform",i)}));var t=/(skew\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return t?parseFloat(t[2]||0):0},skewY:function(e){if(xui.isSet(e))return xui.isFinite(e)&&(e+="deg"),this.each((function(t){var i=t.style.transform||"";/skew\([^)]*\)/i.test(i)?i=i.replace(/(skew\()([^,]+),([^)]+)/i,"$1$2,"+(e||0)):i+=" skew(0deg,"+e+")",xui.Dom.setStyle(t,"transform",i)}));var t=/(skew\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return t?parseFloat(t[3]||0):0},caret:function(e,t){var i=this.get(0),r=i.nodeName.toLowerCase(),o=typeof e,n=xui.browser.ie;if(/^(input|textarea)$/i.test(r)&&("input"!=r||"text"==i.type.toLowerCase()||"password"==i.type.toLowerCase())){if(i.focus(),"number"==o)return n?((s=i.createTextRange()).collapse(!0),s.moveEnd("character",t),s.moveStart("character",e),s.select()):(i.focus(),i.setSelectionRange(e,t)),this;if("string"==o){var a,s=this.caret(),u=0,l=0,d=i.value,c=/\r/g;return n&&(u=(u=d.substr(0,s[0]).match(c))&&u.length||0,l=(l=e.match(c))&&l.length||0),xui.browser.opr&&(l=(u=(u=e.match(/\n/g))&&u.length||0)-(l=(l=e.match(/\r\n/g))&&l.length||0),u=0),i.value=d.substr(0,s[0])+e+d.substr(s[1],d.length),a=s[0]-u+l+e.length,this.caret(a,a),a}if(n&&document.selection){var p;if(u=(s=document.selection.createRange()).text.length,"input"==r.toLowerCase())return s.moveStart("character",-i.value.length),[(p=s.text.length)-u,p];var h=s.duplicate();return h.moveToElementText(i),h.setEndPoint("EndToEnd",s),[(p=h.text.length)-u,p]}return[i.selectionStart,i.selectionEnd]}},show:function(e,t,i,r,o){var n,a,s;return this.each((function(u){if(1==u.nodeType){var l=xui.getNodeData(u,"_inthread");l&&(xui.Thread.abort(l),xui.setNodeData(u,"_inthread")),n=u.style,(s=xui.getNodeData(u))._xuihide&&("_left"in s&&n.left!=(a=s._left)&&(n.left=a),"_top"in s&&n.top!=(a=s._top)&&(n.top=a),"_position"in s&&n.position!=(a=s._position)&&(n.position=a),"visible"!=n.visibility&&(n.visibility="visible"),xui(u).removeClass("xui-ui-hidden"),s._xuihide=0),xui.isSet(e)&&(n.left=e),xui.isSet(t)&&(n.top=t),(r=o?null:r||xui.get(xui.UIProfile.getFromDom(u),["properties","showEffects"]))&&(r=xui.Dom._getEffects(r,1)),r?xui.Dom._vAnimate(u,r,i):i&&i()}}))},hide:function(e,t,i){var r,o;return this.each((function(n){if(1==n.nodeType){var a=xui.getNodeData(n,"_inthread");a&&(xui.Thread.abort(a),xui.setNodeData(n,"_inthread")),r=n.style,o=xui.getNodeData(n);var s=function(){1!==o._xuihide&&(o._position=r.position,o._visibility=r.visibility,o._top=r.top,o._left=r.left,o._xuihide=1),"absolute"!=r.position&&(r.position="absolute"),r.visibility="hidden",xui(n).addClass("xui-ui-hidden"),e&&e()};(t=i?null:t||xui.get(xui.UIProfile.getFromDom(n),["properties","hideEffects"]))&&(t=xui.Dom._getEffects(t,0)),t?xui.Dom._vAnimate(n,t,s):s()}}))},cssRegion:function(e,t){var i=this;if("object"==typeof e){for(var r,o=i.get(0),n=xui.Dom,a=n._setUnitStyle,s={},u=0,l=n._boxArr;r=l[u++];)s[r]=r in e&&null!==e[r]&&a(o,r,e[r]);return t&&((a=n.$hasEventHandler)(o,"onsize")&&(s.width||s.height)&&i.onSize(!0,{width:s.width,height:s.height}),a(o,"onmove")&&(s.left||s.top)&&i.onMove(!0,{left:s.left,top:s.top})),i}var d=t,c=e?i.offset(null,d):i.cssPos(),p=i.cssSize();return{left:c.left,top:c.top,width:p.width,height:p.height}},cssSize:function(e,t){var i,r,o,n=this,a=n.get(0),s=xui.Dom,u=s._setUnitStyle;return a?(e?(r=null!==e.width&&u(a,"width",e.width),o=null!==e.height&&u(a,"height",e.height),t&&(r||o)&&s.$hasEventHandler(a,"onsize")&&n.onSize(!0,{width:r,height:o}),i=n):i={width:n._W(a,1)||0,height:n._H(a,1)},i):e?n:{}},cssPos:function(e,t){var i,r,o,n=this.get(0),a=xui.Dom,s=xui.CSS,u=a._setUnitStyle;return e?(i=null!=e.left&&u(n,"left",e.left),r=null!==e.top&&u(n,"top",e.top),t&&(i||r)&&a.$hasEventHandler(n,"onmove")&&this.onMove(!0,{left:i,top:r}),o=this):(u=a.getStyle,o={left:s.$px(u(n,"left"),n),top:s.$px(u(n,"top"),n)}),n=null,o},offset:function(e,t,i){var r,o,n=xui.browser,a=this,s=a.get(0),u=s,l=s.parentNode,d=s.offsetParent,c=s.ownerDocument,p=c.documentElement,h=c.body,f=/^inline|table.*$/i,x=xui.Dom.getStyle,g="fixed"==x(s,"position"),m=arguments.callee,b=m.add||(m.add=function(e,t,i){e.left+=parseFloat(t)||0,e.top+=parseFloat(i)||0}),v=m.border||(m.border=function(e,t){b(t,x(e,"borderLeftWidth"),x(e,"borderTopWidth"))}),y=m.TTAG||(m.TTAG={TABLE:1,TD:1,TH:1}),A=m.HTAG||(m.HTAG={BODY:1,HTML:1}),_=m.posDiff||(m.posDiff=function(e,t){var i=e.cssPos(),r=e.offset(null,t);return{left:r.left-i.left,top:r.top-i.top}});if(t=t?xui(t).get(0):c,e){if(null===e.left&&null===e.top)return a;var w=_(a,t);a.cssPos({left:null===e.left?null:e.left-w.left,top:null===e.top?null:e.top-w.top}),r=a}else{if(xui.browser.gek&&s===document.body||!s.getBoundingClientRect){for(b(e={left:0,top:0},s.offsetLeft,s.offsetTop);d&&d!=t&&d!=t.offsetParent;)b(e,d.offsetLeft,d.offsetTop),(n.kde||n.gek&&!y[d.nodeName])&&v(d,e),g||"fixed"!=x(d,"position")||(g=!0),"BODY"!=d.nodeName&&(u="BODY"==d.nodeName?u:d),d=d.offsetParent;for(;l&&l.nodeName&&l!=t&&!A[l.nodeName];)f.test(x(l,"display"))||b(e,-l.scrollLeft,-l.scrollTop),n.gek&&"visible"!=x(l,"overflow")&&v(l,e),l=l.parentNode;n.gek&&"absolute"!=x(u,"position")&&b(e,-h.offsetLeft,-h.offsetTop),g&&b(e,p.scrollLeft||h.scrollLeft||0,p.scrollTop||h.scrollTop||0)}else if(e={left:(o=xui.Dom.$getBoundingClientRect(s,i)).left,top:o.top},1==t.nodeType&&t!==document.body)b(e,-(o=xui.Dom.$getBoundingClientRect(t,i)).left+t.scrollLeft,-o.top+t.scrollTop);else{var C=xui.Dom.getEmptyDiv();C.css({left:0,top:0,position:"absolute"});var I=xui.Dom.$getBoundingClientRect(C.get(0),i);C.css({left:xui.Dom.HIDE_VALUE,top:xui.Dom.HIDE_VALUE}),b(e,-I.left,-I.top)}r=e}return r},hasClass:function(e){var t,i,r=xui.isReg(e),o=xui.Dom._getClass(this.get(0)).split(/\s+/);if(!r)return-1!=xui.arr.indexOf(o,e+"");for(t=0,i=o.length;t<i;t++)if(e.test(o[t]))return!0;return!1},addClass:function(e){if(!e)return this;var t,i,r,o,n,a=arguments.callee,s=a.reg||(a.reg=/\s+/),u=(e+"").split(s);return u.length?this.each((function(e){for(n=0,t=xui.Dom._getClass(e).split(s),o=[],i=0,r=t.length;i<r;i++)t[i]&&o.push(t[i]);for(i=0,r=u.length;i<r;i++)u[i]&&-1==xui.arr.indexOf(t,u[i])&&(n=1,o.push(u[i]));n&&xui.Dom._setClass(e,o.join(" "))})):this},removeClass:function(e){var t,i,r,o,n,a=xui.isReg(e),s=arguments.callee,u=s.reg||(s.reg=/\s+/);return a||(n=(e+"").split(u)).length?this.each((function(s){if(o=0,t=xui.Dom._getClass(s).split(u),a)xui.filter(t,(function(t,i){if(e.test(t))return o=1,!1}));else for(i=0,r=n.length;i<r;i++)-1!=xui.arr.indexOf(t,n[i])&&(o=1,xui.arr.removeValue(t,n[i]));o&&xui.Dom._setClass(s,t.join(" "))})):this},replaceClass:function(e,t){var i,r;return this.each((function(o){r=(i=xui.Dom._getClass(o)).replace(e,t),i!=r&&xui.Dom._setClass(o,r)}))},tagClass:function(e,t){var i=this,r=arguments.callee,o=r["_r1_"+e]||(r["_r1_"+e]=new RegExp("([-\\w]+"+e+"[-\\w]*)")),n=r._r2||(r._r2=/([-\w]+)/g);i.removeClass(o);var a=(t=!1!==t)?i.replaceClass(n,"$1 $1"+e):i;return!xui.__iefix2||"-checked"!=e&&"-fold"!=e&&"-expand"!=e||this.each((function(i){var r=xui.Dom._getClass(i).split(/\s+/);-1==xui.arr.indexOf(r,"xuifont")&&-1==xui.arr.indexOf(r,"xuicon")||xui.arr.each(r,(function(r){if(xui.__iefix2[r+(t?"":e)]&&xui.__iefix2[t?r.replace(new RegExp(e+"$"),""):r])return xui(i).html(xui.__iefix2[r.replace(new RegExp(e+"$"),"")+(t?e:"")]),!1}))})),a},$addEventHandler:function(e){var t,i=xui.Event,r=i.$eventhandler;return this.each((function(o){3!=o.nodeType&&(xui.setNodeData(o,["eHandlers","on"+i._eventMap[e]],r),(t=i._eventHandler[e])&&(xui.setNodeData(o,["eHandlers",t],r),i._addEventListener(o,i._eventMap[e],r),xui.browser.isTouch&&"onmousedown"==t&&(xui.setNodeData(o,["eHandlers","onxuitouchdown"],r),i._addEventListener(o,"xuitouchdown",r))))}))},$removeEventHandler:function(e){var t,i=xui.Event,r=i.$eventhandler,o=i.$eventhandler3;return this.each((function(n){(t=i._eventHandler[e])&&(i._removeEventListener(n,t,r),i._removeEventListener(n,t,o),xui.browser.isTouch&&"onmousedown"==t&&i._removeEventListener(n,"xuitouchdown",r)),(n=xui.getNodeData(n,"eHandlers"))&&(delete n[t="on"+i._eventMap[e]],xui.browser.isTouch&&"onmousedown"==t&&delete n.onxuitouchdown)}))},$addEvent:function(e,t,i,r){var o,n,a,s,u,l=xui.Event,d=xui.arr.removeValue,c=xui.arr.insertAny;return r||0===r||(r=-1),i="string"==typeof i?"$"+i:undefined,this.$addEventHandler(e).each((function(p){3!=p.nodeType&&((o=l.getId(p))||p===window||p===document||(o=p.id=xui.Dom._pickDomId()),(n=xui.$cache.profileMap[o])||(n=new xui.DomProfile(o)),a=n.events||(n.events={}),u=a[e]||(a[e]=[]),i===undefined&&(u.length=0,u=a[e]=[],r=-1,i="_"),u[i]=t,d(u,i),-1==r?u[u.length]=i:c(u,i,r),xui.Event&&(n=xui.Event._getProfile(o))&&(a=n.$_egetter)&&(s=a[o+"+"+e])&&(s.length=0,delete a[o+"+"+e]))})),this},$removeEvent:function(e,t,i){var r,o,n,a,s=xui.Event,u=xui.$cache.profileMap,l=s._eventMap[e];return this.each((function(d){(a=s.getId(d))&&(r=u[a])&&(o=r.events)&&(i?xui.arr.each(s._getEventName(l),(function(e){delete o[e]})):"string"==typeof t?(t="$"+t,(n=o[e])&&(delete n[t],-1!=xui.arr.indexOf(n,t)&&xui.arr.removeValue(n,t))):delete o[e],xui.Event&&(r=xui.Event._getProfile(a))&&(o=r.$_egetter)&&(n=o[a+"+"+e])&&(n.length=0,delete o[a+"+"+e]))})),this},$getEvent:function(e,t){var i;if(i=xui.Event.getId(this.get(0))){if(t)return xui.get(xui.$cache.profileMap,[i,"events",e,"$"+t]);var r=[],o=xui.get(xui.$cache.profileMap,[i,"events",e]);return xui.arr.each(o,(function(e,t){r[r.length]={o:o[e]}})),r}},$clearEvent:function(){return this.each((function(e,t){var i,r=xui.Event,o=r.$eventhandler,n=r.$eventhandler3;(t=r.getId(e))&&(t=xui.$cache.profileMap[t])&&(t.events&&(xui.each(t.events,(function(t,a){(i=xui.Event._eventMap[a])&&(r._removeEventListener(e,i,o),r._removeEventListener(e,i,n))})),xui.breakO(t.events,2),delete t.events),xui.set(xui.$cache.domPurgeData,[e.$xid,"eHandlers"],{}))}))},$fireEvent:function(e,t){var i,r,o=xui.Event._eventMap[e],n="on"+o,a=arguments.callee,s=(xui.Event.$eventhandler,a.f1||(a.f1=function(){this.returnValue=!1})),u=a.f2||(a.f2=function(){this.cancelBubble=!0});return this.each((function(a){if(i=xui.getNodeData(a,["eHandlers",n]))if("blur"==o||"focus"==o)try{a[o]()}catch(e){}else r=xui.copy(t),xui.merge(r,{type:o,target:a,button:1,$xuievent:!0,$xuitype:e,preventDefault:s,stopPropagation:u},"all"),i.call(a,r)}))},nativeEvent:function(e){return this.each((function(t){if(3!==t.nodeType&&8!==t.nodeType)try{t[e]()}catch(e){}}))},$canFocus:function(){var e,t,i=arguments.callee,r=xui.Dom.getStyle,o=i.map||(i.map={a:1,input:1,select:1,textarea:1,button:1,object:1});return!!((t=this.get(0))&&t.focus&&((e=o[t.nodeName.toLowerCase()])&&!(parseInt(t.tabIndex,10)<=-1)||!e&&parseInt(t.tabIndex,10)>=(xui.browser.ie?1:0))&&"none"!=r(t,"display")&&"hidden"!=r(t,"visibility")&&t.offsetWidth>0&&t.offsetHeight>0)},focus:function(e){var t=this;if(e||t.$canFocus())try{t.get(0).focus()}catch(e){}return t},blur:function(){var e=this.get(0);e&&(e.blur(),document.activeElement===e&&xui.asyRun((function(){xui("body").append(e=xui.create("<button style='position:absolute;width:1px;height:1px;left:-1000px;'></button>")),e.focus(),e.remove()})))},setSelectable:function(e){return this.removeClass("xui-ui-selectable").removeClass("xui-ui-unselectable"),this.addClass(e?"xui-ui-selectable":"xui-ui-unselectable"),this.each((function(t){xui.browser.ie&&xui.browser.ver<10&&xui.setNodeData(t,"_onxuisel",e?"true":"false")}))},contentBox:function(e){return xui.browser.ie||xui.browser.opr?!/BackCompat|QuirksMode/.test((e||document).compatMode):"content-box"==(this.css("box-sizing")||this.css("-moz-box-sizing"))},setInlineBlock:function(){var e=this;return xui.browser.gek?xui.browser.ver<3?e.css("display","-moz-inline-block").css("display","-moz-inline-box").css("display","inline-block"):e.css("display","inline-block"):xui.browser.ie&&xui.browser.ver<=6?e.css("display","inline-block").css({display:"inline",zoom:"1"}):e.css("display","inline-block"),e},topZindex:function(e){var t,i,r,o,n=1e3,a=0,s=this.get(0),u=s.offsetParent||s.parentNode;if(!xui.browser.ie||u&&"HTML"!=(u.nodeName+"").toUpperCase()||(u=xui("body").get(0)),1!=s.nodeType||!u)return 1;for(i=u.childNodes,t=0;r=i[t];t++)o=r.style,r==s||1!=r.nodeType||!r.$xid||o&&"none"==o.display||o&&"hidden"==o.visibility||r.zIndexIgnore||xui.getNodeData(r,"zIndexIgnore")||(n=n>(a=parseInt(o&&o.zIndex,10)||0)?n:a);return++n>=xui.Dom.TOP_ZINDEX&&(xui.Dom.TOP_ZINDEX=n+1),e?(s.style.zIndex=n,this):n>(a=parseInt(s.style.zIndex,10)||0)?n:a},nextFocus:function(e,t,i,r){e=!xui.isBool(e)||e;var o=this.get(0),n=this.$iterator("",e,t,(function(e){return e!==o&&(!r||e.id&&r.test(e.id))&&xui([e]).$canFocus()}));return n.isEmpty()||!1===i||n.focus(),o=null,n},fullScreen:function(e){var t=this.get(0),i=document;if(t){t===i&&(t=i.documentElement);var r=!1!==e?t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen:i.exitFullscreen||i.mozCancelFullScreen||i.webkitExitFullscreen||i.webkitExitFullscreen;if(r)r.call(!1!==e?t:i);else if(void 0!==window.ActiveXObject){var o=new ActiveXObject("WScript.Shell");null!==o&&o.SendKeys("{F11}")}}},animate:function(e,t,i,r,o,n,a,s,u,l,d){var c=this,p={left:1,top:1,right:1,bottom:1,width:1,height:1},h=xui.$cache.profileMap[c.id()],f=h?h["xui.DomProfile"]?xui(h):h.boxing():null,x=xui.CSS,g=xui.Dom.$AnimateEffects,m=function(e,t,i,r){return p[i]&&t&&xui.isFun(t[r="get"+xui.str.initial(i)])?t[r](i):e[i]?e[i]():e.css(i)};if(e){xui.each(e,(function(t,i){xui.isFun(t)||(xui.isArr(t)&&1!==t.length||(t=[m(c,f,i),t]),e[i]=t)}));var b=e;e=xui.clone(e),r=(o||0)>0?16*o:r||200,l=l||1,-1!=(n||"").indexOf("-")&&(n=n.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()}))),n=n in g?n:"circIn";var v,y=c.get(0),A=function(t){var i,o,a,h,m,b,A=xui.stamp()-v;if(A>=r&&(A=r),xui.each(e,(function(e,t){i=g[n](r,A),"function"==typeof e?e.call(c,i):(m=e[0],b=e[1],o=e[2],xui.str.endWith(t.toLowerCase(),"color")?i=function(e,t,i){return"string"!=typeof e||"string"!=typeof t?"#fff":i<0?e:i>1?t:(e=(r=function(e){return"#"!=e.charAt(0)?"#"+e:e})(e),t=r(t),o=function(e,t,i){return parseInt(e.slice(t,i),16)||0},"#"+(a=function(e,t,i,r){var o=e[r]+Math.round(parseFloat(i*(t[r]-e[r]))||0);return(o<16?"0":"")+o.toString(16)})(e=(n=function(e){return{red:o(e,1,3),green:o(e,3,5),blue:o(e,5,7)}})(e),t=n(t),i,"red")+a(e,t,i,"green")+a(e,t,i,"blue"));var r,o,n,a}(m,b,i):(xui.isFinite(b)||(o=b.replace(/[-\d.]*/,""),a=o||"px",xui.isFinite(m)||(h=m.replace(/[-\d.]*/,"")||"px")!=a&&("em"==h&&"px"==a?m=x.$em2px(m,y):"px"==h&&"em"==a&&(m=x.$px2em(m,y)))),m=parseFloat(m)||0,b=parseFloat(b)||0,i=xui.toFixedNumber(m+(b-m)*i,6)),function(e,t,i,r,o){p[i]&&t&&xui.isFun(t[o="set"+xui.str.initial(i)])?t[o](r):e[i]?e[i](r):e.css(i,r)}(c,f,t,i+=o||s||""))})),A==r)return u&&!d?(v=xui.stamp(),d=1,xui.each(e,(function(e,t){xui.isFun(e)||(t=e[0],e[0]=e[1],e[1]=t)}))):(-1==l||l>0)&&(v=xui.stamp(),l>0&&(l-=1),d&&(d=0,xui.each(e,(function(e,t){xui.isFun(e)||(t=e[0],e[0]=e[1],e[1]=t)})))),l||xui.Thread.abort(t,"normal"),!1},_=[A],w=xui.getNodeData(y,"_inthread");w&&xui.Thread.isAlive(w)&&(xui.Thread.abort(w,"force"),xui.setNodeData(y,"_inthread",null));var C=xui.getNodeData(y,"_animationreset");return"function"==typeof C&&(C(),xui.setNodeData(y,"_animationreset",null)),xui.Thread(!a||xui.Thread.get(a)?xui.id():a,_,0,null,(function(i){return xui.setNodeData(y,"_inthread",i),v=xui.stamp(),xui.setNodeData(y,"_animationreset",(function(){xui.merge(e,b,"all"),v=xui.stamp(),A()})),xui.tryF(t,arguments,this)}),(function(e,t){y&&y.$xid&&(xui.setNodeData(y,"_inthread",null),xui.setNodeData(y,"_animationreset",null)),"force"!=t&&xui.tryF(i,arguments,this)}),!0)}i&&xui.tryF(i)},pop:function(e,t,i,r,o){var n=this,a=xui.stamp()+":"+n.xid();return n.popToTop(e,t||"outer",i).setBlurTrigger(a,(function(){"function"==typeof r?xui.tryF(r):n.hide()})),a},popUp:function(e,t,i,r,o){return this.pop.apply(this,arguments)},popToTop:function(e,t,i,r,o,n){var a=this;return(i=xui(i)).isEmpty()&&(i=xui("body")),a.css({position:"absolute",display:"block",zIndex:xui.Dom.TOP_ZINDEX++,visibility:"hidden"}),i.append(a),e&&a.cssPos(xui.Dom.getPopPos(e,t,a,i)),a.css({visibility:"visible"}),a.removeClass("xui-ui-hidden"),(o=n?null:o||xui.get(xui.UIProfile.getFromDom(a),["properties","showEffects"]))&&(o=xui.Dom._getEffects(o,1)),o?xui.Dom._vAnimate(a,o,r):r&&r(),this},hoverPop:function(e,t,i,r,o,n,a,s){e=xui(e),a&&(a=xui.Dom._getEffects(a,1)),s&&(s=xui.Dom._getEffects(s,0)),xui.isDefined(t)||(t="outer");var u=n||this.xid()+":"+e.xid(),l=this;return this.onMouseover(null===t?null:function(r,n,s){n.$force||(xui.resetRun(u,null),xui.getData([u,"$ui.hover.pop"])&&xui.getNodeData(e.get(0)||"empty","$ui.hover.parent")==s||(xui.setData([u,"$ui.hover.pop"],1),xui.setNodeData(e.get(0)||"empty","$ui.hover.parent",s),i&&!1===i(r,e,n,s)||(e.popToTop(s,t,o,a),e.onMouseover((function(){l.onMouseover(!0)}),"hoverPop").onMouseout((function(){l.onMouseout(!0)}),"hoverPop"))))},u).onMouseout(null===t?null:function(t,i,o){i.$force||xui.resetRun(u,(function(){xui.setData([u,"$ui.hover.pop"]),xui.setNodeData(e.get(0)||"empty","$ui.hover.parent",0),r&&!1===r(t,e,i,o,"host")||(e.hide(null,s),e.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop"))}))},u),e&&e.onMouseover(null===t?null:function(e){e.$force||xui.resetRun(u,null)},u).onMouseout(null===t?null:function(t,i,o){i.$force||xui.resetRun(u,(function(){xui.setData([u,"$ui.hover.pop"]),xui.setNodeData(e.get(0)||"empty","$ui.hover.parent",0),r&&!1===r(t,e,i,o,"pop")||(e.hide(null,s),e.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop"))}))},u),e.css("display","none"),this},setBlurTrigger:function(e,t,i,r,o){var n,a=document,s=xui.Dom._blurTrigger||(xui.Dom._blurTrigger=function(e,t){var i,r,o,n,a,s=xui.Event.getPos(t),u=arguments.callee.arr,l=xui.Event.getSrc(t),d=xui.copy(u);xui.arr.each(d,(function(e){i=!0,(a=u[e].target)?a.each((function(e){if(e!==window&&e!==document&&!xui.Dom.byId(e.id))return i=!1})):i=!1,i||(delete u[e],xui.arr.removeValue(u,e))})),d=xui.copy(u),xui.arr.each(d,(function(e){if(a=u[e]){i=!0;var d=function(){for(var e=a.target.get();l&&l.nodeName&&"BODY"!=l.nodeName&&"HTML"!=l.nodeName;){if(-1!=xui.arr.indexOf(e,l))return!0;l=l.parentNode}};if(a.checkChild&&!d()||a.target.each((function(e){if(e.parentNode&&(o=e.offsetWidth)&&(n=e.offsetHeight)&&(r=xui([e]).offset(),s.left>=r.left&&s.top>=r.top&&s.left<=r.left+o&&s.top<=r.top+n))return i=!1})),d=null,!i&&!xui.isFun(a.trigger))return!1;if(i)delete u[e],xui.arr.removeValue(u,e),xui.tryF(a.trigger,[s,t],a.target),a=null;else if(a.stopNext)return!1}}),null,!0),l=null,d.length=0}),u=s.arr||(s.arr=[]);return u[e]&&(!0===t&&(xui.tryF(u[e].trigger),t=!1),delete u[e],xui.arr.removeValue(u,e)),t&&(i?(i["xui.Dom"]?n=i:xui.isArr(i)&&((n=xui())._nodes=i),n.merge(this)):n=this,n.each((function(e){e.id||e===window||e===document||(e.id=xui.Dom._pickDomId())})),u[e]={trigger:t,target:n,checkChild:!!r,stopNext:!o},u.push(e),a.onmousedown||(a.onmousedown=xui.Event.$eventhandler),a=s=null),this},$firfox2:function(){if(!xui.browser.gek2)return this;var e=this;return e.css("overflow","hidden"),xui.asyRun((function(){e.css("overflow","auto")})),e},ieRemedy:function(){if(xui.browser.ie&&xui.browser.ver<=6){for(var e,t=this.get(),i=[],r=[],o=t.length,n=0;n<o;n++)e=t[n].style,xui.isSet(t[n].$ieRemedy)||xui.isSet(e.width)&&(t[n].$ieRemedy=e.width,e.width=(xui.CSS.$px(t[n].$ieRemedy,t[n])||0)+1+"px");xui.asyRun((function(){for(var e=0;e<o;e++)xui.isSet(t[e].$ieRemedy)&&(t[e].style.width=t[e].$ieRemedy,t[e].removeAttribute("$ieRemedy"));t.length=i.length=r.length=0}))}return this}},Static:{HIDE_VALUE:"-10000px",TOP_ZINDEX:1e4,_boxArr:xui.toArr("width,height,left,top,right,bottom"),_cursor:{},_pickDomId:function(){var e;do{e="xui_"+xui.id()}while(document.getElementById(e));return e},_map:{html:1,head:1,body:1},fixPng:function(e){if(xui.browser.ie&&xui.browser.ver<=6){if("IMG"==e.nodeName&&-1!=e.src.toLowerCase().search(/\.png$/)){var t=e.style;t.height=e.height,t.width=e.width,t.backgroundImage="none";var i=((t.filter?t.filter+",":"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+e.src+"', sizingMethod='image')").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,", ");xui.browser.ie8&&(t.msfilter=i),t.filter=i,e.src=xui.ini.img_bg}var r=(e.currentStyle.backgroundImage||t.backgroundImage||"").toLowerCase().match(/^url[("']+(.*\.png[^\)"']*)[\)"']+[^\)]*$/i);r&&(t.backgroundImage="none",i=((t.filter?t.filter+",":"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+r[1]+"', sizingMethod='crop')").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,", "),xui.browser.ie8&&(t.msfilter=i),t.filter=i)}},_getTag:function(e){return e?e.$xid?e.$xid:1==e.nodeType?xui.$registerNode(e).$xid:0:0},_ensureValues:function(e){var t,i,r=this._map,o=[],n=e===window?["!window"]:e===document?["!document"]:xui.isArr(e)?e:"[object NodeList]"==e||"[object HTMLCollection]"==e?xui.toArr(e):e["xui.Dom"]?e._nodes:e._toDomElems?e._toDomElems():"function"==typeof e?e():[e];for(i=0;i<n.length;i++)(t=(t=n[i])?t===window?"!window":t===document?"!document":"string"==typeof t||t["xui.DomProfile"]&&(t=t.domId)?"!"==t.charAt(0)?t:this._getTag(r[t]?document.getElementsByTagName(t)[0]:document.getElementById(t)):(t=n[i])["xui.UIProfile"]||t["xui.Template"]?(t.renderId||t.boxing().render())&&t.renderId:this._getTag(t):0)&&(o[o.length]=t);return o.length<=1?o:this._unique(o)},_getClass:function(e){return"string"==typeof e.className&&e.className||"string"==typeof e.className.baseVal&&e.className.baseVal||void 0!==e.getAttribute&&e.getAttribute("class")||""},_setClass:function(e,t){"string"==typeof e.className?e.className=t:"string"==typeof e.className.baseVal?e.className.baseVal=t:void 0!==e.getAttribute&&e.setAttribute(t)},getPopPos:function(e,t,i,r){var o={left:0,top:0};if(e){if(xui.isEvent(e))return xui.Event.getPos(e);var n,a,s,u,l;if((r=xui(r)).isEmpty()&&(r=xui("body")),e["xui.UI"]||e["xui.UIProfile"]||e["xui.Dom"]||1==e.nodeType||"string"==typeof e?("function"!=typeof t&&(t=(t||12)+""),s=(a=xui(e)).offset(null,r),n={left:s.left,top:s.top,width:a.offsetWidth(),height:a.offsetHeight()}):("function"!=typeof t&&(t=t?"3":"0"),u="0"==t?0:8,n=e.region||{left:e.left-u,top:e.top-u,width:2*u,height:2*u}),u=r.get(0)===document.body||r.get(0)===document||r.get(0)===window?xui.win:r,(l={}).left=u.scrollLeft(),l.top=u.scrollTop(),l.width=u.width()+l.left,l.height=u.height()+l.top,u==xui.win&&xui.ini.$zoomScale)for(var d in l)l[d]/=xui.ini.$zoomScale;if("function"==typeof t)o=t(n,l,i,u);else{var c=t.split(":"),p=i?i.offsetWidth():0,h=i?i.offsetHeight():0,f=c[0].split(/-/g),x=parseInt(c[1])||0;if(t=c[0],2==f.length){var g=f[0];switch(f[1]){case"outertop":o.top=n.top-h;break;case"top":o.top=n.top;break;case"middle":o.top=n.top+n.height/2-h/2;break;case"bottom":o.top=n.top+n.height-h;break;default:o.top=n.top+n.height}switch(g){case"outerleft":o.left=n.left-p;break;case"left":o.left=n.left;break;case"center":o.left=n.left+n.width/2-p/2;break;case"right":o.left=n.left+n.width-p;break;default:o.left=n.left+n.width}}else{var m=function(e){var t,i;switch(e){case"2":t=!0,i=!1;break;case"3":t=i=!1;break;case"4":t=i=!0;break;default:t=!1,i=!0}t?n.top+h<l.height?o.top=n.top:o.top=n.top+n.height-h:n.top+n.height+h<l.height?o.top=n.top+n.height:o.top=n.top-h,i?n.left+p<l.width?o.left=n.left:o.left=n.left+n.width-p:n.left+n.width+p<l.width?o.left=n.left+n.width:o.left=n.left-p,o.left+p>l.width&&(o.left=l.width-p),o.left<l.left&&(o.left=l.left),o.top+h>l.height&&(o.top=l.height-h),o.top<l.top&&(o.top=l.top)};"12"==(t="inner"==t?"4":"outer_tb"==t?"1":"outer_lr"==t?"2":"outer"==t?"12":t)?(m("1"),o.top<n.top+n.height&&o.top+h>n.top&&m("2")):"21"==t?(m("2"),o.left<n.left+n.width&&o.left+p>n.left&&m("1")):m(t)}x&&(o.left+=x,o.top+=x,o.width-=2*x,o.height-=2*x)}return o}return o},_scrollBarSize:0,getScrollBarSize:function(e){var t,i=this;return!e&&i._scrollBarSize||(xui("body").append(t=xui.create('<div style="width:50px;height:50px;visibility:hidden;position:absolute;margin:0;padding:0;left:-100%;top:-100%;overflow:scroll;"></div>')),i._scrollBarSize=t.get(0).offsetWidth-t.get(0).clientWidth,t.remove()),i._scrollBarSize},_dpi:0,getDPI:function(e){var t,i=this;return!e&&i._dpi||(xui("body").append(t=xui.create('<div style="width:1in;height:1in;visibility:hidden;position:absolute;margin:0;padding:0;left:-100%;top:-100%;overflow:scroll;"></div>')),i._dpi=t.get(0).offsetHeight,t.remove()),i._dpi},getStyle:function(e,t,i){if(!e||1!=e.nodeType)return"";if("rotate"==t)return xui(e).rotate();var r,o,n=xui.Dom,a=xui.Dom._css3prop,s=e.style;if("opacity"==t&&!n.css3Support("opacity")&&xui.browser.ie&&(o=t="filter"),r=s[t],i||!r||"initial"===r){var u,l,d,c=xui.Dom.getStyle,p=xui.browser,h=c.map||(c.map={float:1,cssFloat:1,styleFloat:1}),f=c._c1||(c._c1={}),x=c._c2||(c._c2={}),g=(c._c3||(c._c3={}),f[t]||(f[t]=t.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()})))),m=x[g]||(x[g]=g.replace(/([A-Z])/g,"-$1").toLowerCase()),b=g;if(0===b.indexOf("border")&&(b=b.replace(/[-]?(left|top|right|bottom)/gi,"")),-1!=xui.arr.indexOf(a,b)){if(!n.css3Support(g))return"";"textShadow"!=g&&(l=p.cssTag2+m.charAt(0).toUpperCase()+m.substr(1),d=p.cssTag1+m)}h[g]&&(g=xui.browser.ie?"styleFloat":"cssFloat"),r=(u=document.defaultView)&&u.getComputedStyle?(u=u.getComputedStyle(e,null))?u.getPropertyValue(m)||d&&u.getPropertyValue(d):"":e.currentStyle?e.currentStyle[g]||e.currentStyle[m]||l&&(e.currentStyle[l]||e.currentStyle[d]):s&&(s[g]||l&&s[l])||""}return!o&&xui.browser.ie678&&(("fontSize"==t||"font-size"==m)&&/%/.test(r)&&e.parentNode?r=(e.parentNode.currentStyle[t]||e.parentNode.currentStyle[m])*(parseFloat(r)||0):xui.CSS.$isEm(r)&&(r=xui.CSS.$px(r,e))),o?r?(parseFloat(r.match(/alpha\(opacity=(.*)\)/)[1])||0)/100:1:r||""},$getBoundingClientRect:function(e,t){var i,r=e.getBoundingClientRect();if(!t&&(i=xui.ini.$transformScale))for(var o in r)r[o]/=i;return r},$transformIE:function(e,t){var i=e.style,r=(i.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Matrix\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" "));if(xui.browser.ie8&&(i.msfilter=r),i.filter=r,i.marginTop=i.marginLeft="",t){var o=function(){var e,t=Math.PI/180,i=function(e,t,i,r,o,n){var a={};return a.m11=xui.isSet(e)?parseFloat(e):1,a.m12=xui.isSet(t)?parseFloat(t):0,a.m21=xui.isSet(i)?parseFloat(i):0,a.m22=xui.isSet(r)?parseFloat(r):1,a.dx=xui.isSet(o)?parseFloat(o):0,a.dy=xui.isSet(n)?parseFloat(n):0,a},r=function(e,t){var i={};return i.m11=n(e.m11*t.m11+e.m21*t.m12,10),i.m12=n(e.m12*t.m11+e.m22*t.m12,10),i.m21=n(e.m11*t.m21+e.m21*t.m22,10),i.m22=n(e.m12*t.m21+e.m22*t.m22,10),i.dx=n(t.dx+e.dx,10),i.dy=n(t.dy+e.dy,10),i},o=function(e){return t*e},n=function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)};this.rotate=function(t){var n=xui.isSet(t)?parseFloat(o(parseFloat(t))):0,a=i(Math.cos(n),-Math.sin(n),Math.sin(n),Math.cos(n),0,0);e=r(a,e)},this.translate=function(t,o){var n=i(1,0,0,1,parseFloat(t),parseFloat(o));e=r(n,e)},this.translateX=function(e){this.translate(e,0)},this.translateY=function(e){this.translate(0,e)},this.scale=function(t,o){var n=i(xui.isSet(t)?parseFloat(t):1,0,0,xui.isSet(o)?parseFloat(o):1,0,0);e=r(n,e)},this.scaleX=function(e){this.scale(e,1)},this.scaleY=function(e){this.scale(1,e)},this.skew=function(t,n){t=xui.isSet(t)?parseFloat(o(parseFloat(t))):0,n=xui.isSet(n)?parseFloat(o(parseFloat(n))):0;var a=i(1,Math.tan(t),Math.tan(n),1,0,0);e=r(a,e)},this.skewX=function(e){this.skew(e,0)},this.skewY=function(e){this.skew(0,e)},this.matrix=function(t,o,n,a,s,u){e=r(i(t,o,n,a,s,u),e)},this.getMatrix=function(){return e},this.getFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+e.m11+", M12="+e.m12+", M21="+e.m21+", M22="+e.m22+", Dx="+e.dx+", Dy="+e.dy+", SizingMethod='auto expand')"},this.getX=function(){return e.dx},this.getY=function(){return e.dy},this.reset=function(){e=i(1,0,0,1,0,0)},this.reset()},n=function(e){for(var t=new o,i=e.match(/[A-z]+\([^\)]+/g)||[],r=0;r<i.length;r++){var n,a=i[r].split("("),s=a[0],u=a[1];switch(s){case"rotate":t.rotate(u);break;case"scale":n=u.split(","),t.scale(n[0],n[1]);break;case"scaleX":t.scaleX(u);break;case"scaleY":t.scaleY(u);break;case"skew":n=u.split(","),t.skew(n[0],n[1]);break;case"skewX":t.skewX(u);break;case"skewY":t.skewY(u);break;case"translate":n=u.split(","),t.translate(n[0],n[1]);break;case"translateX":t.translateX(u);break;case"translateY":t.translateY(u)}}return t}(t),a=e.offsetWidth,s=e.offsetHeight,u=n.getFilter();if(r=((i.filter?i.filter+",":"")+u).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(i.msfilter=r),i.filter=r,e.getBoundingClientRect){var l=n.getX(),d=n.getY(),c=xui.Dom.$getBoundingClientRect(e),p=c.right-c.left,h=c.bottom-c.top;i.marginLeft=Math.round(parseFloat((a-p)/2+10+l))+"px",i.marginTop=Math.round(parseFloat((s-h)/2+10+d))+"px"}i.transform=t}},$textShadowIE:function(e,t,i){var r=e.style;if(t){a=function(e,t,r,o){return(i?"":"progid:DXImageTransform.Microsoft.Chroma(Color=#cccccc) ")+"progid:DXImageTransform.Microsoft.DropShadow(Color="+o+", OffX="+e+", OffY="+t+") "+(parseFloat(r)>0?"progid:DXImageTransform.Microsoft.Glow(Strength="+r+", Color="+o+")":"")};var o=t.match(/([\d\.-]+)px\s+([\d\.-]+)px(\s+([\d\.-]+)px)?(\s+([#\w]+))?/);if(o){var n=((r.filter?r.filter+",":"")+a(o[1],o[2],o[4],o[6]||"#000000")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" "));xui.browser.ie8&&(r.msfilter=n),r.filter=n,i||(r.backgroundColor="#C5C5C5")}}else{var a=function(e){return(e||"").replace(/progid\:DXImageTransform\.Microsoft\.(Chroma|DropShadow|Glow)\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" "))},s=r.filter;s&&(xui.browser.ie8&&(r.msfilter=a(s)),r.filter=a(s)),i||(r.backgroundColor="")}},$setGradients:function(e,t,i){i=i||xui.browser;var r=this,o=i.ver,n="0123456789ABCDEF",a=function(e,t){return e=parseInt(e*t,10)||0,n.charAt(((e=e>255||e<0?0:e)-e%16)/16)+n.charAt(e%16)},s=function(e){return e=e.split(""),16*n.indexOf(e[0].toUpperCase())+n.indexOf(e[1].toUpperCase())};window.btoa=window.btoa||function(e){if(!/([^\u0000-\u00ff])/.test(e)){for(var t,i,r,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,a=[];n<e.length;){switch(t=e.charCodeAt(n),r=(n+1)%3){case 1:a.push(o.charAt(t>>2));break;case 2:a.push(o.charAt((3&i)<<4|t>>4));break;case 0:a.push(o.charAt((15&i)<<2|t>>6)),a.push(o.charAt(63&t))}i=t,n++}return 1==r?(a.push(o.charAt((3&i)<<4)),a.push("==")):2==r&&(a.push(o.charAt((15&i)<<2)),a.push("=")),a.join("")}};var u=function(e,t,i,r,o,n){if(t){n=n||1;var a="svg:"+xui.id(),s="0%",u="0%",l=100*n+"%";if(xui.isObj(t))s=t.left||s,u=t.left||u;else switch(t){case"T":s="50%",u="0%";break;case"B":s="50%",u="100%";break;case"L":s="0%",u="50%";break;case"R":s="100%",u="50%";break;case"LT":s="0%",u="0%";break;case"RT":s="100%",u="0%";break;case"RB":s="100%",u="100%";break;case"LB":s="0%",u="100%";break;case"C":s="50%",u="50%"}for(var d='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><radialGradient id="'+a+'" gradientUnits="userSpaceOnUse" cx="'+s+'" cy="'+u+'" r="'+l+'">',c=0,p=i.length;c<p;c++)d+='<stop stop-color="'+i[c].clr+'" offset="'+i[c].pos+'" '+(xui.isSet(i[c].opacity)?' stop-opacity="'+i[c].opacity+'"':"")+" />";d+='</radialGradient><rect x="-50" y="-50" width="101" height="101" fill="url(#'+a+')" /></svg>',e.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(d)+'")'}else e.style.backgroundImage=""},l=t?(t.type||t||"linear").toLowerCase():null,d=t?t.rate||1:null,c=t?(t.shape||"circle").toLowerCase():null,p=t?(t.size||"farthest-corner").toLowerCase():null,h=t?t.orient:null,f=t?t.stops:null;if("linear"!=l&&(l="radial"),f){if(!(f.length>1))return;xui.arr.stableSort(f,(function(e,t){return(e=parseFloat(e.pos)||0)>(t=parseFloat(t.pos)||0)?1:e==t?0:-1}))}i.ie678&&("linear"==l?function(e,t,i){var o;if(e&&1==e.nodeType&&e.style){var n=e.style;if(t){var s=i[0].clr,u=i[i.length-1].clr,l=1;switch(i[0].opacity&&(s=s.replace("#","#"+a(i[0].opacity,255))),i[i.length-1].opacity&&(u=u.replace("#","#"+a(i[i.length-1].opacity,255))),t){case"LT":case"RT":case"LB":case"RB":return void function(e,t,i){var o,n="xui.s-ie8gdfix";if(e&&1==e.nodeType&&e.style){var a=e.style,s=r.getStyle(e,"overflow"),u=r.getStyle(e,"display");if("hidden"!=s&&r.setStyle(e,"overflow","hidden"),"block"!=u&&"relative"!=u&&r.setStyle(e,"display","relative"),t){var l=i[0].clr,d=i[i.length-1].clr,c=e.offsetWidth||0,p=e.offsetHeight||0,h=Math.min(c,p),f=0,x=h,g=0,m=h;switch(t){case"LT":f=0,g=0,x=h,m=h;break;case"RT":f=h,g=0,x=0,m=h;break;case"LB":f=0,g=h,x=h,m=0;break;case"RB":f=h,g=h,x=0,m=0}var b=document.createElement("div"),v=b.style;b.id=n,v.position="absolute",v.zIndex="0",v.top=0,v.left=0,v.width=c,v.height=p,v.backgroundColor=l;var y=i[0].opacity?100*parseFloat(i[0].opacity):100;o=((v.filter?v.filter+",":"")+"progid:DXImageTransform.Microsoft.Alpha(style=1, opacity="+y+", finishopacity=0, startX="+f+",finishX="+x+",startY="+g+",finishY="+m+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(v.msfilter=o),v.filter=o,e.firstChild?e.insertBefore(b,e.firstChild):e.appendChild(b),a.backgroundColor=d,i[i.length-1].opacity&&(o=((a.filter?a.filter+",":"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+100*parseFloat(i[i.length-1].opacity)+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(a.msfilter=o),a.filter=o)}else{var A,_=e.childNodes,w=_.length;for(A=0;A<w;A++)if(1==_[A].nodeType&&_[A].id==n){e.removeChild(_[A]);break}a.backgroundColor="",o=(a.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(a.msfilter=o),a.filter=o}}}(e,t,i);case"L":l=1;break;case"R":l=1,o=s,s=u,u=o;break;case"T":l=0;break;case"B":l=0,o=s,s=u,u=o}o=((n.filter?n.filter+",":"")+"progid:DXImageTransform.Microsoft.Gradient(StartColorstr='"+s+"',EndColorstr='"+u+"',GradientType="+l+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(n.msfilter=o),n.filter=o}else{o=(n.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Gradient\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(n.msfilter=o),n.filter=o;var d,c=e.childNodes,p=c.length;for(d=0;d<p;d++)if(1==c[d].nodeType&&"xui.s-ie8gdfix"==c[d].id){e.removeChild(c[d]);break}n.backgroundColor="",o=(n.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(n.msfilter=o),n.filter=o}}}(e,h,f):function(e,t,i,o,n,a){var s,u="xui.s-ie8gdfix";if(e&&1==e.nodeType&&e.style){var l=e.style,d=r.getStyle(e,"overflow"),c=r.getStyle(e,"display");if("hidden"==d&&("block"==c||"relative"==c))if(t){a=a||1;var p=i[0].clr,h=i[i.length-1].clr,f=e.offsetWidth||0,x=e.offsetHeight||0,g=f*a*2,m=x*a*2;"circle"==o&&(g=m=Math.min(g,m)),I=-g/2;var b=g,v=m;if(s=-m/2,xui.isObj(t))I=t.left||Math.round(parseFloat(I)||0)+"px",s=t.top||Math.round(parseFloat(s)||0)+"px";else{switch(t){case"LT":I=-g/2,s=-m/2;break;case"T":I=(f-g)/2,s=-m/2;break;case"RT":I=f-g/2,s=-m/2;break;case"L":I=-g/2,s=(x-m)/2;break;case"C":I=(f-g)/2,s=(x-m)/2;break;case"R":I=f-g/2,s=(x-m)/2;break;case"LB":I=-g/2,s=x-m/2;break;case"B":I=(f-g)/2,s=x-m/2;break;case"RB":I=f-g/2,s=x-m/2}I+="px",s+="px"}var y=document.createElement("div"),A=y.style;y.id=u,A.position="absolute",A.zIndex="0",A.top=s,A.left=I,A.width=Math.round(parseFloat(b)||0)+"px",A.height=Math.round(parseFloat(v)||0)+"px",A.backgroundColor=p;var _=i[0].opacity?100*parseFloat(i[0].opacity):100;s=((A.filter?A.filter+",":"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+_+", finishopacity=0, style=2)").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(A.msfilter=s),A.filter=s,e.firstChild?e.insertBefore(y,e.firstChild):e.appendChild(y),l.backgroundColor=h,i[i.length-1].opacity&&(s=((l.filter?l.filter+",":"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+100*parseFloat(i[i.length-1].opacity)+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(l.msfilter=s),l.filter=s)}else{var w,C=e.childNodes,I=C.length;for(w=0;w<I;w++)if(1==C[w].nodeType&&C[w].id==u){e.removeChild(C[w]);break}l.backgroundColor="",s=(l.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(l.msfilter=s),l.filter=s}}}(e,h,f,c,0,d)),(i.ie9||i.opr&&o<11.1)&&("linear"==l?function(e,t,i){if(t){var r="svg"+xui.id(),o="0%",n="0%",a="0%",s="100%";switch(t){case"T":o="50%",n="0%",a="50%",s="100%";break;case"B":o="50%",n="100%",a="50%",s="0%";break;case"L":o="0%",n="50%",a="100%",s="50%";break;case"R":o="100%",n="50%",a="0%",s="50%";break;case"LT":o="0%",n="0%",a="100%",s="100%";break;case"RT":o="100%",n="0%",a="0%",s="100%";break;case"RB":a="0%",s="0%",o="100%",n="100%";break;case"LB":o="0%",n="100%",a="100%",s="0%"}for(var u='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><linearGradient id="'+r+'" gradientUnits="userSpaceOnUse" x1="'+o+'" y1="'+n+'" x2="'+a+'" y2="'+s+'">',l=0,d=i.length;l<d;l++)u+='<stop stop-color="'+i[l].clr+'" offset="'+i[l].pos+'" '+(xui.isSet(i[l].opacity)?' stop-opacity="'+i[l].opacity+'"':"")+"/>";u+='</linearGradient><rect x="0" y="0" width="1" height="1" fill="url(#'+r+')" /></svg>',e.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(u)+'")'}else e.style.backgroundImage=""}(e,h,f):u(e,h,f,0,0,d)),(i.gek&&o>=3.6||i.isChrome&&o>=10||i.isSafari&&o>=5.1||i.ie&&o>=10||i.opr&&o>=11.1)&&("linear"==l?function(e,t,r){var o=[],n=[],a=e.style;if(xui.arr.each(r,(function(e){var t=e.clr;xui.isSet(e.opacity)&&"#"==t.charAt(0)&&(t=t.slice(1),t="rgba("+s(t.substr(0,2))+","+s(t.substr(2,2))+","+s(t.substr(4,2))+","+(parseFloat(e.opacity)||1)+")"),o.push(t+" "+e.pos),i.isWebKit&&n.push("color-stop("+e.pos+","+t+")")})),t){var u="to bottom",l="top",d="left top, left bottom";switch(t){case"LT":u="135deg",l="-45deg",d="left top, right bottom";break;case"T":u="to bottom",l="top",d="left top, left bottom";break;case"RT":u=l="-135deg",d="right top, left bottom";break;case"L":u="to right",l="left",d="left top, right top";break;case"R":u="to left",l="right",d="right top, left top";break;case"LB":u=l="45deg",d="left bottom, right top";break;case"B":u="to top",l="bottom",d="left bottom, left top";break;case"RB":u="-45deg",l="135deg",d="right bottom, left top";break;default:u=t,l=t,d="left top, right bottom"}i.isWebKit&&(a.backgroundImage="-webkit-gradient(linear,"+d+", "+n.join(",")+")");var c="linear-gradient({#},"+o.join(",")+")";i.cssTag1&&(a.backgroundImage=i.cssTag1+c.replace("{#}",l)),a.backgroundImage=c.replace("{#}",u)}else a.backgroundImage=""}(e,h,f):i.opr&&o<12?u(e,h,f,0,0,d):function(e,t,r,o,n,a){var u=[],l=[],d=e.style;if(xui.arr.each(r,(function(e){var t=e.clr;xui.isSet(e.opacity)&&"#"==t.charAt(0)&&(t=t.slice(1),t="rgba("+s(t.substr(0,2))+","+s(t.substr(2,2))+","+s(t.substr(4,2))+","+(parseFloat(e.opacity)||1)+")"),u.push(t+" "+e.pos),i.isWebKit&&l.push("color-stop("+e.pos+","+t+")")})),t){var c;if(xui.isObj(t))c=t.left+" "+t.top;else switch(t){case"LT":c="left top";break;case"T":c="center top";break;case"RT":c="right top";break;case"L":c="left center";break;case"C":c="center center";break;case"R":c="right center";break;case"LB":c="left bottom";break;case"B":c="center bottom";break;case"RB":c="right bottom";break;default:c="left top"}i.isWebKit&&(d.backgroundImage="-webkit-gradient(radial,"+c+", 0px, "+c+", 100%,"+l.join(",")+")");var p="radial-gradient("+c+","+o+" "+n+","+u.join(",")+")";i.cssTag1&&(d.backgroundImage=i.cssTag1+p),d.backgroundImage="radial-gradient("+n+" "+o+" at "+c+","+u.join(",")+")"}else d.backgroundImage=""}(e,h,f,c,p))},$setZoom:function(e,t,i,r,o){t=parseFloat(t),(xui.isNaN(t)||t<=0)&&(t="");var n=xui.browser,a={};a[n.cssTag1+"transform"]=a.transform=""===t?"":(xui.isNumb(i)&&xui.isNumb(r)?"translate("+i+"px,"+r+"px) ":"")+"scale("+t+","+t+")",a[n.cssTag1+"transform-origin"]=a["transform-origin"]=""===t?"":o||"0 0 0",xui(e).css(a)},_vAnimate:function(e,t,i){if(t&&t.endpoints&&!xui.isEmpty(t.endpoints)){var r=t.endpoints,o={},n={};return e=xui(e),xui.each(r,(function(e,t){xui.isFun(e)||(o[t]=e[0],n[t]=e[1])})),e.animate(r,(function(t){e.css(o)}),(function(t){e.css(n),i&&xui.tryF(i)}),t.duration,0,t.type).start()}i&&xui.tryF(i)},$adjustCss:function(e,t){var i={nodeType:1,style:{}},r=i.style;if(xui.Dom.setStyle(i,e),t){var o=[];return xui.browser.ie&&8==xui.browser.ver&&(r.filter&&(r["-ms-filter"]=r.filter),"none"==r["background-image"]&&(r["background-image"]="url(about:blank)")),xui.each(r,(function(e,t){o.push(t.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+e)})),o.join(";").replace(/[;]+/g,";")}return r},_cssfake:{rotate:1,scaleX:1,scaleY:1,translateX:1,translateY:1,skewX:1,skewY:1},setStyle:function(e,t,i){if("rotate"==t)return xui(e).rotate(i),this;var r=xui.Dom,o=xui.Dom._css3prop,n=xui.browser,a=r._cssfake,s=e.style;if(1==e.nodeType)if("string"==typeof t)if(a[t])xui(e)[t](i);else{var u,l,d,c=this.getStyle,p=c._c1||(c._c1={}),h=c._r1||(c._r1=/alpha\([^\)]*\)/gi),f=c.map||(c.map={float:1,cssFloat:1,styleFloat:1}),x=t=p[t]||(p[t]=t.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()})));if(0===x.indexOf("border")&&(x=x.replace(/[-]?(left|top|right|bottom)/gi,"")),"$gradient"==t)return r.$setGradients(e,i);if("$zoom"==t)return r.$setZoom(e,i);if("opacity"==t){if(i=(i=xui.isFinite(i)?parseFloat(i)>1?1:parseFloat(i)<=0?0:parseFloat(i):1)>.9999?"":i,!r.css3Support("opacity")&&n.ie){""===i&&(i=1),s.opacity=i,s.zoom=1,i="alpha(opacity="+100*i+")";var g=(s.filter||"").replace(h,"");i=(g?g+",":"")+i,t="filter",8==n.ver&&(u="msfilter")}}else if(-1!=xui.arr.indexOf(o,x)){if(!r.css3Support(t)){if(n.ie&&n.ver<9)switch(t){case"transform":xui.Dom.$transformIE(e,i);break;case"boxShadow":xui.Dom.$textShadowIE(e,i,!0)}return"textShadow"==t&&n.ie&&n.ver<10&&xui.Dom.$textShadowIE(e,i),this}n.cssTag2&&"textShadow"!=t&&(u=n.cssTag2+t.charAt(0).toUpperCase()+t.substr(1))}else f[t]&&(t=n.ie?"styleFloat":"cssFloat");"filter"==t&&(i=i.replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" "))),s[t]=i,u&&(s[u]=i),l&&(s[l]=i),d&&(s[d]=i)}else for(var m in t)arguments.callee.call(this,e,m,t[m])},_css3prop:"opacity,textShadow,animationName,columnCount,flexWrap,boxDirection,backgroundSize,perspective,boxShadow,borderImage,borderRadius,boxReflect,transform,transition".split(","),css3Support:function(e){var t=arguments.callee,i=t._c||(t._c={});if((e=e.replace("$","").replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()})))in i)return i[e];var r=document.createElement("div"),o=r.style,n=!1,a=xui.browser,s=function(e){return e=e.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()})),o[e]!==undefined||!(!xui.browser.cssTag2||(e=xui.browser.cssTag2+e.charAt(0).toUpperCase()+e.substr(1),o[e]===undefined))};switch(r.id="xui_css3_"+xui.stamp(),0===e.indexOf("border")&&(e=e.replace(/[-]?(left|top|right|bottom)/gi,"")),e){case"opacity":case"textShadow":n=""===o[e];break;case"generatedContent":var u="tmp_css3_test"+xui.id(),l="#"+r.id+"{line-height:auto;margin:0;padding:0;border:0;font:0/0 a}#"+r.id+":after{content:'a';visibility:hidden;line-height:auto;margin:0;padding:0;border:0;font:3px/1 a}";xui.CSS.addStyleSheet(l,u),xui("body").append(r);var d=r.offsetHeight;xui.CSS.remove("id",u),xui(r.id).remove(r),n=d>=3;break;case"fontFace":if(a.ie&&a.ver>=6)n=!0;else{u="tmp_css3_test"+xui.id(),l='@font-face{font-family:"font";src:url("https://")}';var c=xui.CSS.addStyleSheet(l,u),p=c.sheet||c.styleSheet,h=p?p.cssRules&&p.cssRules[0]?p.cssRules[0].cssText:p.cssText||"":"";n=/src/i.test(h)&&0===h.indexOf("@font-face"),xui.CSS.remove("id",u)}break;case"rgba":o.cssText="background-color:rgba(0,0,0,0.1)",n=-1!=o.backgroundColor.indexOf("rgba");break;case"hsla":o.cssText="background-color:hsla(120,40%,100%,.5)",n=-1!=o.backgroundColor.indexOf("hsla")||-1!=o.backgroundColor.indexOf("rgba");break;case"multiplebgs":o.cssText="background:url(//:),url(//:),red url(//:)",n=/(url\s*\(.*?){3}/.test(o.background);break;case"gradient":var f="background-image:",x="-webkit-gradient(linear,left top,right bottom,from(#000),to(#fff));",g=[f,b="linear-gradient(left top,#000,#fff);"];xui.browser.cssTag1&&(g.push(f),g.push(xui.browser.cssTag1+b)),xui.browser.isWebKit&&(g.push(f),g.push(x)),o.cssText=g.join(""),n=!!o.backgroundImage;break;case"transform3d":var m=s("perspective");if(m&&"webkitPerspective"in document.documentElement.style){u="tmp_css3_test"+xui.id(),l="@media (transform-3d),(-webkit-transform-3d){#"+r.id+"{font:0/0;line-height:0;margin:0;padding:0;border:0;left:9px;position:absolute;height:3px;}}",xui.CSS.addStyleSheet(l,u),xui("body").append(r),x=r.offsetLeft;var b=r.offsetHeight;xui.CSS.remove("id",u),xui(r.id).remove(r),n=9===x&&3===b}n=m;break;default:n=s(e)}return i[e]=n},supportPromise:function(){var e=xui.Dom;if("$supportPromise"in e)return e.$supportPromise;try{return new Promise((function(e,t){})),e.$supportPromise=!0}catch(e){}return e.$supportPromise=!1},supportDropzone:function(){if("$supportDropzone"in xui.Dom)return xui.Dom.$supportDropzone;var e=document.createElement("div");return xui.Dom.$supportDropzone=("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FileReader"in window},$AnimateEffects:{linear:function(e,t){return 1/e*t},sineIn:function(e,t){return-1*Math.cos(t/e*(Math.PI/2))+1},sineOut:function(e,t){return Math.sin(t/e*(Math.PI/2))},sineInOut:function(e,t){return-.5*(Math.cos(Math.PI*t/e)-1)},quadIn:function(e,t){return(t/=e)*t},quadOut:function(e,t){return-1*(t/=e)*(t-2)},quadInOut:function(e,t){return(t/=e/2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(e,t){return(t/=e)*t*t},cubicOut:function(e,t){return(t=t/e-1)*t*t+1},cubicInOut:function(e,t){return(t/=e/2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quartIn:function(e,t){return(t/=e)*t*t*t},quartOut:function(e,t){return-1*((t=t/e-1)*t*t*t-1)},quartInOut:function(e,t){return(t/=e/2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quintIn:function(e,t){return(t/=e)*t*t*t*t},quintOut:function(e,t){return(t=t/e-1)*t*t*t*t+1},quintInOut:function(e,t){return(t/=e/2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},expoIn:function(e,t){return 0==t?0:Math.pow(2,10*(t/e-1))},expoOut:function(e,t){return t==e?1:1-Math.pow(2,-10*t/e)},expoInOut:function(e,t){return 0==t?0:t==e?1:(t/=e/2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},circIn:function(e,t){return-1*(Math.sqrt(1-(t/=e)*t)-1)},circOut:function(e,t){return Math.sqrt(1-(t=t/e-1)*t)},circInOut:function(e,t){return(t/=e/2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},bounceIn:function(e,t){return 1-xui.Dom.$AnimateEffects.bounceOut(e,e-t)},bounceOut:function(e,t){var i=7.5625;return(t/=e)<1/2.75?i*t*t:t<2/2.75?i*(t-=1.5/2.75)*t+.75:t<2.5/2.75?i*(t-=2.25/2.75)*t+.9375:i*(t-=2.625/2.75)*t+.984375},bounceInOut:function(e,t){return t<e/2?.5*xui.Dom.$AnimateEffects.bounceIn(e,2*t):.5*xui.Dom.$AnimateEffects.bounceOut(e,2*t-e)+.5},backIn:function(e,t){var i=1.70158;return(t/=e)*t*((i+1)*t-i)},backOut:function(e,t){var i=1.70158;return(t=t/e-1)*t*((i+1)*t+i)+1},backInOut:function(e,t){var i=1.70158;return(t/=e/2)<1?t*t*((1+(i*=1.525))*t-i)*.5:.5*((t-=2)*t*((1+(i*=1.525))*t+i)+2)},elasticIn:function(e,t,i,r,o){if(0==t)return 0;if(1==(t/=e))return 1;if(o||(o=.3*e),!r||r<1){r=1;var n=o/4}else n=o/(2*Math.PI)*Math.asin(1/r);return-r*Math.pow(2,10*(t-=1))*Math.sin((t*e-n)*(2*Math.PI)/o)},elasticOut:function(e,t,i,r,o){if(0==t)return 0;if(1==(t/=e))return 1;if(o||(o=.3*e),!r||r<1){r=1;var n=o/4}else n=o/(2*Math.PI)*Math.asin(1/r);return r*Math.pow(2,-10*t)*Math.sin((t*e-n)*(2*Math.PI)/o)+1},elasticInOut:function(e,t,i,r,o){if(0==t)return 0;if(2==(t/=e/2))return 1;if(o||(o=e*(.3*1.5)),!r||r<1){r=1;var n=o/4}else n=o/(2*Math.PI)*Math.asin(1/r);return t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*e-n)*(2*Math.PI)/o)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t*e-n)*(2*Math.PI)/o)*.5+1}},$preDefinedAnims:{blinkAlert:{endpoints:{opacity:[1,0]},duration:200,restore:!0,times:3},blinkAlertLoop:{endpoints:{opacity:[1,0]},duration:500,restore:!0,times:-1},rotateAlert:{endpoints:{rotate:[0,360]},duration:400,restore:!1},rotateAlertLoop1:{endpoints:{rotate:[0,360]},duration:2e3,restore:!1,times:-1},rotateAlertLoop2:{endpoints:{rotate:[0,-360]},duration:2e3,returned:!1,times:-1},zoomAlert:{endpoints:{scaleX:[1,1.1],scaleY:[1,1.1]},duration:100,restore:!0,times:3},translateXAlert:{endpoints:{translateX:[0,5]},duration:100,restore:!0,times:3},translateYAlert:{endpoints:{translateY:[0,5]},duration:100,restore:!0,times:3}},$preDefinedEffects:{Classic:[{type:"circOut",duration:200,endpoints:{opacity:[0,1],scaleX:[.75,1],scaleY:[.75,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],scaleX:[1,.75],scaleY:[1,.75]}}],Blur:[{type:"circOut",duration:200,endpoints:{opacity:[0,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0]}}],Drop:[{type:"circOut",duration:200,endpoints:{opacity:[0,1],translateY:["-25%","0%"],scaleY:[.5,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],translateY:["0%","-25%"],scaleY:[1,.5]}}],"From Below":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],scaleX:[0,1],scaleY:[0,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],scaleX:[1,0],scaleY:[1,0]}}],"From Above":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],scaleX:[2,1],scaleY:[2,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],scaleX:[1,2],scaleY:[1,2]}}],"Slide In LR":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],translateX:["-150%","0%"]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],translateX:["0%","150%"]}}],"Slide In TB":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],translateY:["-150%","0%"]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],translateY:["0%","150%"]}}],"Flip V":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],scaleY:[0,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],scaleY:[1,0]}}],"Flip H":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],scaleX:[0,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],scaleX:[1,0]}}]},_getEffects:function(e,t){return e&&"string"==typeof e&&(e=(e=this.$preDefinedEffects[e])?t?e[0]:e[1]:null),e&&xui.browser.ie&&xui.browser.ver<=8&&xui.filter(e,(function(e,t){return!!xui.Dom._cssfake[t]})),e},_setUnitStyle:function(e,t,i){if(!e||1!=e.nodeType)return!1;var r=e.style;return!(!i&&0!==i||(!(i=xui.CSS.$addu(i))||"width"!=t&&"height"!=t||"-"!=i.charAt(0)||(i="0"),r[t]==i)||(r[t]=i,0))},_emptyDivId:"xui.empty:",getEmptyDiv:function(e,t){var i,r,o,n=1,a=0,s=document,u=e&&(e=xui(e)).get(0)||s.body,l=function(e){e.id=i,xui([e]).attr("style","position:absolute;visibility:hidden;overflow:visible;left:"+xui.Dom.HIDE_VALUE+";top:"+xui.Dom.HIDE_VALUE+";")};for(t=t||1,e=u==s.body?"":e.n0.replace("!","");;){if(i=this._emptyDivId+e+":"+n,!(o=xui.Dom.byId(i)))return l(o=s.createElement("div")),u.firstChild?u.insertBefore(o,u.firstChild):u.appendChild(o),r=xui([o]),u=o=null,r;if((!o.firstChild||3==o.firstChild.nodeType&&!o.firstChild.nodeValue)&&++a==t)return xui([o]);n++}u=o=null},setCover:function(e,t,i,r,o){var n,a,s=arguments.callee,u="xui.temp:cover:",l="xui.temp:message:",d="string"==typeof e||"function"==typeof e?e:"";if((n=xui(u)).isEmpty()&&(xui("body").prepend(n=xui.create('<button id="'+u+'" class="xui-node xui-node-div xui-cover xui-cover-global xui-custom" style="position:absolute;display:none;text-align:center;left:0;top:0;border:0;padding:0;margin:0;padding-top:2em;"><div id="'+l+'" class="xui-node xui-node-div xui-coverlabel xui-custom"></div></button>')),n.setSelectable(!1),xui.setNodeData(n.get(0),"zIndexIgnore",1)),xui.Dom.byId(l)&&(a=xui(l)),e){"string"==typeof t&&(s._label=t);var c=xui.win;s._showed||(n.css({zIndex:10*xui.Dom.TOP_ZINDEX,display:"",width:c.scrollWidth()+"px",height:c.scrollHeight()+"px",cursor:r||"progress"}),i?n.addClass("xuicon xui-icon-loading"):n.removeClass("xuicon xui-icon-loading"),s._showed=!0),n.query("style").remove(!1),o&&xui.CSS._appendSS(n.get(0),".xui-cover-global{"+o+"}","",!0),d&&("function"==typeof d?d(n,a):a&&a.html(d+"",!1))}else{if("string"==typeof s._label&&s._label!==t)return;s._showed&&(a&&a.empty(!1),n.css({zIndex:0,cursor:"",display:"none"}),n.query("style").remove(!1),s._showed=!1),delete s._label}},byId:function(e){return document.getElementById(e||"")},$hasEventHandler:function(e,t){return xui.getNodeData(e,["eHandlers",t])},submit:function(e,t,i,r,o){t=xui.isHash(t)?t:{},t=xui.clone(t,(function(e){return e!==undefined})),e=e||"",r=r||("mailto"==e.substring(0,6).toLowerCase()?"_self":"_blank");var n=[];if(xui.isEmpty(t))window.open(e,r);else{var a,s=[];xui.each(t,(function(e,i){e&&e["xui.UIProfile"]&&e.$xuiFileCtrl&&(a=e.boxing().getUploadObj())&&(s.push({id:e.$xid,file:a}),a.id=a.name=i,t[i]=a)})),"get"==(i=i||(a?"post":"get")).toLowerCase()?window.open(e+"?"+xui.urlEncode(t),r):(xui.each(t,(function(e,t){xui.isDefined(e)&&!xui.isElem(e)&&n.push('<textarea name="'+t+'">'+("object"==typeof e?xui.serialize(e):e)+"</textarea>")})),n.push('<input type="hidden" name="rnd" value="'+xui.rand()+'">'),n=xui.str.toDom('<form target="'+r+'" action="'+e+'" method="'+i+(o?'" enctype="'+o:"")+'">'+n.join("")+"</form>"),xui.Dom.getEmptyDiv().append(n),s.length&&xui.arr.each(s,(function(e,t){n.append(e.file)})),n.get(0).submit(),n.remove(),n=null),s.length&&xui.arr.each(s,(function(e,t){(t=xui.getObject(e.id))&&t["xui.UIProfile"]&&t.boxing()&&t.boxing().setUploadObj&&t.boxing().setUploadObj(e.file)}))}},selectFile:function(e,t,i){var r=document.createElement("input");if(r.type="file",t&&(r.accept=t),i&&(r.multiple="multiple"),r.onchange=function(t){var i=t.target||window.event.srcElement;xui.tryF(e,[this,i.files[0],i.files],this)},window.ActiveXObject||"ActiveXObject"in window){var o=document.createElement("div");r.appendChild(o),o.click(),r.removeChild(o)}else r.click()},busy:function(e,t,i,r,o){xui.Dom.setCover(t||!0,e,i,r,o)},free:function(e){xui.Dom.setCover(!1,e)},animate:function(e,t,i,r,o,n,a,s,u,l,d){var c=document.createElement("div");return xui.merge(e,{position:"absolute",left:this.HIDE_VALUE,zIndex:this.TOP_ZINDEX++}),xui.Dom.setStyle(c,e),document.body.appendChild(c),xui([c]).animate(t,i,(function(){xui.tryF(r),c.parentNode&&c.parentNode.removeChild(c),c=null}),o,n,a,s,u,l,d)},$enableEvents:function(e){xui.isArr(e)||(e=[e]);var t,i=this;xui.arr.each(e,(function(e){(t=function(t,i,r){if("function"==typeof t)return this.$addEvent(e,t,i,r);if(null===t)return this.$removeEvent(e,i,r);var o=arguments[1]||{};return o.$xuiall=!0===arguments[0],this.$fireEvent(e,o)}).$event$=1,i.plugIn(e,t)}))}},After:function(e){var t=this;xui.each({parent:["y",!1],prev:["x",!1],next:["x",!0],first:["y",!0],last:["y",1]},(function(e,i){t.plugIn(i,(function(t){return this.$iterator(e[0],e[1],!0,t||1)}))})),xui.arr.each(xui.toArr("offsetLeft,offsetTop,scrollWidth,scrollHeight"),(function(e){t.plugIn(e,(function(){var t=this.get(0),i=document;if(t==window||t==i){if("scrollWidth"==e||"scrollHeight"==e){var r=i.documentElement,o=i.body;return Math.max(r[e],o[e])}t=xui.browser.contentBox?i.documentElement:i.body}return t[e]}))}));var i="padding",r="margin",o="border",n="inner",a="offset",s="outer",u="width",l="height",d="Width",c="Height",p="Top",h="Left",f="left",x="Right",g="Bottom";xui.arr.each([["_"+i+"H",i+p,i+g],["_"+i+"W",i+h,i+x],["_"+o+"H",o+p+d,o+g+d],["_"+o+"W",o+h+d,o+x+d],["_"+r+"W",r+h,r+x],["_"+r+"H",r+p,r+g]],(function(e){var i,r=xui.Dom.getStyle;t.plugIn(e[0],(function(t){return t=t||"both",i=this.get(0),("both"==t||"left"==t||"top"==t?xui.CSS.$px(r(i,e[1]),i):0)+("both"==t||"right"==t||"bottom"==t?xui.CSS.$px(r(i,e[2]),i):0)||0}))})),xui.arr.each([["_W",u,"_"+i+"W","_"+o+"W","_"+r+"W",n+d,a+d],["_H",l,"_"+i+"H","_"+o+"H","_"+r+"H",n+c,a+c]],(function(e){var i=function(t,r,o,n){var a,s,u,l=t.style,d=xui.browser.contentBox,c=xui.Dom.getStyle,p=xui.Dom._setUnitStyle,h=typeof o;if("undefined"==h||"boolean"==h){if(!0===o&&(a="none"==c(t,"display")||0===t.offsetHeight)){var f,x,g,m=xui.Dom.getEmptyDiv().html("*",!1);xui([t]).swap(m),f=l.visibility,x=(x=l.position)||"",f=f||"",g=(g=l.display)||"",l.visibility="hidden",l.position="absolute",l.display="block"}switch(u=xui([t]),r){case 1:s=c(t,e[1]),!isNaN(parseFloat(s))&&!/%$/.test(s)||n||(s=i(t,2,undefined,!0)-(d?u[e[2]]():0)),s=xui.CSS.$px(s,t)||0;break;case 2:t===document||t===window?s=xui(t)[e[1]]():(s=t[e[6]])?s-=u[e[3]]():n||(s=i(t,1,undefined,!0)+(d?u[e[2]]():0));break;case 3:t===document||t===window?s=xui(t)[e[1]]():(s=t[e[6]])||(s=i(t,1,o,!0)+(d?u[e[2]]():0)+u[e[3]]());break;case 4:s=i(t,3,o),s+=u[e[4]]()}return a&&(l.display=g,l.position=x,l.visibility=f,u.swap(m),m.empty(!1)),parseFloat(s)||0}switch(r){case 1:if(p(t,e[1],o)&&xui.Dom.$hasEventHandler(t,"onsize")){var b={};b[e[1]]=1,xui([t]).onSize(!0,b)}break;case 2:i(t,1,o-(d?xui([t])[e[2]]():0));break;case 3:i(t,1,o-(u=xui([t]))[e[3]]()-(d?u[e[2]]():0));break;case 4:i(t,1,o-(u=xui([t]))[e[4]]()-u[e[3]]()-(d?u[e[2]]():0))}};t.plugIn(e[0],i)})),xui.arr.each([[n+d,"_W",2],[a+d,"_W",3],[s+d,"_W",4],[n+c,"_H",2],[a+c,"_H",3],[s+c,"_H",4]],(function(e){t.plugIn(e[0],(function(t){var i=typeof t;return"undefined"==i||"boolean"==i?this[e[1]](this.get(0),e[2],t):this.each((function(i){this[e[1]](i,e[2],t)}))}))})),xui.arr.each([[f+"By",f],["topBy","top"],[u+"By",u],[l+"By",l]],(function(e){t.plugIn(e[0],(function(t,i){if(0===t)return this;var r,o,n=e[1];return this.each((function(e){if(r=xui.use(e.$xid)[n](),r=(parseFloat(r)||0)+t,"width"!=n&&"height"!=n||(r=r>0?r:0),e.style[n]=xui.CSS.$forceu(r,null,e),i){(o={})[n]=1;var a=xui.Dom.$hasEventHandler;"left"!=n&&"top"!=n||!a(e,"onmove")||xui([e]).onMove(!0,o),"width"!=n&&"height"!=n||!a(e,"onsize")||xui([e]).onSize(!0,o)}}),this)}))})),xui.arr.each(["scrollLeft","scrollTop"],(function(e){t.plugIn(e,(function(t){var i,r=document.documentElement,o=document.body;return t!==undefined?this.each((function(i){i===window||i===document?(r&&(r[e]=t),o&&(o[e]=t)):i&&(i[e]=t)})):(i=this.get(0))?i===window||i===document?window["scrollTop"==e?"pageYOffset":"pageXOffset"]||r[e]||o[e]||0:i[e]:0}))})),xui.arr.each("width,height,left,top".split(","),(function(e){t.plugIn(e,(function(t){var i,r,o=this,n=o.get(0),a=xui.browser,s=typeof t,u=document;if(n&&3!=n.nodeType){if("undefined"==s||"boolean"==s){if("width"==e&&(i="Width")||"height"==e&&(i="Height")){if(u===n)return Math.max(u.body["scroll"+i],u.body["offset"+i],u.documentElement["scroll"+i],u.documentElement["offset"+i]);if(window===n)return a.opr?Math.max(u.body["client"+i],window["inner"+i]):a.kde?window["inner"+i]:xui.browser.contentBox&&u.documentElement["client"+i]||u.body["client"+i]}return r=n.style,"auto"==(t="width"==e?xui.CSS.$isPx(r.width)&&parseFloat(r.width)||o._W(n,1,t):"height"==e?xui.CSS.$isPx(r.height)&&parseFloat(r.height)||o._H(n,1,t):xui.Dom.getStyle(n,e,!0))||""===t?t:t||0}var l,d=xui.Dom._setUnitStyle,c=xui.CSS.$addu(t);return o.each((function(i){1==i.nodeType&&i.style[e]!==c&&("width"==e?o._W(i,1,t):"height"==e?o._H(i,1,t):d(i,e,t)&&("top"!=e&&"left"!=e||!xui.Dom.$hasEventHandler(n,"onmove")||((l={})[e]=1,xui([i]).onMove(!0,l))))}))}}))})),xui.arr.each(xui.Event._events,(function(e){xui.arr.each(xui.Event._getEventName(e),(function(e){t.$enableEvents(e)}))}))},Initialize:function(){var e=window,t=document;xui.browser.contentBox=xui(t.documentElement).contentBox(),xui.set(xui.$cache.domPurgeData,"!window",{$xid:"!window",element:e}),xui.set(xui.$cache.domPurgeData,"!document",{$xid:"!document",element:t}),xui.win=xui(["!window"],!1),xui.doc=xui(["!document"],!1),xui.frame=xui.win,xui.busy=xui.Dom.busy,xui.free=xui.Dom.free,xui.$inlineBlock=xui.browser.gek?xui.browser.ver<3?["-moz-inline-block","-moz-inline-box","inline-block"]:["inline-block"]:xui.browser.ie&&xui.browser.ver<=6?["inline-block","inline"]:["inline-block"];var i=function(e,t,i,r){var o,n,a,s,u,l=xui.Event,d={},c=l.getKey(t);if(c){if(1==c[0].length&&(c[0]=c[0].toLowerCase()),(u=i[c.join(":")])&&(xui.arr.each(u,(function(e,t){if(o=u[e]){if(o[3]&&("function"==typeof o[3]?!1===o[3]():!xui(o[3]).size()))return delete u[e],void(d[t]=1);if(!1===(a=xui.tryF(o[0],o[1]||[u,t,e],o[2])))return n=1,!1;!0===a&&(delete u[e],d[t]=1)}}),null,!0),xui.filter(u,(function(e,t){return!d[t]})),n))return l.stopBubble(t),!1;xui.Module&&xui.arr.each(xui.Module._cache,(function(e){e._evsClsBuildIn&&"onHookKey"in e._evsClsBuildIn?(xui.isFun(s=e._evsClsBuildIn.onHookKey)||xui.isArr(s)&&s[0].type)&&e.fireEvent("onHookKey",[e,c,r,t]):e._evsPClsBuildIn&&"onHookKey"in e._evsPClsBuildIn&&(xui.isFun(s=e._evsPClsBuildIn.onHookKey)||xui.isArr(s)&&s[0].type)&&e.fireEvent("onHookKey",[e,c,r,t])}))}return!0};xui.doc.onKeydown((function(e,t){xui.Event.$keyboard=xui.Event.getKey(t),i(0,t,xui.$cache.hookKey,!0)}),"document").onKeyup((function(e,t){delete xui.Event.$keyboard,i(0,t,xui.$cache.hookKeyUp,!1)}),"document"),xui.doc.onClick((function(e,t,i){var r,o,n=xui.Event.getSrc(t),a=0;do{if("A"==n.nodeName){r=!0;break}if(++a>8)break}while(n=n.parentNode);if(r){if(o=xui.str.trim(n.href||"").toLowerCase(),xui.History){var s=location.href.split("#")[0];xui.Event.getKey(t).shiftKey||"left"!=xui.Event.getBtn(t)||0!=o.indexOf(s+"#")&&0!=o.indexOf("#")||xui.History.setFI(n.href.replace(s,""))}if(xui.browser.ie&&(0==o.indexOf("javascript:")||-1!==o.indexOf("#")))return!1}}),"hookA",0);var r=function(e,t){for(e=window.event.srcElement;e&&e.nodeName&&"BODY"!=e.nodeName&&"HTML"!=e.nodeName;){if(t=xui.getNodeData(e,"_onxuisel"))return"false"!=t;if("INPUT"==e.nodeName||"TEXTAREA"==e.nodeName)break;e=e.parentNode}return!0};xui.browser.ie&&xui.browser.ver<10&&t.body&&xui.Event._addEventListener(t.body,"selectstart",r),xui.win.afterUnload(xui._destroy=function(){var i,o=xui.browser.ie&&xui.browser.ver<=8,n=xui.Event,a=function(e,t){e[t]=undefined,o||delete e[t]};for(var s in xui.History&&xui.History._checker&&n._removeEventListener(e,"hashchange",xui.History._checker),n._removeEventListener(t.body,"selectstart",r),n._removeEventListener(e,"resize",n.$eventhandler),n._removeEventListener(e,"mousewheel",n.$eventhandler3),n._removeEventListener(t,"mousewheel",n.$eventhandler3),n._removeEventListener(e,"DOMMouseScroll",n.$eventhandler3),xui.browser.isTouch&&(n._removeEventListener(t,xui.browser.ie&&e.PointerEvent?"pointerdown":xui.browser.ie&&e.MSPointerEvent?"MSPointerDown":"touchstart",n._simulateMousedown),n._removeEventListener(t,xui.browser.ie&&xui.browser.ver>=11?"pointerup":xui.browser.ie&&xui.browser.ver>=10?"MSPointerUp":"touchend",n._simulateMouseup)),i=xui.$cache.domPurgeData)i[s].eHandlers&&xui(s).$clearEvent();for(var s in i=xui._pool)i[s]&&i[s].destroy&&i[s].destroy(1,1),i[s]&&i[s].Instace&&i[s].Instace.destroy&&i[s].Instace.destroy(1,1);if(a(e,xui.ini.rootModuleName),e.Raphael&&e.Raphael._in_xui&&a(e,"Raphael"),xui.SC.__gc(),xui.Thread.__gc(),xui.Class.__gc(),/xui\.Class\.apply/.test(e.Class)&&a(e,"Class"),i=xui.Namespace._all)for(var s in i)a(e,i[s]);xui.breakO(xui.$cache,2),xui.breakO([xui.Class,xui],3),a(e,"xui_ini"),a(e,"xui"),e=t=null},"window",-1)}}),xui.Class("xui.Template","xui.absProfile",{Constructor:function(e,t,i,r){var o=arguments.callee.upper,n=xui.toArr(arguments);o.apply(this,n),o=null;var a=this;return a.$domId=a.KEY+":"+(a.serialId=a._pickSerialId())+":",a.domId="string"==typeof r?r:a.$domId,a._links={},a.template={root:[["<div></div>"],[]]},a.properties={},a.events={},a.$template={},a.link(a.constructor._cache,"self").link(xui._pool,"xui"),a.Class=a.constructor,a.box=a.constructor,a.boxing=function(){return this},e&&a.setTemplate("string"==typeof e?{root:e}:e),i&&a.setEvents(i),t&&a.setProperties(t),a},Instance:{renderId:null,__gc:function(){var e=this,t=xui.$cache.reclaimId;e.$noReclaim?delete e.$noReclaim:(t[e.KEY]||(t[e.KEY]=[])).push(e.serialId),delete xui.$cache.profileMap[e.domId],delete xui.$cache.profileMap[e.$domId],e.unLinkAll(),xui.breakO([e.properties,e.event,e],2)},_reg0:/^\w[\w_-]*$/,show:function(e){return e||(e=xui("body")),(e=xui(e)).append(this),this},getRootNode:function(){return xui.getNodeData(this.renderId,"element")},getRoot:function(){return xui([this.renderId],!1)},setDomId:function(e){var t=this,i=xui.$cache.profileMap,r=t._reg0;return"string"==typeof e&&r.test(e)&&!document.getElementById(e)&&(t.domId!=t.$domId&&delete i[t.domId],t.domId=e,t.renderId&&(t.getRootNode().id=e),i[t.$domId]&&(i[e]=t)),t},destroy:function(){if(this.renderId){var e=this.getRootNode();xui.$purgeChildren(e),e.parentNode&&e.parentNode.removeChild(e),e=null}else this.__gc()},setEvents:function(e,t){var i=this;return"object"==typeof e?i.events=e:i.events[e]=t,i},setTemplate:function(e,t){var i,r=this,o=r.template,n=r.$template;if("object"==typeof e){for(var a in r.template=e,i={},e)i[a||"root"]=r._buildTemplate(e[a]);r.$template=i}else"string"==typeof t?n[e]=r._buildTemplate(o[e]=t):n.root=r._buildTemplate(o.root=e);return r},setProperties:function(e,t){var i=this;return"object"==typeof e?i.properties=e:i.properties[e]=t,i},getItem:function(e){var t=xui.getNodeData(e);if(t){var i=t.tpl_evid,r=t.tpl_evkey;if(i&&r){var o=arguments.callee,n=o.f||(o.f=function(e,t,i){var r,o,a,s;for(a in e)if(o=e[a],xui.isArr(o)&&(t==a||0===t.indexOf((e.tpl_evkey||a)+".")))for(r=0;s=o[r];r++){if(s.tpl_evkey==t&&s.id==i)return s;if(s=n(s,t,i))return s}});return n(this.properties,r,i)}}},_pickSerialId:function(){var e=xui.$cache.reclaimId[this.KEY];return e&&e[0]?e.shift():this.constructor._ctrlId.next()},render:function(){var e=this;if(!e.renderId){var t=xui.$getGhostDiv();xui.$cache.profileMap[e.domId]=xui.$cache.profileMap[e.$domId]=this,t.innerHTML=e.toHtml();var i,r,o,n,a,s,u,l,d,c=e.events,p=xui.Event._eventHandler,h=t.getElementsByTagName("*"),f=(e.$domId,xui.Event.$eventhandler);if(r=h.length){for(i=0;i<r;i++)if(1==(a=h[i]).nodeType&&(s=a.getAttribute("tpl_evkey"),u=a.getAttribute("tpl_evid"),null!==s&&null!==u)){if((d=xui.$registerNode(a)).tpl_evkey=s,d.tpl_evid=u,l=c[s])for(o in d=d.eHandlers||(d.eHandlers={}),l)d[o]=f,(n=p[o])&&(d[n]=f,xui.Event._addEventListener(a,n,f));a.removeAttribute("tpl_evkey"),a.removeAttribute("tpl_evid")}t.firstChild.$xid||xui.$registerNode(t.firstChild),e.renderId=t.firstChild.$xid}a=t=null}return e},refresh:function(){var e=this;if(e.renderId){var t=document.createElement("span"),i=e.getRootNode(),r=xui.$cache.profileMap;delete r[e.domId],delete r[e.$domId],i.parentNode&&i.parentNode.replaceChild(t,i),e.destroy(),delete e.renderId,e.render(),t.parentNode&&t.parentNode.replaceChild(e.getRootNode(),t),t=i=null}return e},renderOnto:function(e){var t,i,r,o=this,n="style";"string"==typeof e&&(e=document.getElementById(e)),t=e.id||o.domId,o.renderId||o.render(),i=o.getRootNode(),e.parentNode.replaceChild(i,e),i.tabIndex!==e.tabIndex&&(i.tabIndex=e.tabIndex),e.className&&(i.className+=e.className),xui.browser.ie&&(r=e.style.cssText)?i.style.cssText+=r+"":(r=e.getAttribute(n))&&i.setAttribute(n,(i.getAttribute(n)||"")+r),this.setDomId(t)},toHtml:function(e){var t=xui.copy(e||this.properties||{});return t.tpl_evkey="root",this._doTemplate(t)},_reg1:/([^{}]*)\{([\w]+)\}([^{}]*)/g,_reg2:/\[event\]/g,_buildTemplate:function(e){if("string"==typeof e){var t=[[],[]],i=t[0],r=t[1];return(e=e.replace(this._reg2,' tpl_evid="{id}" tpl_evkey="{tpl_evkey}" ')).replace(this._reg1,(function(e,t,o,n){return t&&(i[i.length]=t),r[i.length]=i[i.length]=o,n&&(i[i.length]=n),""})),t}return e},_getEV:function(e,t,i,r){var o=xui.getNodeData(r);if(o){var n=this.events,a=o.tpl_evkey,s=a&&n&&n[a]||n,u=s&&s[i];u&&e.push(u)}},_reg3:/(^\s*<\w+)(\s|>)(.*)/,_doTemplate:function(e,t,i){if(!e)return"";var r,o,n,a=this,s=arguments.callee,u=xui.isArr(e),l=a.$template,d=l[t||"root"],c=!i;if(i=i||[],u){"function"!=typeof d&&(d=s);for(var p=0;o=e[p++];)o.tpl_evkey=t,d.call(a,o,t,i)}else if("function"==typeof d)d.call(a,e,t,i);else{t=t?t+".":"";for(var h=d[0],f=d[1],x=(p=0,h.length);p<x;p++)(n=f[p])?n in e&&(o="function"==typeof e[n]?e[n].call(a,n,e):e[n],l[r=t+n]?s.call(a,o,r,i):i[i.length]=o):i[i.length]=h[p]}return c?i.join("").replace(a._reg3,'$1 id="'+a.$domId+'" $2$3'):void 0},serialize:function(){var e=this,t=xui.serialize,i=xui.absObj.$specialChars,r=xui.isEmpty(e.properties)?null:xui.clone(e.properties,(function(e,t){return!i[(t+"").charAt(0)]}));return"new xui.Template("+t(e.template||null)+","+t(r)+","+t(xui.isEmpty(e.events)?null:e.events)+","+t(e.$domId!=e.domId?e.domId:null)+")"}},Static:{getFromDom:function(e){if((e="string"==typeof e?e:e&&e.id)&&(e=xui.$cache.profileMap[e])&&e["xui.Template"])return e.boxing()},_cache:[],_ctrlId:new xui.id}}),xui.Class("xui.Module","xui.absProfile",{Initialize:function(){var e=this;xui.launch=function(t,i,r,o,n,a,s,u,l){e.load.apply(e,[t,function(e,t){t&&t.setHost(window,xui.ini.rootModuleName),xui.tryF(i,[e,t],t)},r,o,n,a,s,u,l])},e["xui.Com"]=e.prototype["xui.Com"]=1,xui.Com=e,e.$activeClass$="xui.Module",xui.broadcast=function(e,t,i,r,o,n,a,s,u,l){var d=xui.toArr(arguments);xui.arr.each(xui.Module._cache,(function(e){e.fireEvent("onGlobalMessage",d)}))}},After:function(){var e,t,i,r,o,n=this;if(xui.arr.each(["$DataModel","$EventHandlers"],(function(a){if(e=n[a]||{},(i=n.$parent)&&(t=i.length))for(;t--;)for(o in r=i[t][a])o in e||(e[o]=r[o]);n[a]=e})),"_evsClsBuildIn"in(t=n.prototype)){for(o in r=t._evsClsBuildIn,i=t._evsPClsBuildIn||(t._evsPClsBuildIn={}),r)i[o]?(xui.isArr(i[o])||(i[o]=[i[o]]),xui.arr.insertAny(i[o],r[o])):i[o]=xui.clone(r[o]);t._evsClsBuildIn=null}"events"in t&&(t._evsClsBuildIn=t.events,t.events={}),n._nameId=0,n._nameTag=n.$nameTag||n.KEY.replace(/\./g,"_").toLowerCase(),n._cache=[]},Constructor:function(e,t,i){var r,o,n,a=this;e&&e.constructor==a.constructor&&e.$xid&&(a.$xid=e.$xid);var s=arguments.callee.upper;if(s&&s.call(a),s=null,e&&e.constructor==a.constructor){var u=e;t=u.events||{},o=u.alias,i=u.host,e=u.properties||{},a=u}else e&&e.key&&e["xui.Module"]?(e=(r=e)&&r.properties||{},t=r&&r.events||{},o=r.alias,i=r.host):(e||(a.properties?(e=xui.clone(a.properties,!0),(n=a.properties.__inner_coms_prf__)&&(e.__inner_coms_prf__=n)):e={}),t=t||(a.events?xui.clone(a.events):{}));return a.Class=a.constructor,a.box=a.constructor,a.key=a.KEY,o||(o=a.constructor.pickAlias()),xui.isEmpty(a.constructor.$DataModel)||xui.merge(e,xui.clone(a.constructor.$DataModel),"without"),a._links={},a.link(a.constructor._cache,"self"),a.link(xui.Module._cache,"xui.module"),a.link(xui._pool,"xui"),a.host=i||a,a.alias=o,a.$UIvalue="",a._nodes=[],a._ctrlpool={},a.events=t,a.properties={},a.hooks={},a._evsClsBuildIn&&(a._evsClsBuildIn=xui.clone(a._evsClsBuildIn)),a._evsPClsBuildIn&&(a._evsPClsBuildIn=xui.clone(a._evsPClsBuildIn)),a.setProperties(e,null,!0),a._innerCall("initialize"),a},Instance:{autoDestroy:!0,background:"",get:function(e){return xui.isNumb(e)?this:[this]},size:function(){return 1},boxing:function(){return this},each:function(e,t){return e.call(t,this),this},getRoot:function(e){this._innerModulesCreated||this._createInnerModules();var t=function(i){if(i["xui.Module"])for(var r,o=0;r=i._nodes[o];o++){if(r["xui.Module"])return t(r);if(r["xui.UIProfile"]&&!r.box.$initRootHidden)return e?r:r.getRoot()}};return t(this)},getRootNode:function(){var e=this.getRoot();if(!e.isEmpty())return e.get(0)},getModule:function(e){var t=function(e){if(e.moduleClass&&e.moduleXid){var i=xui.SC.get(e.moduleClass);if(i&&(i=i.getInstance(e.moduleXid)))return t(i)}return e};return e?t(this):this},_toDomElems:function(){var e=this,t=e.getUIComponents();return e.created||e.create(null,!1),e.render(),t.each((function(t,i){(t=t.getModule())&&t!=e&&t._toDomElems()})),t._toDomElems()},setAlias:function(e){return xui.absObj.prototype._setHostAlias.call(this,null,e)},getAlias:function(){return this.alias},setHost:function(e,t){return xui.absObj.prototype._setHostAlias.call(this,e,t)},getName:function(){return this.properties.name||this.alias},setName:function(e){this.properties.name=e},getDesc:function(){return this.properties.desc},setDesc:function(e){this.properties.desc=e},getTabindex:function(){return this.properties.tabindex},setTabindex:function(e){this.properties.tabindex=e},getHost:function(){return this.host},setFunctions:function(e,t){var i=this;e?"string"==typeof e?i.functions[e]=t:xui.isHash(e)&&(t?i.functions=xui.clone(e):xui.merge(i.functions,e,"all")):delete i.functions},getFunctions:function(e){var t=this.functions;if(t&&xui.isHash(t))return e?t[e]:t},setProperties:function(e,t,i,r){var o,n=this,a=n.properties,s="dataBinder"in a?a.dataBinder:null;return e?"string"==typeof e?a[e]=t:xui.isHash(e)&&(t?a=xui.copy(e):(a=xui.clone(a,!0),(o=n.properties.__inner_coms_prf__)&&(a.__inner_coms_prf__=o),xui.merge(a,e,"all"),t&&xui.isHash(t)&&xui.merge(a,t,"all"))):a={},n.properties=a,i||(r||"dataBinder"in a&&s!==(o=a.dataBinder||null)&&(s&&xui.DataBinder._unBind(s,n),o&&xui.DataBinder._bind(o,n)),n._innerModulesCreated&&((o=n.properties.__inner_coms_prf__)&&n.setProfile(o),xui.isFun(n._propSetAction)&&n._propSetAction(n.properties)),xui.isFun(n.propSetAction)&&n.propSetAction(n.properties),r||n._fireEvent("onModulePropChange",[n.properties])),n},_propSetAction:function(e){var t,i,r,o=this,n=/^\s*([^>\s]+)\s*>\s*([^>\s]+)\s*$/;xui.each(e,(function(e,a){xui.isSet(e)&&(t=n.exec(a))&&(i=o[t[1]])&&(xui.isFun(i[r="set"+xui.str.initial(t[2])])?i[r](e):xui.set(o,[t[1],"properties",t[2]],e))}))},getProperties:function(e){var t=this,i=t.properties;return xui.isFun(t._propGetter)&&(i=t._propGetter(i)),xui.isFun(t.propGetter)&&(i=t.propGetter(i)),e?i[e]:xui.copy(i)},setEvents:function(e,t){var i=this;return e?"string"==typeof e?i.events[e]=t:xui.isHash(e)&&(t?i.events=xui.clone(e):xui.merge(i.events,e,"all")):i.events={},i},getEvents:function(e){return e?this.events[e]:this.events},setHooks:function(e,t){var i=this;return e?"string"==typeof e?i.hooks[e]=t:xui.isHash(e)&&(t?i.hooks=xui.clone(e):xui.merge(i.hooks,e,"all")):i.hooks={},i},getHooks:function(e){return e?this.hooks[e]:this.hooks},notifyHooks:function(e,t,i,r,o,n,a,s,u,l){var d,c=this,p=c.hooks;if(e&&p&&(d=p[e])&&xui.isFun(d))return xui.tryF(d,xui.toArr(arguments).slice(1),c)},postMessage:function(e,t,i,r,o,n,a,s,u,l){var d=xui.toArr(arguments);return d.unshift(this),this.fireEvent("onMessage",d)},serialize:function(e,t,i){var r,o=this,n=(r=o.constructor._beforeSerialized)?r(o):o,a={"xui.Module":!0,alias:n.alias,key:n.KEY,host:n.host};a.host===o?delete a.host:n.host&&!t&&(!1!==e?a.host="@this":delete a.host);var s={},u=n.box.$DataModel;xui.merge(s,n.properties,(function(e,t){return u[t]!==e})),i&&xui.each(i,(function(e,t){e===s[t]&&delete s[t]})),(r=n.properties.__inner_coms_prf__)&&(s.__inner_coms_prf__=r),xui.isEmpty(s)||(a.properties=s),xui.isEmpty(a.properties)&&delete a.properties,xui.isEmpty(s=n.functions)||(a.functions=s),xui.isEmpty(a.functions)&&delete a.functions,xui.isEmpty(r=this.getEvents())||(a.events=r);var l=n.box.$EventHandlers;return xui.filter(a.events,(function(e,t){return e!==l[t]})),xui.isEmpty(r=this.getEvents())||(a.events=r),xui.isEmpty(a.events)&&delete a.events,!1===e?a:xui.serialize(a)},clone:function(){var e=this.serialize(!1,!0);return delete e.alias,this.constructor.unserialize(e)},fireEvent:function(e,t,i){var r=this;if(!(r.$inDesign||r.host&&r.host.$inDesign)||xui.get(r,["_PASSEVTS",e])){var o,n=r._evsPClsBuildIn&&r._evsPClsBuildIn[e],a=r._evsClsBuildIn&&r._evsClsBuildIn[e],s=r.events&&r.events[e],u=function(t,i,r,o){var n;return o=xui.isSet(o)?xui.isArr(o)?o:[o]:[],(xui.isStr(i)||xui.isFun(i))&&(i=[i]),xui.isNumb(n=(i.actions||i)[0].event)&&xui.isObj(o[n])&&(o[n]=xui.Event.getEventPara(o[n])),xui.pseudocode._callFunctions(i,o,r,null,t.$holder,(r&&r.alias||t.$holder&&t.$holder.alias)+"."+t.alias+"."+e)};return r.$lastEvent=e,!n||xui.isArr(n)&&!n.length||(o=u(r,n,r,t)),!a||xui.isArr(a)&&!a.length||(o=u(r,a,r,t)),!s||xui.isArr(s)&&!s.length||(o=u(r,s,i||r.host||r,t)),o}},_fireEvent:function(e,t){return(t=t||[]).splice(0,0,this,this.threadid),this.fireEvent(e,t)},_innerCall:function(e){var t=this;return xui.tryF(t[e],[t,t.threadid],t)},customAppend:function(e,t,i,r,o){return!1},popUp:function(e,t,i,r,o){var n=this,a=function(){n.getUIComponents(!0).popUp(e,t,i,r,o)};self.created?a():this.show(a)},show:function(e,t,i,r,o,n){if(xui.UI.$trytoApplyCSS(),!1===this._fireEvent("beforeShow"))return!1;(t=t||xui("body"))["xui.UIProfile"]&&(t=t.boxing());var a=this,s=function(){var s=a.customStyle;if(s&&!xui.isEmpty(s)){var u=[];xui.each(s,(function(e,t){u.push(t+" : "+e+";")}));var l=".xui-module-"+a.$xid+"{\r\n"+u.join("\r\n")+"\r\n}";xui.CSS.addStyleSheet(l,"xui:css:module-"+a.$xid,1)}a.getUIComponents().isEmpty()?(xui.tryF(a.customAppend,[t,i,o,n,r],a),xui.tryF(e,[null,a,r],a)):(t&&t["xui.UI"]&&!t.get(0).renderId||a.render(),!1===xui.tryF(a.customAppend,[t,i,o,n,r],a)&&(t.append(a.getUIComponents(!1),i),a.getUIComponents(!0).each((function(e){e.boxing().show(t,i,null,null,null,(function(){if("xui.UIProfile"==e.KEY&&xui.get(e,["properties","defaultFocus"]))try{xui.asyRun((function(){e.boxing().activate()}))}catch(e){}}))}))),a.renderId="ok",xui.tryF(e,[null,a,r],a)),a._showed=1,a._fireEvent("afterShow")};return a.threadid=r,a.created?s():a.create(s,r),a},hide:function(){this.getUIComponents(!0).each((function(e){e.boxing().hide()})),this._showed=0},render:function(e){var t=this,i=function(e){xui.arr.each(e._nodes,(function(e){e["xui.Module"]&&(e._fireEvent("onRender"),i(e))}))};return t.created||t.create(null,!1),"ok"!=t.renderId&&(t.renderId="ok",t.getUIComponents().render(e),t._fireEvent("onRender"),i(t)),t},refresh:function(e,t,i,r){var o,n,a,s,u,l,d=this,c=d.box,p=d.host,h=d.alias,f=d.$xid,x=d._render_conf,g=d._render_holder,m=d.$refreshTrigger,b=d.moduleClass,v=d.moduleXid;if(d.renderId&&!(s=d.getUIComponents()).isEmpty())return u=s.get(0),p&&p["xui.Module"]&&(p.$ignoreAutoDestroy=!0),(o=!!u.parent)?(n=u.parent.boxing(),l=u.childrenId):(n=u.getParent())||(n=u.getRoot().parent()),a=d.serialize(!1,!0,r),d.destroy(!1!==t,!1!==i,!0),r&&d.properties&&xui.each(r,(function(e,t){e===d.properties[t]&&delete d.properties[t]})),xui.merge(d,a,"all"),delete d.destroyed,d.$xid=f,x&&(d._render_conf=x),g&&(d._render_holder=g),new c(d),p&&d.setHost(p,h),d.moduleClass=b,d.moduleXid=v,d.create((function(){var t=function(t,i){e&&xui.tryF(e)};m&&m.call(m.target,d),o?d.show(t,n,l):n.isEmpty()||d.show(t,n)})),d.host&&d.host["xui.Module"]&&delete d.host.$ignoreAutoDestroy,this},getParent:function(){var e=this.getUIComponents().get(0);if(e)return e.parent&&e.parent.boxing()},getChildrenId:function(){var e=this.getUIComponents().get(0);if(e)return e.childrenId},create:function(e,t){var i=this;if(i.created)xui.tryF(e,[null,i,t],i);else{var r=[];if(i.threadid=t,!1!==i._fireEvent("beforeCreated")){r.push((function(e){e&&(i.threadid=e),i._fireEvent("onCreated")}));var o=[],n=[];if(xui._collectClassRequired(i.Class,o,n),o.length||n.length){var a,s,u,l=0,d=function(e,t,r){if(n.length){for(var c=0,p=n.length;c<p;c++)s=a=null,xui.isHash(n[c])?(s=n[c].id||null,u=n[c].uri,delete(a=xui.copy(n[c])).id,delete a.uri):u=n[c],s&&!xui.Dom.byId(s)?(xui.CSS.includeLink(u,s,!1,a),i._fireEvent("onLoadRequiredCSS",[u,c,l])):xui.querySelector('link[href="'+u+'"]').get(0)||(xui.CSS.includeLink(u,s,!1,a),i._fireEvent("onLoadRequiredCSS",[u,c,l]));n=[]}if(o.length){var h=[];xui.filter(o,(function(e){if(xui.isArr(e))return Array.prototype.push.apply(h,e),!1})),xui.require(o,(function(t){l++,(o.length||n.length)&&xui.Thread(e).insert(d)}),(function(e,t){var r;t&&(r=xui.SC.get(t))&&r.$xuiclass$&&xui._collectClassRequired(r,o,n),i._fireEvent("onLoadRequiredClass",[e,t,l])}),(function(e){i._fireEvent("onLoadRequiredClassErr",[e,l])}),null,!1,e,{stopRecursive:1,sync:!0}),o=[],h.length&&Array.prototype.push.apply(o,h)}};r.push(d)}return i.iniComponents&&r.push((function(e){i._createInnerModules(e)})),i.iniResource&&r.push((function(){i._fireEvent("onIniResource"),i._innerCall("iniResource")})),i.iniExComs&&(i.iniExModules=i.iniExComs,delete i.iniExComs),i.iniExModules&&r.push((function(){i._innerCall("iniExModules")})),r.push((function(e){i.background&&xui.SC.runInBG(i.background),i._fireEvent("onReady")})),r.push((function(t){i.created=!0,xui.tryF(e,[null,i,t],i)})),!1===t?xui.arr.each(r,(function(e){e.call()})):xui.Thread.observableRun(r,null,t),i}}},_createInnerModules:function(e){var t=this;if(!t._recursived&&!t._innerModulesCreated){var i,r=function(e){if(e&&e["xui.Module"]&&e.moduleClass&&e.moduleXid)if(t.KEY==e.moduleClass){if(t.$xid==e.moduleXid)return;t._recursived=e._recursived=!0,e.destroy(),t.destroy(),i=1}else r(e.host)};if(r(t.host),i)alert("There's a ["+t.KEY+"] in another ["+t.KEY+"], check this recursive call please!");else if(!1!==t._fireEvent("beforeIniComponents")){Array.prototype.push.apply(t._nodes,t._innerCall("iniComponents")||[]),xui.arr.each(t._nodes,(function(i){xui.Module.$attachModuleInfo(t,i),i["xui.Module"]&&i.create((function(){}),e)}));var o=t.autoDestroy||t.properties.autoDestroy;o&&xui.arr.each(t._nodes,(function(e){if(e.box&&e.box["xui.UI"]&&!e.box["xui.UI.MoudluePlaceHolder"]&&!e.box.$initRootHidden)return(e.$afterDestroy=e.$afterDestroy||{}).moduleDestroyTrigger=function(e,i){!o||t.destroyed||t.$ignoreAutoDestroy||t.destroy(e,i),t=null},!1})),t._fireEvent("afterIniComponents"),t._innerModulesCreated=!0,t.setProperties({})}}},iniComponents:function(){},applyExcelFormula:function(e){var t,i,r=this,o=xui.ExcelFormula,n=e&&e.properties.excelCellFormula,a={},s={},u={};if(n){xui.each(this._ctrlpool,(function(e){var r;(r=e.properties.excelCellId)&&/^\s*[a-zA-Z]+[\d]+\s*$/.test(r)&&(s[r]=e.alias,u[e.alias]=r,r=o.toCoordinate(r,0),t=Math.max(t,r[0]),i=Math.max(i,r[1]))}));var l=o.getRefCells(n,t,i);if(!l)return;xui.each(s,(function(e,t){t in l&&(t in a||(a[t]=r[e].getExcelCellValue()))})),e.boxing()._applyExcelFormula(a)}return r},triggerExcelFormulas:function(e){var t=this,i={},r={},o={},n=xui.ExcelFormula,a=0,s=0,u=e&&e.alias;if(xui.each(this._ctrlpool,(function(e){var t,u=e.properties;(t=u.excelCellFormula)&&(i[e.alias]=[e,t]),(t=u.excelCellId)&&/^\s*[a-zA-Z]+[\d]+\s*$/.test(t)&&(t.replace(/\s/g,""),r[t]=e.alias,o[e.alias]=t,t=n.toCoordinate(t,0),s=Math.max(s,t.col),a=Math.max(a,t.row))})),u&&delete i[u],!xui.isEmpty(i)){var l={};xui.each(i,(function(e,t,i,o){(i=n.getRefCells(e[1],s,a))&&(o={},xui.each(i,(function(e,t){o[r[t]]=e})),l[t]=o)}));var d,c,p,h={},f={};u&&(f[u]=1);do{d=0,xui.filter(l,(function(e,r){if(p=0,u){for(var n in e)if(n in f){p=1;break}}else p=1;if(!p)return!1;for(var n in c=!0,e)!u&&n in i?c=!1:o[n]in h||(h[o[n]]=t[n].getExcelCellValue());return c?(t[r]._applyExcelFormula(h),u&&(f[r]=1),delete i[r],d++,!1):void 0}))}while(!xui.isEmpty(i)&&d>0);return t}},getProfile:function(){this._innerModulesCreated||this._createInnerModules();var e,t={};return xui.each(this._ctrlpool,(function(i){delete(e=t[i.alias]=i.serialize(!1,!1,!1)).key,delete e.alias,delete e.events,delete e["xui.Module"]})),t},setProfile:function(e){return this._innerModulesCreated||this._createInnerModules(),xui.each(this._ctrlpool,(function(t,i){if(t.alias in e){i=e[t.alias];var r=t.boxing();i&&xui.isHash(i)&&!xui.isEmpty(i)?(i.theme&&"function"==typeof r.setTheme&&r.setTheme(i.theme),i.properties&&!xui.isEmpty(i.properties)&&r.setProperties(i.properties),i.CA&&!xui.isEmpty(i.CA)&&r.setCustomAttr(i.CA),i.CC&&!xui.isEmpty(i.CC)&&r.setCustomClass(i.CC),i.CS&&!xui.isEmpty(i.CS)&&r.setCustomStyle(i.CS)):r.setValue(i)}})),this},getPropBinderKeys:function(e,t){this._innerModulesCreated||this._createInnerModules(),e=e||xui._scope_set,t=t||xui._scope_clear;var i={};try{e.call(this),xui.each(this._ctrlpool,(function(e){var t=e.properties;t.propBinder&&xui.each(t.propBinder,(function(e,i){i in t&&xui.isFun(e)&&e()}))}))}catch(e){}finally{t.call(this)}return xui.each(i,(function(e,t){i[t]=xui.toArr(e,!0)})),i},reBindProp:function(e,t,i){this._innerModulesCreated||this._createInnerModules(),t=t||xui._scope_set,i=i||xui._scope_clear;try{t.call(this,e),xui.each(this._ctrlpool,(function(r){r.boxing().reBindProp(e,t,i,!0)}))}catch(e){i.call(this)}},getData:function(e){this._innerModulesCreated||this._createInnerModules();var t={};return xui.each(this._ctrlpool,(function(i){var r=i.properties,o=i.boxing(),n=t[i.alias]={};xui.arr.each(["src","html","items","listKey","header","rows","target","toggle","attr","JSONData","XMLData","JSONUrl","XMLUrl","name","labelCaption"],(function(e){e in r&&(n[e]=r[e])})),e&&"value"in r&&(n.value=r.value),"caption"in r&&xui.isSet(r.caption)&&(n.caption="function"==typeof o.getCaption?o.getCaption():r.caption)})),t},setData:function(e){return this._innerModulesCreated||this._createInnerModules(),xui.each(this._ctrlpool,(function(t){var i,r=t.properties,o=t.boxing();t.alias in e&&((i=e[t.alias])&&xui.isHash(i)&&!xui.isEmpty(i)?xui.arr.each(["src","html","items","listKey","header","rows","target","toggle","attr","JSONData","XMLData","JSONUrl","XMLUrl","name","value","labelCaption","caption"],(function(e){e in r&&e in i&&o["set"+xui.str.initial(e)](i[e])})):o.setValue(i))})),this},getValue:function(e){if(e){this._innerModulesCreated||this._createInnerModules();var t,i,r={};return xui.each(this._ctrlpool,(function(e){"value"in e.properties&&(xui.isSet(e.properties.caption)?(t=e.properties.caption,i=e.properties.value,r[e.alias]=!t&&!i||t==i?i:{value:i,caption:t}):r[e.alias]=e.properties.value)})),r}return this.properties.value},setValue:function(e,t){return t?(this._innerModulesCreated||this._createInnerModules(),xui.isEmpty(e)||xui.each(this._ctrlpool,(function(t){if("value"in t.properties&&t.alias in e){var i=e[t.alias],r=xui.isHash(i);t.boxing().setValue(r&&"value"in i?i.value:i,!0,"module"),"function"==typeof t.boxing().setCaption&&r&&"caption"in i&&t.boxing().setCaption(i.caption,null,!0,"module")}}))):this.properties.value=e,this},getUIValue:function(e){if(e){this._innerModulesCreated||this._createInnerModules();var t={};return xui.each(this._ctrlpool,(function(e){"$UIvalue"in e.properties&&(t[e.alias]=e.properties.$UIvalue)})),t}return this.$UIvalue},setUIValue:function(e,t){return t?(this._innerModulesCreated||this._createInnerModules(),xui.isEmpty(e)||xui.each(this._ctrlpool,(function(t){if("value"in t.properties&&t.alias in e){var i=e[t.alias],r=xui.isHash(i);t.boxing().setUIValue(r&&"value"in i?i.value:i,!0,!1,"module"),"function"==typeof t.boxing().setCaption&&r&&"caption"in i&&t.boxing().setCaption(i.caption,null,!0,"module")}}))):this.$UIvalue=e,this},resetValue:function(e){return e?(this._innerModulesCreated||this._createInnerModules(),xui.each(this._ctrlpool,(function(e){e.boxing().resetValue&&e.boxing().resetValue()}))):this.$UIvalue=this.properties.value,this},updateValue:function(e){return e?(this._innerModulesCreated||this._createInnerModules(),xui.each(this._ctrlpool,(function(e){e.boxing().updateValue&&e.boxing().updateValue()})),this):(this.properties.value=this.$UIvalue,this)},isDirtied:function(e){return e?(this._innerModulesCreated||this._createInnerModules(),xui.each(this._ctrlpool,(function(e){if(e.boxing().isDirtied&&e.boxing().isDirtied())return!1})),!1):this.properties.value===this.$UIvalue},checkValid:function(e){if(!e)return!0;this._innerModulesCreated||this._createInnerModules(),xui.each(this._ctrlpool,(function(e){if(e.boxing().checkValid&&!e.boxing().checkValid())return!1}))},getDataBinders:function(){this._innerModulesCreated||this._createInnerModules();var e=xui.copy(this._nodes);return xui.filter(e,(function(e){return!!e.box["xui.DataBinder"]})),e},getForms:function(){this._innerModulesCreated||this._createInnerModules();var e=xui.copy(this._ctrlpool);return xui.filter(e,(function(e){return!!e.box["xui.absContainer"]})),e},getAllComponents:function(){this._innerModulesCreated||this._createInnerModules();var e=[],t=function(i){i["xui.Module"]&&xui.each(i._ctrlpool,(function(i){i["xui.Module"]?t(i):e.push(i)}))};return t(this),xui.absObj.pack(e,!1)},getComponents:function(){this._innerModulesCreated||this._createInnerModules();var e=[],t=function(i){i["xui.Module"]&&xui.arr.each(i._nodes,(function(i){i["xui.Module"]?t(i):e.push(i)}))};return t(this),xui.absObj.pack(e,!1)},getUIComponents:function(e){var t=this.getComponents().get(),i="$initRootHidden";return xui.filter(t,(function(t){return!!(t&&t.box&&t.box["xui.UI"]&&(!0===e?!t.box[i]:!1!==e||t.box[i]))})),xui.UI.pack(t,!1)},setComponents:function(e){var t,i=this;return xui.arr.each(i._nodes,(function(e){(t=i[e.alias])&&t.get(0)==e&&delete i[e.alias]})),xui.arr.each(i._nodes=e.get(),(function(e){e.boxing().setHost(i,e.alias)})),xui.arr.each(i._nodes,(function(e){xui.Module.$attachModuleInfo(i,e)})),i},AddComponents:function(e){var t=this;return xui.arr.each(e.get(),(function(e){e.boxing().setHost(t,e.alias),t._nodes.push(e),xui.Module.$attachModuleInfo(t,e)})),t},isDestroyed:function(){return!!this.destroyed},destroy:function(e,t,i){var r=this,o=(r.constructor,r._nodes);if(!r.destroyed){if(r._fireEvent("onDestroy"),r.alias&&r.host&&r.host[r.alias])try{delete r.host[r.alias]}catch(e){r.host[r.alias]=null}r.destroyed=!0,o&&o.length&&xui.arr.each(o,(function(i){i&&i.box&&i.boxing().destroy(e,t)}),null,!0),o&&o.length&&(r._nodes.length=0),r._ctrlpool=null,r.unLinkAll(),i?(delete r.renderId,delete r.created,delete r._innerModulesCreated):xui.breakO(r),r.$afterDestroy&&(xui.each(r.$afterDestroy,(function(i){xui.tryF(i,[e,t],r)})),xui.breakO(r.$afterDestroy,2)),r.destroyed=!0}},applyPseudo:function(e,t,i){return xui.isStr(e)&&(e=this.functions&&this.functions[e]),xui.isObj(e)?xui.pseudocode._callFunctions(e,t||[],i||this):null}},Static:{"xui.absValue":!0,refresh:function(e){var t,i,r=this,o={$children:r.$children,_cache:r._cache,_nameId:r._nameId},n=r.KEY,a=n.split(".");return(i=xui.get(window,["xui","$cache","SC"]))&&delete i[n],xui.set(window,a),xui.exec(e),t=xui.get(window,a),xui.merge(r,t,(function(e,i){return t.hasOwnProperty(i)})),xui.merge(r.prototype,t.prototype,(function(e,i){return t.prototype.hasOwnProperty(i)})),xui.merge(r,o,"all"),xui.breakO(t.prototype,1),xui.breakO(t,1),xui.set(window,a,r),r},pickAlias:function(){return xui.absObj.$pickAlias(this)},getFromDom:function(e){var t=xui.UIProfile.getFromDom(e);if(t&&(t=t.host))return!t.destroyed&&t},getClsFromDom:function(e){return xui.get(this.getFromDom(e),["KEY"])},getAllInstance:function(){var e={};return xui.arr.each(this._cache,(function(t){e[t.$xid]=t})),e},getInstance:function(e,t){var i=this;if(!t&&e&&(e["xui.Profile"]&&e.moduleClass&&e.moduleXid?(t=e.moduleXid,e=e.moduleClass):(t=e,e=null)),e){if(!(i=xui.SC.get(e))||!i["xui.Module"])return}else i=this;var r=i._cache;if(!t)return r[0];for(var o in i._cache)if(xui.isFinite(o)?t+""==o:"$"+t==o)return i._cache[o]},postMessage:function(e,t,i,r,o,n,a,s,u,l,d){var c,p=xui.SC.get(e);p&&p["xui.Module"]&&((c=xui.toArr(arguments))[0]=p,xui.arr.each(p._cache,(function(e){p.fireEvent("onMessage",c)})))},destroyAll:function(e,t){xui.arr.each(this._cache,(function(i){i.destroyed||i.destroy(e,t)}))},load:function(e,t,i,r,o,n,a,s,u){if(!e){var l=new Error("No cls");throw xui.tryF(t,[l,null]),l}"function"==typeof r&&(o=r);var d=function(e){var t;if((t=e.theme)&&(r=t),(t=e.SpaceUnit)&&(xui.SpaceUnit=t),(t=xui.ini.$DefaultProp)&&xui.isHash(t)){var i,o={};xui.each(t,(function(e,t){/^xui\.UI\./.test(t)&&xui.isHash(e)&&(i=xui.get(window,t.split(".")))?i.setDftProp(e):o[t]=e})),xui.isEmpty(o)||xui.UI.setDftProp(o)}if(e.zoom){var n=function(e,t,i){var r=parseInt(t,10)||800,o=parseInt(i,10)||600;if(!xui.isNumb(e)){var n,a=xui.win,s=a&&a.width(),u=a&&a.height();if(s&&u){var l=s/r,d=u/o;switch(e.split("-")[0]){case"width":e=l,n="xui-css-noscrollx";break;case"height":e=d,n="xui-css-noscrolly";break;case"cover":e=Math.max(l,d),n="xui-css-noscroll"+(l>=d?"x":"y");break;case"contain":e=Math.min(l,d),n="xui-css-noscroll"}xui("html").removeClass(/^xui-css-noscroll(x|y)?$/).addClass(n),xui.ini.$fixFrame=1}}(e=parseFloat(e))&&1!=e&&(xui.ini.$fixFrame&&(xui("html").css({width:r+"px",height:o+"px"}),xui.frame=xui("html")),xui.ini.$zoomScale=e,xui.Dom.$setZoom(xui("html").get(0),e),xui.ini.$transformScale=e)};(t=xui.ini.$frame)&&(n(t.zoom,t.width,t.height),!xui.isNumb(t.zoom)&&/-resize$/.test(t.zoom+"")&&xui.win.onSize((function(){var e=xui.ini.$frame;xui.resetRun("_xui_auto_zoom",n,0,[e.zoom,e.width,e.height])}),"_xui_auto_zoom"))}(t=e.background)&&xui.isHash(t)&&xui.each(t,(function(e,t){xui("html").css(t,xui.adjustRes(e))})),(t=xui.ini.$ElementStyle)&&xui.isHash(t)&&xui.CSS.setStyleRules(".xui-custom",t,!0),(t=xui.ini.$FontIconsCDN)&&xui.isHash(t)&&xui.asyRun((function(){xui.each(t,(function(e,t){if(e.href&&!e.disabled){var i={crossorigin:"anonymous"};xui.merge(i,e,(function(e,t){return"href"!==t&&"disabled"!==t})),xui.CSS.includeLink(xui.adjustRes(e.href),"xui_app_fscdn-"+t,!1,i)}}))}),20)},c=function(u){var l,c=this,p={},h=function(i,r,u){if(!xui.isFun(c)){var l=new Error("'"+e+"' is not a constructor");throw xui.tryF(t,[l,null]),l}var d=new c;c._callfrom=e,xui.set(xui.ModuleFactory,["_cache",e],d),s&&xui.tryF(s,[d]),!1!==o?d.show(t,n,a):xui.tryF(t,[null,d],d)};if(!u){var f=new Error("No class name");throw xui.tryF(t,[f,null]),f}(l=this.designViewConf)&&xui.isHash(l)&&xui.merge(p,l),(l=this.viewStyles)&&xui.isHash(l)&&xui.each(l,(function(e,t){/^background/.test(t)?(p.background||(p.background={}))[t]=e:p[t]=e})),p.zoom&&xui.set(xui.ini,["$frame","zoom"],p.zoom),p.width&&xui.set(xui.ini,["$frame","width"],p.width),p.height&&xui.set(xui.ini,["$frame","height"],p.height),xui.isEmpty(p)||d(p),r&&"default"!=r?xui.setTheme(r,!0,(function(){xui.setLang(i||"en",h)}),(function(){xui.alert("Can't load theme - "+r),xui.setLang(i||"en",h)})):xui.setLang(i||"en",h)},p=function(){u&&xui.tryF(u);var i,r={};(i=xui.ini.$DevEnv)&&xui.isHash(i)&&(i.SpaceUnit&&(r.SpaceUnit=i.SpaceUnit),(i=i.designViewConf)&&xui.merge(r,i,"all")),(i=xui.ini.$PageAppearance)&&xui.isHash(i)&&xui.merge(r,i,"all"),r.zoom&&xui.set(xui.ini,["$frame","zoom"],r.zoom),r.width&&xui.set(xui.ini,["$frame","width"],r.width),r.height&&xui.set(xui.ini,["$frame","height"],r.height),xui.isEmpty(r)||d(r),"function"==typeof e&&e.$xui$?c.apply(["ok"],e):e+="",/\//.test(e)&&!/\.js$/i.test(e)&&(e+=".js"),/\.js$/i.test(e)?xui.fetchClass(e,c,(function(e){xui.tryF(t,[e,null])})):xui.SC(e,c,!0,null,{retry:0,onFail:function(e){xui.tryF(t,[e,null])}})};xui.isDomReady?p():xui.main(p)},unserialize:function(e){return new this(e)},$attachModuleInfo:function(e,t){if(t.moduleClass&&t.moduleXid){var i=xui.SC.get(t.moduleClass);if((i=i.getInstance(t.moduleXid))!==e)return i.moduleClass=e.KEY,void(i.moduleXid=e.$xid)}t.moduleClass=e.KEY,t.moduleXid=e.$xid,xui.arr.each(t.children,(function(t){xui.Module.$attachModuleInfo(e,t[0])}))},$DataModel:{autoDestroy:!0,dataBinder:"",value:""},$EventHandlers:{onHookKey:function(e,t,i,r){},onFragmentChanged:function(e,t,i,r){},onMessage:function(e,t,i,r,o,n,a,s,u,l,d){},onGlobalMessage:function(e,t,i,r,o,n,a,s,u,l,d){},beforeCreated:function(e,t){},beforeShow:function(e,t){},afterShow:function(e,t){},onLoadRequiredCSS:function(e,t,i,r,o){},onLoadRequiredClass:function(e,t,i,r,o){},onLoadRequiredClassErr:function(e,t,i,r){},onIniResource:function(e,t){},beforeIniComponents:function(e,t){},afterIniComponents:function(e,t){},onModulePropChange:function(e,t,i){},onReady:function(e,t){},onRender:function(e,t){},onDestroy:function(e){}}}}),xui.Class("xui.Cookies",null,{Static:{set:function(e,t,i,r,o,n){if(xui.isHash(e))for(var a in e)this.set(a,e[a],i,r,o,n);else"string"!=typeof t&&(t=xui.serialize(t)),document.cookie=escape(e+"")+"="+escape(t)+(i?"; expires="+new Date((new Date).getTime()+864e5*i).toGMTString():"")+(r?"; path="+r:"")+(o?"; domain="+o:"")+(n?"; secure":"");return this},get:function(e){var t,i,r,o,n=document.cookie.split("; "),a={};for(t=0;t<n.length;t++)if(r=(i=n[t].split("="))[1]?unescape(i[1]):"",a[i[0]]=(/^\s*\{[\s\S]*\}$/.test(o=r)||/^\s*\[[\s\S]*\]$/.test(o)?xui.unserialize(o):o)||r,e&&i[0]==escape(e))return a[i[0]];return e?null:a},remove:function(e){return this.set(e,"",-1).set(e,"/",-1)},clear:function(){xui.arr.each(document.cookie.split(";"),(function(e){xui.Cookies.remove(xui.str.trim(e.split("=")[0]))}))}}}),xui.Class("xui.XML",null,{Static:{json2xml:function(e,t,i){var r=[],o=function(e,r,n){if("object"==typeof r)if(xui.isArr(r))if(r.length)for(var a=0,s=r.length;a<s;a++)n.push(o(e,r[a],n));else n.push("<"+(t?t(e):e)+">__[]__</"+(t?t(e):e)+">");else{var u;for(var a in n.push("<"+(t?t(e):e)),r)"@"==a.charAt(0)?n.push(" "+a.substr(1)+'="'+(i?i(r[a]):r[a])+'"'):u=1;if(n.push(u?">":"/>"),u){for(var a in r)"#text"==a?n.push(i?i(r[a]):r[a]):"#cdata"==a?n.push("<![CDATA["+(i?i(r[a]):r[a])+"]]>"):"@"!=a.charAt(0)&&n.push(o(a,r[a],n));n.push("</"+(t?t(e):e)+">")}}else n.push("<"+(t?t(e):e)+">"+(i?i(r):r)+"</"+(t?t(e):e)+">")};for(var n in e)o(n,e[n],r);return'<?xml version="1.0" encoding="UTF-8" ?>'+r.join("")},xml2json:function(e){9==e.nodeType&&(e=e.documentElement);var t={},i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r=/^-?(\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/,o={"__[]__":[],null:null,false:!1,true:!0},n=function(e){return e.replace(/[\s\S]/g,(function(e,t){return(t=i[e])?t:e}))},a=function(e){var t,i;for(e.normalize(),t=e.firstChild;t;)i=t,1==t.nodeType&&a(t),t=t.nextSibling,3!=i.nodeType||i.nodeValue.match(/\S/)||e.removeChild(i);return e},s=function(e){if("innerHTML"in e)e=(e=e.innerHTML)in o?o[e]:r.test(e)?parseFloat(e):e;else{for(var t=[],i=function(e){if(1==e.nodeType){t.push("<"+e.nodeName);for(var n=e.attributes,a=0,s=n.length;a<s;a++)t.push(" "+n[a].nodeName+'="'+(n[a].nodeValue||"")+'"');if(e.firstChild){for(t.push(">"),n=e.firstChild;n;n=n.nextSibling)t.push(i(n));t.push("</"+e.nodeName+">")}else t.push("/>")}else 3==e.nodeType?(e=e.nodeValue,t.push(e in o?o[e]:r.test(e)?parseFloat(e):e)):4==e.nodeType&&t.push("<![CDATA["+e.nodeValue+"]]>")},a=e.firstChild;a;a=a.nextSibling)i(a);e=1==t.length?t[0]:t.join("")}return"string"==typeof e?n(e):e},u=function(e){var t,i,r=null;if(1==e.nodeType&&((t=e.attributes).length||e.firstChild)){if(r={},t.length)for(var o=0,a=t.length;o<a;o++)r["@"+t[o].nodeName]=(t[o].nodeValue||"")+"";if(e.firstChild){var l,d=0,c=0,p=0;for(l=e.firstChild;l;l=l.nextSibling)1==(i=l.nodeType)?p++:3==i?d++:4==i&&c++;if(p)if(d<2&&c<2)for(l=e.firstChild;l;l=l.nextSibling)3==l.nodeType?r["#text"]=n(l.nodeValue):4==l.nodeType?r["#cdata"]=n(l.nodeValue):r[i=l.nodeName]?r[i]instanceof Array?r[i][r[i].length]=u(l):r[i]=[r[i],u(l)]:r[i]=u(l);else t.length?r["#text"]=s(e):r=s(e);else if(d)t.length?r["#text"]=s(e):r=s(e);else if(c)if(c>1)r=s(e);else for(l=e.firstChild;l;l=l.nextSibling)r["#cdata"]=n(l.nodeValue)}}return r};return t[e.nodeName]=u(a(e)),t},parseXML:function(e){var t=null;if("undefined"==typeof DOMParser)try{(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e||"")}catch(e){t=null}else try{var i=new DOMParser;t=i.parseFromString(e||"","text/xml")}catch(e){t=null}finally{i=null}return t}}}),xui.Class("xui.XMLRPC",null,{Static:{wrapRequest:function(e,t){if("object"==typeof e&&(t=e.params,e=e.methodName),!e)return null;if(t&&!(t instanceof Array))return null;var i=['<?xml version="1.0"?><methodCall><methodName>'+e+"</methodName>"];if(t){i.push("<params>");for(var r=0,o=t.length;r<o;r++)i.push("<param>"+this._wrapParam(t[r])+"</param>");i.push("</params>")}return i.push("</methodCall>"),i.join("")},parseResponse:function(e){if(!e||!e.documentElement)return null;var t=e.documentElement;if("methodResponse"!=t.nodeName)return null;var i,r,o={};if("param"==(r=t.getElementsByTagName("value")[0]).parentNode.nodeName&&"params"==r.parentNode.parentNode.nodeName)o.result=this._parseElem(r);else{if("fault"!=r.parentNode.nodeName)return null;i=this._parseElem(r),o.error={code:i.faultCode,message:i.faultString}}return o.result||o.error?o:null},_dateMatcher:/^(?:(\d\d\d\d)-(\d\d)(?:-(\d\d)(?:T(\d\d)(?::(\d\d)(?::(\d\d)(?:\.(\d+))?)?)?)?)?)$/,_parseElem:function(e){var t,i,r,o,n,a=this,s=e.childNodes;if(1==s.length&&3==s.item(0).nodeType)return s.item(0).nodeValue;for(var u=0,l=s.length;u<l;u++)if(1==s.item(u).nodeType)switch((t=s.item(u)).nodeName.toLowerCase()){case"i4":case"int":return o=parseInt(t.firstChild.nodeValue,10),isNaN(o)?null:o;case"double":return o=parseFloat(t.firstChild.nodeValue),isNaN(o)?null:o;case"boolean":return Boolean(0!==parseInt(t.firstChild.nodeValue,10));case"string":return t.firstChild?t.firstChild.nodeValue:"";case"datetime.iso8601":return(n=t.firstChild.nodeValue.match(a._dateMatcher))?(o=new Date,n[1]&&o.setUTCFullYear(parseInt(n[1],10)),n[2]&&o.setUTCMonth(parseInt(n[2]-1,10)),n[3]&&o.setUTCDate(parseInt(n[3],10)),n[4]&&o.setUTCHours(parseInt(n[4],10)),n[5]&&o.setUTCMinutes(parseInt(n[5],10)),n[6]&&o.setUTCSeconds(parseInt(n[6],10)),n[7]&&o.setUTCMilliseconds(parseInt(n[7],10)),o):null;case"base64":case"nil":return null;case"struct":o={};for(var d,c=0;d=t.childNodes.item(c);c++)if(1==d.nodeType&&"member"==d.nodeName){r="",e=null;for(var p,h=0;p=d.childNodes.item(h);h++)1==p.nodeType&&("name"==p.nodeName?r=p.firstChild.nodeValue:"value"==p.nodeName&&(e=p));r&&e&&(o[r]=a._parseElem(e))}return o;case"array":for(o=[],i=t.firstChild;i&&(1!=i.nodeType||"data"!=i.nodeName);)i=i.nextSibling;if(!i)return null;for(e=i.firstChild;e;)1==e.nodeType&&o.push("value"==e.nodeName?a._parseElem(e):null),e=e.nextSibling;return o;default:return null}return null},_map:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},_date2utc:function(e){var t=this._zeroPad;return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+t(e.getUTCMilliseconds(),3)},_zeroPad:function(e,t){for(t||(t=2),e=e||0===e?""+e:"";e.length<t;)e="0"+e;return e},_wrapParam:function(e){var t,i=this,r=i._map,o=["<value>"];switch(typeof e){case"number":o.push(isFinite(e)?parseInt(e,10)===Math.ceil(e)?"<int>"+e+"</int>":"<double>"+e+"</double>":"<nil/>");break;case"boolean":o.push("<boolean>"+(e?"1":"0")+"</boolean>");break;case"string":o.push("<string>"+e.replace(/[<>&"']/g,(function(e){return r[e]}))+"</string>");break;case"undefined":o.push("<nil/>");case"function":o.push("<string>"+(""+e).replace(/[<>&"']/g,(function(e){return r[e]}))+"</string>");case"object":if(t=Object.prototype.toString.call(e),null===e)o.push("<nil/>");else if("[object Array]"===t){o.push("<array><data>");for(var n=0,a=e.length;n<a;n++)o.push(i._wrapParam(e[n]));o.push("</data></array>")}else if("[object Date]"===t&&isFinite(+e))o.push("<dateTime.iso8601>"+i._date2utc(e)+"</dateTime.iso8601>");else{for(var s in o.push("<struct>"),e)e.hasOwnProperty(s)&&o.push("<member><name>"+s+"</name>"+i._wrapParam(e[s])+"</member>");o.push("</struct>")}}return o.push("</value>"),o.join("")}}}),xui.Class("xui.SOAP",null,{Static:{RESULT_NODE_NAME:"return",getNameSpace:function(e){var t=e.documentElement.attributes.targetNamespace;return t===undefined?e.documentElement.attributes.getNamedItem("targetNamespace").nodeValue:t.value},getWsdl:function(e,t){var i=!1;return xui.Ajax(e+"?wsdl",null,(function(e){i=e}),(function(){xui.tryF(t,arguments,this)}),null,{method:"GET",rspType:"xml",asy:!1}).start(),i},wrapRequest:function(e,t,i){return"object"==typeof e&&(i=t,t=e.params,e=e.methodName),'<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><'+e+' xmlns="'+this.getNameSpace(i)+'">'+this._wrapParams(t)+"</"+e+"></soap:Body></soap:Envelope>"},parseResponse:function(e,t,i){"object"==typeof t&&(t=t.methodName);var r={},o=e.getElementsByTagName(t+"Result");return o.length||(o=e.getElementsByTagName(this.RESULT_NODE_NAME)),o.length?r.result=this._rsp2Obj(o[0],i):r.fault={faultcode:e.getElementsByTagName("faultcode")[0].childNodes[0].nodeValue,faultstring:e.getElementsByTagName("faultstring")[0].childNodes[0].nodeValue},r},_rsp2Obj:function(e,t){var i=this._getTypesFromWsdl(t);return this._node2obj(e,i)},_getTypesFromWsdl:function(e){var t,i,r=[];(t=e.getElementsByTagName("s:element")).length?i=!0:(t=e.getElementsByTagName("element"),i=!1);for(var o=0,n=t.length;o<n;o++)i?null!=t[o].attributes.getNamedItem("name")&&null!=t[o].attributes.getNamedItem("type")&&(r[t[o].attributes.getNamedItem("name").nodeValue]=t[o].attributes.getNamedItem("type").nodeValue):null!=t[o].attributes.name&&null!=t[o].attributes.type&&(r[t[o].attributes.name.value]=t[o].attributes.type.value);return r},_getTypeFromWsdl:function(e,t){return t[e]==undefined?"":t[e]},_node2obj:function(e,t){if(null==e)return null;var i,r,o=this;if(3!=e.nodeType&&4!=e.nodeType){if(1!=e.childNodes.length||3!=e.childNodes[0].nodeType&&4!=e.childNodes[0].nodeType){if(-1==o._getTypeFromWsdl(e.nodeName,t).toLowerCase().indexOf("arrayof")){for(var n=e.hasChildNodes()?{}:null,a=0,s=e.childNodes.length;a<s;a++)n[e.childNodes[a].nodeName]=o._node2obj(e.childNodes[a],t);return n}var u=[];for(a=0,s=e.childNodes.length;a<s;a++)u.push(o._node2obj(e.childNodes[a],t));return u}return o._node2obj(e.childNodes[0],t)}switch(i=e.nodeValue,o._getTypeFromWsdl(e.parentNode.nodeName,t).toLowerCase()){case"s:boolean":return i+""=="true";case"s:int":case"s:long":return null===i?0:parseInt(i+"",10);case"s:double":return null===i?0:parseFloat(i+"");case"s:datetime":if(null==i)return null;if(r=i.match(o._dateMatcher)){var l=new Date;return r[1]&&l.setUTCFullYear(parseInt(r[1],10)),r[2]&&l.setUTCMonth(parseInt(r[2]-1,10)),r[3]&&l.setUTCDate(parseInt(r[3],10)),r[4]&&l.setUTCHours(parseInt(r[4],10)),r[5]&&l.setUTCMinutes(parseInt(r[5],10)),r[6]&&l.setUTCSeconds(parseInt(r[6],10)),r[7]&&l.setUTCMilliseconds(parseInt(r[7],10)),l}return null;default:return null===i?"":i+""}return null},_wrapParams:function(e){var t=[];for(var i in e)switch(typeof e[i]){case"string":case"number":case"boolean":case"object":t.push("<"+i+">"+this._wrapParam(e[i])+"</"+i+">")}return t.join("")},_map:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},_wrapParam:function(e){var t,i,r,o,n=this,a="",s=n._map;switch(typeof e){case"string":a+=e.replace(/[<>&"']/g,(function(e){return s[e]}));break;case"number":case"boolean":a+=e+"";break;case"object":if("[object Date]"===(t=Object.prototype.toString.call(e))&&isFinite(+e))a+=n._date2utc(e);else if("[object Array]"===t)for(var u in e){switch(typeof(o=e[u])){case"number":r=parseInt(o,10)===Math.ceil(o)?"int":"double";break;case"boolean":r="bool";break;case"string":r="string";break;case"object":r="[object Array]"===(i=Object.prototype.toString.call(o))?"Array":"[object Date]"===i&&isFinite(+o)?"DateTime":"object"}a+="<"+r+">"+n._wrapParam(e[u])+"</"+r+">"}else for(var u in e)e.hasOwnProperty(u)&&(a+="<"+u+">"+n._wrapParam(e[u])+"</"+u+">")}return a},_date2utc:function(e){var t=this._zeroPad;return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+t(e.getUTCMilliseconds(),3)},_zeroPad:function(e,t){for(t||(t=2),e=e||0===e?""+e:"";e.length<t;)e="0"+e;return e}}}),xui.Class("xui.DragDrop",null,{Static:{_eh:"_dd",_id:"xui.dd:proxy:",_idi:"xui.dd:td:",_type:{blank:1,move:1,shape:1,deep_copy:1,copy:1,icon:1,none:1},_Icons:{none:"0 0",move:"0 -16px",link:"0 -32px",add:"0 -48px"},_profile:{},_left:function(e){var t=this.$proxySize,i=this._profile;if(i.magneticDistance>0&&i.xMagneticLines.length)for(var r=i.xMagneticLines.length;r--;)if(Math.abs(e+t-i.xMagneticLines[r])<=i.magneticDistance)return i.xMagneticLines[r]-t;return i.widthIncrement>1?Math.floor((e+t)/i.widthIncrement)*i.widthIncrement-t:e},_top:function(e){var t=this.$proxySize,i=this._profile;if(i.magneticDistance>0&&i.yMagneticLines.length)for(var r=i.yMagneticLines.length;r--;)if(Math.abs(e+t-i.yMagneticLines[r])<=i.magneticDistance)return i.yMagneticLines[r]-t;return i.heightIncrement>1?Math.floor((e+t)/i.heightIncrement)*i.heightIncrement-t:e},_ini:function(e){var t=this,i=t._profile,r=xui.win;t._box={width:r.width()+r.scrollLeft(),height:r.height()+r.scrollTop()},i.ox=i.x,i.oy=i.y,(t._proxy=e)&&(t._proxystyle=e.get(0).style,t._profile.curPos=t._cssPos=t._proxy.cssPos(),t._cssPos_x=i.x-t._cssPos.left,t._cssPos_y=i.y-t._cssPos.top,i.restrictedLeft=i.x-(i.maxLeftOffset||0),i.restrictedRight=i.x+(i.maxRightOffset||0),i.restrictedTop=i.y-(i.maxTopOffset||0),i.restrictedBottom=i.y+(i.maxBottomOffset||0),t._proxyLeft=t._pre.left=t._cssPos.left,t._proxyTop=t._pre.top=t._cssPos.top,"move"!==i.dragType&&(t._proxy.css("zIndex",10*xui.Dom.TOP_ZINDEX),xui.setNodeData(t._proxy.get(0),"zIndexIgnore",1)))},_reset:function(){var e=this,t=null,i=!1;return xui.tryF(e.$reset),e.setDropFace(),e._resetProxy(),e.$proxySize=50,e.$mousemove=e.$mouseup=e.$onselectstart=e.$ondragstart="*",e._cursor="",e._pre={},e._proxyLeft=e._proxyTop=e._cssPos_x=e._cssPos_y=0,e._stop=i,e._onDrag&&e._onDrag.tasks&&(e._onDrag.tasks.length=0,delete e._onDrag.tasks),e._onDragover&&e._onDragover.tasks&&(e._onDragover.tasks.length=0,delete e._onDragover.tasks),e._c_droppable&&(e._c_droppable.length=0),e._c_droppable=e._c_dropactive=e._cssPos=e._box=e._dropElement=e._source=e._proxy=e._proxystyle=e._onDrag=e._onDragover=t,e._profile={$id:xui.rand(),dragType:"shape",dragCursor:"move",targetReposition:!0,dragIcon:xui.ini.img_dd,magneticDistance:0,xMagneticLines:[],yMagneticLines:[],widthIncrement:0,heightIncrement:0,dragDefer:0,horizontalOnly:i,verticalOnly:i,maxBottomOffset:t,maxLeftOffset:t,maxRightOffset:t,maxTopOffset:t,targetNode:t,targetCSS:t,dragKey:t,dragData:t,targetLeft:t,targetTop:t,targetWidth:t,targetHeight:t,targetOffsetParent:t,targetCallback:t,tagVar:t,shadowFrom:t,proxyNode:t,x:0,y:0,ox:0,oy:0,curPos:{},offset:{},isWorking:i,restrictedLeft:t,restrictedRight:t,restrictedTop:t,restrictedBottom:t,dropElement:t},e.__touchingfordd=0,e},abort:function(){this._stop=!0},_end:function(){var e,t,i=this,r=window,o=document,n=o.body;return xui.browser.isTouch&&(e=xui.browser.ie&&r.PointerEvent?"onpointermove":xui.browser.ie&&r.MSPointerEvent?"onmspointermove":"ontouchmove",t=xui.browser.ie&&r.PointerEvent?"onpointerup":xui.browser.ie&&r.MSPointerEvent?"onmspointerup":"ontouchend"),i._proxy&&i._unpack(),"*"!=i.$onselectstart&&(n.onselectstart=i.$onselectstart),"*"!=i.$ondragstart&&(o.ondragstart=i.$ondragstart),"*"!=i.$mousemove&&(o.onmousemove=i.$mousemove),"*"!=i.$mouseup&&(o.onmouseup=i.$mouseup),xui.browser.isTouch&&("*"!=i.$touchmove&&(o[e]=i.$touchmove),"*"!=i.$touchend&&(o[t]=i.$touchend)),i},startDrag:function(e,t,i,r,o){var n,a=this,s=window;if(a._profile.isWorking)return!1;if(a._end()._reset(),a._profile.isWorking=!0,a.__touchingfordd="xuitouchdown"==e.type,i=xui.isHash(i)?i:{},e=e||s.event,"left"!==xui.Event.getBtn(e))return!0;a._source=i.targetNode=xui(t),a._cursor=a._source.css("cursor"),(n=i.targetNode.get(0))&&!n.id&&(n.id=xui.Dom._pickDomId(),n=null),a._defer=i.dragDefer=xui.isNumb(i.dragDefer)?i.dragDefer:0,!0===i.dragCursor&&(i.dragCursor=a._cursor),"string"==typeof i.dragIcon&&(i.dragType="icon");var u,l,d=document,c=d.body,p=xui.Event.getPos(e),h="onmousemove",f="onmouseup";xui.browser.isTouch&&(u=xui.browser.ie&&s.PointerEvent?"onpointermove":xui.browser.ie&&s.MSPointerEvent?"onmspointermove":"ontouchmove",l=xui.browser.ie&&s.PointerEvent?"onpointerup":xui.browser.ie&&s.MSPointerEvent?"onmspointerup":"ontouchend"),i.x=p.left,i.y=p.top,i.dragKey=r||i.dragKey||null,i.dragData=o||i.dragData||null;var x=xui.Event.getSrc(e);if(a._start=function(e){var t=a._profile;if(xui.merge(t,i,"with"),a._source.beforeDragbegin(),a._stop)return a._end()._reset(),!1;if(xui.Event&&(n=a._source.get(0))&&(xui.Event._preDroppable=n.id,n=null),"icon"==t.dragType&&(t.targetReposition=!1),a._ini("none"==t.dragType?null:a._pack(p,t.targetNode)),i.x>=a._box.width||i.y>=a._box.height)return a._end()._reset(),!0;if(a._source.onDragbegin(),t.dragDefer<1&&(a.$mousemove=d[h],a.$mouseup=d[f],xui.browser.isTouch&&(a.$touchmove=d[u],a.$touchend=d[l])),xui.browser.ie&&xui.setTimeout((function(){x.releaseCapture&&x.releaseCapture()})),d[h]=a.$onDrag,d[f]=a.$onDrop,xui.browser.isTouch&&(d[u]=a.$onDrag,d[l]=a.$onDrop),a._source.afterDragbegin(),t.dragDefer>0&&a.$onDrag.call(a,e),xui.browser.isTouch&&a.__touchingfordd){a._c_droppable=[];var r=xui.$cache.droppable[t.dragKey],o=[];xui.arr.each(r,(function(e){if(xui.use(e).get(0)){var t,i=xui.use(e),r=i.offsetHeight(),n=i.offsetWidth(),s=i.css("visibility");n&&r&&"hidden"!=s&&((t=i.offset()).width=n,t.height=r,t.id=e,a._c_droppable.unshift(t))}else o.push(e)})),o.length&&xui.arr.each(o,(function(e){xui.arr.removeValue(r,e)}))}},xui.browser.ie&&(a.$ondragstart=d.ondragstart,a.$onselectstart=c.onselectstart,d.ondragstart=c.onselectstart=null,d.selection&&d.selection.empty))try{d.selection.empty()}catch(e){}if(xui.Event.stopBubble(e),i.targetNode.get(0)!==d&&xui(d).onMousedown(!0,xui.Event.getEventPara(e,p)),i.dragDefer<1)return xui.tryF(a._start,[e],a),!1;a.$mouseup=d[f],d[f]=function(e){return xui.DragDrop._end()._reset(),xui.tryF(document.onmouseup,[e],null,!0)},xui.browser.isTouch&&(a.$touchend=d[l],d[l]=d[f]);var g={};a.$mousemove=d[h],d[h]=function(e){var t=xui.Event.getPos(e);if(t.left!==g.left||t.top!==g.top)return g=t,--a._defer<=0&&xui.DragDrop._start(e),!1},xui.browser.isTouch&&(a.$touchmove=d[u],d[u]=d[h])},$onDrag:function(e){var t=xui.DragDrop,i=t._profile;if(t.$SimulateMousemoveInMobileDevice)return!1;if(e=e||window.event,!i.isWorking||t._stop)return t.$onDrop(e),!0;var r=xui.Event.getPos(e);if(i.x=r.left,i.y=r.top,!i.isWorking)return!1;if(t._proxy?(i.verticalOnly||(t._proxyLeft=Math.floor(t._left((null!==i.maxLeftOffset&&i.x<=i.restrictedLeft?i.restrictedLeft:null!==i.maxRightOffset&&i.x>=i.restrictedRight?i.restrictedRight:i.x)-t._cssPos_x)),t._proxyLeft-t._pre.left&&(t._proxystyle.left=Math.round(parseFloat(t._proxyLeft))+"px"),t._pre.left=t._proxyLeft,i.curPos.left=t._proxyLeft+t.$proxySize),i.horizontalOnly||(t._proxyTop=Math.floor(t._top((null!==i.maxTopOffset&&i.y<=i.restrictedTop?i.restrictedTop:null!==i.maxBottomOffset&&i.y>=i.restrictedBottom?i.restrictedBottom:i.y)-t._cssPos_y)),t._proxyTop-t._pre.top&&(t._proxystyle.top=Math.round(parseFloat(t._proxyTop))+"px"),t._pre.top=t._proxyTop,i.curPos.top=t._proxyTop+t.$proxySize)):(i.curPos.left=i.x,i.curPos.top=i.y),1!=t._onDrag&&(t._onDrag?t._onDrag(e,t._source._get(0)):(t._onDrag=1,t._source.onDrag(!0,xui.Event.getEventPara(e,r)))),xui.browser.isTouch&&t.__touchingfordd&&t._c_droppable)for(var o=0,n=t._c_droppable.length;o<n;o++){var a=t._c_droppable[o],s=xui.use(a.id).get(0),u=t._c_dropactive,l=xui.use(u).get(0);if(i.x>=a.left&&i.y>=a.top&&i.x<=a.left+a.width&&i.y<=a.top+a.height){if(u==a.id){var d=e.changedTouches[0];t.$SimulateMousemoveInMobileDevice=1,xui.Event.simulateEvent(s,"mousemove",{screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY}),delete t.$SimulateMousemoveInMobileDevice}else xui.Event.simulateEvent(s,"mouseover",{screenX:i.left,screenY:i.top,clientX:i.left,clientY:i.top}),t._c_dropactive=a.id,u&&l&&xui.Event.simulateEvent(l,"mouseout",{screenX:i.left,screenY:i.top,clientX:i.left,clientY:i.top});break}if(u==a.id){l&&xui.Event.simulateEvent(l,"mouseout",{screenX:i.left,screenY:i.top,clientX:i.left,clientY:i.top}),t._c_dropactive=null;break}}return!1},$onDrop:function(e){var t=xui.DragDrop,i=t._profile,r=xui.Event;if(e=e||window.event,t._end(),i.isWorking){t.setDropFace();var o=t._source.onDragstop(!0,r.getEventPara(e));t._dropElement&&xui.use(t._dropElement).onDrop(!0,r.getEventPara(e))}return t._reset(),r.stopBubble(e),xui.tryF(document.onmouseup,[e]),!!o},setDropElement:function(e){return this._profile.dropElement=this._dropElement=e,this},getProfile:function(){var e=this,t=e._profile;return t.offset=e._proxy?{x:e._proxyLeft-t.ox+e._cssPos_x,y:e._proxyTop-t.oy+e._cssPos_y}:{x:t.x-t.ox,y:t.y-t.oy},t},setDropFace:function(e,t){var i,r,o=this,n='<div style="position:absolute;z-index:'+xui.Dom.TOP_ZINDEX+";font-size:0;line-height:0;border-",a=":dashed 1px #ff6600;",s=o._Region,u=o._rh,l="backgroundColor";return s&&s.parent()&&s.remove(!1),o._R&&(o._R.css(l,o._RB),delete o._R,delete o._RB),e?(s&&s.get(0)||(s=o._Region=xui.create(n+'top:solid 2px #ff6600;left:0;top:0;width:100%;height:0;"></div>'+n+"right"+a+'right:0;top:0;height:100%;width:0;"></div>'+n+"bottom"+a+'bottom:0;left:0;width:100%;height:0;"></div>'+n+"left"+a+'width:0;left:0;top:0;height:100%;"></div>'),u=o._rh=xui([s.get(1),s.get(3)])),e=xui(e),xui.browser.ie6&&u.height("100%"),"block"==e.css("display")?(xui.setNodeData(s.get(0),"zIndexIgnore",1),e.append(s),s.top(i=e.scrollTop()).left(r=e.scrollLeft()),s.get(2).style.top="auto",s.get(1).style.left="auto",s.get(2).style.bottom="-"+i+"px",s.get(1).style.right="-"+r+"px",xui.browser.ie6&&!u.get(0).offsetHeight&&u.height(e.get(0).offsetHeight)):(o._RB=e.get(0).style[l],o._R=e,e.css(l,"#FA8072")),o.setDragIcon(t||"move")):o.setDragIcon("none"),o},setDragIcon:function(e){xui.resetRun("setDropFace",null);var t=this,i=t._profile,r=i.proxyNode,o=t._Icons;return r&&"icon"==i.dragType&&r.first(4).css("object"==typeof e?e:{backgroundPosition:o[e]||e}),t},_setProxy:function(e,t){var i,r,o=this,n=o._profile,a=xui.Dom;return a.byId(o._id)||xui("body").prepend(xui.create('<div id="'+o._id+'" style="left:0;top:0;border:0;font-size:0;line-height:0;padding:'+o.$proxySize+"px;position:absolute;background:url("+xui.ini.img_bg+') repeat;"><div style="font-size:0;line-height:0;" id="'+o._idi+'">'+(xui.browser.ie6?"&nbsp;":"")+"</div></div>")),i=xui(o._id),n.dragKey?(o.$proxySize=0,i.css("padding",0)):(t.left-=o.$proxySize,t.top-=o.$proxySize,n.targetOffsetParent||a.setCover(!0,null,!1,n.dragCursor)),(r=n.targetOffsetParent)&&xui(r).append(i),e?(xui(o._idi).empty(!1).append(e),n.proxyNode=e):n.proxyNode=xui(o._idi),i.css({display:"",zIndex:10*a.TOP_ZINDEX,cursor:n.dragCursor}).offset(t,r),xui.setNodeData(i.get(0),"zIndexIgnore",1),i},_resetProxy:function(){var e=this,t=e._profile,i=xui.Dom,r=e._id,o=e._idi;if(i.byId(r)){var n=xui(o),a=xui(r);xui.browser.ie6?n.html("&nbsp;"):n.empty(),n.attr("style","font-size:0;line-height:0;"),xui("body").prepend(a.css({zIndex:0,cursor:"",display:"none",padding:Math.round(parseFloat(e.$proxySize))+"px"})),t.proxyNode=e._proxystyle=null,i.setCover(!1)}},_pack:function(e,t){var i,r,o={},n={},a=this,s=a._profile;switch(null!==s.targetLeft&&null!==s.targetTop||(r=t.offset(null,s.targetOffsetParent)),o.left=null!==s.targetLeft?s.targetLeft:r.left,o.top=null!==s.targetTop?s.targetTop:r.top,s.dragType){case"deep_copy":case"copy":n.width=xui.isNumb(s.targetWidth)?s.targetWidth:t.cssSize().width||0,n.height=xui.isNumb(s.targetHeight)?s.targetHeight:t.cssSize().height||0;var u=t.clone("deep_copy"==s.dragType).css({position:"relative",margin:"0",left:"0",top:"0",right:"",bottom:"",cursor:s.dragCursor,cssFloat:"none"}).cssSize(n).id("",!0).css("opacity",.8);s.targetCallback&&s.targetCallback(u),u.query("*").id("",!0),s.targetCSS&&u.css(s.targetCSS),i=a._setProxy(u,o);break;case"shape":n.width=null!==s.targetWidth?s.targetWidth:t.offsetWidth(),n.height=null!==s.targetHeight?s.targetHeight:t.offsetHeight(),n.width-=2,n.height-=2,i=a._setProxy(xui.create("div").css({border:"dashed 1px",fontSize:"0",lineHeight:"0"}).cssSize(n),o);break;case"blank":i=a._setProxy(null,o);break;case"icon":o.left=xui.isNumb(s.targetLeft)?s.targetLeft:e.left+16,o.top=xui.isNumb(s.targetTop)?s.targetTop:e.top+16,r='<table border="0" class="xui-node xui-node-table"><tr><td valign="top"><span class="xui-node xui-node-span" style="background:url('+s.dragIcon+") no-repeat left top;width:"+(xui.isNumb(s.targetWidth)?s.targetWidth:16)+"px;height:"+(xui.isNumb(s.targetHeight)?s.targetHeight:16)+'px;" ></span></td><td id="xui:dd:shadow" '+(s.shadowFrom?'style="border:solid 1px #e5e5e5;background:#fff;font-size:12px;line-height:14px;"':"")+">"+(s.shadowFrom?xui(s.shadowFrom).clone(!0).css({left:"auto",top:"auto",position:"relative"}).outerHTML().replace(/\s*id\=[^\s\>]*/g,""):"")+"</td></tr></table>",i=a._setProxy(xui.create(r).css("opacity",.8),o);break;case"move":a.$proxySize=0,"absolute"!=(i=t).css("position")&&i.css("position","absolute").offset(o),i.css("cursor",s.dragCursor)}return i},_unpack:function(){var e,t=this,i=t._profile;i.targetReposition&&"move"!=i.dragType&&(e=xui(t._source))&&(e.isEmpty()||("absolute"!=e.css("position")&&e.css("position","absolute").cssPos(e.offset(null,e.get(0).offsetParent)),xui.browser.ie&&e.cssRegion({right:"",bottom:""}),e.offset(i.curPos,i.targetOffsetParent||document.body))),"move"==i.dragType&&t._source.css("cursor",t._cursor)},_unRegister:function(e,t){var i=this._eh;xui([e]).$removeEvent("beforeMouseover",i).$removeEvent("beforeMouseout",i).$removeEvent("beforeMousemove",i);var r=xui.getNodeData(e.$xid,["_dropKeys"]),o=xui.$cache.droppable;if(r)for(var n in r)o[n]&&xui.arr.removeValue(o[n],e.$xid);xui.setNodeData(e.$xid,["_dropKeys"])},_register:function(e,t){var i=this._eh;xui(e).beforeMouseover((function(e,t,i){var r=xui.DragDrop;(e=r._profile).dragKey&&xui.getNodeData(i,["_dropKeys",e.dragKey])&&(r.setDropElement(i),r._onDragover=null,xui.use(i).onDragenter(!0),r._dropElement&&xui.resetRun("setDropFace",r.setDropFace,0,[i],r))}),i).beforeMouseout((function(e,t,i){var r=xui.DragDrop;(e=r._profile).dragKey&&xui.getNodeData(i,["_dropKeys",e.dragKey])&&(xui.use(i).onDragleave(!0),r._dropElement==i&&(r.setDropElement(r._onDragover=null),xui.resetRun("setDropFace",r.setDropFace,0,[null],r)))}),i).beforeMousemove((function(e,t,i){var r=xui.DragDrop,o=r._onDragover,n=r._profile;1!=o&&r._dropElement==i&&n.dragKey&&xui.getNodeData(i,["_dropKeys",n.dragKey])&&(o?o(t,i):(r._onDragover=1,xui.use(i).onDragover(!0,xui.Event.getEventPara(t))))}),i);var r=xui.getNodeData(e.$xid,["_dropKeys"]),o=xui.$cache.droppable;if(r)for(var n in r)o[n]&&xui.arr.removeValue(o[n],e.$xid);for(var a={},s=t.split(/[^\w-]+/),u=(n=0,s.length);n<u;n++)a[s[n]]=1,o[s[n]]=o[s[n]]||[],o[s[n]].push(e.$xid);xui.setNodeData(e.$xid,["_dropKeys"],a)}},After:function(){this._reset(),xui.each({startDrag:function(e,t,i,r){return xui.DragDrop.startDrag(e,this.get(0),t,i||"",r||null),this},draggable:function(e,t,i,r,o){var n=this,a=xui.DragDrop;return(o=o?"function"==typeof o?xui.tryF(n.getTarget,[],this):xui(o):null)&&o.get(0)||(o=n),n.removeClass("xui-ui-selectable").addClass("xui-ui-unselectable"),e===undefined?e=!0:"object"==typeof e&&(t=e,e=!0),e?n.$addEvent("beforeMousedown",(function(e,n,a){if(xui.getId(xui.Event.getSrc(n))!=a)return!0;o.startDrag(n,t,i,r)}),a._eh,-1):n.$removeEvent("beforeMousedown",a._eh),n},droppable:function(e,t){e===undefined&&(e=!0),t=t||"default";var i=xui.DragDrop;return this.each((function(r){e?i._register(r,t):i._unRegister(r,t)}))}},(function(e,t){xui.Dom.plugIn(t,e)}))}}),xui.Class("xui.Tips",null,{Constructor:function(){return null},Initialize:function(){if(!xui.ini.disableTips){var e=xui.DragDrop,t=this;e&&(e.$reset=function(){t._pos={left:e._profile.x,top:e._profile.y}}),xui.browser.fakeTouch&&(t.HTMLTips=!1),t.HTMLTips?xui.CSS.addStyleSheet(".xui-tips{position:absolute;overflow:visible;visibility:hidden;left:-10000px;border-radius:1px;} .xui-tips-i{overflow:hidden;position:relative;}.xui-tips-i span{display:inline;}.xui-tips-c{padding:.125em .25em .25em .25em;}.xui-tips-c *{line-height:1.22em;}.xui-tips .xui-tips-c{border-radius:1px;}",this.KEY):t.MOVABLE=!1,xui.doc.afterMousedown((function(){t._cancel()}),"$Tips",-1).afterMousemove((function(i,r){if(!e.isWorking){var o,n,a=xui.Event;(o=xui.resetRun.$cache)&&o.$Tips&&(t._pos=a.getPos(r)),t._from?(t._pos=a.getPos(r),t._showF(),xui.resetRun("$Tips3")):t.MOVABLE&&t._showed&&t._Node&&(o=a.getPos(r),(n=t._Node.style).left=Math.min(t._tpl._ww-t._tpl._w,Math.max(0,Math.round((parseFloat(n.left)||0)+(o.left-t._pos.left),10)))+"px",n.top=Math.min(t._tpl._hh-t._tpl._h,Math.max(0,Math.round((parseFloat(n.top)||0)+(o.top-t._pos.top),10)))+"px",t._pos=o)}}),"$Tips",-1).afterMouseover((function(e,i){var r,o,n,a=xui.Event,s=a.$FALSE,u=a.getSrc(i),l=0,d=function(e){return t._markId&&t._cancel(),e};if(!u)return d(s);try{for(;(!u.id||u.id==xui.$localeDomId)&&u.parentNode!==document&&l++<10;)u=u.parentNode;if(!(r="string"==typeof u.id?u.id:null))return u=null,d(s)}catch(i){}if((o=a._getProfile(r))&&o.box&&"xui.UIProfile"==o.KEY){if(o.properties.disableTips||o.behavior.disableTips)return u=null,d(!1);var c=o.behavior.NoTips;if(c)for(var p=0,h=c.length;p<h;p++)if(0===r.indexOf(o.keys[c[p]]))return d(!1);if(c=o.behavior.PanelKeys)for(p=0,h=c.length;p<h;p++)if(0===r.indexOf(o.keys[c[p]]))return d(!1);if(c=o.behavior.HoverEffected,n=o.onShowTips?r:r.replace(t._reg,(function(e,t){return c&&t in c?e:":"})),t._markId&&n==t._markId)return s;t._markId=n,t._pos=a.getPos(i),t._activeNode=xui(u),t._activePrf=o,t._showed?(t._from=o,t._enode=r,t._showF()):t.HTMLTips?xui.resetRun("$Tips",(function(){t._from=o,t._enode=r,xui.resetRun("$Tips3",(function(){t._from&&t._showF()}))}),t.DELAYTIME):(t._from=o,t._enode=r,t._from&&t._showF())}else t._cancel();return u=null,s}),"$Tips",-1).afterMouseout((function(e,i){if(t._markId){var r,o=xui.Event,n=0,a=i.toElement||i.relatedTarget;if(a)try{for(;(!a.id||a.id==xui.$localeDomId)&&a.parentNode!==document&&n++<10;)a=a.parentNode;"string"==typeof a.id&&a.id||(a=null,r=1)}catch(i){r=1}else r=1;return r&&t._cancel(),o.$FALSE}}),"$Tips",-1).afterMouseup((function(e,i){t._cancel()}),"$Tips",-1),this._Types={default:new function(){this.show=function(e,i,r){if(i){var o,n="object"==typeof e?e[r||xui.Tips.TIPSKEY]:e;if("function"==typeof n&&(n=n()),xui.Tips.HTMLTips){var a,s,u,l,d=this;if((a=d.node)&&a.get(0)||(a=d.node=xui.create('<div class="xui-node xui-node-div xui-tips  xui-ui-shadow xui-custom"><div class="xui-node xui-wrapper xui-node-div xui-tips-i xui-custom"></div></div>'),s=d._ruler=xui.create('<div class="xui-node xui-wrapper xui-node-div xui-tips  xui-ui-shadow xui-custom"><div class="xui-node xui-node-div xui-tips-i xui-custom"></div></div>'),d.n=a.first(),d._n=s.first(),xui("body").append(s)),s=d._ruler,document.body.lastChild!=a.get(0)&&xui("body").append(a,!1,!0),n+=""){var c=/^\s*\</.test(n);n=xui.adjustRes(n),xui.Tips._curTips=n,e.transTips&&c||(n='<div class="xui-ui-ctrl xui-node xui-node-div  xui-uiborder-flat xui-uicell-alt xui-node-tips xui-tips-c /*xui-cls-wordwrap */xui-custom">'+n+"</div>"),d._n.get(0).innerHTML=n,d._ww=xui.frame.width(),d._hh=xui.frame.height(),u=Math.min(c?d._ww:t.MAXWIDTH,s.get(0).offsetWidth+2);var p=a.get(0).style,h=d.n.get(0),f=h.style;p.visibility="hidden",h.innerHTML=n,xui.browser.ie?(p.width=f.width=(d._w=Math.round(u+u%2))+"px",l=h.offsetHeight,p.height=(d._h=Math.round(l-l%2))+"px"):(f.width=(d._w=Math.round(u))+"px",d._h=d.n.height()),a.removeClass("xui-ui-hidden"),!0===i?p.visibility="visible":a.popToTop(i instanceof window.Event||i["xui.UI"]||i["xui.UIProfile"]||i["xui.Dom"]||1==i.nodeType||"string"==typeof i?i:{left:i.left,top:i.top,region:{left:i.left,top:i.top-12,width:24,height:32}},1),p=f=h=null}else a.css("zIndex",0).hide()}else n+="",xui.Tips._curTips=xui.adjustRes(n),n=n.replace(/<[^>]*>/g,""),(o=xui.Tips._activePrf)&&(o.box["xui.svg"]?o.boxing().setAttr("KEY",{title:n},!1):xui.Tips._activeNode.attr("title",n))}},this.hide=function(){if(xui.Tips.HTMLTips)this.node.css("zIndex",0).hide();else{var e=xui.Tips._activePrf;e&&(e.box["xui.svg"]?e.boxing().setAttr("KEY",{title:null},!1):xui.Tips._activeNode.attr("title",null))}}}}}},Static:{_reg:/-([\w]+):/,TIPSKEY:"tips",MAXWIDTH:600,HTMLTips:!0,MOVABLE:!0,DELAYTIME:400,AUTOHIDETIME:5e3,_showF:function(){if(!xui.ini.disableTips){var e,t,i=this,r=i._from,o=xui.Dom.byId(i._enode),n=i._pos,a=!0;i._from=i._enode=null,o&&r&&n&&(e=r.box)&&(!1!=(a=!1!==((t=r.CF)&&(t=t.showTips)&&t(r,o,n)))&&(a=!1!==(r._showTips&&r._showTips(r,o,n))),!1!==a&&(a=!1!==(e._showTips&&e._showTips(r,o,n))),!1!==a&&((t=r)&&t.tips||t&&(t=t.properties)&&t.tips?(i.show(n,t),a=!1):(t=r)&&(t=t.properties)&&t.autoTips&&"caption"in t&&""===t.tips&&(t.caption||t.labelCaption)&&(i.show(n,{tips:t.caption||t.labelCaption}),a=!1)),!1!==a?i.hide():i.HTMLTips&&!i.MOVABLE&&xui.resetRun("$Tips2",i.hide,i.AUTOHIDETIME,null,i),o=n=r=null)}},getTips:function(){return this._curTips},setTips:function(e){this._curTips&&this._tpl&&this._tpl.show(e,!0)},setPos:function(e,t){var i=this;i.HTMLTips&&(i=i._Node)&&(i=i.style)&&((e||0===e)&&(i.left=Math.round(parseFloat(e))+"px"),(t||0===t)&&(i.top=Math.round(parseFloat(t))+"px"))},show:function(e,t,i){var r,o=this;o._pos=e,o._item!==t&&("string"==typeof t||t&&t[i||xui.Tips.TIPSKEY]?((r=o._tpl=o._Types[t.tipsTemplate]||o._Types.default).show(t,e,i),o._Node=r.node&&r.node.get(0),o._item=t,o._showed=!0):o._cancel())},hide:function(){var e=this;e._showed&&(e._tpl&&e._tpl.hide(),e._clear())},_cancel:function(){var e=this;e._markId&&(e._showed?e.hide():(xui.resetRun("$Tips"),xui.resetRun("$Tips3"),e._clear()))},_clear:function(){var e=this;e._Node=e._curTips=e._markId=e._activeNode=e._activePrf=e._from=e._tpl=e._item=e._showed=null}}}),xui.Class("xui.History",null,{Static:{activate:function(){var e=this;if(!e._activited)switch(e._activited=1,e._lastFI=decodeURIComponent(location.hash),e._type){case"event":xui.Event._addEventListener(window,"hashchange",e._checker);break;case"iframe":document.body.appendChild(document.createElement('<iframe id="'+e._fid+'" src="about:blank" style="display: none;"></iframe>'));var t=document.getElementById(e._fid).contentWindow.document;t.open("javascript:'<html></html>'"),t.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+location.hash+"');<\/script></head><body></body></html>"),t.close();case"timer":e._itimer&&clearInterval(e._itimer),e._itimer=setInterval(e._checker,200)}},_fid:"xui:history",_type:xui.browser.ie&&xui.browser.ver<8?"iframe":"onhashchange"in window?"event":"timer",_callbackTag:null,_callbackArr:null,_inner_callback:null,_callback:function(e,t,i){var r,o,n=this;if(xui.arr.each(xui.Module._cache,(function(r){r._evsClsBuildIn&&"onFragmentChanged"in r._evsClsBuildIn?(xui.isFun(o=r._evsClsBuildIn.onFragmentChanged)||xui.isArr(o)&&o[0].type)&&r.fireEvent("onFragmentChanged",[r,e,t,i]):r._evsPClsBuildIn&&"onFragmentChanged"in r._evsPClsBuildIn&&(xui.isFun(o=r._evsPClsBuildIn.onFragmentChanged)||xui.isArr(o)&&o[0].type)&&r.fireEvent("onFragmentChanged",[r,e,t,i])})),!xui.isFun(n._callbackTag)||!1!==n._callbackTag(e,t,i)){if((r=n._callbackArr)&&xui.isArr(r))for(var a=0,s=r.length;a<s;a++)if(xui.isFun(r[a])&&!1===r[a](e,t,i))return;xui.isFun(n._inner_callback)&&n._inner_callback(e,t,i)}},setCallback:function(e){var t=this,i=location.hash;return i=i?"#"+encodeURIComponent((""+decodeURIComponent(i)).replace(/^#!?/,"")):"#",t._inner_callback=e,t._lastFI=decodeURIComponent(i),t._callback(decodeURIComponent(t._lastFI.replace(/^#!?/,"")),!0,e),t},_checker:function(e){var t=xui.History;switch(t._type){case"iframe":xui.isSet(e)&&(location.hash=e);case"event":case"timer":decodeURIComponent(location.hash)!=decodeURIComponent(t._lastFI)&&(t._lastFI=decodeURIComponent(location.hash),t._callback(decodeURIComponent(location.hash.replace(/^#(!)?/,""))))}},getFI:function(){return this._lastFI},setFI:function(e,t,i,r){var o,n=this,a=xui.getUrlPath(n.getFI());if(n.activate(),e?(xui.isHash(e)?o=e:(e=("#"!=e[0]?"#":"")+e,a=xui.getUrlPath(e),o=xui.getUrlParams(e)),i&&(o=xui.merge(o||{},xui.getUrlParams(),"without")),e="#"+a+(xui.isEmpty(o)?"":"?"+xui.urlEncode(o))):e="#",n._lastFI==decodeURIComponent(e))return!1;switch(n._type){case"iframe":var s=document.getElementById(n._fid).contentWindow.document;s.open("javascript:'<html></html>'"),s.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+e+"');<\/script></head><body></body></html>"),s.close();break;case"event":case"timer":r?location.replace(location.href.split("#")[0]+(n._lastFI=decodeURIComponent(e))):location.hash=n._lastFI=decodeURIComponent(e),!1!==t&&n._callback(decodeURIComponent(e.replace(/^#!?/,"")))}},getParams:function(e){var t=xui.getUrlParams(this.getFI());return e?t[e]:t},setParams:function(e,t,i,r){var o;xui.isHash(e)?o=e:(o={})[e]=xui.isHash(t)||xui.isArr(t)?xui.stringify(t):t,this.setFI(o,i,!1!==r)},getRouter:function(e){var t=xui.getUrlPath(this.getFI());return e?t.replace(/^\//,"").split("/"):t},getRouterArray:function(){return this.getRouter(!0)},setRouter:function(e,t,i,r,o){e=xui.isArr(e)?e.join("/"):e.replace(/^\//,"").replace(/\/$/,"");var n=this.getRouterArray();!t&&xui.str.startWith(n.join("/")+"/",e+"/")||this.setFI("#/"+e,r,o,!!i)}}}),xui.Class("xui.ModuleFactory",null,{Initialize:function(){var e=this;xui.getModule=function(t,i,r,o,n,a,s){return e.getModule.apply(e,arguments)},xui.newModule=function(t,i,r,o,n,a){return e.newModule.apply(e,arguments)},xui.showModule=function(t,i,r,o,n,a,s,u,l,d,c,p){return e.getModule(t,(function(e,t,o){e||!1===xui.tryF(i,[t,o],t)?xui.tryF(r,[e,t,o],t):this.show.apply(t,[r,u,l,o,d,c])}),o,n,a,s,p)},xui.showAlienModule=function(e,t,i,r,o,n,a,s,u,l,d){return xui.showModule.apply(this,[e,t,i,r,o,n,a,s,u,l,d,{alien:!0}])},xui.getCom=xui.getModule,xui.newCom=xui.newModule,xui.showCom=xui.showModule,e.setCom=e.setModule,e.getComFromCache=e.getModuleFromCache,e.getCom=e.getModule,e.newCom=e.newModule,e.storeCom=e.storeModule,e.prepareComs=e.prepareModules,xui.ComFactory=e},Static:{_pro:{},_cache:{},_domId:"xui:ModuleFactory:",getProfile:function(e){return e?this._pro[e]:this._pro},setProfile:function(e,t){return"string"==typeof e?this._pro[e]=t:xui.isHash(e)&&(this._pro=e),this},destroyAll:function(){xui.each(this._cache,(function(e){xui.tryF(e.destroy,[],e)})),this._cache={}},setModule:function(e,t){return this._cache[e]=t,t&&(t.moduleRefId=e),this},getModuleFromCache:function(e){return this._cache[e]||null},getModule:function(e,t,i,r,o,n,a){if(!e){var s=new Error("No id");throw xui.tryF(t,[s,null,i]),xui.Thread.abort(i),s}r=!1!==r;var u,l,d=this._cache,c=this._pro;if(r&&d[e]&&!d[e].destroyed)return xui.tryF(t,[null,d[e],i],d[e]),d[e];(u=c[e])?l=u.cls||u:(u={cls:e,cached:r,properties:o,events:n},l=e);var p=function(i,r,o){if(!xui.isFun(i))throw new Error("'"+i+"' is not a constructor");var n=new i;r.properties&&xui.merge(n.properties,r.properties,"all"),r.events&&xui.merge(n.events,r.events,"all"),!1!==r.cached&&xui.ModuleFactory.setModule(e,n);var a=[function(e,t,i){!function(e,t,i){var r=arguments.callee;xui.arr.each(e,(function(e,i){if(e.children){var o=[];xui.arr.each(e.children,(function(e){o[o.length]=e[0]})),r(o,t)}}))}(t.getUIComponents().get(),r.children,1)}];a.push(o||null),t&&xui.Thread.insert(o,{task:t,args:[null,n,o],scope:n}),xui.tryF(n[r.iniMethod||"create"],a,n)};xui.Thread.observableRun((function(e){var i=function(e){var i=this||xui.SC.get(l);if(!i||!i.$xui$){var r=new Error("Cant find Class '"+l+"' in the corresponding file (maybe SyntaxError)");throw xui.tryF(t,[r,null,e]),xui.Thread.abort(e),r}xui.Thread.insert(e,{task:p,args:[i,u,e]})},r=function(r,o){if(u.cls=o,!r){var n=new Error("No class name");throw xui.tryF(t,[n,null,e]),xui.Thread.abort(e),n}i.call(this,e)};/\//.test(l+="")&&!/\.js$/i.test(l)&&(l+=".js"),/\.js$/i.test(l)?xui.fetchClass(l,r,(function(i){xui.tryF(t,[i,null,e])}),null,null,e,a):xui.SC(l,r,!0,e,{retry:0,onFail:function(i){xui.tryF(t,[i,null,e])}})}),null,i)},newModule:function(e,t,i,r,o,n){return this.getModule(e,t,i,!1,r,o,n)},storeModule:function(e){var t,i,r=this._cache,o=this._domId;(i=r[e])&&((t=xui.Dom.byId(o))||xui("body").prepend(xui.create('<div id="'+o+'" style="display:none;"></div>')),t=xui(o),(i=i.getUIComponents()).isEmpty()||(i.get(0).unlinkParent(),t.append(i)))},prepareModules:function(e){var t=this,i=[];return xui.arr.each(e,(function(e){i.push((function(){t.getModule(e)}))})),xui.Thread(null,i,500).start(),this}}}),xui.Class("xui.Debugger",null,{Static:{$time:xui.stamp(),_id1:"xui:dbg::_frm",_id4:"xui:dbg::_head",_id2:"xui:dbg::_con",_id3:"xui:dbg::_inp",err:function(e,t,i){return xui.browser.gek&&"Error loading script"==e||xui.Debugger.log(">>"+e+" at File: "+t+" ( line "+i+" )."),!0},trace:function(e){var t=xui.toArr(arguments),i=t[1]||arguments.callee.caller,r=t[2]||[];if(i&&(r.push('function "'+(i.$name$||"")+'" in Class "'+(i.$original$||"")+'"'),i.caller))try{arguments.callee(null,i.caller,r,1)}catch(e){}if(!t[3]){var o=[];if(o.push(" >> Object Info:"),"object"==typeof e)for(var n in e)o.push(" -- "+n+" : "+e[n]);else o.push(e);o.push(" >> Function Trace: "+r.join(" <= ")),xui.Debugger.log.apply(xui.Debugger,o)}i=null},log:function(){var t1,t2,time,self=this,arr=xui.toArr(arguments),str;if(arr.length){t1=document.createElement("div"),t2=document.createElement("div"),t2.className="xui-uibase xui-dbg-con1",time=xui.stamp(),t2.appendChild(document.createTextNode("Time stamp : "+time+"("+(time-self.$time)+")")),self.$time=time,t1.appendChild(t2);for(var i=0,l=arr.length;i<l;i++)str=arr[i],t2=document.createElement("div"),t2.className="xui-uibase xui-dbg-con2",t2.appendChild(document.createTextNode(" "+xui.stringify(xui.isArguments(str)?xui.toArr(str):str))),t1.appendChild(t2);if(!xui.Dom.byId(self._id2)){var ns=xui.create("<div id="+self._id1+' style="left:5px;top:'+(xui.win.scrollTop()+5)+'px;" class="xui-ui-reset xui-node xui-node-div xui-wrapper xui-dbg-frm xui-custom"><div class="xui-node xui-node-div xui-dbg-box xui-custom"><div id='+self._id4+' class="xui-node xui-node-div xui-uibar xui-dbg-header xui-custom">&nbsp;&nbsp;:&nbsp;)&nbsp;&nbsp;CrossUI Monitor window <span class="xui-node xui-node-span xui-dbg-cmds xui-custom"><a class="xui-node xui-node-a xui-custom" href="javascript:;" onclick="xui(\''+self._id2+'\').empty();">Clear</a><a class="xui-node xui-node-a xui-custom" href="javascript:;" onclick="xui(\''+self._id1+"').remove();\">✖</a></span></div><div id="+self._id2+' class="xui-node xui-node-div xui-uibase xui-dbg-content xui-custom"></div><div class="xui-node xui-node-div xui-uibase xui-dbg-tail xui-custom"><table class="xui-node xui-node-table xui-custom"><tr><td style="font-family:serif;">&nbsp;>>>&nbsp;</td><td style="width:100%"><input class="xui-node xui-node-input xui-custom" id='+self._id3+" /></td></tr></table></div></div></div>");xui("body").append(ns),self.$con=xui(self._id2),xui(self._id4).draggable(!0,null,null,null,xui(self._id4).parent(2)),xui.Dom.css3Support("boxShadow")&&ns.css("boxShadow","2px 2px 5px #ababab"),xui.browser.ie6&&(ns.height(ns.offsetHeight()),ns.width(299),xui.asyRun((function(){ns.width(300)})));var bak="",temp;xui(self._id3).onKeydown((function(p,e,s){var k=xui.Event.getKey(e).key;if(s=xui.use(s).get(0),"enter"==k){switch(s.value){case"?":case"help":self.$con.append(xui.create("<div class='xui-node xui-node-div xui-uibase xui-dbg-con3 xui-custom'><p class='xui-node xui-node-p xui-custom'><strong  class='xui-node xui-node-strong xui-custom'>vailable commands:</strong></p><ul  class='xui-node xui-node-ul xui-custom'><li  class='xui-node xui-node-li xui-custom'> -- <strong  class='xui-node xui-node-strong xui-custom'>[clr]</strong> or <strong>[clear]</strong> : clears the message</li><li  class='xui-node xui-node-li xui-custom'> -- <strong  class='xui-node xui-node-strong xui-custom'>[?]</strong> or <strong  class='xui-node xui-node-strong xui-custom'>[help]</strong> : shows this message</li><li  class='xui-node xui-node-li xui-custom'> -- <strong class='xui-node xui-node-strong xui-custom'>any other</strong>: shows its string representation</li></ul></div>"));break;case"clr":case"clear":xui(self._id2).empty();break;default:try{temp=s.value,/^\s*\x7b/.test(temp)&&(temp="("+temp+")"),self.log(eval(temp))}catch(e){return void self.$con.append(xui.create("<div  class='xui-node xui-node-div xui-uibase xui-dbg-con4 xui-custom'>"+String(e)+"</div>"))}}bak=s.value,s.value=""}else if("up"==k||"down"==k){var a=s.value;s.value=bak||"",bak=a}k=s=temp=bak=null}))}self.$con.append(t1).scrollTop(self.$con.scrollHeight()),t1=t2=null}}},Initialize:function(){xui.CSS.addStyleSheet(".xui-dbg-frm{position:absolute;width:25em;z-index:2000;}.xui-dbg-header{cursor:move;height:1.5em;padding-top:.25em;position:relative;border-bottom:solid 1px #CCC;background-color:#FFAB3F;font-weight:bold;}.xui-dbg-cmds{position:absolute;right:.25em;top:.25em;}.xui-dbg-cmds a{margin:.25em;}.xui-dbg-box{position:relative;overflow:hidden;border:solid 1px #AAA;}.xui-dbg-content{position:relative;width:100%;overflow:auto;height:25em;overflow-x:hidden;}.xui-dbg-con1{background-color:#CCC;width:24.5empx;}.xui-dbg-con2{padding-left:.5em;border-bottom:dashed 1px #CCC;width:24.5em;}.xui-dbg-con3{padding-left:.5em;border-bottom:dashed 1px #CCC;background:#EEE;color:#0000ff;width:24.5em;}.xui-dbg-con4{padding-left:.5em;border-bottom:dashed 1px #CCC;background:#EEE;color:#ff0000;width:24.5em;}.xui-dbg-tail{overflow:hidden;position:relative;border-top:solid 1px #CCC;height:1.3333333333333333em;background:#fff;color:#0000ff;}.xui-dbg-tail input{width:100%;border:0;background:transparent;}",this.KEY),xui.echo=function(){if(!xui.debugMode)return!1;xui.Debugger.log.apply(xui.Debugger,xui.toArr(arguments))},xui.message=function(e,t,i,r){i=i||300,xui.browser.ie&&(i+=i%2);var o,n,a=arguments.callee,s=a.stack||(a.stack=[]),u=a.allmsg||(a.allmsg=[]),l=xui.win,d=l.scrollLeft()+l.width()/2-i/2,c=l.height(),p=l.scrollTop();for(o=s.pop();o&&!o.get(0);)o=s.pop();if(o||(o='<div class="xui-ui-reset xui-node xui-node-div xui-wrapper xui-uibar xui-uiborder-outset xui-custom" style="border:solid 1px #cdcdcd;position:absolute;overflow:visible;top:-50px;"><div class="xui-node xui-node-div xui-custom" style="font-size:1em;overflow:hidden;font-weight:bold;padding:.25em;"></div><div class="xui-node xui-node-div xui-custom" style="padding:.5em;overflow:hidden;"></div></div>',(o=xui.create(o)).addBorder&&o.addBorder(),u.push(o),xui.Dom.css3Support("boxShadow")&&o.css("boxShadow","2px 2px 5px #ababab")),document.body.lastChild!=o.get(0)&&xui("body").append(o,!1,!0),o.topZindex(!0),o.__hide=0,o.removeClass("xui-ui-hidden"),o.css({left:d+"px",width:i+"px",visibility:"visible"}).first().html(t||"").css("display",t?"":"none").next().html(e||""),xui.browser.ie&&xui.browser.ver<=8&&o.ieRemedy(),a.last&&a.last.get(0)&&o!=a.last){var h=a.last,f=h.left();h._thread&&h._thread.id&&h._thread.isAlive()&&h._thread.abort(),h._thread=h.animate({left:[f,f+(h.width+i)/2+20]},(function(){h.left(f)}),(function(){h.left(f+(h.width+i)/2+20)})).start();var x=h.offsetHeight();xui.filter(u,(function(e){if(e.isEmpty())return!1;e.__hide||e==o||e==h||(e._thread.id&&e._thread.isAlive()&&e._thread.abort(),e.topBy(x))}))}a.last=o,a.last.width=i,n=o.height(),xui.browser.ie6&&o.cssSize({height:n,width:i+2}),o._thread&&o._thread.id&&o._thread.isAlive()&&o._thread.abort(),o._thread=o.animate({top:[p-n-20,p+20]},(function(){o.top(p-n-20)}),(function(){o.top(p+20)}),300,0,"expoOut").start(),xui.asyRun((function(){o._thread&&o._thread.id&&o._thread.isAlive()&&o._thread.abort(),o._thread=o.animate({top:[o.top(),c+20]},null,(function(){s.push(o),o.hide(),o.__hide=1}),300,0).start()}),r||5e3),a=null},xui.isDefined(window.console)&&"function"==typeof window.console.log?xui.log=function(){window.console.log.apply(window.console,xui.toArr(arguments))}:xui.debugMode&&(xui.log=xui.echo,window.onerror=this.err)}}),new function(){xui.builtinFontIcon={"xui-icon-xui":"&#xe6a7;","xui-icon-placeholder":"&#xe668;","xui-icon-empty":"&#xe668;","xui-icon-loading":"&#xe678;","xui-icon-star":"&#xe69c;","xui-icon-smill":"&#xe69a;","xui-icon-trash":"&#xe6a1;","xui-icon-error":"&#xe666;","xui-icon-back":"&#xe64e;","xui-icon-bold":"&#xe650;","xui-icon-bgcolor":"&#xe64f;","xui-icon-breaklink":"&#xe652;","xui-icon-clock":"&#xe657;","xui-icon-circle":"&#xe651;","xui-icon-bigup":"&#xe658;","xui-icon-code":"&#xe659;","xui-icon-dialog":"&#xe65a;","xui-icon-bullet":"&#xe65b;","xui-icon-date":"&#xe65c;","xui-icon-dragadd":"&#xe661;","xui-icon-dragmove":"&#xe662;","xui-icon-dragcopy":"&#xe663;","xui-icon-dropdown":"&#xe664;","xui-icon-dragstop":"&#xe665;","xui-icon-file":"&#xe667;","xui-icon-file-expand":"&#xe669;","xui-icon-file-fold":"&#xe66a;","xui-icon-filter":"&#xe66b;","xui-icon-font":"&#xe66c;","xui-icon-forecolor":"&#xe66e;","xui-icon-formatbrush":"&#xe66f;","xui-icon-formatclear":"&#xe670;","xui-icon-indent":"&#xe671;","xui-icon-html":"&#xe672;","xui-icon-italic":"&#xe673;","xui-icon-link":"&#xe675;","xui-icon-inserthr":"&#xe676;","xui-icon-menu":"&#xe677;","xui-icon-minus":"&#xe679;","xui-icon-menu-checked":"&#xe67a;","xui-icon-mobile":"&#xe67b;","xui-icon-mouse":"&#xe67c;","xui-icon-outdent":"&#xe689;","xui-icon-picture":"&#xe68a;","xui-icon-print":"&#xe68c;","xui-icon-numbers":"&#xe68d;","xui-icon-right":"&#xe68e;","xui-icon-search":"&#xe68f;","xui-icon-question":"&#xe690;","xui-icon-remove":"&#xe693;","xui-icon-sort":"&#xe699;","xui-icon-sort-checked":"&#xe69b;","xui-icon-strikethrough":"&#xe69d;","xui-icon-sub":"&#xe69e;","xui-icon-super":"&#xe69f;","xui-icon-transparent":"&#xe6a0;","xui-icon-triangle-down":"&#xe6a2;","xui-icon-triangle-left":"&#xe6a3;","xui-icon-triangle-right":"&#xe6a4;","xui-icon-triangle-up":"&#xe6a5;","xui-icon-undo":"&#xe6a6;","xui-icon-redo":"&#xe691;","xui-icon-upload":"&#xe6a8;","xui-icon-zoomin":"&#xe6a9;","xui-icon-zoomout":"&#xe6ac;","xui-icon-underline":"&#xe6aa;","xui-load-error":"&#xe6ab;","xui-refresh":"&#xe6ae;","xui-uicmd-arrowdrop":"&#xe6af;","xui-uicmd-check":"&#xe6b0;","xui-uicmd-check-checked":"&#xe6b1;","xui-uicmd-add":"&#xe6ad;","xui-uicmd-close":"&#xe6b2;","xui-uicmd-cmdbox":"&#xe6b3;","xui-uicmd-date":"&#xe6b4;","xui-uicmd-color":"&#xe6b5;","xui-uicmd-delete":"&#xe6b6;","xui-uicmd-dotted":"&#xe6b7;","xui-uicmd-datetime":"&#xe6b8;","xui-uicmd-helpinput":"&#xe6b9;","xui-uicmd-getter":"&#xe6ba;","xui-uicmd-file":"&#xe6bb;","xui-uicmd-info":"&#xe6bc;","xui-uicmd-land":"&#xe6bd;","xui-uicmd-max":"&#xe6be;","xui-uicmd-min":"&#xe6bf;","xui-uicmd-location":"&#xe6c0;","xui-uicmd-opt":"&#xe6c1;","xui-uicmd-pop":"&#xe6c2;","xui-uicmd-pin":"&#xe6c3;","xui-uicmd-radio":"&#xe6c4;","xui-uicmd-radio-checked":"&#xe6c5;","xui-uicmd-popbox":"&#xe6c6;","xui-uicmd-refresh":"&#xe6c7;","xui-uicmd-restore":"&#xe6c8;","xui-uicmd-remove":"&#xe6c9;","xui-uicmd-time":"&#xe6ca;","xui-uicmd-select":"&#xe6cb;","xui-uicmd-save":"&#xe6cc;","xui-uicmd-toggle":"&#xe6cd;","xui-uicmd-toggle-checked":"&#xe6ce;","xui-icon-alignleft":"&#xe6d2;","xui-icon-aligncenter":"&#xe6d0;","xui-icon-alignjustify":"&#xe6d1;","xui-icon-alignright":"&#xe6cf;","xui-icon-singleleft":"&#xe694;","xui-icon-singleright":"&#xe695;","xui-icon-singleup":"&#xe696;","xui-icon-singledown":"&#xe692;","xui-icon-smalldown":"&#xe697;","xui-icon-smallup":"&#xe698;","xui-icon-arrowleft":"&#xe64c;","xui-icon-arrowright":"&#xe64b;","xui-icon-arrowtop":"&#xe64d;","xui-icon-arrowbottom":"&#xe6d3;","xui-icon-circleleft":"&#xe654;","xui-icon-circleright":"&#xe655;","xui-icon-circleup":"&#xe656;","xui-icon-circledown":"&#xe653;","xui-icon-doubleleft":"&#xe65e;","xui-icon-doubleright":"&#xe660;","xui-icon-doubleup":"&#xe65f;","xui-icon-doubledown":"&#xe65d;","xui-icon-first":"&#xe66d;","xui-icon-prev":"&#xe68b;","xui-icon-next":"&#xe67d;","xui-icon-last":"&#xe674;","xui-icon-number":"&#xe67e;","xui-icon-number0":"&#xe680;","xui-icon-number1":"&#xe67f;","xui-icon-number2":"&#xe681;","xui-icon-number3":"&#xe682;","xui-icon-number4":"&#xe683;","xui-icon-number5":"&#xe686;","xui-icon-number6":"&#xe687;","xui-icon-number7":"&#xe684;","xui-icon-number8":"&#xe685;","xui-icon-number9":"&#xe688;"},xui.browser.ie678&&(xui.__iefix2=xui.builtinFontIcon)},xui.Class("xui.UIProfile","xui.Profile",{Instance:{renderId:null,_render:function(){if(!this.$ignoreRender){var e,t=this,i=t.boxing(),r=xui.$cache.profileMap;if(!t.beforeRender||!1!==i.beforeRender(t)){if(!t.renderId){var o=xui.Dom.byId(t.$domId);if(!o)return;if(t.domId!=t.$domId&&(o.id=t.domId),r[t.domId]=r[t.$domId]=t,o.$xid||xui.UI.$addEventsHandler(t,o,!0),t._elset)for(var n=1,a=t._elset.length;n<a;n++)xui.UI.$addEventsHandler(t,t._elset[n].node,!0);xui.browser.ie&&xui.browser.ver<10&&"selectable"in t.properties&&xui.setNodeData(o,"_onxuisel",t.properties.selectable?"true":"false"),t.rendered=t.renderId=o.$xid,o=null}if(t.CA&&!xui.isEmpty(t.CA)&&i.setCustomAttr(t.CA),t.CS&&!xui.isEmpty(t.CS)&&i.setCustomStyle(t.CS),xui.browser.isTouch&&(e=t.box.$Behaviors.DroppableKeys)&&e.length&&xui.arr.each(e,(function(e){i.getSubNode(e,!0).each((function(e){var i=t.box.getDropKeys(t,e.$xid);if(i)for(var r=xui.$cache.droppable,o=i.split(/[^\w-]+/),n=0,a=o.length;n<a;n++)r[o[n]]=r[o[n]]||[],r[o[n]].push(e.$xid)}))})),xui.browser.fakeTouch||xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){var s,u={auto:1,scroll:1};xui.each(t.box.$Appearances,(function(e,i){s="",u[e.overflow]?s="xy":(u[e["overflow-x"]]&&(s+="x"),u[e["overflow-y"]]&&(s+="y")),s&&t.getSubNode(i,!0).$touchscroll(s)})),"overflow"in t.properties&&(xui.browser.fakeTouch?xui.asyRun((function(){var e="",i=t.getRoot();i&&!i.isEmpty()&&(i.isScrollBarShowed("x")&&(e+="x"),i.isScrollBarShowed("y")&&(e+="y"),e&&i.$touchscroll(e))})):u[t.properties.overflow]&&i.setOverflow(t.properties.overflow,!0))}if(e=t.RenderTrigger){for(n=0,a=e.length;n<a;n++)e[n].call(t);delete t.RenderTrigger}if(t.onRender&&i.onRender(t),xui.tryF(t.$onrender,[],t),!0===arguments[0]&&(e=t.LayoutTrigger)){for(n=0,a=e.length;n<a;n++)e[n].call(t);t.onLayout&&i.onLayout(t)}if(!t.properties.lazyAppend){if(t.children)for(n=0;l=t.children[n++];)l[0]._render&&l[0]._render(!0);if(t.$attached){for(n=0;l=t.$attached[n++];)l._render&&l._render(!0),(e=l._render_holder||l._inline_holder)&&e.$afterAttached?xui.tryF(e.$afterAttached,[l],e):xui.tryF(t.$afterAttached,[l],t);delete t.$attached}if(t.exchildren){for(n=0;l=t.exchildren[n++];)i.append(l[0],l[1]);delete t.exchildren}if(t.exmodules){var l;for(n=0;l=t.exmodules[n++];)l[0].show(null,i,l[1],!1);delete t.exmodules}}t.renderCompleted=1}}},__gc:function(e,t){var i,r=this,o=xui.toArr(arguments);if(!r.destroyed&&(r.$beforeDestroy&&(xui.each(r.$beforeDestroy,(function(e){xui.tryF(e,o,r)})),xui.breakO(r.$beforeDestroy,2)),xui.tryF(r.$ondestory,o,r),r.onDestroy&&r.boxing().onDestroy(),r.destroyTrigger&&r.destroyTrigger(),r.serialId)){var n;if((i=r._$composed)&&xui.each(i,(function(i){i.__gc(e,t)})),r.clearCache(),r.$noReclaim?delete r.$noReclaim:((i=xui.$cache.reclaimId)[r.key]||(i[r.key]=[])).push(r.serialId),delete xui.$cache.profileMap[r.domId],delete xui.$cache.profileMap[r.$domId],r.alias&&r.host&&(n=r.host[r.alias])&&(n=n._nodes)&&(0===n.length||1===n.length&&n[0]==r)&&(r.host[r.alias]=null,r.host===window&&xui.browser.ie&&xui.browser.ver<=8||delete r.host[r.alias]),r.unLinkAll(),r.LayoutTrigger&&(r.LayoutTrigger.length=0),r.RenderTrigger&&(r.RenderTrigger.length=0),(i=r.children).length){i=xui.copy(i);for(var a=0;a<i.length;a++)i[a][0].__gc(e,t),i[a].length=0;i.length=0}r.destroyed=!0,r.$afterDestroy&&(xui.each(r.$afterDestroy,(function(e){xui.tryF(e,o,r)})),xui.breakO(r.$afterDestroy,2)),r.afterDestroy&&r.boxing().afterDestroy(r),xui.breakO([r.properties,r.events,r.CF,r.CB,r.CC,r.CA,r.CS,r],2),r.destroyed=!0}},linkParent:function(e,t,i){var r=this;return r.unlinkParent(),r.destroyed||(r.parent=e,r.childrenId=t,r.link(e.children,"$parent",[r,t],i)),r},unlinkParent:function(){var e=this;return delete e.parent,delete e.childrenId,e.unLink("$parent"),e},getRootNode:function(){return xui.getNodeData(this.renderId,"element")},getRoot:function(){var e=this;return e.renderId?e["*"]||(e["*"]=xui([e.renderId],!1)):xui([],!1)},getAllNodes:function(){return this.getRoot().query().merge(this.getRoot())},getContainer:function(e){return!0!==e&&(e="string"==typeof e?e:null)&&(e=this.getSubIdByItemId(e)),this.box._CONTAINERKEY?this.getSubNodes(this.box._CONTAINERKEY,e):this.keys.PANEL?this.getSubNodes(this.keys.PANEL,e):this.getRoot()},getEmSize:function(e){var t=this,i=t.getRoot(),r=i.get(0);return!e&&t._nodeEmSize||r&&(t._nodeEmSize=i._getEmSize())||xui.CSS._getDftEmSize()},adjustSize:function(e,t,i){var r=this,o=r.getRootNode();if(o&&(e||(o=o.style))){var n=function(){xui.UI.$tryResize(r,e?r.properties.width:o.width,e?r.properties.height:o.height,!0,i)};t&&xui.asyRun(n),n()}},$px:function(e,t,i){var r=this;return xui.CSS.$px(e,t||function(){return r.getEmSize()},i)},$em:function(e,t,i){var r=this;return xui.CSS.$em(e,t||function(){return r.getEmSize()},i)},$px2em:function(e,t,i){var r=this;return xui.CSS.$px2em(e,t||function(){return r.getEmSize()},i)},$em2px:function(e,t,i){var r=this;return xui.CSS.$em2px(e,t||function(){return r.getEmSize()},i)},$forceu:function(e,t,i,r){var o=this;return xui.CSS.$forceu(e,t,i||function(){return o.getEmSize()},r)},$addpx:function(e,t,i){var r=this;return xui.CSS.$addpx(e,t,i||function(){return r.getEmSize()})},$isEm:function(e){return xui.CSS.$isEm(e)},$isPx:function(e){return xui.CSS.$isPx(e)},$picku:function(e){return xui.CSS.$picku(e)},$addu:function(e){return xui.CSS.$addu(e)},_cacheR1:/^\w[\w_-]*$/,setDomId:function(e){var t=this,i=xui.$cache.profileMap;return"string"!=typeof e||!t._cacheR1.test(e)&&e!=t.$domId||xui.Dom.byId(e)||(t.domId!=t.$domId&&delete i[t.domId],t.domId=e,t.renderId&&(t.getRootNode().id=e),i[t.$domId]&&(i[e]=t)),t},getDomId:function(){return this.domId},clearCache:function(e){var t=this,i=t.$_egetter;for(var r in i)i[r].length=0,delete i[r];if(!e){for(var r in i=t.$_domid)i[r].__gc(!0,!0),delete i[r];delete t["*"]}return t},_getEV:function(e,t,i){var r,o=this,n=t+"+"+i,a=o.$_egetter||(o.$_egetter={});if(a[n])Array.prototype.push.apply(e,a[n]);else{var s,u;if(r=a[n]=[],(s=xui.$cache.profileMap[t])&&(s=s.events)&&(s=s[i]))for(var l=0,d=s.length;l<d;l++)"function"==typeof s[s[l]]&&r.push(e[e.length]=s[s[l]]);u=t.split(":")[0].split("-")[1],("function"==typeof((s=o._CB)&&(u?s=s[u]:1)&&(s=s[i]))||"function"==typeof((s=o.CB)&&(u?s=s[u]:1)&&(s=s[i]))||"function"==typeof((s=o.behavior)&&(u?s=s[u]:1)&&(s=s[i])))&&r.push(e[e.length]=s)}},_cacheR2:/<!--\x03([^>^\s]*)\x04-->/g,toHtml:function(e){var t,i,r,o,n,a,s,u,l=this,d=l.properties,c=l.box,p={};if(l.destroyed)return"";if(c["xui.svg"])return c._RenderSVG(l),"";if(u=c._prepareData(l),c._dynamicTemplate&&c._dynamicTemplate(l),t=c._build(l,u),(!d.lazyAppend||e)&&(a=l.children))for(r=0,o=a.length;r<o;r++)if((n=a[r])&&n[0]){if(n[0]["xui.Module"]){var h=new xui.UI.MoudluePlaceHolder({host:n[0].host,alias:n[0].alias});h.get(0)._module=n[0],n[0]=h.get(0)}n[0]["xui.UIProfile"]&&(i=n[1]||"",(s=p[i]||(p[i]=[]))[s.length]=n[0].toHtml(e))}return t.replace(l._cacheR2,(function(e,t){return p[t]?p[t].join(""):""}))},_buildItems:function(e,t,i){var r=this,o=r.box,n=o._rpt(r,xui.UI.$doTemplate(r,xui.get(xui.$cache.template,[o.KEY,r._hash]),t,e)),a=xui.UI.$toDom(r,n.replace(r._cacheR2,""),i);return r.CA&&!xui.isEmpty(r.CA)&&r.boxing().setCustomAttr(r.CA,undefined,a),r.CS&&!xui.isEmpty(r.CS)&&r.boxing().setCustomStyle(r.CS,undefined,a),a},serialize:function(e,t,i){var r,o,n={},a=this,s=(r=a.box._beforeSerialized)?r(a):a,u={alias:s.alias,key:s.key,host:s.host},l=s.moduleClass+"["+s.moduleXid+"]";u.host===a?delete u.host:s.host&&!t&&(!1!==e?u.host="@this":delete u.host),"string"==typeof s.theme&&(u.theme=s.theme),s.$domId!=s.domId&&(u.domId=s.domId);var d={},c=s.box.$DataStruct,p=xui.UI[s.$inDesign?"__resetDftProp_in_Desinger":"__resetDftProp"],h=s.box[s.$inDesign?"__resetDftProp_in_Desinger":"__resetDftProp"],f=xui.absObj.$specialChars;xui.merge(d,s.properties,(function(e,t){return(h&&t in h?h:p&&t in p?p:c)[t]!==e&&!f[t.charAt(0)]})),xui.isEmpty(d)||(u.properties=d),xui.isEmpty(r=this.getEvents())||(u.events=r);var x=s.box.$EventHandlers;return xui.filter(u.events,(function(e,t){return e!=x[t]})),xui.isEmpty(u.events)&&delete u.events,xui.isEmpty(s.CB)||(u.CB=xui.copy(s.CB)),xui.isEmpty(s.CC)||(u.CC=xui.copy(s.CC)),xui.isEmpty(s.CF)||(u.CF=xui.copy(s.CF)),xui.isEmpty(s.CS)||(u.CS=xui.clone(s.CS,(function(e,t){return!("$"==(t+"").charAt(0)&&!e)}))),xui.isEmpty(s.CA)||(u.CA=xui.copy(s.CA)),"string"==typeof s.theme&&(u.theme=s.theme),!1!==i&&s.children&&s.children.length&&("xui.UI.SVGPaper"!=s.box.KEY&&xui.arr.stableSort(s.children,(function(e,t){return(e=e[0].properties.tabindex||0)>(t=t[0].properties.tabindex||0)?1:e==t?0:-1})),r=u.children=[],xui.arr.each(s.children,(function(e,i,a,s){if((i=e[0]).moduleClass&&i.moduleXid&&(a=xui.SC.get(i.moduleClass))&&(a=a.getInstance(i.moduleXid))&&a["xui.Module"]&&(s=i.moduleClass+"["+i.moduleXid+"]")!==l){if(n[s])return;n[s]=1,i=a}o=[i.serialize(!1,t)],e[1]&&(o[1]=e[1]),r[r.length]=o}))),!1!==i&&s.exchildren&&s.exchildren.length&&(u.exchildren=s.exchildren),n=null,!1===e?u:xui.serialize(u)},_applySetAction:function(e,t,i,r,o,n){if(this.renderId)return e.call(this,t,i,r,o,n)},getKey:function(e,t){var i;return"!"==e.charAt(0)&&(e=xui.use(e).id()),-1==e.indexOf(":")&&(e=(i=xui.$cache.profileMap[e])&&i.$domId),e&&(e=e.split(":")[0],t&&(e=e.split("-")[1]||"KEY")),e||""},getSubId:function(e){var t;return"!"==e.charAt(0)&&(e=xui.use(e).id()),e&&-1==e.indexOf(":")&&(e=(t=xui.$cache.profileMap[e])&&t.$domId),e?e.split(":")[2]:""},pickSubId:function(e){var t=this,i=t.cache_subid||(t.cache_subid={});return(i[e]||(i[e]=[]))[0]?i[e].shift():((i=t.subId||(t.subId={}))[e]||(i[e]=new xui.id)).next()},reclaimSubId:function(e,t){var i=this.cache_subid||(this.cache_subid={});(i[t]||(i[t]=[])).push(e)},_cacheR3:/\./g,_cacheH1:{},getClass:function(e,t){var i=this,r=(e=this.keys[e]||e)+":"+(t||"");return i._cacheH1[r]||(i._cacheH1[r]=e.replace(i._cacheR3,"-").toLowerCase().replace("xui-ui","xui")+(t||""))},_getSubNodeId:function(e,t,i){var r,o=this.$domId.split(":");return o[0]=e,o[2]=xui.isSet(t)?t+"":"",i&&(o[2]+="_"+i),(e=o.join(":"))==this.$domId?(r=xui.$cache.profileMap[e])&&r.domId:e},getSubNode:function(e,t,i){var r=this;if(!r.renderId)return xui();e=r.keys[e]||e;var o,n=r.$_domid||(r.$_domid={});if(!0===t)e==r.keys.KEY&&(o=xui([r.renderId])),o&&o.get(0)||(o=xui([r.renderId]).query("*","id",new RegExp("^"+e+":"+r.serialId+(i?"_"+i:""))));else{if(!xui.isSet(t)&&n[e]&&1==n[e]._nodes.length)return n[e];1!=(o=xui(r._getSubNodeId(e,t,i)))._nodes.length||xui.isSet(t)||(n[e]=o)}return o},getSubNodes:function(e,t,i){var r,o,n=this,a=[],s=!xui.isArr(e),u=!xui.isArr(t),l=Array.prototype.push;if(!0===t||xui.isNull(t)){if(!s){a=[];for(var d=0;r=e[d++];)a.push(n.keys[r]||r);e="("+a.join("|")+")"}l.apply(a,n.getSubNode(e,!0,i).get())}else if(s)if(u)l.apply(a,n.getSubNode(e,t,i).get());else for(var c=0;o=t[c++];)l.apply(a,n.getSubNode(e,o,i).get());else for(d=0;r=e[d++];)if(u)l.apply(a,n.getSubNode(r,t,i).get());else for(c=0;o=t[c++];)l.apply(a,n.getSubNode(r,o,i).get());return xui(a)},getSubNodeByItemId:function(e,t,i){return(t=this.getSubIdByItemId(t))?this.getSubNode(e,t,i):xui()},getItemByItemId:function(e){var t,i=this;return xui.isNumb(e)&&(e=xui.get(i.properties.items,[e,"id"])),(t=i.ItemIdMapSubSerialId)&&(t=t[e])?i.SubSerialIdMapItem[t]:(t=i.queryItems(i.properties.items,(function(t,i){return t.id===e}),1,1))&&t[0]},getSubIdByItemId:function(e){var t;return xui.isNumb(e)&&(e=xui.get(this.properties.items,[e,"id"])),(t=this.ItemIdMapSubSerialId)&&xui.isSet(e)?t[e]:null},getItemByDom:function(e){return this.SubSerialIdMapItem&&this.SubSerialIdMapItem[this.getSubId("string"==typeof e?"!"==e.charAt(0)?(e=xui.use(e).get(0))&&e.id:e:e.id)]},getItemIdByDom:function(e){var t;return(t=this.getItemByDom(e))&&t.id},queryItems:function(e,t,i,r,o){var n=[],a=arguments.callee,s=a.f||(a.f=function(e,t,i,r,o,n){xui.arr.each(e,(function(a,u){if((!0===t||t.call(null,a,u,e))&&(n.push(o?[a,u,e]:a),r))return!1;i&&a.sub&&a.sub.length&&s(a.sub,t,i,r,o,n)}))});return s(e,t,i,r,o,n),n}},Static:{getFromDom:function(e){if((e=e&&"xui.Dom"==e.KEY?e.get(0).id:"string"==typeof e?"!"==e.charAt(0)?(e=xui.use(e).get(0))&&e.id:e:e&&e.id)&&(e=xui.Event._getProfile(e))&&e["xui.UIProfile"])return e}}}),xui.Class("xui.UI","xui.absObj",{Before:function(e,t,i){return xui.absBox.$type[e.replace("xui.UI.","").replace("xui.","")]=xui.absBox.$type[e]=e,!0},After:function(){var e,t,i,r,o,n,a,s=this;if(xui.absObj.After.apply(this,arguments),s.Behaviors&&s.Behaviors.PanelKeys&&s.$DataModel&&s.$DataModel.dataField&&(delete s.$DataModel.dataField,delete s.$DataStruct.dataField,delete s.prototype.setDataField,delete s.prototype.getDataField),s._ctrlId=new xui.id,s._idCache=[],s.$cssKeys={},(e=s.$Keys).KEY=e.$key=s.KEY,s.addTemplateKeys(xui.toArr(e,!0)),n="$Behaviors",t={},(e=s.$parent)&&(o=e.length))for(;o--;)for(r in a=e[o][n])"object"==typeof a[r]?xui.isArr(a[r])?(i=t[r]||(t[r]=[])).push.apply(i,a[r]):(i=t[r]||(t[r]={}),xui.merge(i,a[r])):t[r]=a[r];if(s[n]=t,n="$Templates",t={},(e=s.$parent)&&(o=e[0]))for(r in o[n])"$"!=r.charAt(0)&&(t[r]=o[n][r]);if(s[n]=xui.clone(t),n="$Appearances",t={},(e=s.$parent)&&(o=e.length))for(;o--;)for(r in(a=e[o])[n])e=a[n][r],i=t[r]||(t[r]={}),xui.merge(i,e);s[n]=t,s.setTemplate(s.Templates),delete s.Templates,s.setBehavior(s.Behaviors||{}),delete s.Behaviors,s.setAppearance(s.Appearances),delete s.Appearances,(e=s.PublicAppearance)&&(xui.UI.$cache_css_before+=s.buildCSSText(e),delete s.PublicAppearance)},Instance:{animate:function(e,t){var i,r=this.get(0),o=r.getRootNode(),n=xui.getNodeData(o,"_inthread"),a=xui.getNodeData(o,"_animationreset");if(n&&xui.Thread.isAlive(n)&&(xui.Thread.abort(n,"force"),xui.setNodeData(o,"_inthread",null)),"function"==typeof a&&(a(),xui.setNodeData(o,"_animationreset",null)),e&&(i=xui.AnimBinder.getFromName(!0===e?"blinkAlert":e)))return i.apply(o,t);e||(e="blinkAlert");var s,u=xui.isHash(e)&&e.endpoints?e:xui.Dom.$preDefinedAnims[e];return u&&u.endpoints?(xui.isFun(t)?s=xui.isFun(u.onEnd)?function(){u.onEnd.apply(this,arguments),t.apply(this,arguments)}:t:xui.isFun(u.onEnd)&&(s=u.onEnd),r.getRoot().animate(u.endpoints,u.onStart,s,u.duration||200,null,u.type||"linear",null,u.unit,u.restore,u.times).start()):void 0},hoverPop:function(e,t,i,r,o,n){var a,s=this.get(0),u=s.boxing();if(!s.box.$EventHandlers.beforeHoverEffect)return u.getRoot().hoverPop(e,t,i,r,o,n),this;e=xui(e),a=(a=xui.UIProfile.getFromDom(e.id()))&&"xui.UI.PopMenu"===a.key?a.boxing():null,xui.isDefined(t)||(t="outer");var l=n||u.getRoot().xid()+":"+e.xid();return u.each((function(n){n.$onHover=null===t?null:function(n,s,u,d,c){u.$force||("mouseover"==c?(xui.resetRun(l,null),xui.getData([l,"$ui.hover.pop"])&&xui.getNodeData(e.get(0)||"empty","$ui.hover.parent")==d||(xui.setData([l,"$ui.hover.pop"],{item:s}),xui.setNodeData(e.get(0)||"empty","$ui.hover.parent",d),i&&!1===i(n,e,u,d,s)||(a?a.popUp(d,t,o):e.popToTop(d,t,o),e.onMouseover((function(){xui(d).onMouseover(!0)}),"hoverPop"),e.onMouseout((function(){xui(d).onMouseout(!0)}),"hoverPop")))):xui.resetRun(l,(function(){xui.setData([l,"$ui.hover.pop"]),xui.setNodeData(e.get(0)||"empty","$ui.hover.parent",0),r&&!1===r(n,e,u,d,s)||(a?a.hide():e.hide(),e.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop"))})))}})),e&&(e.onMouseover(null===t?null:function(e){e.$force||xui.getData([l,"$ui.hover.pop"])&&xui.resetRun(l,null)},"hoverPop"),e.onMouseout(null===t?null:function(t,i,o){i.$force||xui.getData([l,"$ui.hover.pop"])&&xui.resetRun(l,(function(){xui.setData([l,"$ui.hover.pop"]),xui.setNodeData(e.get(0)||"empty","$ui.hover.parent",0);var n=xui.getData([l,"$ui.hover.pop"]);r&&!1===r(t,e,i,o,"pop",n&&n.item)||(a?a.hide():e.hide(),e.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop"))}))},"hoverPop"),e.css("display","none")),this},setTheme:function(e){"string"==typeof e&&e||(e=null);var t=[];return this.each((function(i){e!=i.theme&&(null===e?delete i.theme:i.theme=e,t.push(i))})),xui.UI.pack(t,!1).refresh(),this},getTheme:function(){return this.get(0)&&this.get(0).theme},getModule:function(e){var t=this.get(0);if(t)return t.getModule(e)},destroy:function(e,t){var i=this;this.each((function(r,o){if(!r.destroyed){var n=function(){r.beforeDestroy&&!1===r.boxing().beforeDestroy(e,t)||(r.$beforeDestroy&&(xui.each(r.$beforeDestroy,(function(i){xui.tryF(i,[e,t],r)})),xui.breakO(r.$beforeDestroy,2)),r.renderId?r.getRoot().remove(!0,t):r.__gc(e,t),xui.arr.removeFrom(i._nodes,o),r.$afterDestroy&&(xui.each(r.$afterDestroy,(function(i){xui.tryF(i,[e,t],r)})),xui.breakO(r.$afterDestroy,2)))},a=r.properties;!e&&xui.Dom._getEffects(a.hideEffects,0)?xui.Dom._vAnimate(r.getRoot(),!1,n):n()}}),null,!0)},isDestroyed:function(){return!(this.get(0)&&!this.get(0).destroyed)},_toDomElems:function(){var e=[];return xui.arr.each(this._nodes,(function(t){t.renderId||e.push(t)})),e.length&&xui.UI.pack(e,!1).render(),e.length=0,xui.arr.each(this._nodes,(function(t){e.push(t.renderId)})),e},_ini:function(e,t,i,r,o,n,a,s,u){var l,d,c,p,h=this,f=h.constructor,x=f.$adjustProp,g=f.$DataStruct;e&&e["xui.Profile"]?(c=(l=e).alias||f.pickAlias(),xui.UIProfile.apply(l,[i,h.$key,c,f,null,t])):(e&&e.key&&xui.absBox.$type[e.key]?(d=e,e=null,c=d.alias||f.pickAlias()):c=f.pickAlias(),l=new xui.UIProfile(i,h.$key,c,f,e,t,d));var m,b=xui.UI[l.$inDesign?"__resetDftProp_in_Desinger":"__resetDftProp"],v=f[l.$inDesign?"__resetDftProp_in_Desinger":"__resetDftProp"];for(var y in g)y in l.properties||(p=v&&y in v?v[y]:b&&y in b?b[y]:g[y],l.properties[y]=l._dftProps[y]="object"==typeof p?xui.clone(p,!0):p);if("function"==typeof x&&x(l),l.keys=f.$Keys,l.CS=o?xui.copy(o):l.CS||{},l.CB=a?xui.copy(a):l.CB||{},l.CC=n?xui.copy(n):l.CC||{},l.CF=s?xui.copy(s):l.CF||{},l.CA=u?xui.copy(u):l.CA||{},"string"==typeof r&&(l.theme=r),l.template=f.getTemplate(),l.behavior=f.$Behaviors,l.serialId||(l.serialId=f._pickSerialId()),l.$domId=l.key+":"+l.serialId+":",l.domId=l.domId||l.$domId,l.RenderTrigger=xui.copy(f.$RenderTrigger),l.LayoutTrigger=xui.copy(f.$LayoutTrigger),l.link(xui.UI._cache,"UI").link(f._cache,"self").link(xui._pool,"xui"),p=l.children,l.children=[],p&&p.length)for(y=0;m=p[y++];)m[0]["xui.UIProfile"]||(m[0]=xui.create(m[0]).get(0)),m[0]["xui.UIProfile"]?m[0].linkParent(l,m[1]):m[0]["xui.Module"]&&m[0].getUIComponents().each((function(e){e.linkParent(l,m[1])}));return h._nodes.push(l),l.Instace=h,h.n0=l,f.$onInited&&xui.tryF(f.$onInited,[],l),h},busy:function(e,t,i,r,o){return t="string"==typeof t?t:"Loading...",!0===e&&xui.Dom.busy(),this.each((function(e){xui.resetRun(e.$xid+":busy",(function(e,i,r){if(e.box){var n,a=e.keys;i=a[i]||a.BORDER||a.PANEL||a.KEY;var s=e.getSubNode(i,r);if(!s.isEmpty()){if(e.$busy&&!e.$busy.isEmpty()||(n=e.$busy=xui.create('<button class="xui-node xui-node-div xuicon xui-icon-loading xui-cover xui-custom" style="position:absolute;text-align:center;left:0;top:0;z-index:10;border:0;padding:0;margin:0;width:100%;height:100%;"><div class="xui-node xui-node-div xui-coverlabel xui-custom"></div></button>')),(n=e.$busy).first().html(t,!1),s.append(n),n.removeClass(/^xui-rand-css-/),n.query("style").remove(!1),o){var u="xui-rand-css-"+xui.rand();n.addClass(u),xui.CSS._appendSS(n.get(0),"."+u+":before{"+o+"}",u,!0)}var l=s.get(0);n._parentOST=l.scrollTop||0,n._parentOSL=l.scrollLeft||0,n._parentOverflow=l.style.overflow||"",n._busyP=s.xid(),l.scrollTop=l.scrollLeft=0,l.style.overflow="hidden"}}}),50,[e,i,r])}))},free:function(){return xui.Dom.free(),this.each((function(e){var t;if(xui.resetRun(e.$xid+":busy"),t=e.$busy){var i=xui(t._busyP).get(0);i&&(i.scrollTop=t._parentOST||0,i.scrollLeft=t._parentOSL||0,i.style.overflow=t._parentOverflow||""),t._parentOST=t._parentOSL=t._parentOverflow=t._busyP=null,t.remove(),delete e.$busy}}))},adjustSize:function(e,t,i){return this.each((function(r){r.adjustSize(e,t,i)}))},reLayout:function(e){return this.each((function(t){if(t.renderId){delete t._nodeEmSize;var i,r=t.properties;if(!t.$noB&&r.border&&t.boxing()._border&&t.boxing()._border(null,!1),t.$forceRelayout=1,"absolute"==r.position&&r.dock&&"none"!=r.dock?t.boxing().adjustDock(e):(e&&(t._resize_h=t._resize_w=-1),xui.UI.$tryResize(t,r.width,r.height,e)),delete t.$forceRelayout,i=t.LayoutTrigger){for(var o=0,n=i.length;o<n;o++)i[o].call(t);t.onLayout&&t.boxing().onLayout(t)}}}))},toHtml:function(e){var t=[];return xui.arr.each(this._nodes,(function(i){t[t.length]=i.toHtml(e)})),t.join("")},render:function(e){var t,i,r,o=this,n=[],a=o._nodes,s=[];for(xui.Dom.byId,xui.UI.$trytoApplyCSS(),t=0;r=a[t++];)r.renderId||xui.Dom.byId(r.domId)||xui.Dom.byId(r.$domId)||(n[n.length]=r);if(i=n.length){for(t=0;t<i;t++)(r=n[t].toHtml())&&(s[s.length]=r);s.length&&xui.UI.$toDom(o.get(0),s.join(""))}for(t=0;r=a[t++];)r._render(e);return s.length=n.length=0,o},renderOnto:function(e,t,i){if((e=xui(e)).isEmpty())return this;var r=this,o=r.get(0),n=arguments.callee,a=n.paras||(n.paras=function(e){var t=e.cssRegion();return t.tabindex=e.attr("tabIndex"),t.tabindex<=0&&delete t.tabindex,t.zIndex=e.css("zIndex"),t.position=e.css("position"),t}),s=e.attr("style").replace(/\s*(left|top|width|height|right|bottom|position|z-index)\s*\:\s*[\w-.]+\s*/g,""),u=e.attr("class"),l=e.id();return xui.merge(o.properties,a(e),"all"),o.properties.dock="none",s&&r.setCustomStyle("KEY",s),u&&r.setCustomClass("KEY",u),l&&r.setDomId(l),(i||l)&&r.setHost(t||window,i||l),r.render(!0),e.replace(r.getRoot()),r},setDomId:function(e){return this.get(0).setDomId(e),this},hide:function(e){return this.each((function(t){if(t.renderId){var i=t.properties,r=e?null:xui.Dom._getEffects(i.hideEffects,0);t.getRoot().hide((function(){i.top=i.left=Math.round(parseFloat(xui.Dom.HIDE_VALUE)||0)+"px",t._dockIgnore=!0}),r)}}))},popUp:function(e,t,i,r,o){var n=this.get(0),a=n.getRoot();(a=a.get(0))&&(n._dockIgnore=!1,xui(a).popUp(e,t,i,r,o))},show:function(e,t,i,r,o,n){return this.each((function(a){var s,u=a.properties,l=a.boxing(),d=a.getRoot();r=r||0===r?r||0:null,null!==(i=i||0===i?i||0:null)&&(u.left=i),null!==r&&(u.top=r),xui.getNodeData(a.renderId,"_xuihide")?(s=1,a._dockIgnore=!1,d.show(i&&a.$forceu(i),r&&a.$forceu(r),null,o),"absolute"==u.position&&u.dock&&"none"!=u.dock&&xui.UI.$dock(a,!1,!0)):(e=e||a.parent)||a.renderId&&0!==(a.getRootNode().id||"").indexOf(xui.Dom._emptyDivId)||(e=xui("body"));var c,p=e;p&&(p["xui.UIProfile"]?(c=p.renderId,p=p.boxing()):c=p["xui.UI"]?(c=p.get(0))&&c.renderId:(p=xui(p))&&p._nodes[0],c&&(p.append(l,t),s?xui.tryF(n):d.show(i&&a.$forceu(i),r&&a.$forceu(r),n)))}))},clone:function(){return arguments.callee.upper.apply(this,["domId"])},refresh:function(e){var t,i,r,o,n,a,s,u,l,d,c,p,h,f,x,g,m,b,v,y,A,_,w=this;return w.each((function(C,I){if(C.renderId){b=C.box;var E=C.host,S=C.alias;C.host&&C.host["xui.Module"]&&(C.host.$ignoreAutoDestroy=!0),a=C.$xid,s=C.$inDesign,u=C.locked,l=C.serialId,f=C.moduleClass,x=C.moduleXid,d=C._render_conf,c=C._render_holder,p=C._inline_conf,h=C._inline_holder,g=C.$afterRefresh,(_=C.$handleCustomVars)&&(A=_()),"function"==typeof C.boxing().getUIValue&&(y=C.boxing().getUIValue(),C.boxing().getValue()+" "==y+" "&&(y=null)),(r=!!C.parent)?(o=C.parent.boxing(),t=C.childrenId):o=C.getRoot().parent(),i=e?xui.Dom.getEmptyDiv(C.$inDesign).get(0):xui.$getGhostDiv(),C.boxing().getChildren().reBoxing().each((function(e){i.appendChild(e)})),i=null,v=xui.copy(C.children),C.boxing().removeChildren(),n=C.serialize(!1,!0),m=C.$refreshTrigger;var D=xui.create("span");C.getRoot().replace(D),C.$noReclaim=1;var k=C.Instace;C.boxing().destroy(!0,!0),xui.merge(C,n,"all"),delete C.destroyed,C.$xid=a,C.$inDesign=s,C.locked=u,C.$handleCustomVars=_,C.serialId=l,C.moduleClass=f,C.moduleXid=x,d&&(C._render_conf=d),c&&(C._render_holder=c),p&&(C._inline_conf=p),h&&(C._inline_holder=h),v&&(C.children=v);var $=new b(C).render();k&&(xui.merge(k,$,"all"),$.get(0).Instace=k,$=k),w[I]=$.get(0),m&&m.call(m.target,$.get(0)),r?o.append($,t):o.append($),E&&$.setHost(E,S),xui.arr.each(v,(function(e){delete e[0].$dockParent,$.append.apply($,e)})),D.replace($.get(0).getRoot()),D.remove(),D=null,y&&$.setUIValue(y,!0,null,"refresh"),g&&($.get(0).$afterRefresh=g,g($.get(0))),_&&A&&C.$handleCustomVars(A),$.host&&$.host["xui.Module"]&&delete $.host.$ignoreAutoDestroy}}))},append:function(e,t,i,r){var o,n,a=this.get(0),s=a.properties,u=arguments[4],l=arguments[5];if(i=!!i,r?(r["xui.UI"]&&(r=r.get(0)),xui.arr.each(a.children,(function(e,t){if(e[0]===r)return o=t,!1})),xui.isNumb(o)&&(o=i?o:o+1,(n=r.getRoot()).isEmpty()&&(n=null))):o=i?0:-1,(xui.isHash(e)||xui.isStr(e))&&(e=xui.create(e)),e["xui.UIProfile"]&&(e=e.boxing()),a.box._IllegalDetect&&a.box._IllegalDetect(a,e,!0),!(a.box.$beforeAppend&&!1===a.box.$beforeAppend(a,e,t,i,r)||a.beforeAppend&&!1===this.beforeAppend(a,e,t,i,r))){if(e["xui.Module"]){if(!1!==t){var d=o;e.getUIComponents().each((function(e){e.linkParent(a,t,r?d++:d)}))}a.$ignoreRender||(a.renderId?!(l=u?l:a.getContainer(t))||l.isEmpty()||s.lazyAppend&&"none"==l.css("display")||(r?n&&n[i?"addPrev":"addNext"](e):l[i?"prepend":"append"](e)):xui.arr.insertAny(a.exmodules||(a.exmodules=[]),[e,t],o,!0))}else{var c;!1!==t&&e["xui.UI"]&&(d=o,e.each((function(e){e.linkParent&&e.linkParent(a,t,r?d++:d)}))),a.$ignoreRender||(a.renderId?!(l=u?l:a.getContainer(t))||l.isEmpty()||s.lazyAppend&&"none"==l.css("display")||(!a.parent||"none"==xui.get(a,["properties","dock"])||"absolute"!=xui.get(a,["properties","position"])||xui.get(a,["properties","dockIgnore"])||a._dockIgnore||xui.get(a,["properties","dockFloat"])||e["xui.absBox"]&&(c=e.reBoxing().parent()),r?n&&n[i?"addPrev":"addNext"](e):l[i?"prepend":"append"](e),c&&c.get(0)&&c.onSize()):e["xui.UI"]||xui.arr.insertAny(a.exchildren||(a.exchildren=[]),[e,t],o,!0))}return a.box.$afterAppend&&a.box.$afterAppend(a,e,t,i,r),a.afterAppend&&this.afterAppend(a,e,t,i,r),this}},getParent:function(){var e=this.get(0);if(e)return e.parent&&e.parent.boxing()},getChildrenId:function(){var e=this.get(0);if(e)return e.childrenId},getChildren:function(e,t){if(!1===t||"include"==t){var i,r=this.get(0),o={},n=[],a=r.moduleClass,s=r.moduleXid,u=function(e){if(e.moduleClass&&e.moduleXid&&e.moduleClass!==a&&e.moduleXid!==s){if(o[i=e.moduleClass+"'"+e.moduleXid+"]"])return null;o[i]=1;var t=e.getModule();if(t&&t.moduleClass&&t.moduleXid&&t.moduleClass!==a&&t.moduleXid!==s)return u(t);if(t)return t}return e},l=function(e){xui.arr.each(e.children,(function(e,t){(t=u(e[0]))&&(n.push(t),t["xui.UIProfile"]&&t.children&&t.children.length&&l(t))}))};return xui.arr.each(r.children,(function(t,i){e&&"string"==typeof e&&t[1]!==e||(i=u(t[0]))&&(n.push(i),i["xui.UIProfile"]&&i.children&&i.children.length&&l(i))})),n}return n=[],l=function(e){xui.arr.each(e.children,(function(e){n.push(e[0]),e[0].children&&e[0].children.length&&l(e[0])}))},xui.arr.each(this.get(0).children,(function(i){e&&"string"==typeof e&&i[1]!==e||(n.push(i[0]),(!0===t||"penetrate"==t)&&i[0].children&&i[0].children.length&&l(i[0]))})),xui.UI.pack(n)},removeChildren:function(e,t,i){return this.each((function(r){var o,n,a=xui.copy(r.children),s=r.box.$DataModel.valueSeparator||";";xui.arr.each(a,(function(a){if(o=0,e&&!0!==e?xui.isStr(e)||xui.isArr(e)?(n=xui.isArr(e)?e:(e+"").split(s),o=-1!=xui.arr.indexOf(n,a[1])||-1!=xui.arr.indexOf(n,a[0])||-1!=xui.arr.indexOf(n,a[0].boxing())):o=a[0]==e["xui.UI"]?e.get(0):e:o=1,o){if(r.beforeRemove&&!1===r.boxing().beforeRemove(r,a[0],a[1],t))return;a[0].unlinkParent(),r.afterRemove&&r.boxing().afterRemove(r,a[0],a[1],t),t&&!a[0].destroyed&&a[0].boxing().destroy(!0,i)}}))}))},draggable:function(e,t,i,r,o){return this.each((function(n){n.getSubNode(n.keys[i]||"KEY",!0).removeClass("xui-ui-selectable").addClass("xui-ui-unselectable").beforeMousedown(e?function(i,a,s){"left"==xui.Event.getBtn(a)&&(i.properties.disabled||((o=o?"function"==typeof o?xui.tryF(o,[],n):xui(o):null)&&o.get(0)||(o=xui(s)),(r=r||{}).dragKey=e,r.dragData="function"==typeof t?t():t,xui.merge(r,{dragCursor:"pointer",dragType:"icon",dragDefer:2}),o.startDrag(a,r)))}:null,"_d",-1).beforeDragbegin(e?function(e,t,i){xui.use(i).onMouseout(!0,{$force:!0}).onMouseup(!0)}:null,"_d",-1),e||n.clearCache()}))},setCustomFunction:function(e,t){return this.each((function(i){"string"==typeof e?t?i.CF[e]=t:delete i.CF[e]:i.CF=e||{}}))},setCustomClass:function(e,t){var i=arguments.callee,r=i.fun||(i.fun=function(e,t,i,r){if(i[t]){var o=e.getSubNode(t,!0);o.isEmpty()||xui.arr.each(i[t].split(/\s+/),(function(e){o[r?"removeClass":"addClass"](e)}))}});return this.each((function(i){var o,n=xui.copy(i.CC);if("string"==typeof e&&(o=e,(e=xui.copy(i.CC))[o]=t),xui.filter(e,(function(t,i){return/^[A-Z][A-Z0-9]*$/.test(i)?!!t&&void 0:(i in(o=e.KEY=e.KEY||{})||(o[i]=t),!1)})),e&&"object"==typeof e){if(i.renderId){for(var a in n)r(i,a,n,!0);for(var a in e)r(i,a,e)}i.CC=e}else{if(i.renderId)for(var a in n)r(i,a,n,!0);i.CC={}}delete i._nodeEmSize}))},setCustomAttr:function(e,t,i){var r=arguments.callee,o=r.fun||(r.fun=function(e,t,i,r,o){if(i[t]){var n,a=e.keys[t]||t;(n=o?o.query("*","id",a==e.keys.KEY?e.domId:new RegExp("^"+a+":"+e.serialId)):e.getSubNode(t,!0)).isEmpty()||xui.isHash(i[t])&&xui.each(i[t],(function(e,t){n.attr(t,r?"":e&&"string"==typeof e?xui.adjustRes(e,0,1):e)}))}});return this.each((function(r){var n,a=xui.copy(r.CA);if("string"==typeof e&&(n=e,(e=xui.copy(r.CA))[n]=t),xui.filter(e,(function(t,i){return/^[A-Z][A-Z0-9]*$/.test(i)?!!t&&void 0:(i in(n=e.KEY=e.KEY||{})||(n[i]=t),!1)})),e&&"object"==typeof e){if(e&&xui.filter(e,(function(e,t){return"id"!=t&&"class"!=t&&"style"!=t&&"$xid"!=t})),r.renderId){for(var s in e)o(r,s,a,!0,i);for(var s in e)o(r,s,e,!1,i)}r.CA=e}else{if(r.renderId)for(var s in a)o(r,s,a,!0,i);r.CA={}}}))},setCustomStyle:function(e,t,i){var r=arguments.callee,o=r.fun||(r.fun=function(e,t,i,r,o){if(i[t]){var n,a,s=e.keys[t]||t;(n=o?o.query("*","id",s==e.keys.KEY?e.domId:new RegExp("^"+s+":"+e.serialId)):e.getSubNode(t,!0)).isEmpty()||(xui.isStr(i[t])?xui.arr.each(i[t].split(";"),(function(e,t){(a=e.split(":")).length>=2&&(t=a.shift(),e=a.join(":"),t=t.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()})),n.css(t,(r?"":e&&"string"==typeof e?xui.adjustRes(e,0,1):e)||""))})):xui.isHash(i[t])&&xui.each(i[t],(function(e,t){xui.isStr(e)?0===t.indexOf("background")||-1==e.indexOf(";")?n.css(t,(r?"":e&&"string"==typeof e?xui.adjustRes(e,0,1):e)||""):xui.arr.each(e.split(";"),(function(e){(a=e.split(":")).length>=2&&(t=a.shift(),e=a.join(":"),t=t.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()})),n.css(t,(r?"":e&&"string"==typeof e?xui.adjustRes(e,0,1):e)||""))})):(t=t.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()})),n.css(t,(r?"":e&&"string"==typeof e?xui.adjustRes(e,0,1):e)||""))})))}});return this.each((function(r){var n,a=xui.copy(r.CS);if("string"==typeof e&&(n=e,(e=xui.copy(r.CS))[n]=t),xui.filter(e,(function(t,i){return/^[A-Z][A-Z0-9]*$/.test(i)?!!t&&void 0:(i in(n=e.KEY=e.KEY||{})||(n[i]=t),!1)})),e&&"object"==typeof e){if(r.renderId){for(var s in a)o(r,s,a,!0,i);for(var s in e)o(r,s,e,!1,i)}r.CS=e}else{if(r.renderId)for(var s in a)o(r,s,a,!0,i);r.CS={}}delete r._nodeEmSize}))},setCustomBehavior:function(e,t){return this.each((function(i){"string"==typeof e?i.keys[e]&&(i.CB[e]=t||{}):i.CB=e||{},i.CB.KEY&&(xui.merge(i.CB,i.CB.KEY,"all"),delete i.CB.KEY),i.clearCache()}))},adjustDock:function(e){return this.each((function(t){if(t.renderId){var i,r=t.properties;if((r.conDockRelative||r.conLayoutColumns)&&t.boxing().adjustSize(),"absolute"==r.position){if("dock"in r&&r.dock&&"none"!=r.dock&&t.renderId&&(i=t.getRootNode())&&i.clientHeight){if(e){var o=i.style;o.width=(parseFloat(t.$px(o.width))||0)+1+"px",o.height=(parseFloat(t.$px(o.height))||0)+1+"px",t._resize_h=t._resize_w=-1}xui.UI.$dock(t,!0,!0)}}else(xui.get(t,["parent","properties","conDockRelative"])||xui.get(t,["parent","properties","conLayoutColumns"]))&&xui.UI._adjustConW(t.parent,t.getRoot().parent(),t);t.$onDock&&(i=t.boxing().getContainer(!0))&&i.onSize&&i.get(0)&&i.onSize()}}))}},Initialize:function(){var e=this.prototype;xui.arr.each("getSubNode,getSubNodes,getDomId,getRootNode,getRoot,getContainer".split(","),(function(t){e[t]||(e[t]=function(){var e=this.get(0);return e?e[t].apply(e,arguments):null},e[t].$original$="xui.UI",e[t].$type$="instance",e[t].$name$=t)}));var t={};xui.each(xui.UI.$ps,(function(e,i){t[i]={$spaceunit:1,ini:"auto",action:function(e){var t,r=this,o=r.properties;if(r.getRoot()[i]?r.getRoot()[i](e):xui.Dom._setUnitStyle(r.getRootNode(),i,e),"width"==i||"height"==i?!r.box._onresize&&r.onResize&&r.boxing().onResize(r,"width"==i?e:null,"height"==i?e:null):r.onMove&&r.boxing().onMove(r,"left"==i?e:null,"top"==i?e:null,"right"==i?e:null,"bottom"==i?e:null),"absolute"==o.position&&"none"!=o.dock){switch(t={$type:o.dock,$dockid:-1!=xui.arr.indexOf(["width","height","fill","cover"],o.dock)?r.$xid:null},o.dock){case"middle":if("height"!=i&&"top"!=i)return;t.top=t.height=1;break;case"center":if("width"!=i&&"left"!=i)return;t.left=t.width=1;break;case"top":if("height"!=i&&"top"!=i)return;t.width=t.height=1;break;case"bottom":if("height"!=i&&"bottom"!=i)return;t.width=t.height=1;break;case"left":if("width"!=i&&"left"!=i)return;t.width=t.height=1;break;case"right":if("width"!=i&&"right"!=i)return;t.width=t.height=1;break;case"width":if("width"==i)return;t.width=1;break;case"height":if("height"==i)return;t.height=1;break;case"fill":case"cover":if("width"==i&&"height"==i)return;t.width=t.height=1}var n=xui.UIProfile.getFromDom(r.$dockParent);n&&n.boxing().adjustDock(!0)}}}})),xui.merge(t,{renderer:{ini:null,action:function(){this.boxing().refresh()}},zIndex:{ini:1,action:function(e){this.getRoot().css("zIndex",e)}},tabindex:{ini:1,action:function(e){var t=this,i=new RegExp("^"+t.key+"[-\\w]*:"+t.serialId+":");t.getRoot().query("*",(function(e){return e.id&&i.test(e.id)&&e.getAttribute("tabIndex")})).attr("tabIndex",e)}},position:{ini:"absolute",listbox:["","static","relative","absolute"],action:function(e){var t=this,i=t.properties;t.getRoot().css("position",e),!("dock"in t.box.$DataModel)||"none"==i.dock||i.dockIgnore||t._dockIgnore||(e=i.dock,i.dock="none",t.boxing().adjustDock(!0),i.dock=e)}},visibility:{listbox:["","visible","hidden"],action:function(e){this.box["xui.svg"]?this.boxing().getAllNodes().css("visibility",e):this.getRoot().css("visibility",e),this.$resizer&&("hidden"==e?this.$resizer.hide():this.$resizer.show()),xui.setNodeData(this.getRootNode(),"_setVisibility",1)}},display:{listbox:["","none","block","inline","inline-block"],action:function(e){var t=this.box["xui.svg"]?this.boxing().getAllNodes():this.getRoot();"inline-block"==e?t.setInlineBlock():t.css("display",e)}},selectable:{ini:!1,action:function(e){this.getRoot().setSelectable(!!e)}}}),this.setDataModel(t),xui.UI.$cache_css_before+=xui.UI.buildCSSText({".xui-css-viewport":{"-webkit-text-size-adjust":"100%","-ms-text-size-adjust":"100%","-ms-overflow-style":"scrollbar","-webkit-tap-highlight-color":"transparent","font-size":"15px"},".xui-css-viewport, .xui-css-viewport body":{height:"100%",border:"0 none",margin:"0",padding:"0"},".xui-css-viewport body":{"font-size":"1rem"},"@-ms-viewport":{width:"device-width"},".xui-ui-draggable":{},".xui-inline-block":{display:xui.$inlineBlock,zoom:xui.browser.ie?1:null},".xui-ui-input":{background:"#fff"},".xui-ui-shadow-input":{"-moz-box-shadow":"inset 2px 2px 2px #EEEEEE","-webkit-box-shadow":"inset 2px 2px 2px #EEEEEE","box-shadow":"inset 2px 2px 2px #EEEEEE"},".xui-ui-shadow":{"-moz-box-shadow":"2px 2px 4px #CCC","-webkit-box-shadow":"2px 2px 4px #CCC","box-shadow":"2px 2px 4px #CCC","-ms-filter":xui.browser.ie&&8==xui.browser.ver?"progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#9f9f9f')":null,filter:xui.browser.ie&&xui.browser.ver<=8?"progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#9f9f9f')":null},".xui-ui-shadow-r":{"-moz-box-shadow":"1px 0  1px #CCC","-webkit-box-shadow":"1px 0  1px #CCC","box-shadow":"1px 0  1px #CCC","z-index":10},".xui-ui-shadow-b":{"-moz-box-shadow":"0 1px 1px #CCC","-webkit-box-shadow":"0 1px 1px #CCC","box-shadow":"0 1px 1px #CCC","z-index":10},".xui-ui-image":{"vertical-align":"middle",width:"1.3333333333333333em",height:"1.3333333333333333em","background-repeat":"no-repeat"},".xui-uicmd-none, .xui-display-none":{display:"none"},".xui-uitembg":{padding:".25em .5em","background-color":"transparent",border:"solid 1px transparent"},".xui-uitembg-hover":{$order:1,"background-color":"#E0E0E0","border-color":"#CDCDCD"},".xui-uitembg-active":{$order:2,"background-color":"#CDCDCD","border-color":"#B6B6B6"},".xui-uitembg-checked":{$order:3,"background-color":"#CDCDCD","border-color":"#B6B6B6"},".xui-uicell":{"background-color":"#F9F9FB"},".xui-uicell-hover":{$order:1,"background-color":"#d9e8fb"},".xui-uicell-alt":{$order:2,"background-color":"#FDF8D2"},".xui-uicell-checked":{$order:3,"background-color":"#ABABAB",color:"#fff"},".xui-special-icon":{color:"#3393D2","text-shadow":"1px 1px 4px #ccc"},".xui-uibar-top, .xui-uibar-bottom, .xui-uibar-top-s, .xui-uibar-bottom-s":{position:"relative","vertical-align":"baseline"},".xui-uibar-top td, .xui-uibar-top-s td, .xui-uibar-bottom td, .xui-uibar-bottom-s td":{},".xui-uibar-top":{},".xui-uibar-top .xui-uibar-tdl":{$order:1,position:"absolute",width:"12px",left:0,top:0,height:"100%"},".xui-uibar-top .xui-uibar-tdm":{$order:1,position:"absolute",top:0,left:"12px",right:"12px",height:"100%",width:xui.browser.ie&&xui.browser.ver<=7?"expression((this.parentNode.offsetWidth - 24)+'px')":null},".xui-uibar-top .xui-uibar-tdr":{$order:1,position:"absolute",width:"12px",top:0,right:0,height:"100%"},".xui-uibar-top .xui-uibar-tdlt":{$order:1,position:"absolute",width:"12px",left:0,top:0,height:"1.5em"},".xui-uibar-top .xui-uibar-tdmt":{$order:1,position:"absolute",top:0,left:0,right:0,height:"1.5em",width:xui.browser.ie&&xui.browser.ver<=7?"expression((this.parentNode.offsetWidth)+'px')":null},".xui-uibar-top .xui-uibar-tdrt":{$order:1,position:"absolute",width:"12px",right:0,top:0,height:"1.5em"},".xui-uibar-focus, .xui-uibar-top-focus .xui-uibar-tdl, .xui-uibar-top-focus .xui-uibar-tdm, .xui-uibar-top-focus .xui-uibar-tdr":{"background-color":"#B6B6B6"},".xui-uibar-top-focus .xuifont, .xui-uibar-top-focus .xuicon, .xui-uibar-top-focus .xui-uicaption":{},".xui-uibar-top .xui-uibar-cmdl":{overflow:"hidden",position:"relative",padding:".75em 0 .5em .5em","white-space":"nowrap"},".xui-uibar-top2 .xui-uibar-cmdr":{position:"absolute",top:"-.334em",right:"0","text-align":"right"},".xui-uibar-top .xui-uibar-cmdr":{position:"absolute",top:".75em",right:".5em","text-align":"right"},".xui-uibar-top .xui-uibar-tdb":{position:"relative",display:"none",margin:".16667em .16667em 0 .16667em"},".xui-uicon-main":{position:"relative","padding-left":".3333em","z-index":1,overflow:"visible"},".xui-uicon-maini":{"padding-right":".3333em"},".xui-uibar-bottom":{padding:"3px 0"},".xui-uibar-bottom .xui-uibar-tdl":{$order:1,position:"absolute",width:"12px",left:0,bottom:0,height:"100%"},".xui-uibar-bottom .xui-uibar-tdm":{$order:1,position:"absolute",bottom:0,left:"12px",right:"12px",height:"100%",width:xui.browser.ie&&xui.browser.ver<=7?"expression((this.parentNode.offsetWidth - 24)+'px')":null},".xui-uibar-bottom .xui-uibar-tdr":{$order:1,position:"absolute",width:"12px",right:0,bottom:0,height:"100%"},".xui-uibar-top-s, .xui-uibar-bottom-s, .xui-uibar-top-s .xui-uibar-t":{$order:3,height:"5px"},".xui-uibar-top-s .xui-uibar-tdl":{$order:3,position:"absolute",width:"12px",left:0,top:0,height:"100%"},".xui-uibar-top-s .xui-uibar-tdm":{$order:3,position:"absolute",top:0,left:"12px",right:"12px",height:"100%",width:xui.browser.ie&&xui.browser.ver<=7?"expression((this.parentNode.offsetWidth - 24)+'px')":null},".xui-uibar-top-s .xui-uibar-tdr":{$order:3,position:"absolute",width:"12px",top:0,right:0,height:"100%"},".xui-uibar-top-s .xui-uibar-cmdl":{$order:3,display:"none"},".xui-uibar-top-s .xui-uibar-cmdr":{$order:3,display:"none"},".xui-uibar-bottom-s .xui-uibar-tdl":{$order:3,position:"absolute",width:"12px",left:0,bottom:0,height:"100%"},".xui-uibar-bottom-s .xui-uibar-tdm":{$order:3,position:"absolute",bottom:0,left:"12px",right:"12px",height:"100%",width:xui.browser.ie&&xui.browser.ver<=7?"expression((this.parentNode.offsetWidth - 24)+'px')":null},".xui-uibar-bottom-s .xui-uibar-tdr":{$order:3,position:"absolute",width:"12px",right:0,bottom:0,height:"100%"}})+xui.UI.buildCSSText({".xui-ui-unselectable":{$order:0,"-moz-user-select":xui.browser.gek?"-moz-none":null,"-khtml-user-select":xui.browser.kde?"none":null,"-webkit-user-select":xui.browser.kde?"none":null,"-o-user-select":xui.browser.opr?"none":null,"-ms-user-select":xui.browser.ie||xui.browser.newie?"none":null,"user-select":"none","touch-action":"none"},".xui-ui-selectable":{$order:1,"-moz-user-select":xui.browser.gek?"text":null,"-khtml-user-select":xui.browser.kde?"text":null,"-webkit-user-select":xui.browser.kde?"text":null,"-o-user-select":xui.browser.opr?"text":null,"-ms-user-select":xui.browser.ie||xui.browser.newie?"text":null,"user-select":"text","touch-action":"auto"},".xui-uiw-shell":{display:xui.$inlineBlock,zoom:xui.browser.ie&&xui.browser.ver<=7?1:null,border:0,padding:0,margin:0},".xui-uiw-frame":{$order:1,display:"block",position:"relative",border:0,padding:0,margin:0,width:"100%",height:"100%","-moz-box-flex":"1"},".xui-uiw-border":{$order:2,display:"block",position:"relative",border:0,padding:0,margin:0,left:0,top:0,width:"100%",height:"100%"}})+xui.UI.buildCSSText({".xui-uibase":{"background-color":"#FFFFFF"},".xui-uicontainer":{},".xui-uibar":{"background-color":"#E0E0E0"},".xui-uibar-hover":{$order:1,"background-color":"#CDCDCD"},".xui-uibar-active, .xui-uibar-checked, .xui-uibar-expand, .xui-uimenu-hover, .xui-uimenu-active":{$order:2,"background-color":"#ABABAB"},".xui-ui-ctrl-highlight, .xui-node-highlight, .xui-uibar-checked,  .xui-uibar-expand, .xui-uimenu-hover, .xui-uimenu-active":{$order:3,color:"#FFF"},".xui-ui-btn::-moz-focus-inner":{$order:3,padding:"0 !important",border:"0 none !important"},".xui-uigradient":{$order:4,border:"solid 1px #B6B6B6",color:"#333","text-shadow":"0px 1px 1px rgba(255,255,255,1)","text-decoration":"none","white-space":"nowrap","background-image_1":"linear-gradient(top,  #FFF 5%,  #CDCDCD 100%)","background-image_2":"-webkit-gradient(linear, 0% 0%, 0% 100%, from(0.05, #FFF), to(1, #CDCDCD))","background-image_3":"-webkit-linear-gradient(top,  #FFF 5%,  #CDCDCD 100%)","background-image_4":"-moz-linear-gradient(top,  #FFF 5%,  #CDCDCD 100%)","background-image_5":"-o-linear-gradient(top,  #FFF 5%,  #CDCDCD 100%)","background-image_6":"-ms-linear-gradient(top,  #FFF 5%,  #CDCDCD 100%)","-ms-filter":xui.browser.ie&&8==xui.browser.ver?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#CDCDCD', GradientType=0)":null,filter:xui.browser.ie&&xui.browser.ver<=9?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#CDCDCD', GradientType=0)":null},".xui-uigradient-hover, .xui-uigradient:hover":{$order:5,"background-image_1":"linear-gradient(top,  #FFF 5%,  #EEE 100%)","background-image_2":"-webkit-gradient(linear, 0% 0%, 0% 100%, from(0.05, #FFF), to(1, #EEE))","background-image_3":"-webkit-linear-gradient(top,  #FFF 5%,  #EEE 100%)","background-image_4":"-moz-linear-gradient(top,  #FFF 5%,  #EEE 100%)","background-image_5":"-o-linear-gradient(top,  #FFF 5%,  #EEE 100%)","background-image_6":"-ms-linear-gradient(top,  #FFF 5%,  #EEE 100%)","-ms-filter":xui.browser.ie&&8==xui.browser.ver?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#CDCDCD', GradientType=0)":null,filter:xui.browser.ie&&xui.browser.ver<=9?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#CDCDCD', GradientType=0)":null},".xui-uigradient-active, .xui-uigradient-checked, .xui-uigradient-expand, .xui-uigradient:active, .xui-uigradient-active:hover, .xui-uigradient-checked:hover, .xui-uigradient-expand:hover":{$order:6,"background-image_1":"linear-gradient(top,  #CDCDCD 5%,  #FFF)","background-image_2":"-webkit-gradient(linear, 0% 0%, 0% 100%, from(0.05, #CDCDCD), to(1, #FFF))","background-image_3":"-webkit-linear-gradient(top,  #CDCDCD 5%,  #FFF 100%)","background-image_4":"-moz-linear-gradient(top,  #CDCDCD 5%,  #FFF 100%)","background-image_5":"-o-linear-gradient(top,  #CDCDCD 5%,  #FFF 100%)","background-image_6":"-ms-linear-gradient(top,  #CDCDCD 5%,  #FFF 100%)","-ms-filter":xui.browser.ie&&8==xui.browser.ver?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#CDCDCD', endColorstr='#FFFFFF', GradientType=0)":null,filter:xui.browser.ie&&xui.browser.ver<=9?"progid:DXImageTransform.Microsoft.gradient(startColorstr='#CDCDCD', endColorstr='#FFFFFF', GradientType=0)":null},".xui-ui-btn":{$order:7,padding:".334em","white-space":"normal",cursor:"pointer",border:"solid 1px #B6B6B6",display:xui.$inlineBlock,"text-align":"center","line-height":"1",zoom:xui.browser.ie?1:null,width_1:xui.browser.ie&&xui.browser.ver<=7?"auto":null,overflow:xui.browser.ie&&xui.browser.ver<=7?"visible":null},".xui-ui-btn:hover, .xui-ui-btn-hover":{$order:8,"border-color":"#B5B5B5"},".xui-uiborder-l":{"border-left-style":"solid","border-left-width":"1px","border-left-color":"#F6F6F6"},".xui-uiborder-r":{"border-right-style":"solid","border-right-width":"1px","border-right-color":"#B6B6B6"},".xui-uiborder-t":{"border-top-style":"solid","border-top-width":"1px","border-top-color":"#F6F6F6"},".xui-uiborder-b, .xui-uitem-split":{"border-bottom-style":"solid","border-bottom-width":"1px","border-bottom-color":"#B6B6B6"},".xui-uiborder-nob":{$order:1,"border-bottom-width":0,"border-bottom-style":"none"},".xui-uiborder-hidden":{border:"solid 1px transparent",background:"none"},".xui-uiborder-hidden-active, .xui-uiborder-hidden-checked":{background:"#efefef"},".xui-uiborder-flat":{border:"solid 1px #B6B6B6"},".xui-uiborder-outset":{$order:8,border:"solid 1px","border-color":"#F6F6F6 #B6B6B6 #B6B6B6 #F6F6F6"},".xui-uiborder-inset, .xui-uiborder-hidden-active, .xui-uiborder-hidden-checked":{$order:10,border:"solid 1px","border-color":"#B6B6B6 #F6F6F6 #F6F6F6 #B6B6B6"},".xui-uiborder-dark, .xui-uiborder-flat-hover":{"border-color":"#B6B6B6"},".xui-uiborder-light, .xui-uiborder-hidden-hover":{"border-color":"#efefef"},".xui-uiborder-radius":{$order:11,"border-radius":"3px","-moz-border-radius":"3px","-webkit-border-radius":"3px","-o-border-radius":"3px","-ms-border-radius":"3px","-khtml-border-radius":"3px"},".xui-uiborder-radius-big":{$order:11,"border-radius":"6px","-moz-border-radius":"6px","-webkit-border-radius":"6px","-o-border-radius":"6px","-ms-border-radius":"6px","-khtml-border-radius":"6px"},".xui-uiborder-radius-tl":{$order:12,"border-top-left-radius":"3px","-moz-border-top-left-radius":"3px","-webkit-border-top-left-radius":"3px","-o-border-top-left-radius":"3px","-ms-border-top-left-radius":"3px","-khtml-border-top-left-radius":"3px"},".xui-uiborder-radius-tr":{$order:12,"border-top-right-radius":"3px","-moz-border-top-right-radius":"3px","-webkit-border-top-right-radius":"3px","-o-border-top-right-radius":"3px","-ms-border-top-right-radius":"3px","-khtml-border-top-right-radius":"3px"},".xui-uiborder-radius-br":{$order:12,"border-bottom-right-radius":"3px","-moz-border-bottom-right--radius":"3px","-webkit-border-bottom-right--radius":"3px","-o-border-bottom-right--radius":"3px","-ms-border-bottom-right--radius":"3px","-khtml-border-bottom-right--radius":"3px"},".xui-uiborder-radius-bl":{$order:12,"border-bottom-left-radius":"3px","-moz-border-bottom-left-radius":"3px","-webkit-border-bottom-left-radius":"3px","-o-border-bottom-left-radius":"3px","-ms-border-bottom-left-radius":"3px","-khtml-border-bottom-left-radius":"3px"},".xui-uiborder-radius-big-tl":{$order:13,"border-top-left-radius":"6px","-moz-border-top-left-radius":"6px","-webkit-border-top-left-radius":"6px","-o-border-top-left-radius":"6px","-ms-border-top-left-radius":"6px","-khtml-border-top-left-radius":"6px"},".xui-uiborder-radius-big-tr":{$order:13,"border-top-right-radius":"6px","-moz-border-top-right-radius":"6px","-webkit-border-top-right-radius":"6px","-o-border-top-right-radius":"6px","-ms-border-top-right-radius":"6px","-khtml-border-top-right-radius":"6px"},".xui-uiborder-radius-big-br":{$order:13,"border-bottom-right-radius":"6px","-moz-border-bottom-right--radius":"6px","-webkit-border-bottom-right--radius":"6px","-o-border-bottom-right--radius":"6px","-ms-border-bottom-right--radius":"6px","-khtml-border-bottom-right--radius":"6px"},".xui-uiborder-radius-big-bl":{$order:13,"border-bottom-left-radius":"6px","-moz-border-bottom-left-radius":"6px","-webkit-border-bottom-left-radius":"6px","-o-border-bottom-left-radius":"6px","-ms-border-bottom-left-radius":"6px","-khtml-border-bottom-left-radius":"6px"},".xui-uiborder-noradius":{$order:15,"border-radius":"0 !important","-moz-border-radius":"0 !important","-webkit-border-radius":"0 !important","-o-border-radius":"0 !important","-ms-border-radius":"0 !important","-khtml-border-radius":"0 !important"},".xui-uiborder-noradius-l":{$order:15,"border-top-left-radius":"0 !important","-moz-border-top-left-radius":"0 !important","-webkit-border-top-left-radius":"0 !important","-o-border-top-left-radius":"0 !important","-ms-border-top-left-radius":"0 !important","-khtml-border-top-left-radius":"0 !important","border-bottom-left-radius":"0 !important","-moz-border-bottom-left-radius":"0 !important","-webkit-border-bottom-left-radius":"0 !important","-o-border-bottom-left-radius":"0 !important","-ms-border-bottom-left-radius":"0 !important","-khtml-border-bottom-left-radius":"0 !important"},".xui-uiborder-noradius-r":{$order:15,"border-top-right-radius":"0 !important","-moz-border-top-right-radius":"0 !important","-webkit-border-top-right-radius":"0 !important","-o-border-top-right-radius":"0 !important","-ms-border-top-right-radius":"0 !important","-khtml-border-top-right-radius":"0 !important","border-bottom-right-radius":"0 !important","-moz-border-bottom-right-radius":"0 !important","-webkit-border-bottom-right-radius":"0 !important","-o-border-bottom-right-radius":"0 !important","-ms-border-bottom-right-radius":"0 !important","-khtml-border-bottom-right-radius":"0 !important"},".xui-uiborder-noradius-t":{$order:15,"border-top-left-radius":"0 !important","-moz-border-top-left-radius":"0 !important","-webkit-border-top-left-radius":"0 !important","-o-border-top-left-radius":"0 !important","-ms-border-top-left-radius":"0 !important","-khtml-border-top-left-radius":"0 !important","border-top-right-radius":"0 !important","-moz-border-top-right-radius":"0 !important","-webkit-border-top-right-radius":"0 !important","-o-border-top-right-radius":"0 !important","-ms-border-top-right-radius":"0 !important","-khtml-border-top-right-radius":"0 !important"},".xui-uiborder-noradius-b":{$order:15,"border-bottom-left-radius":"0 !important","-moz-border-bottom-left-radius":"0 !important","-webkit-border-bottom-left-radius":"0 !important","-o-border-bottom-left-radius":"0 !important","-ms-border-bottom-left-radius":"0 !important","-khtml-border-bottom-left-radius":"0 !important","border-bottom-right-radius":"0 !important","-moz-border-bottom-right-radius":"0 !important","-webkit-border-bottom-right-radius":"0 !important","-o-border-bottom-right-radius":"0 !important","-ms-border-bottom-right-radius":"0 !important","-khtml-border-bottom-right-radius":"0 !important"},".xui-ui-noshadow, .xui-ui-noshadow .xui-ui-shadow-input, .xui-ui-noshadow .xui-ui-shadow, .xui-ui-noshadow .xui-ui-shadow-b, .xui-ui-noshadow .xui-ui-shadow-r,  .xui-ui-disabled .xui-ui-shadow-input,  .xui-ui-readonly .xui-ui-shadow-input,  .xui-ui-inputreadonly .xui-ui-shadow-input":{$order:15,"-moz-box-shadow":"none !important","-webkit-box-shadow":"none !important","box-shadow":"none !important"},".xui-uiborder-circle":{$order:16,"border-radius":"50%","-moz-border-radius":"50%","-webkit-border-radius":"50%","-o-border-radius":"50%","-ms-border-radius":"50%","-khtml-border-radius":"50%"},".xui-uiflag":{$order:16,"border-radius":"50%","-moz-border-radius":"50%","-webkit-border-radius":"50%","-o-border-radius":"50%","-ms-border-radius":"50%","-khtml-border-radius":"50%",top:"-.5em",right:"-.5em",width:xui.browser.contentBox?"1em":"1.625em",height:xui.browser.contentBox?"1em":"1.625em","line-height":xui.browser.contentBox?"1em":"1.625em",padding:".1667em","background-color":"#eb6e1a",color:"#fff !important",overflow:"hidden","text-align":"center"},".xui-uiflag-1":{},".xui-uiflag-2":{$order:17,top:"-1.5em",right:"-1.5em",width:xui.browser.contentBox?"2em":"2.625em",height:xui.browser.contentBox?"2em":"2.625em","line-height":xui.browser.contentBox?"2em":"2.625em",padding:".5em"},".xui-uiflag-3":{$order:18,top:"-2em",right:"-2em",width:xui.browser.contentBox?"3em":"3.625em",height:xui.browser.contentBox?"3em":"3.625em","line-height":xui.browser.contentBox?"3em":"3.625em",padding:".5em"},".xui-uiflag-4":{$order:18,top:"-2.5em",right:"-2.5em",width:xui.browser.contentBox?"4em":"4.625em",height:xui.browser.contentBox?"4em":"4.625em","line-height":xui.browser.contentBox?"4em":"4.625em",padding:".5em"},".xui-uiborder-none":{$order:20,border:"none"},".xui-uisb":{position:"absolute"},".xui-uisb-none":{display:"none"},".xui-uisb-left":{left:0,top:0,width:"3em",height:"100%"},".xui-uisb-right":{top:0,right:0,width:"3em",height:"100%"},".xui-uisb-top":{left:0,top:0,width:"100%",height:"3em"},".xui-uisb-bottom":{left:0,bottom:0,width:"100%",height:"3em"},".xui-uisbbtn":{position:"absolute",cursor:"pointer","z-index":1,width:"1em",height:"1em"},".xui-uisb-left .xui-uisbbtn":{left:0,top:0},".xui-uisb-right .xui-uisbbtn":{right:0,top:0},".xui-uisb-top .xui-uisbbtn":{right:0,bottom:0},".xui-uisb-bottom .xui-uisbbtn":{right:0,top:0},".xui-uisbcap":{position:"relative","text-align":"center",width:"100%",height:"100%"},".xui-uisb-left .xui-uisbcap, .xui-uisb-right .xui-uisbcap":{"writing-mode":"tb-rl",filter:"flipv fliph"},".xui-ltag-cmds":{margin:0,padding:0,"vertical-align":"middle"},".xui-rtag-cmds":{margin:0,padding:0,"vertical-align":"middle"},".xui-tag-cmd":{margin:"0 .125em",padding:".1667em","vertical-align":"middle"},".xui-inline-object":{"vertical-align":"middle",margin:"0 .16666667em"}}),xui.UI.$cache_css_after+=xui.UI.buildCSSText({".xui-css-innerimage":{"vertical-align":"middle"},".xui-uitem-split":{display:"block",position:"relative",overflow:"visible","white-space":"nowrap",margin:"2px 0",padding:0},".xui-css-noscroll, .xui-css-noscroll body":{overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"},".xui-css-noscrollx, .xui-css-noscroll body":{"overflow-x":"hidden"},".xui-css-noscrolly, .xui-css-noscroll body":{"overflow-y":"hidden"},".xui-css-dockparent":{overflow:"hidden"},".xui-ui-dirty":{$order:1,"background-image":"url(data:image/gif;base64,R0lGODlhBwAHAPcAAAAAADDSEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAHAAcAAAgYAAMIHPhvoMB/BQkiVLgwAMKHDh9KnBgQADs=)","background-repeat":"no-repeat","background-position":"left top"},".xui-float-clear":{clear:"both"},".xui-float-left":{float:"left"},".xui-float-right":{float:"right"},".xui-ui-ellipsis":{"max-width":"100%","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"},".xui-ui-ruler":{width:0,height:"1.22em","vertical-align":"middle"},".xui-nodatauri .xui-ui-dirty":{$order:2,"background-image":xui.UI.$oldBg("dirtymark.gif","no-repeat left top")},".xui-ui-ctrl-readonly, .xui-node-readonly, input[readonly], textarea[readonly], input:read-only, textarea:read-only, .xui-ui-readonly, .xui-ui-itemreadonly, .xui-ui-readonly .xui-node, .xui-ui-itemreadonly .xui-node, xui-ui-inputreadonly input, xui-ui-inputreadonly textarea":{$order:2,color:"#666666 !important"},"button::-moz-focus-inner, input::-moz-focus-inner":{padding:0,border:0},".xui-ui-ctrl-disabled, .xui-node-disabled, button:disabled, a:disabled, input:disabled, textarea:disabled,  .xui-ui-disabled,  .xui-ui-itemdisabled,  .xui-ui-disabled .xui-node, .xui-ui-itemdisabled .xui-node, .xui-uicell-disabled, .xui-uicell-disabled .xui-node":{$order:2,cursor:"not-allowed",color:"#808080 !important"},".xui-ui-ctrl-disabled, .xui-node-disabled, button:disabled, a:disabled, input:disabled, textarea:disabled,  .xui-ui-disabled input,.xui-ui-disabled textarea, .xui-ui-itemdisabled input, .xui-ui-itemdisabled textarea, .xui-uicell-disabled":{$order:3,"background-color":"#eee !important"},".xui-ui-invalid, .xui-ui-invalid .xui-node":{$order:1,"background-color":"#FFEBCD !important"},".xui-item-row":{display:"block","white-space":"nowrap"},".xui-item-cell":{display:xui.$inlineBlock,zoom:xui.browser.ie?1:null,"white-space":"normal"},".xui-required":{color:"#ff0000 !important"},".xui-alert":{"background-color":"#ff6600 !important"},".xui-uisyle-mobile":{"background-clip":"padding-box",border:"10px solid #333333","border-radius":"12px","box-shadow":"0 0 15px rgba(0, 0, 0, 0.28), 0 1px 1px rgba(255, 255, 255, 0.45) inset, 0 0 2px rgba(255, 255, 255, 0.2) inset"},".xui-uisyle-mobile, .xui-uisyle-mobile *, .xui-cursor-touch, .xui-cursor-touch *":{cursor:"url("+xui.ini.img_touchcur+") 8 8,auto!important"},".xui-icon-loading":{$order:7,width:xui.browser.ie&&xui.browser.ver<=8?"1em":null,height:xui.browser.ie&&xui.browser.ver<=8?"1em":null,"background-image":xui.browser.ie&&xui.browser.ver<10?"url("+xui.ini.img_busy+")":null,"background-repeat":xui.browser.ie&&xui.browser.ver<10?"no-repeat":null,"background-position":xui.browser.ie&&xui.browser.ver<10?"center center":null},".xui-icon-loading:before":{$order:7,visibility:xui.browser.ie&&xui.browser.ver<10?"hidden":null},".xui-load-error":{width:xui.browser.ie&&xui.browser.ver<=8?"1em":null,height:xui.browser.ie&&xui.browser.ver<=8?"1em":null,"background-image":xui.browser.ie&&xui.browser.ver<=8?"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAAJdnBBZwAAABAAAAAQAFzGrcMAAADdSURBVCjPfdGxTsJQGIbhpw20GgN1IZQBDQnGxvu/FEU3IjEBB5SKUsGkdTiCYeGb/pw803uixum1iMJ1KZdp40dpYQWNqBERuXItRY1YrPJspmm0wNAYlZkvdPR1jTVmtJAZgUhliaWFQs9IqYwxkKhUUnf64NuTD6kBMTK8mKgkigNZaGQBJGqfVh6PyFotCWC/NxMbiUL+/xhjJ9Y5kEriVk9HbBdAKZI7A+8ebLQVhigDmNvqKg7k3kZbamceOpSmbvSkXq1xIfSfKh2lPlf/pWa7Tx3A6c86vV+v4FNOkQDWwAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMC0wMi0xMVQxMTo1MDowOC0wNjowMNYQZfsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMDYtMDUtMDVUMTM6MjI6NDAtMDU6MDC/5P4aAAAAAElFTkSuQmCC)":null,"background-repeat":xui.browser.ie&&xui.browser.ver<=8?"no-repeat":null,"background-position":xui.browser.ie&&xui.browser.ver<=8?"center center":null},".xui-load-error:before":{$order:7,visibility:xui.browser.ie&&xui.browser.ver<=8?"hidden":null},".xui-ui-clear-bg":{$order:10,border:"none",background:"none"},".xui-ui-clear-size":{$order:11,border:"0",padding:"0",margin:"0"},".xui-ui-hidden, .xui-ui-hidden *":{$order:12,visibility:"hidden"}})},$End:function(){var e={},t=this.$Keys;xui.filter(this.getAppearance(),(function(i,r){for(var o,n=r.split(/\s*,\s*/),a=n.length-1;a>=0;a--)if((o=n[a].match(/[A-Z][A-Z0-9]*/g))&&o.length)for(var s=0,u=o.length;s<u;s++)if(!t[o[s]]){n.splice(a,1);break}n.length&&(e[n.join(", ")]=i)})),this.setAppearance(e),xui.UI.$cache_css_before+=this.buildCSSText(this.$Appearances)},Static:{$cache_css_before:"",$cache_css_after:"",$css_tag_dirty:"xui-ui-dirty",$css_tag_invalid:"xui-ui-invalid",$tag_left:"{",$tag_right:"}",$tag_subId:"_serialId",$tag_subId_c:"_serialId_c",$x01:/\x01/gim,$x01r:/ \x01 /gim,$tag_special:"",$ID:"id",$DOMID:"domid",$CLS:"cls",$MODULECLS:"modulecls",$TAGCLASS:"tagcls",$childTag:"\x3c!--{id}--\x3e",$ps:{left:1,top:1,width:1,height:1,right:1,bottom:1},objectProp:{},$toDom:function(e,t,i){if(!1===i)return xui.str.toDom(t);var r=xui.Dom.getEmptyDiv(e.$inDesign).get(0),o=[],n=r.style;n.position="relative",n.display="none",r.innerHTML=t,this.$addEventsHandler(e,r);for(var a=0,s=r.childNodes,u=s.length;a<u;a++)xui.$registerNode(s[a]),o[o.length]=s[a].$xid;return n.display="",r=null,xui(o,!1)},$evtsindesign:{onload:1,onerror:1,onscroll:1,onunload:1,onsize:1,onmousedown:1,onmouseup:1},_handleEventConf:function(e,t){},$addEventsHandler:function(e,t,i){var r,o,n,a,s,u,l,d=xui.$cache.UIKeyMapEvents,c=xui.Event,p=c._eventHandler,h=this.$evtsindesign,f=c.$eventhandler,x=xui.toArr(t.getElementsByTagName("*"));if(i&&x.push(t),o=x.length)for(r=0;r<o;r++)if(1==(t=x[r]).nodeType&&(s=t.id)&&(u=d[s]||d[s.substr(0,s.indexOf(":"))]))for(n in l=(l=xui.$registerNode(t)).eHandlers||(l.eHandlers={}),u)e.$inDesign&&!h[n]||(l[n]=u[n],(a=p[n])&&(l[a]=u[n],c._addEventListener(t,a,u[n]),xui.browser.isTouch&&"onmousedown"==a&&(l.onxuitouchdown=f,c._addEventListener(t,"xuitouchdown",f))));x.length=0,t=u=null},setDftProp:function(e){return this.__resetDftProp=e,this},getFromDom:function(e){if(e=xui.UIProfile.getFromDom(e))return e.boxing()},_ensureValues:function(e){var t,i=[],r=0,o=0,n=this.KEY,a=xui.$cache.profileMap,s=xui.getNodeData;for(e["xui.absBox"]&&(e=e._nodes);t=e[r++];)(t.box&&t.box[n]||(t=a[s(t.renderId?t.renderId:t,["element","id"])])&&t.box&&t.box[n])&&(i[o++]=t);return i.length<=1?i:this._unique(i)},__gc:function(){var e=this,t=e.$key,i=xui.$cache;xui.breakO([i.template[t],i.reclaimId[t],e._cache,e._idCache,e.$DataModel,e.$Templates,e.$Behaviors,e],2),delete xui.absBox.$type[t.replace("xui.UI.","")],delete xui.absBox.$type[t],xui.filter(xui.$cache.UIKeyMapEvents,(function(e,i){return!(i==t||0==i.indexOf(t+"-"))})),xui.Class.__gc(t)},_pickSerialId:function(){var e=xui.$cache.reclaimId[this.$key];return e&&e[0]?e.pop():this._ctrlId.next()},$oldBg:function(e,t,i,r){return function(i){return"url("+xui.ini.path+"appearance/_oldbrowser/"+e+") "+(t||"")}},$ieOldBg:function(e){return function(t){return'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+xui.ini.path+"appearance/_oldbrowser/"+e+'",sizingMethod="crop")'}},$doTemplate:function(e,t,i,r,o,n,a){var s,u,l,d=xui.UI.$doTemplate,c=xui.UI.$x01,p=xui.isArr(i),h=t[r||""],f=!o;if(o=o||[],r=a||r,p){"function"!=typeof h&&(h=d);for(var x=0;(u=i[x++])&&!1!==h(e,t,u,r,o,x););}else if(u=i.object)o[o.length]=u.toHtml();else if("function"==typeof h)(u=h(e,t,i,r,o))&&(r=u);else{r=r?r+".":"";for(var g=h[0],m=h[1],b=(x=0,g.length);x<b;x++)(l=m[x])?l in i&&(u=i[l],"_fi_"==l.substr(0,4)&&(!xui.__iefix2||"_the_next_is_fonticon_"!=g[x-1]&&"_fi_"!=l?"_fi_"==l&&(u=""):u=(u=xui.str.trim(u).split(/\s+/).pop())in xui.__iefix2?xui.__iefix2[u]:""),t[s=r+l]&&u?d(e,t,u,s,o):o[o.length]=u===undefined||null===u||NaN===u?"":"string"==typeof u?u.replace(c,"  "):u):o[o.length]=g[x]===undefined||null===g[x]||NaN===g[x]?"":g[x]}if(f)return o.join("")},$buildTemplate:function(e,t,i,r,o){if(t&&"text"==(t.tagName+"").toLowerCase())o[o.length]=t.text;else{var n,a,s,u,l,d,c=arguments.callee,p=(e.behavior&&(i?e.behavior[i]:e.behavior),e.properties),h=c.map1||(c.map1={tagName:1,text:1}),f=c.map2||(c.map2={image:1,input:1,br:1,meta:1,hr:1,abbr:1,embed:1}),x=(c.map3||(c.map3={input:1,textarea:1,pre:1,code:1}),c.r2||(c.r2=/[a-z]/)),g=(c.r3||(c.r3=/^(on|before|after)/),c.r7||(c.r7=/([^{}]*)\{([\w]+)\}([^{}]*)/g)),m=!1,b=xui.UI,v=b.$tag_special;t||(t=e.template),d=i?e.keys[i]:e.key,t.tagName||(t.tagName="span"),null!==t.id?t.id=i?d+":"+b.$ID+":"+b.$tag_left+(t.$customId?b.$tag_subId_c:b.$tag_subId)+b.$tag_right:b.$DOMID:delete t.id,null!==t.className&&(s=t.className||"",t._NativeElement?t.class=s+" "+(d==e.key?xui.browser.ie&&xui.browser.ver<10?"":"{_selectable} ":""):(n=b.$CLS+(i?"-"+i.toLowerCase():""),l="button"==(u="{"!=t.tagName.charAt(0)?t.tagName.toLowerCase():t.tagName)||"input"==u||"textarea"==u||"select"==u||"keygen"==u?"xui-ui-reset":"",t.class="xui-node"+(l?" "+l:"")+" xui-node-"+u+(n?" "+n:"")+(s?" "+s:"")+(t.$fonticon?" "+t.$fonticon:"")+(d==e.key?" xui-ui-ctrl "+(xui.browser.ie&&xui.browser.ver<10?"":"{_selectable} "):"")),t.class+=" "+v+(i||"KEY")+"_CT"+v+" "+v+(i||"KEY")+"_CC"+v+" "+b.$MODULECLS+" "+b.$TAGCLASS+(p._tagClass?" "+p._tagClass:"")+" xui-custom"),delete t.className,t.style=(t.style?t.style+";":"")+v+(i||"KEY")+"_CS"+v;var y=[],A={},_="{"!=t.tagName.charAt(0)?t.tagName.toLowerCase():t.tagName,w=t.text,C=xui.absObj.$specialChars;for(var I in t)t[I]&&(C[I.charAt(0)]||h[I]||(a=t[I],x.test(I)?A[I]=a:"object"==typeof a&&(a.$order||(a.$order=0),a.$key=I,y[y.length]=a)));for(var I in xui.arr.stableSort(y,(function(e,t){return(e=e.$order||0)>(t=t.$order||0)?1:e==t?0:-1})),o||(m=!0,o=[]),o[o.length]="<"+_+" ",A)A[I]&&(o[o.length]=I+'="'+A[I]+'" ');null!==t.className&&(t.className=s),delete t.class,o[o.length]=v+(i||"KEY")+"_CA"+v,o[o.length]=">",!f[_]&&w&&(o[o.length]=w),t.$fonticon&&xui.__iefix2&&(t.$fonticon=xui.str.trim(t.$fonticon),xui.__iefix2[t.$fonticon]?o[o.length]=xui.__iefix2[t.$fonticon]:/^\s*\{\s*_fi_[\w\s]+\}\s*$/.test(t.$fonticon)&&(o[o.length]="{_the_next_is_fonticon_}"+t.$fonticon)),delete t.$fonticon,I=0;for(var E=y.length;I<E;)c(e,a=y[I++],a.$key,r,o);if(f[_]||(o[o.length]="</"+_+">"),m){var S=r[0],D=r[1],k=o.join(""),$=!1;k.replace(g,(function(e,t,i,r){return t&&(S[S.length]=t),D[S.length]=S[S.length]=i,r&&(S[S.length]=r),$=!0,""})),$||(S[0]=k)}}},_rpt:function(e,t){var i=arguments.callee,r=e.host,o=r&&r["xui.Module"]&&r.customStyle&&!xui.isEmpty(r.customStyle)?" xui-module-"+r.$xid:null,n=xui.UI,a=n.$tag_special,s=function(e,t,i){for(i in t="",e)t+=i+'="'+e[i]+'" ';return t},u=i._r||(i._r=new RegExp(a+"([0-9A-Z_]+)_C([CTA])"+a+"|"+a+"([\\w_\\-\\.]*)"+a,"img")),l={id:e.serialId,cls:e.getClass("KEY"),domid:e.$domId,modulecls:o,tagcls:e.tagcls||""},d={A:e.CA,C:e.CC,T:e._CT};return t.replace(u,(function(e,t,i,r){return l[r]||(d[i]?"A"==i?s(d[i][t]):d[i][t]||"":"")})).replace(n.$x01r,"")},_build:function(e,t){var i,r,o,n=xui.UI,a=[[],[]],s=this.KEY,u=xui.$cache.template,l=e._hash="b:"+(e.template._subid||"")+";!"+(e._exhash||"");if("string"==typeof e.theme){var d=e._CT={},c=e.key.replace(/\./g,"-").toLowerCase().replace("xui-ui","xui")+"-";xui.each(e.keys,(function(t,i){"$"!=i.charAt(0)&&(d[i]=c+e.theme+"-"+i.toLowerCase())}))}if(!(i=xui.get(u,[s,l]))){if(n.$buildTemplate(e,null,null,a),xui.set(u,[s,l,""],a),r=e.template.$submap)for(var p in r){if("function"!=typeof(o=r[p])){for(var h in a=[[],[]],o)"object"==typeof o[h]&&n.$buildTemplate(e,o[h],h,a);o=a}xui.set(u,[s,l,p],o)}i=xui.get(u,[s,l])}return i?this._rpt(e,n.$doTemplate(e,i,t)):""},_setDefaultBehavior:function(e){var t,i=this,r=arguments.callee,o=r._m||(r._m={"":1,KEY:1,$key:1}),n=r._f1||(r._f1=function(e,t,i){return function(r,o,n){var a,s,u,l,d=xui.use(n).id(),c=r.getSubId(d),p=r.properties;if(!p.disabled&&!p.readonly&&!((a=c&&(r.SubSerialIdMapItem&&r.SubSerialIdMapItem[c]||r.rowMap&&r.rowMap[c]))&&a.disabled||a&&a.readonly)){switch(typeof e){case"string":s=r.getSubNode(e,c)._get();break;case"function":u=[e];break;case"object":s=[],u=[];for(var h,f=0,x=e.length;f<x;f++)"string"==typeof(h=e[f])?s.push.apply(s,r.getSubNode(h,c)._get()):u.push(h)}if(s&&s.length){s=xui(s),l=r.boxing();var g="beforeHoverEffect:"+r.getUid(),m=g+"_";if(1==i){if("touchOnly"!=xui.browser.deviceType&&"mouseover"==t){if(!0===p.disableHoverEffect||a&&a.disableHoverEffect)return;if(p.disableHoverEffect&&new RegExp("\\b"+r.getKey(n,!0)+"\\b").test(p.disableHoverEffect||""))return;if(r.beforeHoverEffect&&!1===l.beforeHoverEffect(r,a,o,n,"mouseover"))return;var b=a||r,v=r._hoverItem;r._willHover=v?null:b,xui.resetRun.cancel(m),xui.resetRun(g,(function(){delete r._willHover,r.renderId&&b&&v!==b&&(r._hoverItem=b,r.$onHover&&r.$onHover(r,a,o,n,"mouseover"))}),100)}if("mousedown"==t){if(p.disableClickEffect||a&&a.disableClickEffect)return;if(r.$onClick&&0==r.$onClick(r,a,o,n,"mousedown"))return;if(r.beforeClickEffect&&!1===l.beforeClickEffect(r,a,o,n,"mousedown"))return}s.tagClass("-"+("touchOnly"!=xui.browser.deviceType&&"mouseover"==t?"hover":"mousedown"==t?"active":t))}else if("mouseup"==t){if(p.disableClickEffect||a&&a.disableClickEffect)return;if(r.beforeClickEffect&&!1===l.beforeClickEffect(r,a,o,n,"mouseup"))return;if(r.$onClick&&0==r.$onClick(r,a,o,n,"mouseup"))return;s.tagClass("-active",!1)}else{if(!0===p.disableHoverEffect||a&&a.disableHoverEffect)return;if(p.disableHoverEffect&&new RegExp("\\b"+r.getKey(n,!0)+"\\b").test(p.disableHoverEffect||""))return;if(r.beforeHoverEffect&&!1===l.beforeHoverEffect(r,a,o,n,"mouseout"))return;b=a||r,r._willHover==b?(delete r._willHover,xui.resetRun.cancel(g)):xui.resetRun(m,(function(){xui.resetRun.cancel(g),delete r._willHover,delete r._hoverItem,r.renderId&&b&&r.$onHover&&r.$onHover(r,a,o,n,"mouseout")}),200),s.tagClass("(-hover|-active)",!1)}}u&&u.length&&(xui.arr.each(u,(function(e){xui.tryF(e,[r],r)})),u.length=0)}}}),a={};xui.SC.get("xui.absContainer")||xui.Class("xui.absContainer","xui.absObj",{Instance:{addPanel:function(e,t,i){var r=xui.clone(xui.UI.Panel.$DataStruct,!0);xui.merge(r,e,"with"),xui.merge(r,{dock:"fill",tag:e.tag||e.id},"all");var o=new xui.UI.Panel(r),n=[];return this.append(o,i&&i.id),xui.arr.each(t,(function(e){n.push(e[0])})),o.append(xui.UI.pack(n,!1)),this},removePanel:function(){this.destroy(!0)},getPanelPara:function(){return xui.clone(this.get(0).properties,!0)},dumpContainer:function(e,t){return this.each((function(i){var r,o,n,a,s=i.box.$DataModel.valueSeparator||";",u=i.properties;"items"in u?xui.arr.each(u.items,(function(u){o=u.id,e&&!0!==e?(n=xui.isArr(e)?e:(e+"").split(s),r=-1!=xui.arr.indexOf(n,o)):r=1,r&&((a=i.boxing().getContainer(o))&&a.html("",!0,!1,t),"html"in u&&(u.html=""))})):((a=i.boxing().getContainer())&&a.html("",!0,!1,t),"html"in u&&(u.html=""))}))},getPanelChildren:function(){return this.get(0).children},getFormValues:function(e,t,i,r,o){var n={};return this.getFormElements(!1,t,i).each((function(t){var i,a=t.properties.name||t.alias,s=t.boxing(),u=s.getUIValue();e&&u+" "==s.getValue()+" "||(s.getCaption&&(r||o)?(o&&-1!=a.indexOf(":")&&(i=a.split(":")),i&&i[0]&&i[1]?(n[i[0]]=u,n[i[1]]=s.getCaption()):n[a]=r?{value:u,caption:s.getCaption()}:u):n[a.split(":")[0]]=u)})),n},setFormValues:function(e,t,i){return xui.isEmpty(e)||this.getFormElements(!1,t,i).each((function(t){var i,r,o=t.properties,n=t.boxing(),a=o.name||t.alias;"function"==typeof n.setCaption&&-1!=a.indexOf(":")&&(i=a.split(":"))&&i[0]&&i[1]&&(a=i[0],r=i[1]);var s=e[a],u=xui.isHash(s);"value"in o&&a in e&&n.setValue(u&&"value"in s?s.value:s,!0,"form"),"function"==typeof n.setCaption&&(r in e?n.setCaption(e[r],null,!0,"form"):u&&"caption"in s&&n.setCaption(s.caption,null,!0,"form"))})),this},getFormElements:function(e,t,i){var r=this.getChildren(t,!1!==i),o=xui.absValue.pack(r);if(xui.filter(o._nodes,(function(e){return e.box._isFormField?e.box._isFormField(e):!!xui.get(e,["properties","isFormField"])})),e){var n,a=[];return o.each((function(e,t){(n=e.boxing()).getUIValue()+" "!=n.getValue()+" "&&a.push(e)})),xui.absValue.pack(a)}return o},isDirtied:function(e,t){for(var i=this.getFormElements(!1,e,t).get(),r=0,o=i.length;r<o;r++){var n,a=i[r];if(a.box["xui.absValue"]&&(n=a.boxing()).getUIValue()+" "!=n.getValue()+" ")return!0}return!1},checkValid:function(e,t,i){var r=this,o=r.get(0),n=!0;return!!r.checkRequired(e,t,i)&&(r.getFormElements(!1,t,i).each((function(r){var a=r.properties,s=r.boxing();if(!s.checkValid(e,t,i)){if(!e)return o.beforeInputAlert&&!1===o.boxing().beforeInputAlert(o,r,"invalid")?xui.asyRun((function(){s.activate()})):xui.alert("$inline.invalid",xui.getRes("$inline.invalid2")+(a.labelCaption?" : "+a.labelCaption:""),(function(){r&&r.renderId&&s.activate()})),n=!1;n=!1}})),n)},checkRequired:function(e,t,i){var r=this.get(0),o=!0;return this.getFormElements(!1,t,i).each((function(t,i){var n=t.properties,a=t.boxing();if(n.required&&!(i=a.getUIValue())&&0!==i){if(!e)return r.beforeInputAlert&&!1===r.boxing().beforeInputAlert(r,t,"required")?xui.asyRun((function(){a.activate()})):xui.alert("$inline.required",xui.getRes("$inline.required2")+(n.labelCaption?" : "+n.labelCaption:""),(function(){t&&t.renderId&&a.activate()})),o=!1;o=!1}})),o},formClear:function(e,t){return this.each((function(i){i.boxing().getFormElements(!1,e,t).resetValue(null)}))},formReset:function(e,t){return this.each((function(i){i.properties;var r=i.boxing().getFormElements(!1,e,t);i.beforeFormReset&&!1===i.boxing().beforeFormReset(i,r,e,t)||(r.each((function(e,t){(t=e.properties.value)!==e.properties.$UIvalue&&e.boxing().resetValue(t)})),i.afterFormReset&&i.boxing().afterFormReset(i,r,e,t))}))},updateFormValues:function(e,t){this.getFormElements(!1,e,t).updateValue()},formSubmit:function(e,t,i,r,o){var n=this;if(e||n.checkValid(!1,t,i)){var a,s,u=n.get(0),l=u.properties,d=n.getFormValues(!1,t,i,r,o);u.beforeFormSubmit&&!1===u.boxing().beforeFormSubmit(u,d,t,i,r,o)||("Alert"==l.formTarget?(d=xui.stringify(d),xui.Coder&&xui.Coder.formatText&&(d=xui.Coder.formatText(d)),alert(d)):/^\s*\{[^}]+\}\s*$/.test(l.formTarget)?(a=xui.adjustVar(l.formTarget))(d):/^((\s*function\s*([\w$]+\s*)?\(\s*([\w$\s,]*)\s*\)\s*)(\{([^\{\}]*)\}))\s*$/.test(l.formTarget)?(a=xui.unserialize(l.formTarget))&&a(d):(xui.APICaller&&-1==xui.arr.indexOf(["_blank","_self","_parent","_top"],l.formTarget)&&(s=xui.APICaller.getFromName(l.formTarget)),s?(s.setQueryData(d,l.formDataPath),s.invoke()):xui.Dom.submit(l.formAction,d,l.formMethod,l.formTarget,l.formEnctype)),n.getFormElements(!1,t,i).updateValue(),u.afterFormSubmit&&u.boxing().afterFormSubmit(u,d,t,i,r,o))}},_e1:function(e,t,i,r,o){},_e2:function(e,t,i,r){},_e3:function(e,t,i,r){},_e4:function(e,t,i,r,o,n){},_e5:function(e,t,i){},_e6:function(e,t,i){},_e7:function(e,t,i){},_e8:function(e,t,i){}},Static:{$abstract:!0,DataModel:{dragKey:"",dropKeys:"",overflow:{ini:"touchOnly"==xui.browser.deviceType?"auto":undefined,combobox:["","visible","hidden","scroll","auto","overflow-x:hidden;overflow-y:auto","overflow-x:auto;overflow-y:hidden"],action:function(e){var t=this;xui.arr.each(t.box.$Behaviors.PanelKeys,(function(i){var r=t.getSubNode(i,!0);e&&-1!=e.indexOf(":")?xui.arr.each(e.split(/\s*;\s*/g),(function(e){var t=e.split(/\s*:\s*/g);t.length>1&&r.css(xui.str.trim(t[0]),xui.str.trim(t[1]||""))})):r.css("overflow",e||"")}))}},panelBgClr:{type:"color",ini:"",action:function(e){var t=this;xui.arr.each(t.box.$Behaviors.PanelKeys,(function(i){t.getSubNode(i,!0).css("background-color",e)}))}},panelBgImg:{format:"image",ini:"",action:function(e){var t=this;xui.arr.each(t.box.$Behaviors.PanelKeys,(function(i){t.getSubNode(i,!0).css("background-image",e?"url("+xui.adjustRes(e||"")+")":"")}))}},panelBgImgPos:{ini:"",combobox:["","top left","top center","top right","center left","center center","center right","bottom left","bottom center","bottom right","0% 0%","-0px -0px"],action:function(e){var t=this;xui.arr.each(t.box.$Behaviors.PanelKeys,(function(i){t.getSubNode(i,!0).css("background-position",e)}))}},panelBgImgRepeat:{ini:"",combobox:["","repeat","repeat-x","repeat-y","no-repeat"],action:function(e){var t=this;xui.arr.each(t.box.$Behaviors.PanelKeys,(function(i){t.getSubNode(i,!0).css("background-repeat",e)}))}},panelBgImgAttachment:{ini:"",combobox:["","scroll","fixed"],action:function(e){var t=this;xui.arr.each(t.box.$Behaviors.PanelKeys,(function(i){t.getSubNode(i,!0).css("background-attachment",e)}))}},conLayoutColumns:{ini:0,action:function(){this.adjustSize()}},conDockRelative:{hidden:!0,ini:!1,get:function(){return this.boxing().getConLayoutColumns()},set:function(e){return this.boxing().setConLayoutColumns(e?1:0)}},conDockPadding:{ini:{left:0,top:0,right:0,bottom:0},action:function(){this.boxing().adjustDock(!0)}},conDockSpacing:{ini:{width:0,height:0},action:function(){this.boxing().adjustDock(!0)}},conDockFlexFill:{ini:"",combobox:["none","width","height","both"],action:function(){this.boxing().adjustDock(!0)}},conDockStretch:{ini:"",combobox:["fixed","forward","rearward","stretch","0.25","0.33","0.5","0.25,0.5,0.25"],action:function(){this.boxing().adjustDock(!0)}},sandboxTheme:{ini:"",action:function(e,t,i,r,o){xui.UI._refreshSBTheme(this,e,r,o)}},formMethod:{ini:"get",listbox:["get","post"]},formTarget:{ini:"Alert",combobox:["Alert","_blank","_self","_parent","_top","[framename]","[APICaller]","function(d){xui.log(d)}"]},formDataPath:"",formAction:"",formEnctype:{ini:"application/x-www-form-urlencoded",listbox:["application/x-www-form-urlencoded","multipart/form-data","text/plain"]},readonly:{ini:!1,action:function(e){this.boxing().getChildren().each((function(t){var i=t.boxing();"function"==typeof i.setReadonly?i.setReadonly(e||!1):"function"==typeof i.setDisabled&&i.setDisabled(e||!1)}))}}}}});var s=xui.absContainer.prototype;e.HoverEffected&&(xui.each(e.HoverEffected,(function(i,r){t=o[r]?e:e[r]||(e[r]={}),i?(t.afterMouseover=n(i,"mouseover",1),t.afterMouseout=n(i,"mouseout",2)):t.afterMouseover=t.afterMouseout=null})),a.beforeHoverEffect=s._e1),e.ClickEffected&&(xui.each(e.ClickEffected,(function(i,r){t=o[r]?e:e[r]||(e[r]={}),i?(t.afterMousedown=n(i,"mousedown",1),t.afterMouseup=n(i,"mouseup",2)):t.afterMousedown=t.afterMouseup=null})),a.beforeClickEffect=s._e1),e.HotKeyAllowed&&(xui.merge(e,{beforeKeydown:function(e,t,i){if(e.onHotKeydown)return!1!==e.boxing().onHotKeydown(e,xui.Event.getKey(t),t,i)},beforeKeypress:function(e,t,i){if(e.onHotKeypress)return!1!==e.boxing().onHotKeypress(e,xui.Event.getKey(t),t,i)},beforeKeyup:function(e,t,i){if(e.onHotKeyup)return!1!==e.boxing().onHotKeyup(e,xui.Event.getKey(t),t,i)}}),a.onHotKeydown=a.onHotKeypress=a.onHotKeyup=s._e2),e.NavKeys&&(xui.each(e.NavKeys,(function(t,i){var r=arguments.callee,o=r.m1||(r.m1={KEY:1,$key:1});if(!o[i]){var n=r.m2||(r.m2={input:1,textarea:1}),a=r.m3||(r.m3={tab:1,enter:1,up:1,down:1,left:1,right:1}),s=r.m4||(r.m4={tab:1,up:1,down:1,left:1,right:1}),u=e[i]||(e[i]={});u.afterKeydown=null===t?null:function(e,t,i){var r=xui.Event.getKey(t),o=r.key,u=r.ctrlKey,l=r.shiftKey,d=r.altKey,c=!1,p=e._smartnav;if(p){var h=xui.use(i).get(0);if(n[r=h.tagName.toLowerCase()]){if(o&&"input"==r&&"text"!=h.type.toLowerCase()&&"password"!=h.type.toLowerCase())c=!0;else if(a[o]){var f=xui.use(i).caret(),x=xui.use(i).get(0).value;switch(o){case"up":/[\n\r]/.test(x.substr(0,f[0]))||(c=!0);break;case"left":l||!u&&(0!==f[0]||f[1]===x.length&&0!==f[1])||(c=!0);break;case"down":/[\n\r]/.test(x.substr(f[1],x.length))||(c=!0);break;case"right":l||!u&&(f[1]!==x.length||0===f[0]&&0!==f[1])||(c=!0);break;case"enter":("input"==r||d)&&(c=!0);break;case"tab":c=!0}}}else s[o]&&(c=!0);h=null}else c="tab"===o;if(c){if(e.beforeNextFocus&&!1===e.boxing().beforeNextFocus(e,t,r.shiftKey,i)){switch(r.key){case"tab":case"enter":e.onHotKeydown&&e.boxing().onHotKeydown(e,xui.Event.getKey(t),t,i);case"esc":e.onHotKeyup&&e.boxing().onHotKeyup(e,xui.Event.getKey(t),t,i)}return!1}p&&"tab"!=o&&xui.use(i).nextFocus("up"!=o&&"left"!=o)}}}})),a.beforeNextFocus=s._e3),(t=e.DroppableKeys)&&t.length&&(xui.arr.each(t,(function(e){i._droppable(e)})),t=i.prototype,xui.arr.each("getDropKeys,setDropKeys".split(","),(function(e){t[e]||(t[e]=s[e])})),e.PanelKeys&&xui.arr.each("addPanel,removePanel,dumpContainer,getPanelPara,getPanelChildren,getFormValues,setFormValues,getFormElements,isDirtied,checkValid,checkRequired,formClear,formReset,updateFormValues,formSubmit".split(","),(function(e){t[e]||(t[e]=s[e])})),i.$DataModel.dropKeys=i.$DataStruct.dropKeys="",a.onDragEnter=a.onDragLeave=a.beforeDrop=a.onDrop=a.afterDrop=a.onDropTest=a.onDropMarkShow=a.onDropMarkClear=s._e4),(t=e.DraggableKeys)&&t.length&&(xui.arr.each(t,(function(e){i._draggable(e)})),t=i.prototype,xui.arr.each("getDragKey,setDragKey".split(","),(function(e){t[e]||(t[e]=s[e])})),i.$DataModel.dragKey=i.$DataStruct.dragKey="",a.onGetDragData=a.onStartDrag=a.onDragStop=s._e5),(t=e.NoDraggableKeys)&&t.length&&(i.NoDraggableKeys=t),(t=e.NoDroppableKeys)&&t.length&&(i.NoDroppableKeys=t),(t=e.PanelKeys)&&t.length&&(xui.each(e.PanelKeys,(function(i){(t=o[i]?e:e[i]||(e[i]={})).onMousewheel=function(e,t,i){var r=xui.use(i).id();if(r){var o=e.getSubId(r),n=e.SubSerialIdMapItem&&e.SubSerialIdMapItem[o];if(e.onMousewheel)return e.boxing().onMousewheel(e,xui.Event.getWheelDelta(t),n,t,i)}}})),t=i.prototype,xui.arr.each("overflow,panelBgClr,panelBgImg,panelBgImgPos,panelBgImgRepeat,panelBgImgAttachment,conDockRelative,conLayoutColumns,conDockPadding,conDockSpacing,conDockFlexFill,conDockStretch,sandboxTheme,formMethod,formTarget,formDataPath,formAction,formEnctype,readonly".split(","),(function(e){var r,o="get"+xui.str.initial(e);t[o]||(t[o]=s[o]),o="set"+xui.str.initial(e),t[o]||(t[o]=s[o]),r=xui.absContainer.$DataModel[e],i._NoProp&&i._NoProp[e]||(i.$DataStruct[e]=xui.isSet(r.ini)?xui.copy(r.ini):"",i.$DataModel[e]=xui.copy(r))})),xui.merge(a,xui.absContainer.$EventHandlers),a.beforeInputAlert=s._e6,a.beforeFormReset=a.afterFormReset=s._e7,a.beforeFormSubmit=a.afterFormSubmit=s._e8,a.onMousewheel=function(e,t,i,r,o){},i["xui.absContainer"]=!0),i.setEventHandlers(a),i.$RenderTrigger=i.$RenderTrigger||[],i.$RenderTrigger.push((function(){this.properties.readonly&&this.boxing().setReadonly(!0,!0)}))},addTemplateKeys:function(e){var t=this,i=t.KEY,r=arguments.callee,o=r._reg||(r._reg=/\./g);return xui.arr.each(e,(function(e){t.$cssKeys[e]=(t.$Keys[e]="KEY"==e?i:i+"-"+e).replace(o,"-").toLowerCase().replace("xui-ui","xui")})),t},_refreshSBTheme:function(e,t,i,r,o){var n=e.getDomId()+"sandboxtheme",a=this._getThemePrevId(e),s=xui(n).get(0),u=function(t){e.destroyed||(xui.CSS._appendSS(e.getRootNode(),xui.UI._adjustCSS(t,a,i),n,!0),(o||e.$inDesign)&&e.boxing().reLayout(!0).getChildren(!0,"penetrate").reLayout(!0))};if(s&&(s.disabled=!0,xui(n).remove(!1)),t)if(/^[a-zA-Z-]+$/.test(t+"")&&t+""!="default"){var l=xui.getPath("xui.appearance."+t,"");xui.getFileAsync(l+"theme.css",(function(i){u(i.replace(/\.setting-uikey\{[^}]+\}/,"").replace(/url\(([^)]+)\)/g,"url("+l+"$1)")),xui.tryF(r,[e,t])}))}else u(t+"")},_getThemePrevId:function(e){return e?"#"+(e["xui.UIProfile"]?e.getDomId():e).replace(/([.:])/g,"\\$1"):""},_adjustCSS:function(e,t,i){return t=t||"",i&&(e=xui.replace(e,[[/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)/,"$0"],[/\{[^}]*\}/,"$0"],[/([^\/{},]+)/,function(e){return e[0].replace(/([^\s>]+)/,"$1"+i)}]])),e.replace(/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)/g,"").replace(/^\s*(\.)/,(function(e,i){return t+" "+i})).replace(/([},])\s*(\.)/g,(function(e,i,r){return i+"\n"+t+" "+r})).replace(/([{;])\s*(.)/g,(function(e,t,i){return t+"\n"+("}"==i?"":"    ")+i})).replace(/url\(([^)]+)\)/g,(function(e,t){return"url("+xui.adjustRes(t,0,1)+")"}))},setAppearance:function(e){return xui.merge(this.$Appearances,e,"all"),this},getAppearance:function(){return this.$Appearances},setTemplate:function(e,t){if(e){var i,r=this,o=r.$tagName||(r.$tagName={}),n=arguments.callee,a=n.r2||(n.r2=/[a-z]/),s=xui.absObj.$specialChars,u=["KEY"],l=n._fun||(n._fun=function(e,t,i){var r,o;for(o in e)s[o.charAt(0)]||a.test(o)||(t[t.length]=o,(r=e[o])&&"object"==typeof r&&(i[o]=r.tagName||"",arguments.callee(r,t,i)))});if(o.KEY=e.tagName||"",l(e,u,o),r.addTemplateKeys(u),i=r.$Templates,"string"==typeof t?(e._subid=t,i[t]=e):i._=e,i=e.$submap)for(var d in i)for(var c in i[d])n.call(r,i[d],c);i=r.$tplWordMap||(r.$tplWordMap={}),(xui.serialize(r.$Templates)||"").replace(/\{(\w+)\}/g,(function(e,t){i[t]=1}))}return this},getTemplate:function(e){return this.$Templates[e||"_"]},setBehavior:function(e){if(e){var t,i,r,o,n,a,s=this,u=xui.$cache.UIKeyMapEvents,l=s.$key,d=xui.absObj.$specialChars,c=xui.Event,p=c.$eventhandler,h=c._eventMap,f=arguments.callee,x=f.r1||(f.r1=/[a-z]/),g=f.r2||(f.r2=/^(on|before|after)/),m=s.$Behaviors;for(i in xui.filter(u,(function(e,t){return!(t==l||0==t.indexOf(l+"-"))})),s._setDefaultBehavior(e),e.KEY&&(xui.merge(e,e.KEY,"all"),delete e.KEY),e)if(n=e[i],!d[i.charAt(0)])if(x.test(i))g.test(i)?n?m[i]=n:delete m[i]:m[i]=n;else for(r in t=m[i]||(m[i]={}),n)a=n[r],d[r.charAt(0)]||(a?t[r]=a:delete t[r]);for(i in m)if(n=m[i],!d[i.charAt(0)])if(x.test(i))g.test(i)&&n&&(u[o=l]=u[o]||{},u[o]["on"+h[i]]=u[o]["on"+h[i]]||p);else for(r in n)!d[r.charAt(0)]&&n[r]&&(u[o=l+"-"+i]=u[o]||{},u[o]["on"+h[r]]=u[o]["on"+h[r]]||p)}return s},getBehavior:function(){return this.$Behaviors},$trytoApplyCSS:function(){var e=xui.UI,t=xui.CSS,i="xui.UI-CSS",r=e.$cache_css_before,o=e.$cache_css_after;if(!e.$cssNo){e.$cssNo=1;var n=xui.browser;xui("body").addClass((n.ie?"xui-css-ie xui-css-ie"+n.ver+" ":n.gek?"xui-css-gek xui-css-gek"+n.ver+" ":n.kde?"xui-css-kde xui-css-kde"+n.ver+" ":n.opr?"xui-css-opr xui-css-opr"+n.ver+" ":"")+(n.isSafari?"xui-css-safari ":n.isChrome?"xui-css-chrome ":"")+(n.isMac?"xui-css-mac":n.isLinux?"xui-css-linux ":"")),xui("html").addClass("xui-css-base xui-css-viewport xui-uicontainer"+(n.isStrict?" xui-css-strict":"")),t.includeLink(xui.ini.path+"iconfont/iconfont.css","xui-font-icon",!0)}r&&(t.addStyleSheet(r,i+e.$cssNo++),e.$cache_css_before=""),o&&(t.addStyleSheet(o,i+e.$cssNo++,!0),e.$cache_css_after="")},buildCSSText:function(e){var t,i,r,o=/(^|\s|,)([0-9A-Z_]+)/g,n=[],a=[],s=xui.browser,u=(s.ie6,s.ie,s.gek,this.$cssKeys);for(var l in e)(r=e[l])&&(t=l.replace(o,(function(e,t,i){return t+"."+(u[i]||i)})).toLowerCase(),r.$order=parseInt(r.$order,10)||0,r.$=t,n[n.length]=r);xui.arr.stableSort(n,(function(e,t){return(e=e.$order||0)>(t=t.$order||0)?1:e==t?0:-1})),l=0;for(var d=n.length;l<d;){for(var c in r=n[l++],a[a.length]=r.$+"{",(t=r.$before)&&(a[a.length]=t),(t=r.$text)&&(a[a.length]=t),r)if("$"!=c.charAt(0)&&((i=r[c])||0===r[c]))switch(c=c.replace(/_[0-9]+$/,""),typeof i){case"string":case"number":a[a.length]=c+":"+i+";";break;case"function":a[a.length]=c+":"+i(this.KEY)+";";break;default:xui.arr.each(i,(function(e){e&&(a[a.length]=c+":"+e+";")}))}(i=r.$after)&&(a[a.length]=i),a[a.length]="}"}return a.join("")},_prepareCmds:function(e,t,i){var r=e.properties,o=t.tagCmds||xui.clone(r.tagCmds,!0);if(o&&o.length){for(var n,a=xui.UI.$tag_subId,s=[],u=[],l=0,d=o,c=d.length;l<c;l++){if(n="string"==typeof d[l]?{id:d[l]}:xui.clone(d[l]),i&&xui.isFun(i)){if(!i(n,t))continue}else if(t.tag&&t.tag.match(new RegExp("\\bno~"+n.id+"\\b")))continue;if(n&&n.tag)if(t.sub){if(!n.tag.match(/\bbranch\b/)&&n.tag.match(/\bleaf\b/))continue;if(t.group){if(!n.tag.match(/\bgroup\b/))continue}else if(n.tag.match(/\bgroup\b/))continue}else if(!n.tag.match(/\bleaf\b/)&&n.tag.match(/\bbranch\b/))continue;"id"in n?n.id+="":n.id="cmds"+e.$xid+l,n.object?(n.object=this._prepareInlineObj(e,n,r.tabindex),n.type="profile"):("tips"in n||(n.tips=n.caption||n.id),n.id=n.id.replace(/[^0-9a-zA-Z]/g,""),n.type||(n.type="text"),n.caption&&(n.caption=xui.adjustRes(n.caption)),n.tips&&(n.tips=xui.adjustRes(n.tips)),n.image&&(n.image=xui.adjustRes(n.image)||xui.ini.img_bg),n._style="","width"in n&&(n._style+=n.width+(xui.isFinite(n.width)&&"px")+";"),"height"in n&&(n._style+=n.height+(xui.isFinite(n.height)&&"px")+";"),n[a]=(t[a]?t[a]:"")+"_"+n.id),"left"==n.location?u.push(n):(s.push(n),"right-float"==n.location&&(n._exstyle="float:right;"))}t.ltagCmds=u,t.rtagCmds=s}t._ltagDisplay=t.ltagCmds?"":"display:none",t._rtagDisplay=t.rtagCmds?"":"display:none"},$getTagCmdsTpl:function(e){var t={ltagCmds:function(e,t,i,r,o){var n=arguments.callee,a=n._m||(n._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(e,t,i,"tagCmds"+(a[i.type]||".button"),o)},rtagCmds:function(e,t,i,r,o){var n=arguments.callee,a=n._m||(n._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(e,t,i,"tagCmds"+(a[i.type]||".button"),o)},"tagCmds.text":{CMD:{tagName:"span",title:"{tips}",style:"{_style};{itemStyle};{_exstyle};",className:"xui-node xui-tag-cmd",tabindex:"{_tabindex}",CMDICON:{className:"{itemClass}"},CMDTXT:{text:"{caption}"}}},"tagCmds.button":{CMD:{tagName:"button",title:"{tips}",style:"{_style};{itemStyle};{_exstyle};",className:"xui-node xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius xui-list-cmd xui-tag-cmd",tabindex:"{_tabindex}",CMDICON:{className:"{itemClass}"},CMDTXT:{text:"{caption}"}}},"tagCmds.image":{CMD:{tagName:"image",title:"{tips}",src:"{image}",border:"0",style:"{_style};{itemStyle};{_exstyle};",className:"xui-node xui-tag-cmd {itemClass}",tabindex:"{_tabindex}",alt:"{caption}"}}};return e?t["tagCmds."+e]:t},_droppable:function(e){var t=this,i=xui.Event.$eventhandler,r=t.$Behaviors,o="KEY"==e?r:r[e]||(r[e]={}),n=xui.$cache.UIKeyMapEvents,a="KEY"==e?t.KEY:t.KEY+"-"+e,s=n[a]||(n[a]={});return xui.merge(o,{beforeMouseover:function(e,t,i){var r=e.properties;if(!r.disabled&&!r.readonly){if(e.behavior.NoDroppableKeys){var o=e.getKey(xui.Event.getSrc(t).id||"").split("-")[1];if(o&&-1!=xui.arr.indexOf(e.behavior.NoDroppableKeys,o))return}var n,a,s,u,l=i,d=xui.DragDrop,c=d.getProfile(),p=c.dragKey,h=c.dragData,f=(n=e.box.$Behaviors.PanelKeys)&&-1!==xui.arr.indexOf(n,e.getKey(i,!0));if(h&&(r.dragSortable&&e.$xid==xui.get(h,["profile","$xid"])&&!f||p&&new RegExp("\\b"+p+"\\b").test(e.box.getDropKeys(e,l)))){if((s=e.boxing()).getItemByDom&&(a=s.getItemByDom(i)),u=[e,t,l,p,h,a],(n=e.onDropTest)&&!1===s.onDropTest.apply(s,u))return;if((n=e.box._onDropTest)&&!1===n.apply(e.host||e,u))return;d.setDropElement(i),e.onDropMarkShow&&!1===s.onDropMarkShow.apply(s,u)||(n=e.box._onDropMarkShow)&&!1===n.apply(e.host||e,u)||xui.resetRun("setDropFace",d.setDropFace,0,[l],d),(n=e.box._onDragEnter)&&n.apply(e.host||e,u),e.onDragEnter&&s.onDragEnter.apply(s,u)}}},beforeMouseout:function(e,t,i){if(!e.properties.disabled&&!e.properties.readonly){var r,o,n,a,s=xui.DragDrop,u=s.getProfile(),l=u.dragKey,d=u.dragData;u.dropElement==i&&((n=e.boxing()).getItemByDom&&(o=n.getItemByDom(i)),a=[e,t,i,l,d,o],e.onDropMarkClear&&!1===n.onDropMarkClear.apply(n,a)||(r=e.box._onDropMarkClear)&&!1===r.apply(e.host||e,a)||xui.resetRun("setDropFace",s.setDropFace,0,[null],xui.DragDrop),(r=e.box._onDragLeave)&&r.apply(e.host||e,a),e.onDragLeave&&n.onDragLeave.apply(n,a),s.setDropElement(null))}},beforeDrop:function(e,t,i){var r,o,n,a=xui.DragDrop.getProfile(),s=a.dragKey,u=a.dragData,l=e.boxing();l.getItemByDom&&(r=l.getItemByDom(i)),n=[e,t,i,s,u,r],e.onDropMarkClear&&!1===l.onDropMarkClear.apply(l,n)||(o=e.box._onDropMarkClear)&&o.apply(e.host||e,n),e.beforeDrop&&!1===l.beforeDrop.apply(l,n)||((!e.onDrop||e.onDrop&&!1===l.onDrop.apply(l,n))&&e.box._onDrop&&e.box._onDrop.apply(e.host||e,n),e.afterDrop&&l.afterDrop.apply(l,n))}},"all"),xui.merge(s,{onmouseover:i,onmouseout:i,ondrop:i,afterDrop:i,beforeDrop:i}),t},_draggable:function(e){var t=this,i=xui.Event.$eventhandler,r=t.$Behaviors,o="KEY"==e?r:r[e]||(r[e]={}),n=xui.$cache.UIKeyMapEvents,a="KEY"==e?t.KEY:t.KEY+"-"+e,s=n[a]||(n[a]={});return xui.merge(o,{beforeMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t)){var r=e.properties;if(!r.disabled&&(r.dragSortable||r.dragKey)){if(e.behavior.NoDraggableKeys){var o=e.getKey(xui.Event.getSrc(t).id||"").split("-")[1];if(o&&-1!=xui.arr.indexOf(e.behavior.NoDraggableKeys,o))return}var n,a=xui.Event.getPos(t),s=e.boxing(),u=[e,t,i];if(e.onStartDrag&&!1===s.onStartDrag.apply(s,u));else if((n=e.box._onStartDrag)&&!1===n.apply(e.host||e,u));else{var l=e.box;xui.use(i).startDrag(t,{dragType:"icon",targetLeft:a.left+12,targetTop:a.top+12,dragCursor:"pointer",dragDefer:2,dragKey:l.getDragKey(e,i),dragData:l.getDragData(e,t,i)})}}}},beforeDragbegin:function(e,t,i){xui.use(i).onMouseout(!0,{$force:!0}).onMouseup(!0)},beforeDragstop:function(e,t,i){var r;e.onDragStop&&e.boxing().onDragStop(e.e,i),(r=e.box._onDragStop)&&r.apply(e.host||e,arguments)}},"all"),xui.merge(s,{onmousedown:i,ondragbegin:i}),t},_adjustConW:function(e,t,i,r){var o,n,a=e.properties;if((o=a.conLayoutColumns)||(o=a.conDockRelative?1:0),o&&(n=e._containerWidth=t.offsetWidth(),!r||r!=n)){var s,u,l,d=a.conDockPadding,c=a.conDockSpacing,p=t.children(),h=p.size(),f=0,x=[],g=function(e,t,i){for(var r,o,n,a,s,u,l=t.length,d=Math.floor(e/l),c=0,p=0;p<l;p++)a=t[p][0],n=t[p][1],s=t[p][2],u=t[p][3],p==l-1?o=n.$forceu(Math.min(u,Math.max(s,e-c))):(o=n.$forceu(r=Math.min(u,Math.max(s,d))),c+=r),i.push([a,n,o,r])};if(h){p.each((function(e,t,i,r){e.id&&(i=xui.$cache.profileMap[e.id])&&i.Class&&i.Class["xui.UIProfile"]&&("relative"!=(r=xui(e).css("position"))&&"static"!=r||xui(e).setInlineBlock())})),s=d.left+d.right+(o-1)*c.width,u=n-s,l=Math.floor(u/o);var m,b,v,y=[];p.each((function(e,t,i,r,n){e.id&&(i=xui.$cache.profileMap[e.id])&&i.Class&&i.Class["xui.UIProfile"]&&("relative"!=(r=(m=xui(e)).css("position"))&&"static"!=r||i&&(m.css({position:"relative",left:"auto",top:"auto",right:"auto",bottom:"auto","margin-left":(0===t?d.left:c.width)+"px","margin-top":(0===t?d.top:c.height)+"px"}),b=xui.CSS.$px(i.properties.dockMinW)||0,v=xui.CSS.$px(i.properties.dockMaxW)||u+s,i.$forceu(n=Math.min(v,Math.max(b,l))),(f+=n)>u&&(g(u+(o-y.length)*c.width,y,x),y=[],f=n),y.push([m,i,b,v])))})),y.length&&g(u+(o-y.length)*c.width,y,x);var A=0;for(h=x.length;A<h;A++)x[A][0].width(x[A][1].properties.width=x[A][2]),x[A][1]._conLayout=1;var _=function(e,t){e.destroyed||!e._containerWidth||t.isEmpty()||e._containerWidth!=t.scrollWidth()&&xui.UI._adjustConW(e,t,e,e._containerWidth)};_(e,t),xui.asyRun(_,0,[e,t])}}},adjustData:function(e,t,i,r){i||(i={});var o,n,a=e.box,s=a.$tplWordMap||{},u=a.$DataModel;for(o in t)"$"!=o.charAt(0)&&"renderer"!=o&&t.hasOwnProperty(o)&&!i.hasOwnProperty(o)&&(i[o]="string"==typeof(n=t[o])&&s[o]?"html"==o?xui.adjustRes(n,0,1,!1,null,null,"sub"==r&&t):xui.adjustRes(n,!0,!1,null,null,"sub"==r&&t):n);"hidden"in t&&(i.hidden=t.hidden);var l,d=t.itemFilter||e.$itemFilter;if(d&&(i.hidden=!!d(t,"adjustData",e)),i._itemDisplay=t.hidden?"display:none;":"","disabled"in u&&(i.disabled=xui.isSet(i.disabled)&&i.disabled?"xui-ui-itemdisabled":""),"readonly"in u&&(i.readonly=xui.isSet(i.readonly)&&i.readonly?"xui-ui-itemreadonly":""),i.imageDisplay=i.imageClass||i.image||i.iconFontCode?"":"display:none",i.iconFontCode){if(i.imageClass){var c=i.imageClass.split(/\s+/);xui.filter(c,(function(e){return!xui.builtinFontIcon[e]})),i.imageClass=c.join(" ")}}else i.imageClass&&(c=i.imageClass.split(/\s+/),xui.arr.each(c,(function(e){xui.builtinFontIcon[e]&&(l=xui.builtinFontIcon[e])}),null,!0),l&&xui.__iefix2&&(i.iconFontCode=l,xui.filter(c,(function(e){return!xui.builtinFontIcon[e]}))),i.imageClass=c.join(" ")),l||(i.picClass="xui-css-innerimage",i.image&&(i.imageClass="xui-icon-placeholder",i.backgroundImage="background-image:url("+i.image+");"),i.imagePos?i.backgroundPosition="background-position:"+i.imagePos+";":i.image&&(i.backgroundPosition="background-position:center;"),i.imageBgSize?i.backgroundSize="background-size:"+i.imageBgSize+";":i.image&&(i.backgroundSize="background-size:initial;"),i.imageRepeat?i.backgroundRepeat="background-repeat:"+i.imageRepeat+";":i.image&&(i.backgroundRepeat="background-repeat:no-repeat;"));return i.iconFontSize&&(i.iconFontSize="font-size:"+i.iconFontSize+";"),!i.image&&a.IMGNODE&&(i.image=xui.ini.img_blank),(n=i.renderer||t.renderer)&&(i.caption=xui.UI._applyRenderer(e,n,t,i)),i},_applyRenderer:function(e,t,i,r){if(xui.isFun(t))return xui.adjustRes(t.call(e,i,r));if(xui.isStr(t)){var o,n,a,s,u={},l={},d=function(e,t,i){if(e){var r=/^\s*([^>\s]+)?\s*>\s*([^>\s]+)\s*$/;xui.each(e,(function(e,i){r.test(i)&&(t[i.replace(/^\s*>\s*/,"")]=e)})),xui.isHash(e.ModuleProp)&&(t=xui.merge(t,e.ModuleProp,"all")),xui.isHash(e.ModuleEvents)&&(i=xui.merge(i,e.ModuleEvents,"all")),t.parentProp=e}};if(/^\s*[\w]+\.[\w.]+\s*$/.test(t)&&(o=xui.SC.get(t))&&(o["xui.UI"]||o["xui.Module"])){if(n=(o=new o).get(0),a=xui.get(r,["tagVar","alias"])||n.alias,i&&(i._render_xid=n.$xid,i._render_obj=n,n._render_conf=i),n._render_holder=e,o["xui.Module"]){var c=new xui.UI.MoudluePlaceHolder;(n=c.get(0))._module=o,o=c}else o.setPosition&&o.setPosition("relative"),o.setDisplay&&o.setDisplay("inline-block");return o.setHost(e.host,a),i!==e.properties&&((s=e.box._applyRendererEx)&&s.call(e.box,e,u,l,r,d),d(r,u,l)),d(r.tagVar,u,l),delete u.renderer,xui.isEmpty(u)||o.setProperties(u),xui.isEmpty(l)||o.setEvents(l),(e.$attached||(e.$attached=[])).push(n),o.toHtml()}return xui.adjustVar(t,r)}},$iconAction:function(e,t,i){var r,o=e.properties,n=e.getSubNode(t||"ICON"),a=o.imageClass||o.image||o.iconFontCode?"":"display:none";if(n.css("backgroundImage","none"),n.removeClass("xui-icon-placeholder"),o.imageClass&&n.removeClass(o.imageClass),i&&n.removeClass(i),n.html(""),o.iconFontCode){if(n.html(o.iconFontCode),o.imageClass){var s=o.imageClass.split(/\s+/);xui.filter(s,(function(e){return!xui.builtinFontIcon[e]})),n.addClass(s.join(" "))}}else o.imageClass&&(s=o.imageClass.split(/\s+/),xui.arr.each(s,(function(e){xui.builtinFontIcon[e]&&(r=xui.builtinFontIcon[e])}),null,!0),r&&xui.__iefix2&&(o.iconFontCode=r,xui.filter(s,(function(e){return!xui.builtinFontIcon[e]}))),n.addClass(s.join(" "))),o.iconFontCode&&n.html(o.iconFontCode),r||o.image&&(n.addClass("xui-icon-placeholder"),n.css("backgroundImage","url("+xui.adjustRes(o.image)+")"));n.css("display",a)},cacheData:function(e,t){return xui.set(xui.$cache,["UIDATA",e],t),this},getCachedData:function(e){var t=xui.get(xui.$cache,["UIDATA",e]);return"function"==typeof t&&(t=t()),t},Behaviors:{onSize:function(e,t){var i=e.getRootNode(),r=i&&i.style;r&&(t.width||t.height)&&xui.UI.$tryResize(e,r.width,r.height)},HotKeyAllowed:!0,onContextmenu:function(e,t,i){if(e.onContextmenu)return!1!==e.boxing().onContextmenu(e,t,i)}},DataModel:{autoTips:!0,className:{ini:"",action:function(e,t){t&&this.getRoot().removeClass(t),this.getRoot().addClass(e),delete this._nodeEmSize}},disableClickEffect:!1,disableHoverEffect:!1,disableTips:!1,disabled:{ini:!1,action:function(e){var t=this.getRoot();e?t.addClass("xui-ui-disabled"):t.removeClass("xui-ui-disabled")}},spaceUnit:{listbox:["","px","em"],action:function(){this.boxing().reLayout(!0).getChildren(!0,"penetrate").reLayout(!0)}},defaultFocus:!1,hoverPop:{ini:"",action:function(e,t){var i,r=this,o=r.boxing(),n=r.properties;!r.destroyed&&r.host&&(t&&(i=r.host[t])&&(i=i.get(0))&&i.renderId&&!i.destroyed&&o.hoverPop(i,null),e&&(i=r.host[e])&&(i=i.get(0))&&i.renderId&&!i.destroyed&&o.hoverPop(i,n.hoverPopType,(function(e,t,o,n,a){if(i.properties.tagVar.hoverFrom=arguments,r.beforeHoverPop)return r.boxing().beforeHoverPop(e,a,t,o,n)}),(function(e,t,o,n,a){if(delete i.properties.tagVar.hoverFrom,r.beforeHoverHide)return r.boxing().beforeHoverHide(e,a,t,o,n)}),i.getRoot().parent(),e))}},hoverPopType:{ini:"outer",dftWidth:180,listbox:["outer","outer_tb","outer_lr","inner","outerleft-outertop","left-outertop","center-outertop","right-outertop","outerright-outertop","outerleft-top","left-top","center-top","right-top","outerright-top","outerleft-middle","left-middle","center-middle","right-middle","outerright-middle","outerleft-bottom","left-bottom","center-bottom","right-bottom","outerright-bottom","outerleft-outerbottom","left-outerbottom","center-outerbottom","right-outerbottom","outerright-outerbottom"]},locked:{ini:!1,action:function(){this.$inDesign&&this.boxing().refresh(!0)}},dock:{ini:"none",listbox:["none","top","bottom","left","right","center","middle","origin","width","height","fill","cover"],action:function(e){xui.UI.$dock(this,!0,!0)}},dockIgnore:{ini:!1,action:function(e){"none"!=this.properties.dock&&xui.UI.$dock(this,!0,!0)}},dockFloat:{ini:!1,action:function(e){"none"!=this.properties.dock&&xui.UI.$dock(this,!0,!0)}},dockOrder:{hidden:!0},showEffects:"",hideEffects:"",dockMargin:{ini:{left:0,top:0,right:0,bottom:0},action:function(e){(e=e||{}).left=e.left||0,e.top=e.top||0,e.right=e.right||0,e.bottom=e.bottom||0,"none"!=this.properties.dock&&xui.UI.$dock(this,!0,!0)}},dockMinW:{$spaceunit:1,ini:0},dockMinH:{$spaceunit:1,ini:0},dockMaxW:{$spaceunit:1,ini:0},dockMaxH:{$spaceunit:1,ini:0},dockIgnoreFlexFill:{ini:!1,action:function(e){"none"!=this.properties.dock&&xui.UI.$dock(this,!0,!0)}},dockStretch:{ini:"",combobox:["fixed","forward","rearward","stretch","0.25","0.33","0.5"],set:function(e){var t=this,i=t.properties;i.dockStretch=e,"fill"!=i.dock&&"cover"!=i.dock&&"width"!=i.dock&&"height"!=i.dock||"forward"!=e&&"rearward"!=e&&"stretch"!=e&&(i.dockStretch="stretch"),t.rendered&&"none"!=i.dock&&xui.UI.$dock(t,!0,!0)}},tips:{ini:"",action:function(e){var t=xui.Tips;t&&t._showed&&xui.UIProfile.getFromDom(t._markId)==this&&t.setTips(e,!0)}},rotate:{ini:0,action:function(e){var t=this.getRoot(),i=this.boxing();e=parseFloat(e)||0,(e%=360)<0&&(e+=360),this.box["xui.svg"]?i.setAttr("KEY",{transform:"r"+e},!1):t.rotate(e)}},activeAnim:{ini:"",action:function(e){var t,i,r=this;(t=r._activeAnim)&&(xui.Thread.abort(t),delete r._activeAnim),e&&(r._activeAnim=(i=r.boxing().animate(e))&&i.id)}}},EventHandlers:{beforeRender:function(e){},onRender:function(e){},onLayout:function(e){},onResize:function(e,t,i){},onMove:function(e,t,i,r,o){},onDock:function(e,t){},beforePropertyChanged:function(e,t,i,r){},afterPropertyChanged:function(e,t,i,r){},beforeAppend:function(e,t){},afterAppend:function(e,t){},beforeRemove:function(e,t,i,r){},afterRemove:function(e,t,i,r){},onDestroy:function(e){},beforeDestroy:function(e){},afterDestroy:function(e){},onShowTips:function(e,t,i){},onContextmenu:function(e,t,i,r){},beforeHoverPop:function(e,t,i,r,o){},beforeHoverHide:function(e,t,i,r,o){}},RenderTrigger:function(){var e,t=this,i=t.boxing(),r=t.properties,o=t.getRootNode().style;r.sandboxTheme&&xui.UI._refreshSBTheme(t,r.sandboxTheme),t.box._onresize&&(t._syncResize||t.box._syncResize||("hidden"!=(e=(o=t.getRootNode().style).visibility)&&(t._$visibility=e,o.visibility="hidden"),o=null),xui.UI.$tryResize(t,r.width,r.height)),r.disabled&&i.setDisabled(!0,!0),r.rotate&&i.setRotate(r.rotate,!0),!t.$inDesign&&r.hoverPop&&xui.asyRun((function(){i.setHoverPop(r.hoverPop,!0)})),t.behavior.PanelKeys&&(e=r.dataBinder)&&i.setDataBinder(e,!0),r.activeAnim&&xui.asyRun((function(){t&&!t.destroyed&&t.boxing().setActiveAnim(r.activeAnim,!0)})),(t.$beforeDestroy=t.$beforeDestroy||{}).activeAnim=function(e){(e=t._activeAnim)&&xui.Thread.abort(e)},t._inValid=1},$doResize:function(e,t,i,r,o){if(r||(t||i)&&(e._resize_w!=t||e._resize_h!=i)){var n;if(!e.getRootNode())return!1;if(e._resize_w=t,e._resize_h=i,xui.tryF(e.box._onresize,[e,t,i,r,o],e.box),(r||t)&&e.box&&e.box["xui.absContainer"]&&(n=e.getContainer(!0))){var a={};a[e.$xid]=1,n.children().each((function(t,i,n){!((i=xui.UIProfile.getFromDom(t.id))&&i!==e&&!a[i.$xid]&&i.children.length&&i.box&&i.box._onresize&&i.box.$Behaviors.PanelKeys&&i.box.$Behaviors.PanelKeys.length&&(n=i.properties)&&"position"in n&&"width"in n)||"static"!=n.position&&"relative"!=n.position||""!==n.width&&"auto"!=n.width||(a[i.$xid]=1,xui.UI.$doResize(i,xui(t).width(),null,r,o))}))}e.onResize&&e.boxing().onResize(e,t,i)}if("_$visibility"in e){var s=e.getRootNode(),u=s.style;"visible"==u.visibility||xui.getNodeData(s,"_setVisibility")||(u.visibility=e._$visibility),s=u=null,xui.clearTimeout(e._$rs_timer),delete e._$rs_timer,delete e._$rs_args,delete e._$visibility}},$tryResize:function(e,t,i,r,o){var n=e.box;if(n&&n._onresize&&(r||t||i))if(t=(""===t||"auto"==t?"auto":xui.isFinite(t)||e.$isPx(t)?parseFloat(t)||0:t)||null,i=(""===i||"auto"==i?"auto":xui.isFinite(i)||e.$isPx(i)?parseFloat(i)||0:i)||null,"_$visibility"in e){var a=e._$rs_args;a||(a=e._$rs_args=[e,null,null],e._$rs_timer=xui.asyRun((function(){e.box&&e&&e._$rs_args&&xui.UI.$doResize.apply(null,e._$rs_args)}))),a[1]=t,a[2]=i,a[3]=r,a[4]=o}else xui.UI.$doResize(e,t,i,r,o)},LayoutTrigger:function(){var e=this,t=(e.boxing(),e.properties);if(delete e._nodeEmSize,"absolute"==t.position){if(t.dock&&"none"!=t.dock){if(!e.$laidout){e.$laidout=1;var i=e.getRootNode().style;switch(e.$picku(i.width),e.$picku(i.height),t.dock){case"top":case"bottom":case"width":i.width=0;break;case"left":case"right":case"height":i.height=0;break;default:i.width=0,i.height=0}}xui.UI.$dock(this,!1,!0)}}else(xui.get(e,["parent","properties","conDockRelative"])||xui.get(e,["parent","properties","conLayoutColumns"]))&&(e._conLayout||xui.resetRun("conLayoutColumns:"+e.parent.$xid,(function(){e._conLayout||e.destroyed||e.parent.destroyed||xui.UI._adjustConW(e.parent,e.getRoot().parent(),e)})))},$dock_args:["top","bottom","left","right","center","middle","width","height"],$dock_map:{middle:1,center:1},$dock:function(e,t,i){var r=e.getRoot(),o=e.box["xui.svg"],n=e.boxing(),a=-1,s=-1,u=-1,l=-1,d=xui(r.get(0)&&r.get(0).parentNode||e.$dockParent),c=function(e){return xui.browser.ie&&xui.browser.ver<=6?e-e%2:e},p=function(e,t){var i,r,o,n,a;if(t){if(xui.ini.$frame&&xui.ini.$frame.zoom&&!xui.isNumb(xui.ini.$frame.zoom))return;i=xui.win.$getEvent("onSize","dock")}else e&&e.get(0)&&(i=e.$getEvent("onSize","dock"));if(i&&i.dockall&&i.dockall.length)for(var s=0,u=i.dockall.length;s<u;s++)switch(i.dockall[s].$dockType){case"fill":case"cover":n=a=1;break;case"top":case"bottom":case"width":n=1;break;case"left":case"right":case"height":a=1}n&&a?o="xui-css-noscroll":n?o="xui-css-noscrollx":a&&(o="xui-css-noscrolly"),t?(xui("html").removeClass(/^xui-css-noscroll(x|y)?$/),(r=xui("body").get(0))&&(r.scroll=""),o&&(n&&xui.win.scrollLeft(0),a&&xui.win.scrollTop(0),xui("html").addClass(o),n&&a&&r&&(r.scroll="no"))):(e.removeClass(/^xui-css-noscroll(x|y)?$/),o&&(n&&e.scrollLeft(0),a&&e.scrollTop(0),e.addClass(o)))},h=function(e,t,i,r){var o;return parseFloat(t["dockMin"+i])&&(o=e.$px(t["dockMin"+i]))&&(r=c(o<=r?r:o)),parseFloat(t["dockMax"+i])&&(o=e.$px(t["dockMax"+i]))&&(r=c(o<=r?o:r)),r},f=function(e,t,i,r,n,a){var s=xui.$us(e),u=function(t){return e.$forceu(t,s>0?"em":"px",null,!0)};"left"in a&&e.$px(n.left)!==a.left&&(a.left=u(a.left)),"top"in a&&e.$px(n.top)!==a.top&&(a.top=u(a.top)),"right"in a&&e.$px(n.right)!==a.right&&(a.right=u(a.right)),"bottom"in a&&e.$px(n.bottom)!==a.bottom&&(a.bottom=u(a.bottom)),"width"in a&&e.$px(n.width)!==a.width&&(a.width=u(a.width)),"height"in a&&e.$px(n.height)!==a.height&&(a.height=u(a.height)),xui.isEmpty(a)||(o?i._setBBox(a):r.cssRegion(a,!0))},x=function(e,t,i,r,o,n,a){if(e.prevLine.length){var s,u,l,d,p,h,x=[],g=e.prevLine.length-1,m=0,b=e[n],v=xui.CSS;if(i-=g*t,xui.arr.each(e.prevLine,(function(e){e.pct?x.push(e):i-=e.region[r]+e.margin[n]+e.margin[a]})),l=x.length){var y=0;xui.arr.each(x,(function(e,t){y+=e.pct})),xui.arr.each(x,(function(e,t){h=e.prop,d=e.region,p=e.nodefz,e.pct=e.pct/y,s=i*e.pct-e.margin[n]-e.margin[a],parseFloat(h[o])&&(u=v.$px(h[o],p))&&(s=c(u<=s?u:s)),t==l-1?(s=i-m,parseFloat(h[o])&&(u=v.$px(h[o],p))&&(s=c(u<=s?u:s)),d[r]=s):m+=d[r]=parseInt(s,10)}))}xui.arr.each(e.prevLine,(function(e,i){(d=e.region)[n]=parseInt(b+e.margin[n],10),b+=d[r]+e.margin[n]+e.margin[a]+t,f(e.profile,e.isSVG,e.ins,e.node,e.style,d)})),e.prevLine=[]}};if(d.get(0)){var g,m,b,v=e.properties,y=xui.$us(e),A=function(t,i){return e.$forceu(t,y>0?"em":"px",i,!0)},_=v.dockMargin,w="auto",C=v.dock||"none",I=xui.Event.getId(d.get(0)),E=function(e,t){return(e=parseInt(e.properties._dockOrder||e.properties.dockOrder,10)||0)>(t=parseInt(t.properties._dockOrder||t.properties.dockOrder,10)||0)?1:e==t?0:-1},S=r._getEmSize(),D={top:A(_.top||0,S),left:A(_.left||0,S),right:A(_.right||0,S),bottom:A(_.bottom||0,S)};if(o){var k=n._getBBox();v.left=k.x,v.top=k.y,v.width=k.width,v.height=k.height}if(d.get(0)!==document.body&&d.get(0)!==document&&d.get(0)!==window||(I="!document",b=!0),!I||I!=xui.Dom._ghostDivId&&!xui.str.startWith(I,xui.Dom._emptyDivId)){if(e.$dockParent!=I||e.$dockType!=C||t){switch(e.$dockParent=I,e.$dockType=C,a=e.unLink("$dockall"),s=e.unLink("$dock"),u=e.unLink("$dock1"),l=e.unLink("$dock2"),C){case"middle":g={right:v.right==w?w:v.right||"",bottom:w,left:v.left==w?w:v.left||"",width:v.width||"",height:v.height||""};break;case"center":g={right:w,bottom:v.bottom==w?w:v.bottom||"",top:v.top==w?w:v.top||"",width:v.width||"",height:v.height||""};break;case"origin":g={right:w,bottom:w,width:v.width||"",height:v.height||""};break;case"top":g={left:D.left,right:D.right,bottom:w,height:v.height||""};break;case"bottom":g={left:D.left,right:D.right,top:w,height:v.height||""};break;case"left":g={right:w,width:v.width||""};break;case"right":g={left:w,width:v.width||""};break;case"width":g={bottom:w,height:v.height||"",top:v.top||""};break;case"height":g={right:w,width:v.width||"",left:v.left||""};break;case"fill":case"cover":g={right:w,bottom:w};break;case"none":g={left:v.left,top:v.top,width:v.width||"",height:v.height||""}}r.get(0)&&(o?n._setBBox(g):r.cssRegion(g,!0)),b&&(d=xui.win,xui.$cache._resizeTime||(xui.$cache._resizeTime=1)),"none"!=C&&((m=d.$getEvent("onSize","dock"))||((m=function(t){var i=arguments.callee,r=xui.CSS,o=xui.UI.$dock_map,n=xui.UI.$dock_args,a=i.rePos,s=i.pid,u="!window"==i.pid||"!document"==i.pid,l=u?0:xui.UIProfile.getFromDom(s),d=l&&l.properties,c=l&&l.getRoot(),p=c&&c.get(0)&&c.get(0).style,h=p&&c._getEmSize(),f=d&&"conDockSpacing"in d?d.conDockSpacing:{width:0,height:0},x=d&&"conDockPadding"in d?d.conDockPadding:{left:0,top:0,right:0,bottom:0},g=d&&"conDockFlexFill"in d?d.conDockFlexFill:"",m=d&&"conDockStretch"in d?d.conDockStretch.split(/[,;\s]+/):[],b="width"==g||"both"==g,v="height"==g||"both"==g;if((X=u?xui.frame:xui(s)).get(0)){var y,A,_,w,C,I,E,S=X.get(0),D=S.style,k=xui.$us(e),$=X._getEmSize(),N=function(e,t){return r.$forceu(e,k>0?"em":"px",t||$)},M=u?xui("body").get(0).style:D,T=M.overflow,R=M.overflowX,B=M.overflowY;for(A in D&&(D.overflow=D.overflowX=D.overflowY="hidden"),i.dockall)if("cover"==i.dockall[A].$dockType){E=1;break}var L=D&&r.$px(D.width,$)||X.width()||0,F=D&&r.$px(D.height,$)||X.height()||0,O=E?X.offsetHeight():F,P=E?X.offsetWidth():L;if("auto"==L&&(L=0),"auto"==F&&(F=0),D&&(D.overflow=T,D.overflowX=R,D.overflowY=B),f={width:r.$px(f.width||0,h),height:r.$px(f.height||0,h)},x={left:r.$px(x.left||0,h),top:r.$px(x.top||0,h),right:r.$px(x.right||0,h),bottom:r.$px(x.bottom||0,h)},t.$dockid||!u||xui.stamp()-xui.$cache._resizeTime>50){if((y={left:x.left,top:x.top,right:x.right,bottom:x.bottom,width:L,height:F,offsetW:P||L,offsetH:O||F}).preX=y.oX=y.left,y.preY=y.oY=y.top,y.prevLine=[],y.ww=y.width-y.left-y.right,y.hh=y.height-y.top-y.bottom,y.leftHolder=y.topHolder=y.rightHolder=y.bottomHolder=0,b||v){var H,U,z=0,K=0,V=0,j=0,Y=0,G=function(e,t,i,r,o){return r=e.properties,parseFloat(o=r["dockMin"+t])&&(i=Math.max(e.$px(o),i)),parseFloat(o=r["dockMax"+t])&&(i=Math.min(e.$px(o),i)),i},W=function(e,t){return parseFloat(e.$px(e.properties[t]))||0};for(_=0;C=n[_++];)if((I=i[C]).length)for(A=0;w=I[A++];)if(!("absolute"!=w.properties.position||w.properties.dockIgnore||w._dockIgnore||w.properties.dockIgnoreFlexFill)){var X=w.getRoot();!b||"left"!=C&&"right"!=C&&"width"!=C||(z++,K+=G(w,"W",W(w,"width")),"fill"!=w.properties.dock&&(Y=Math.max(Y,G(w,"H",W(w,"height"))))),!v||"top"!=C&&"bottom"!=C&&"height"!=C||(V++,j+=G(w,"H",W(w,"height")))}if(j&&Y&&(j+=Y),V>=1&&j&&y.height)for(H=y.height-x.top-x.bottom-(V-1)*f.height,_=0;C=n[_++];)if((I=i[C]).length){for(A=0;w=I[A++];)"absolute"!=w.properties.position||w.properties.dockIgnore||w._dockIgnore||!w.properties.dockIgnoreFlexFill||(X=w.getRoot(),"top"!=C&&"bottom"!=C&&"height"!=C||(H-=G(w,"H",W(w,"height")),H-=f.height));for(A=0;w=I[A++];)"absolute"!=w.properties.position||w.properties.dockIgnore||w._dockIgnore||w.properties.dockIgnoreFlexFill||(X=w.getRoot(),"top"!=C&&"bottom"!=C&&"height"!=C||X.height(N(G(w,"H",Math.min(1,W(w,"height")/j)*H))))}if(z>=1&&K&&y.width)for(U=y.width-x.left-x.right-(z-1)*f.width,_=0;C=n[_++];)if((I=i[C]).length){for(A=0;w=I[A++];)"absolute"!=w.properties.position||w.properties.dockIgnore||w._dockIgnore||!w.properties.dockIgnoreFlexFill||(X=w.getRoot(),"left"!=C&&"right"!=C&&"width"!=C||(U-=G(w,"W",W(w,"width")),H-=f.width));for(A=0;w=I[A++];)"absolute"!=w.properties.position||w.properties.dockIgnore||w._dockIgnore||w.properties.dockIgnoreFlexFill||(X=w.getRoot(),"left"!=C&&"right"!=C&&"width"!=C||X.width(N(G(w,"W",Math.min(1,W(w,"width")/K)*U))))}l&&b&&(l._conDockFlexFillW=1),l&&v&&(l._conDockFlexFillH=1)}if("both"!=g)for(_=0;C=n[_++];)if((I=i[C]).length)for(A=0;w=I[A++];)"absolute"!=w.properties.position||w.properties.dockIgnore||w._dockIgnore||w.properties.dockIgnoreFlexFill||(X=w.getRoot(),!l||!l._conDockFlexFillW||b||"left"!=C&&"right"!=C&&"width"!=C||X.width(N(w.properties.width)),!l||!l._conDockFlexFillH||v||"top"!=C&&"bottom"!=C&&"height"!=C||X.height(N(w.properties.height)));for(l&&l._conDockFlexFillW&&delete l._conDockFlexFillW,l&&l._conDockFlexFillH&&delete l._conDockFlexFillH,_=0;C=n[_++];){y.preX=y.oX,y.preY=y.top;var Q,q=0;if(Q=(I=i[C]).length)for(o[C]||(t.width=t.height=1),A=0;w=I[A++];)"absolute"!=w.properties.position||w.properties.dockIgnore||w._dockIgnore||a(w,q++,Q,y,C,t.$dockid,u||t.width,u||t.height,f.width,f.height,m)}for(y.later&&xui.each(y.later,(function(e){var t;try{e.isSVG?e.ins._setBBox(e):e.node.cssRegion(e,!0),(t=xui.UIProfile.getFromDom(e.node.get(0)))&&(delete e.node,t.box._onresize||!t.onResize||null===e.width&&null===e.height||t.boxing().onResize(t,e.width,e.height),t.onDock&&t.boxing().onDock(t,e),t.$onDock&&t.$onDock(t,e))}catch(i){xui.asyRun((function(){if(e.node){var i=e.width,r=e.height;e.width=(parseFloat(e.width)||0)+1+xui.CSS.$picku(e.width),e.height=(parseFloat(e.width)||0)+1+xui.CSS.$picku(e.height),e.isSVG?e.ins._setBBox(e):e.node.cssRegion(e),e.width=i,e.height=r,e.isSVG?e.ins._setBBox(e):e.node.cssRegion(e,!0),(t=xui.UIProfile.getFromDom(e.node.get(0)))&&(delete e.node,t.box._onresize||!t.onResize||null===e.width&&null===e.height||t.boxing().onResize(t,e.width,e.height),t.onDock&&t.boxing().onDock(t,e),t.$onDock&&t.$onDock(t,e))}}))}})),_=0;C=n[_++];)if((I=i[C]).length)for(A=0;w=I[A++];)"absolute"!=w.properties.position||w.properties.dockIgnore||w._dockIgnore||y.later&&y.later[w.$xid]||(w.onDock&&w.boxing().onDock(w),w.$onDock&&w.$onDock(w));u&&(xui.$cache._resizeTime=xui.stamp())}i=a=X=D=null}}).pid=I,xui.arr.each(xui.UI.$dock_args,(function(e){m[e]=[]})),m.dockall=[],m.rePos=function(e,t,i,r,o,n,a,s,u,l,d){var p=!1;n&&e.$xid!=n&&(p=!0);var g,m,b,v,y,A,_,w,C,I,E,S=e.properties,D=xui.CSS,k=S.dockFloat,$=S.dockMargin,N=S.dockStretch,M=e.getRoot(),T=e.boxing(),R=M.get(0).style,B=xui.$us(e),L=M._getEmSize(),F=function(e){return D.$forceu(e,B>0?"em":"px",L)},O=D.$px(S._dockBorderWidth,L)||0,P=D.$px(S._dockBorderHeight,L)||0,H=e.box["xui.svg"];if($.top=D.$px($.top,L),$.left=D.$px($.left,L),$.right=D.$px($.right,L),$.bottom=D.$px($.bottom,L),H&&(E=T._getBBox(),S.left=E.x,S.top=E.y,S.width=E.width,S.height=E.height),"none"!=R.display){switch(o){case"middle":case"center":g=m=0;break;default:switch(N=N||("width"==o||"height"==o?"":d[t%d.length])||"stretch","width"!=o&&"height"!=o||"stretch"!=N&&"forward"!=N&&"rearward"!=N&&(N="stretch"),N){case"stretch":g=1,m=1,b=0;break;case"forward":g=1,m=0,b=0;break;case"rearward":g=0,m=1,b=0;break;case"fixed":b=1;break;default:b=1,v=Math.min(1,Math.max(0,parseFloat(N)||0))}}switch(y="cover"==S.dock,o){case"middle":H?T.setTop(Math.max(0,(r.height-E.height)/2)):M.top(F(Math.max(0,(r.height-M.height())/2)));break;case"center":H?T.setLeft(Math.max(0,(r.width-E.width)/2)):M.left(F(Math.max(0,(r.width-M.width())/2)));break;case"top":p||(b?(I=v?parseFloat(r.ww*v)||0:c(H?E.width:D.$px(S.width,L))+$.left+$.right,v&&(I=h(e,S,"W",(I-=u)-$.left-$.right)+$.left+$.right),r.preX+I-r.oX>r.ww&&(r.top+=r.topHolder,r.topHolder=0,r.preX=r.oX,x(r,u,r.ww,"width","dockMaxW","left","right")),r.prevLine.push({profile:e,prop:S,node:M,style:R,isSVG:H,ins:T,pct:v,margin:$,region:{top:r.top+$.top,width:I}}),r.preX+=I+u,r.topHolder=Math.max(r.topHolder,(H?E.height:M.offsetHeight())+$.top+$.bottom+l)):(x(r,u,r.ww,"width","dockMaxW","left","right"),r.topHolder&&(r.top+=r.topHolder,r.preX=r.oX),A=g?(k?0:r.left)+$.left:D.$px(S.left,L),w=m?(k?0:r.right)+$.right:r.width-D.$px(S.width,L)-D.$px(S.left,L),_=(k?0:r.top)+$.top,I=h(e,S,"W",r.width-A-w-O),f(e,0,T,M,R,{left:A,top:_,width:c(I)}),k||(r.top+=(H?E.height:M.offsetHeight())+$.top+$.bottom+l)),i==t+1&&x(r,u,r.ww,"width","dockMaxW","left","right"));break;case"bottom":p||(b?(I=v?parseFloat(r.ww*v)||0:c(H?E.width:D.$px(S.width,L))+$.left+$.right,v&&(I=h(e,S,"W",(I-=u)-$.left-$.right)+$.left+$.right),r.preX+I-r.oX>r.ww&&(r.bottom+=r.bottomHolder,r.bottomHolder=0,r.preX=r.oX,x(r,u,r.ww,"width","dockMaxW","left","right")),r.prevLine.push({profile:e,prop:S,node:M,style:R,isSVG:H,ins:T,pct:v,margin:$,region:{bottom:r.bottom+$.bottom,width:I}}),r.preX+=I+u,r.bottomHolder=Math.max(r.bottomHolder,(H?E.height:M.offsetHeight())+$.top+$.bottom+l)):(x(r,u,r.ww,"width","dockMaxW","left","right"),r.bottomHolder&&(r.bottom+=r.bottomHolder,r.bottomHolder=0,r.preX=r.oX),A=g?(k?0:r.left)+$.left:D.$px(S.left,L),w=m?(k?0:r.right)+$.right:r.width-D.$px(S.width,L)-D.$px(S.left,L),C=(k?0:r.bottom)+$.bottom,I=h(e,S,"W",r.width-A-w),f(e,0,T,M,R,{left:A,bottom:C,width:c(I)}),k||(r.bottom+=(H?E.height:M.offsetHeight())+$.top+$.bottom+l)),i==t+1&&x(r,u,r.ww,"width","dockMaxW","left","right"));break;case"left":if(!p){if(r.topHolder&&(r.top+=r.topHolder+l,r.topHolder=0,r.oY=r.preY=r.top),r.bottomHolder&&(r.bottom+=r.bottomHolder+l,r.bottomHolder=0),r.hh=r.height-r.top-r.bottom,r.hh<=0)return;b?(I=v?parseFloat(r.hh*v)||0:c(H?E.height:D.$px(S.height,L))+$.top+$.bottom,v&&(I=h(e,S,"H",(I-=l)-$.top-$.bottom)+$.top+$.bottom),r.preY+I-r.oY>r.hh&&(r.left+=r.leftHolder,r.leftHolder=0,r.preY=r.oY,x(r,l,r.hh,"height","dockMaxH","top","bottom")),r.prevLine.push({profile:e,prop:S,node:M,style:R,isSVG:H,ins:T,pct:v,margin:$,region:{left:r.left+$.left,height:I}}),r.preY+=I+l,r.leftHolder=Math.max(r.leftHolder,(H?E.width:M.offsetWidth())+$.left+$.right+u)):(x(r,u,r.hh,"height","dockMaxH","top","bottom"),r.leftHolder&&(r.left+=r.leftHolder,r.leftHolder=0,r.preY=r.top),A=(k?0:r.left)+$.left,_=g?(k?0:r.top)+$.top:D.$px(S.top,L),C=m?(k?0:r.bottom)+$.bottom:r.height-D.$px(S.height,L)-D.$px(S.top,L),I=h(e,S,"H",r.height-_-C-P),f(e,0,T,M,R,{left:A,top:_,height:c(I)}),k||(r.left+=(H?E.width:M.offsetWidth())+$.left+$.right+u)),i==t+1&&x(r,u,r.hh,"height","dockMaxH","top","bottom")}break;case"right":if(!p){if(r.topHolder&&(r.top+=r.topHolder,r.topHolder=0,r.oY=r.preY=r.top),r.bottomHolder&&(r.bottom+=r.bottomHolder,r.bottomHolder=0),r.hh=r.height-r.top-r.bottom,r.hh<=0)return;b?(I=v?parseFloat(r.hh*v)||0:c(H?E.height:D.$px(S.height,L))+$.top+$.bottom,v&&(I=h(e,S,"H",(I-=l)-$.top-$.bottom)+$.top+$.bottom),r.preY+I-r.oY>r.hh&&(r.right+=r.rightHolder,r.rightHolder=0,r.preY=r.oY,x(r,l,r.hh,"height","dockMaxH","top","bottom")),r.prevLine.push({profile:e,prop:S,node:M,style:R,isSVG:H,ins:T,pct:v,margin:$,region:{right:r.right+$.right,height:I}}),r.preY+=I+l,r.rightHolder=Math.max(r.rightHolder,(H?E.width:M.offsetWidth())+$.left+$.right+u)):(x(r,u,r.hh,"height","dockMaxH","top","bottom"),r.rightHolder&&(r.right+=r.rightHolder,r.rightHolder=0,r.preY=r.top),w=(k?0:r.right)+$.right,_=g?(k?0:r.top)+$.top:D.$px(S.top,L),C=m?(k?0:r.bottom)+$.bottom:r.height-D.$px(S.height,L)-D.$px(S.top,L),I=h(e,S,"H",r.height-_-C-P),f(e,0,T,M,R,{right:w,top:_,height:c(I)}),k||(r.right+=(H?E.width:M.offsetWidth())+$.left+$.right+u)),i==t+1&&x(r,u,r.hh,"height","dockMaxH","top","bottom")}break;case"width":if(!a)return;r.leftHolder&&(r.left+=r.leftHolder,r.leftHolder=0),r.rightHolder&&(r.right+=r.rightHolder,r.rightHolder=0),A=g?(y||k?0:r.left)+$.left:D.$px(S.left,L),w=m?(y||k?0:r.right)+$.right:r.width-D.$px(S.width,L)-D.$px(S.left,L),_="width"==S.dock?D.$px(S.top,L)||0:g?(y||k?0:r.top)+$.top:D.$px(S.top,L),I=h(e,S,"W",(y?r.offsetW:r.width)-A-w-O),r.later=r.later||{},r.later[e.$xid]=r.later[e.$xid]||{},xui.merge(r.later[e.$xid],{isSVG:H,ins:T,node:M,width:F(I),left:F(A),top:F(_)},"all");break;case"height":if(!s)return;r.topHolder&&(r.top+=r.topHolder,r.topHolder=0,r.preX=r.oX),r.bottomHolder&&(r.bottom+=r.bottomHolder,r.bottomHolder=0,r.preX=r.oX),_=g?(y||k?0:r.top)+$.top:D.$px(S.top,L),C=m?(y||k?0:r.bottom)+$.bottom:r.height-D.$px(S.height,L)-D.$px(S.top,L),A="height"==S.dock?D.$px(S.left,L)||0:g?(y||k?0:r.left)+$.left:D.$px(S.left,L),I=h(e,S,"H",(y?r.offsetH:r.height)-_-C-P),r.later=r.later||{},r.later[e.$xid]=r.later[e.$xid]||{},xui.merge(r.later[e.$xid],{isSVG:H,ins:T,node:M,height:F(I),left:F(A),top:F(_)},"all")}}},d.onSize(m,"dock")),"fill"==C||"cover"==C?(e.link(m.height,"$dock1",null,u),e.link(m.width,"$dock2",null,l),xui.arr.stableSort(m.height,E),xui.arr.stableSort(m.width,E)):"origin"==C?(e.link(m.center,"$dock1",null,u),e.link(m.middle,"$dock2",null,l)):(e.link(m[C],"$dock",null,s),xui.arr.stableSort(m[C],E)),e.link(m.dockall,"$dockall",null,a),xui.$cache._resizeTime=1,e.$dockFun=m),p(d,b),"none"!=C?(e.$beforeDestroy=e.$beforeDestroy||{}).releaseDock=function(){e.unLink("$dockall"),e.unLink("$dock"),e.unLink("$dock1"),e.unLink("$dock2"),p(d,b),d&&d.get(0)&&(d=xui.UIProfile.getFromDom(d.id()))&&(d.boxing().adjustDock(),xui.tryF(d.clearCache,[],d)),e=d=null}:e.$beforeDestroy&&delete e.$beforeDestroy.releaseDock}i&&d.onSize()}}},_beforeSerialized:function(e){var t,i,r,o,n={};xui.merge(n,e,"all");var a=n.properties=xui.clone(e.properties,!0),s=n.box.$DataStruct,u=n.box.$DataModel;for(var l in xui.UI.$ps)l in a&&""===a[l]&&(a[l]="auto");for(var l in u)r=xui.UI[n.$inDesign?"__resetDftProp_in_Desinger":"__resetDftProp"],((o=n.box[n.$inDesign?"__resetDftProp_in_Desinger":"__resetDftProp"])&&l in o?o[l]:r&&l in r?r[l]:u[l].ini)===a[l]?delete a[l]:u[l]&&u[l].$spaceunit&&(0!==u[l].ini&&"0"!==u[l].ini&&"0px"!==u[l].ini&&"0em"!==u[l].ini||0!==a[l]&&"0"!==a[l]&&"0px"!==a[l]&&"0em"!==a[l]?u[l].ini+(xui.isFinite(u[l].ini)?"px":"")==a[l]+(xui.isFinite(a[l])?"px":"")?delete a[l]:"auto"!=a[l]&&(t=xui.$us(n),a[l]=e.$forceu(a[l],2==t?"em":-2==t?"px":null)):delete a[l]);if("absolute"==a.position)switch(a.dock){case"top":case"bottom":delete a.top,delete a.bottom,delete a.right;break;case"left":case"right":delete a.left,delete a.right,delete a.bottom}for(var l in xui.UI.$ps)l in a&&xui.isNaN(a[l])&&delete a[l];for(var l in a.items&&a.items.length&&(t=xui.absObj.$specialChars,a.items=xui.clone(a.items,(function(e,i,r){return!t[((1===r?e.id:i)+"").charAt(0)]&&e!=undefined}))),a.tagCmds&&a.tagCmds.length&&(t=xui.absObj.$specialChars,a.tagCmds=xui.clone(a.tagCmds,(function(e,i,r){return!t[((1===r?e.id:i)+"").charAt(0)]&&e!=undefined}))),e.box._objectProp)l in a&&a[l]&&(xui.isHash(a[l])||xui.isArr(a[l]))&&xui.isEmpty(a[l])&&delete a[l];return(l="tagVar")in a&&a[l]&&xui.isHash(a[l])&&xui.isEmpty(a[l])&&delete a[l],xui.arr.each(["dockMargin","conDockPadding","conDockSpacing","sandboxTheme","propBinder"],(function(e){if(t=a[e]){if(!xui.isHash(t))return;for(var r in i=s[e],t)if(i[r]!==t[r])return;delete a[e]}})),xui.isEmpty(a.resizerProp)&&delete a.resizerProp,a.items&&(0==a.items.length||a.listKey)&&delete a.items,a.tagCmds&&(0==a.tagCmds.length||a.listKey)&&delete a.tagCmds,n},getDropKeys:function(e,t){return e.properties.dropKeys},getDragKey:function(e,t){return e.properties.dragKey||e.properites.dragSortable&&e.key+":"+e.$xid},getDragData:function(e,t,i){return{profile:e,domId:xui.use(i).id(),data:e.onGetDragData?e.boxing().onGetDragData(e,t,i):null}},_prepareData:function(e,t){var i=e.properties,r=this.$DataModel,o=arguments.callee,n=o.map||(o.map=xui.toArr("left,top,bottom,right,width,height")),a=[],s=e.box,u=e.box.adjustData;t=t||{},i.id&&delete i.id,"required"in r&&(i._required=i.required?"xui-required":"",i._requiredfld=i.required?"xui-required-field":""),"nodeName"in r&&!i.nodeName&&(i.nodeName="xui"),"caption"in r&&null!==i.caption&&(i.caption=i.caption===undefined?e.alias:i.caption),"html"in r&&i.html&&(t.html=xui.adjustRes(i.html,0,1)),"src"in r&&i.src&&(t.src=xui.adjustRes(i.src,0,1)),xui.each(i,(function(t,o){r[o]&&r[o].$spaceunit&&xui.$us(e)>0&&(0===i[o]||"0"==i[o]?i[o]="0em":0!==i[o]&&"0"!=i[o]||(i[o]="0px"))})),"$hborder"in r&&r.$hborder&&(e.$isEm(i.width)?t.bWidth=e.$px2em(e.$em2px(i.width)-2*i.$hborder,null,!0)+"em":t.bWidth=(parseFloat(i.width)||0)-2*i.$hborder),"$vborder"in r&&r.$vborder&&(e.$isEm(i.height)?t.bHeight=e.$px2em(e.$em2px(i.height)-2*i.$vborder,null,!0)+"em":t.bHeight=(parseFloat(i.height)||0)-2*i.$vborder);for(var l,d=0;l=n[d];d++){var c;((c=l in t?t[l]:i[l])||0===c)&&"auto"!=c&&(a[a.length]=l+":"+e.$addu(c))}return i.position&&(a[a.length]="position:"+i.position),i.visibility&&(a[a.length]="visibility:"+i.visibility),"zIndex"in i&&(a[a.length]="z-index:"+i.zIndex),i.display&&(a[a.length]="inline-block"==i.display?"display:"+xui.$inlineBlock.join("; display:")+";":"display:"+i.display),t._style=a.join(";")+";",s.$Behaviors.PanelKeys&&!s["xui.absList"]&&(a=[],i.panelBgClr&&(a[a.length]="background-color:"+i.panelBgClr),i.panelBgImg&&(a[a.length]="background-image:url("+xui.adjustRes(i.panelBgImg)+")"),i.panelBgImgPos&&(a[a.length]="background-position:"+i.panelBgImgPos),i.panelBgImgRepeat&&(a[a.length]="background-repeat:"+i.panelBgImgRepeat),i.panelBgImgAttachment&&(a[a.length]="background-attachment:"+i.panelBgImgAttachment),t._panelstyle=a.join(";")),"className"in r&&(t._className=i.className||""),"readonly"in r&&(t.readonly=i.readonly?"xui-ui-readonly":""),"href"in r&&(t.href=i.href||xui.$DEFAULTHREF),"tabindex"in r&&(t.tabindex=i.tabindex||"-1"),"items"in r&&(e.ItemIdMapSubSerialId={},e.SubSerialIdMapItem={},i.items=e.box._adjustItems(i.items),t.items=this._prepareItems(e,i.items)),"selectable"in r&&(t._selectable=xui.browser.ie&&xui.browser.ver<10?"":i.selectable?"xui-ui-selectable":"xui-ui-unselectable"),t=u(e,i,t),e.prepared=!0,t},_prepareInlineObj:function(e,t,i){var r=t.object;if((r=r["xui.absBox"]?r.get(0):r["xui.UIProfile"]?r:xui.create(r).get(0)).destroyed)return null;if(r["xui.UIProfile"]){r.properties.position="relative","tabindex"in r.properties&&(r.properties.tabindex=i);var o="xui-inline-object",n=r.CC.KEY||(r.CC.KEY="");-1===n.indexOf(o)&&(r.CC.KEY=n+" "+o)}return t._inline_xid=r.$xid,t._inline_obj=r,r._inline_conf=t,r._inline_holder=e,!r.alias||r.host&&r.host!==r||r.boxing().setHost(e.host,r.alias),(e.$attached||(e.$attached=[])).push(r),r},_prepareItems:function(e,t,i,r,o){var n,a,s,u=this,l=[],d=xui.UI.$tag_subId,c=e.properties,p=c.tabindex,h=e.box.adjustData,f=e.$itemFilter;f&&f("begin","prepareItem",e);for(var x=0,g=t.length;x<g;x++)xui.isHash(t[x])||(xui.isArr(t[x])?(t[x]={id:t[x][0]},t.length>1&&(t[x].caption=t[x][1])):t[x]={id:t[x]}),"?"===t[x].id&&(t[x].id=xui.rand()),n=t[x],e.beforePrepareItem&&!1===e.boxing().beforePrepareItem(e,n,i,r,o)||(n.hasOwnProperty("caption")||(n.caption=n.id),a={id:n.id},xui.isSet(i)&&(a._pid=i),a.renderer=n.renderer||c.renderer,s=a[d]="string"==typeof o?o:e.pickSubId("items"),!1!==r&&(e.ItemIdMapSubSerialId[n.id]=s,e.SubSerialIdMapItem[s]=n),n.object?a.object=u._prepareInlineObj(e,n,p):(a._tabindex=p,h(e,n,a,"sub"),u._prepareItem&&u._prepareItem(e,a,n,i,x,g,r,o)),l.push(a));return f&&f("end","prepareItem",e),l},_showTips:function(e,t,i){if(!e.properties.disableTips)return e.onShowTips?e.boxing().onShowTips(e,t,i):void 0}}}),xui.Class("xui.absList","xui.absObj",{Instance:{activate:function(){var e=this.get(0).getSubNode("ITEM",!0);return e.isEmpty()||e.focus(!0),this},insertItems:function(e,t,i,r){var o,n,a,s,u,l,d,c,p,h,f=this,x=f._afterInsertItems;return this.each((function(r){if(h=r.box,n=h._adjustItems(e),c=r.properties,!0===t&&((g=c.$UIvalue||c.value)&&(g=(g+"").split(c.valueSeparator)),d=r.getItemByItemId(g[0]),t=d?d.id:null),a=r.properties.items,s=xui.arr.subIndexOf(a,"id",t),r.renderId){if(p=h._prepareItems(r,n),u=r._buildItems("items",p),r.$attached){for(var g,m=0;g=r.$attached[m++];)g._render&&g._render(!0),(l=g._render_holder||g._inline_holder)&&l.$afterAttached?xui.tryF(l.$afterAttached,[g],l):xui.tryF(f.$afterAttached,[g],f);delete r.$attached}-1==s?(o=r.getSubNode(h._ITEMSKEY||r.keys.ITEMS||r.keys.KEY),i?o.prepend(u):o.append(u)):(o=r.getSubNodeByItemId(h._ITEMKEY||"ITEM",t),i?o.addPrev(u):o.addNext(u))}if(-1==s?xui.arr.insertAny(a,n,i?0:-1):xui.arr.insertAny(a,n,i?s:s+1),x&&r.boxing()._afterInsertItems(r,p,t,i),r.$itemFilter){var b=[];xui.arr.each(e,(function(e){if(e.sub&&!e.hidden)if(!0!==r.$itemFilter(e,"checkSub",r)){for(var t,i=0,o=e.sub.length;i<o;i++)if(!e.sub[i].hidden){t=1;break}t||b.push(e.id)}else b.push(e.id)})),b.length&&f.showItems(b,!1)}}))},removeItems:function(e,t,i){var r,o,n=this._afterRemoveItems;return this.each((function(a){var s=a.properties,u=[];(e=xui.isHash(e)?[e.id]:xui.isArr(e)?e:0===e?[0]:e?(e+"").split(s.valueSeparator):null)||(e=((s.$UIvalue||s.value)+"").split(s.valueSeparator)),xui.arr.each(e,(function(t,i){e[i]=""+(xui.isNumb(t)?s.items&&s.items[t].id:xui.isHash(t)?t.id:t)})),function(e,o,n,a,s,u){var l=arguments.callee;s||(s=xui()),xui.filter(o,(function(i){var o,d;if((u||(d=-1!=xui.arr.indexOf(n,i.id)))&&e.renderId&&(o=e.ItemIdMapSubSerialId[i.id])&&(a.push(xui.copy(e.SubSerialIdMapItem[o])),delete e.SubSerialIdMapItem[o],delete e.ItemIdMapSubSerialId[i.id],e.reclaimSubId(o,"items"),u||((r=e.getSubNode(e.keys[t]?t:e.box._ITEMKEY||"ITEM",o)).isEmpty()||s.merge(r),i.$xid&&s.get().push(xui.getObject(i.$xid).getRootNode()))),i.sub&&l(e,i.sub,n,a,s,u||d),d){for(var c in i)i[c]=null;return!1}})),s.remove(!0,i)}(a,s.items,e,u),(o=s.$UIvalue)&&((o=(""+o).split(s.valueSeparator)).length>1?(xui.filter(o,(function(t){return-1==xui.arr.indexOf(e,t)})),s.$UIvalue=o.join(s.valueSeparator)):-1!=xui.arr.indexOf(e,s.$UIvalue)&&(s.$UIvalue=null)),n&&a.renderId&&a.boxing()._afterRemoveItems(a,u)}))},clearItems:function(e){return this.each((function(t){var i=t.properties;t.SubSerialIdMapItem&&(t.renderId&&t.getSubNode(t.keys[t.box._ITEMKEY||"ITEM"],!0).remove(!0,e),xui.each(t.SubSerialIdMapItem,(function(e,i){t.reclaimSubId(i,"items")})),t.SubSerialIdMapItem={},t.ItemIdMapSubSerialId={}),i.items.length=0,i.$UIvalue=null}))},updateItem:function(e,t){var i=this,r=i.get(0),o=r.properties;e=xui.isHash(e)?e.id:0===e?0:e?e+"":null,xui.isNumb(e)&&(e=xui.get(o.items,[e,"id"])),e||((b=o.$UIvalue||o.value)&&(b=(b+"").split(o.valueSeparator)),b=r.getItemByItemId(b[0]),e=b?b.id:null);var n,a,s,u,l,d,c=r.box,p=o.items,h=r.queryItems(p,(function(t){return"object"==typeof t?t.id===e:t===e}),!0,!0,!0);if(xui.isHash(t)||(t={caption:t+""}),h&&h.length){if(a="object"!=typeof(h=h[0])[0]?h[2][h[1]]={id:h[0]}:h[0],xui.isSet(t.id)&&(t.id+=""),t.id&&e!==t.id){n=t.id;var f=r.ItemIdMapSubSerialId;f[n]||((b=f[e])?(f[n]=b,delete f[e],r.SubSerialIdMapItem[b].id=n):a.id=n)}if(delete t.id,xui.isEmpty(t))return i;if((u=r.getSubNodeByItemId("ITEM",n||e)).isEmpty())xui.merge(a,t,"all");else{if("sub"in t){if(delete a._created,delete a._checked,delete a._inited,a.sub){var x=[];xui.arr.each(a.sub,(function(e){x.push(e.id)})),i.removeItems(x)}}else a.sub&&(l=r.getSubNodeByItemId("SUB",n||e));if(xui.merge(a,t,"all"),s=xui.get(r,["ItemIdMapSubSerialId",n||e]),g=c._prepareItems(r,[a],a._pid,!1,s),u.replace(r._buildItems(arguments[2]||"items",g),!1),l&&!l.isEmpty()&&((d=r.getSubNodeByItemId("SUB",n||e)).isEmpty()||d.replace(l)),"function"==typeof i.setUIValue){var g,m=o.$UIvalue||"";(g=(""+m).split(o.valueSeparator)).length&&-1!=xui.arr.indexOf(g,e)&&(n?(xui.arr.removeValue(g,e),g.push(a.id),i.setUIValue(g.join(o.valueSeparator),!0,null,"update")):i._setCtrlValue(m))}}if(c.$Behaviors.PanelKeys){var b,v={};t.hasOwnProperty("panelBgClr")&&(v["background-color"]=t.panelBgClr),t.hasOwnProperty("panelBgImg")&&(v["background-image"]=t.panelBgImg?"url("+xui.adjustRes(t.panelBgImg)+")":""),t.hasOwnProperty("panelBgImgPos")&&(v["position-color"]=t.panelBgImgPos),t.hasOwnProperty("panelBgImgRepeat")&&(v["background-repeat"]=t.panelBgImgRepeat),t.hasOwnProperty("panelBgImgAttachment")&&(v["background-attachment"]=t.panelBgImgAttachment),t.hasOwnProperty("overflow")&&((b=t.overflow)&&-1!=b.indexOf(":")&&xui.arr.each(b.split(/\s*;\s*/g),(function(e){var t=e.split(/\s*:\s*/g);t.length>1&&(v[xui.str.trim(t[0])]=xui.str.trim(t[1]||""))})),v.overflow=b||""),xui.isEmpty(v)||xui.arr.each(c.$Behaviors.PanelKeys,(function(t){r.getSubNode(t,n||e).css(v)}))}}return i},doFilter:function(e,t,i){var r=this,o=r.get(0);if(o){if(t=t||"doFilter",e)xui.isFun(e)?o.$itemFilter=e:!0===e&&(e=o.$itemFilter);else{if(!o.$itemFilter)return this;delete o.$itemFilter,e=function(){return!1}}xui.resetRun(o.$xid+":itemFilter",(function(){e("begin",t,o);var n=o.properties,a=n.rows||n.items,s=[],u=[],l=function(i,r,n){var a=0;return xui.arr.each(i,(function(i){i.sub?!0===e(i,t,o)||l(i.sub,r,n)?(a++,i.hidden&&r.push(i.id)):i.hidden||n.push(i.id):e(i,t,o)?i.hidden||n.push(i.id):(a++,i.hidden&&r.push(i.id))})),a};l(a,s,u),e("end",t,o),s.length&&(r.showRows||r.showItems).call(r,s),u.length&&(r.showRows||r.showItems).call(r,u,!1),!1!==i&&r.reLayout(!0)}))}return this},disableItem:function(e){return this.updateItem(e,{disabled:!0})},enableItem:function(e){return this.updateItem(e,{disabled:!1})},hideItems:function(e){return this.showItems(e,!1)},showItems:function(e,t){var i=this,r=i.get(0),o=xui(),n=xui(),a=r.properties;return(e=xui.isHash(e)?e.id:xui.isArr(e)?e:0===e?[0]:e?(e+"").split(a.valueSeparator):null)||(e=((a.$UIvalue||a.value)+"").split(a.valueSeparator)),e&&e.length&&xui.arr.each(e,(function(e,r){(r=i.getItemByItemId(e))&&(!1===t?r.hidden||n.merge(i.getSubNodeByItemId("ITEM",r.id)):r.hidden&&o.merge(i.getSubNodeByItemId("ITEM",r.id)),r.hidden=!1===t)})),o.isEmpty()||o.css("display",""),n.isEmpty()||n.css("display","none"),this},getItems:function(e,t){if(t=t||this.get(0).properties.items,"data"==e)return xui.clone(t,!0);if("min"==e){var i=xui.clone(t,!0);return xui.arr.each(i,(function(e,t){i[t]=e.id})),i}return t},focusItem:function(e){return this.getSubNodeByItemId(this.constructor._focusNodeKey,e).focus(!0),this},scrollIntoView:function(e){return(e=(e=this.getSubNodeByItemId(this.constructor._focusNodeKey,e)).get(0))&&e.scrollIntoView(),this},selectItem:function(e){return this.fireItemClickEvent(e)},fireItemClickEvent:function(e){return this.getSubNodeByItemId(this.constructor._focusNodeKey,e).onClick(),this},editItem:function(e){var t,i,r,o=this.get(0),n=o.properties;if(o&&o.renderId&&!o.destroyed&&(e=xui.isHash(e)?e.id:0===e?0:e?e+"":null,xui.isNumb(e)&&(e=xui.get(n.items,[e,"id"])),e||((r=n.$UIvalue||n.value)&&(r=(r+"").split(n.valueSeparator)),e=(r=o.getItemByItemId(r[0]))?r.id:null),e&&(t=o.getItemByItemId(e))&&((i=o.getSubNodeByItemId("ITEMCAPTION",e)).isEmpty()&&(i=o.getSubNodeByItemId("CAPTION",e)),!i.isEmpty()))){var a=i.parent(),s=xui.browser.contentBox,u=i.offset(null,a.get(0)),l=(i.cssSize(),a.offset()),d=a.cssSize();if(l.left+=s?i._paddingW("left"):0,l.top+=s?i._paddingH("top"):0,d.height+=s?i._paddingH():0,o.beforeIniEditor&&!1===(c=o.boxing().beforeIniEditor(o,t,i)))return;if(!c||!c["xui.UI"]){var c;(c=new xui.UI.ComboInput({type:"input"})).setWidth(Math.max(d.width-u.left,40)).setHeight(Math.max(d.height,20)).setResizer(!0).setValue(t.caption||""),o.onBeginEdit&&o.boxing().onBeginEdit(o,t,c);var p=function(){xui.resetRun("absList_editor_reset",(function(){c&&!c.isDestroyed()&&(c.getRoot().setBlurTrigger("absList_editor_blur",null),c.destroy(),c=null)}))};c.beforeUIValueSet((function(e,i,r,n,a){!1!==(o.beforeEditApply&&o.boxing().beforeEditApply(o,t,r,c,a))&&(o.boxing().updateItem(t.id,{caption:r}),o.onEndEdit&&o.boxing().onEndEdit(o,t,c),p())})).onCancel((function(){p()})),xui("body").append(c);var h=c.getRoot();h.popToTop({left:u.left+l.left,top:l.top}),h.setBlurTrigger("absList_editor_blur",(function(){p()})),c.activate()}}return this},getSelectedItem:function(){var e,t=this.getUIValue(!0),i=this.get(0),r=[];if(xui.isArr(t)){if(t.length)return xui.arr.each(t,(function(t){(e=i.getItemByItemId(t))&&r.push(e)})),r}else if(t)return i.getItemByItemId(t)}},Initialize:function(){var e=this.prototype;xui.arr.each(xui.toArr("getItemByItemId,getItemByDom,getSubIdByItemId,getSubNodeByItemId"),(function(t){e[t]=function(){var e=this.get(0);return e[t].apply(e,arguments)},xui.Class._fun(e[t],t,e.KEY,null,"instance")}))},Static:{_focusNodeKey:"ITEM",$abstract:!0,_ensureValues:xui.UI._ensureValues,DataModel:{listKey:{set:function(e){var t=this,i=t.box.getCachedData(e);i?t.boxing().setItems(xui.clone(i)):t.boxing().setItems(t.properties.items),t.properties.listKey=e}},items:{ini:[],set:function(e){var t,i,r=this,o=r.boxing(),n=r.properties.items;if("function"==typeof o.setValue&&(i=r.properties.value)&&e&&e.length){var a=xui.arr.indexOf(e,i);-1===a&&(a=xui.arr.subIndexOf(e,"id",r.properties.value))}if(n&&n.length&&(r.children&&r.children.length&&(xui.arr.each(t=r.serialize(!1,!0).children,(function(e){if(e[1]){var t=xui.arr.indexOf(n,e[1]);-1===t&&(t=xui.arr.subIndexOf(n,"id",e[1])),-1!==t&&(e[2]=t)}})),o.removeChildren(!0,!0,!0)),o.clearItems(!0,!0)),o.insertItems(e?xui.copy(e):null,null,null,!0),e&&e.length&&t){var s={},u={};e.length,xui.arr.each(e,(function(e,t){s[e.id||e]=t,u[t]=e.id||e})),xui.arr.each(t,(function(e){var t,n;xui.isSet(e[1])&&(xui.isSet(s[e[1]])?(n=xui.create(e[0]),r.$panelRestore&&r.$panelRestore(n.get(0)),o.append(n,e[1]),t=1):u[e[2]]&&(n=xui.create(e[0]),r.$panelRestore&&r.$panelRestore(n.get(0)),o.append(n,u[e[2]]),t=1)),t||(n=xui.create(e[0]),r.$panelRestore&&r.$panelRestore(n.get(0)),o.append(n,i))}))}xui.isSet(i)&&o.setValue(i,!0,"items"),r.renderId&&r.adjustSize()}},dragSortable:!1,valueSeparator:";"},RenderTrigger:function(){this.destroyTrigger=function(){xui.each(this.SubSerialIdMapItem,(function(e){xui.breakO(e)})),this.properties.items.length=0}},EventHandlers:{beforePrepareItem:function(e,t,i){},beforeIniEditor:function(e,t,i){},onBeginEdit:function(e,t,i){},beforeEditApply:function(e,t,i,r,o){},onEndEdit:function(e,t,i){}},getDropKeys:function(e,t){var i=e.getItemByDom(t);return i&&i.dropKeys||e.properties.dropKeys},getDragKey:function(e,t){var i=e.getItemByDom(t);return i&&i.dragKey||e.properties.dragKey||e.properties.dragSortable&&e.key+":"+e.$xid},_adjustItems:function(e){xui.isSet(e)||(e=[]),xui.isArr(e)||(e=[e]);var t=xui.copy(e);return xui.arr.each(t,(function(e,i){xui.isArr(e)&&e.length?(t[i]={id:e[0]},t[i].id=xui.isSet(t[i].id)?t[i].id+"":xui.id(),xui.isSet(e[1])&&(t[i].caption=e[1]+"")):xui.isHash(e)?(t[i]=xui.copy(e),t[i].id=xui.isSet(t[i].id)?t[i].id+"":xui.id()):t[i]={id:e+""}})),t},_showTips:function(e,t,i){if(!e.properties.disableTips){if(e.onShowTips)return e.boxing().onShowTips(e,t,i);if(xui.Tips){e.properties;var r=t.id,o=e.getSubId(r),n=e.SubSerialIdMapItem,a=n&&n[o];return a&&"tips"in a?(a.tips?xui.Tips.show(i,a):xui.Tips.hide(),!1):!(e.properties.autoTips&&a&&"caption"in a&&(a.caption||a.comment?xui.Tips.show(i,{tips:xui.adjustRes((a.caption||"")+(a.caption||a.comment?"<br/>":"")+(a.comment||""),!0,!1,null,null,a)}):xui.Tips.hide(),1))}}}}}),xui.Class("xui.absValue","xui.absObj",{Instance:{_getCtrlValue:function(){return this.get(0).properties.$UIvalue},_setCtrlValue:function(e){return this},_setDirtyMark:function(e){return this.each((function(t){if(t.renderId){var i=t.properties,r=i.value!==i.$UIvalue,o=t.getSubNode(e||t.box.DIRYMARKICON||"KEY"),n=xui.UI.$css_tag_dirty;t._dirtyFlag!==r&&(i.dirtyMark&&i.showDirtyMark&&(t.beforeDirtyMark&&!1===t.boxing().beforeDirtyMark(t,r)||(r?o.addClass(n):o.removeClass(n))),t._dirtyFlag=r)}}))},getValue:function(e){var t=this.get(0),i=t.properties,r=i.value;return"multi"==t.box.$valuemode&&e&&xui.isStr(r)&&(r=r.split(i.valueSeparator)),t.box.$DataModel.selMode&&("multi"==i.selMode||"multibycheckbox"==i.selMode)&&e&&(xui.isStr(r)&&(r=r.split(i.valueSeparator)),r&&xui.isArr(r)&&r.length>1&&r.sort()),r},getUIValue:function(e){var t=this.get(0),i=t.properties;if(!t.renderId)return i&&i.value;var r,o=this._getCtrlValue();return t.box._checkValid&&!1===t.box._checkValid(t,o)||(i.$UIvalue=o),r=i.$UIvalue,"multi"==t.box.$valuemode&&e&&xui.isStr(r)&&(r=r.split(i.valueSeparator)),t.box.$DataModel.selMode&&("multi"==i.selMode||"multibycheckbox"==i.selMode)&&e&&(xui.isStr(r)&&(r=r.split(i.valueSeparator)),r&&xui.isArr(r)&&r.length>1&&r.sort()),r},resetValue:function(e){return this.each((function(t){var i,r=t.properties,o=t.boxing(),n="function"==typeof(i=t.box._ensureValue)?i.call(t.box,t,e):e;r.value===n&&r.$UIvalue===n||(t.box._beforeResetValue&&t.box._beforeResetValue(t),"function"==typeof(i=t.$onValueSet)&&(i=i.call(t,r.value,n),xui.isSet(i)&&(n=i)),r.value=n,t.renderId&&t.boxing()._setCtrlValue(n),r.$UIvalue=n),t._inValid=1,o._setDirtyMark()})),this},setUIValue:function(e,t,i,r,o){return this.each((function(n){var a,s=n.properties,u=s.$UIvalue,l=n.boxing();if(t||u!==e){if(n.box._checkValid&&!1===n.box._checkValid(n,e)||n.beforeUIValueSet&&!1===(a=l.beforeUIValueSet(n,u,e,t,r,o)))return;var d;a!==undefined&&"boolean"!=typeof a&&(e=a),n.box&&"function"==typeof(a=n.box._ensureValue)&&(e=a.call(n.box,n,e)),"function"==typeof(a=n.$onUIValueSet)&&(a=a.call(n,e,t,r),xui.isSet(a)&&(e=a)),n.renderId&&!i&&(d=1,l._setCtrlValue(e)),s.$UIvalue=e,n.renderId&&!i&&l._setDirtyMark(),n.afterUIValueSet&&l.afterUIValueSet(n,u,e,t,r,o),n._onChange&&l._onChange(n,u,e,t,r,o),n.onChange&&l.onChange(n,u,e,t,r,o),s.dirtyMark||l.setValue(e,!1,"uiv",d||i),s.excelCellId&&l.notifyExcel&&l.notifyExcel(!1)}})),this},updateValue:function(){return this.each((function(e){var t=e.properties;if(t.value!==t.$UIvalue){var i=e.boxing();i.checkValid()&&(i.setValue(i.getUIValue(),!0,"update"),i._setDirtyMark())}}))},isDirtied:function(){var e=!1;return this.each((function(t){var i=t.properties;if(e=i.value+" "!=i.$UIvalue+" ")return!1})),e},checkValid:function(e){var t,i,r=!0,o=xui.isSet(e);return this.each((function(n){t=n.properties,i=!0,n.box._checkValid2&&(r=(i=n.box._checkValid2(n))&&r),i&&n.box._checkValid&&(r=n.box._checkValid(n,o?e:t.$UIvalue)&&r),!o&&n.renderId&&n.boxing()._setDirtyMark()})),r}},Static:{$abstract:!0,DataModel:{readonly:{ini:!1,action:function(e){var t=this.getRoot();e?t.addClass("xui-ui-readonly"):t.removeClass("xui-ui-readonly")}},required:{ini:!1,action:function(e){if(this.keys.LABEL){var t=this.getSubNode("LABEL");e?t.addClass("xui-required"):t.removeClass("xui-required")}e?this.getRoot().addClass("xui-required-field"):this.getRoot().removeClass("xui-required-field")}},value:{ini:null,set:function(e,t,i,r){var o,n=this,a=n.properties,s=a.value,u=n.boxing();n.box._checkValid&&!1===n.box._checkValid(n,e)||n.beforeValueSet&&!1===(o=u.beforeValueSet(n,s,e,t,i))||(o!==undefined&&(e=o),"function"==typeof(o=n.box._ensureValue)&&(e=o.call(n.box,n,e)),"function"==typeof(o=n.$onValueSet)&&(o=o.call(n,s,e,t,i),xui.isSet(o)&&(e=o)),n.renderId&&!r&&u._setCtrlValue(e),a.value=a.$UIvalue=e,n._inValid||(n._inValid=1),n.renderId&&u._setDirtyMark(),n.afterValueSet&&u.afterValueSet(n,s,e,t,i),n.onValueChange&&u.onValueChange(n,s,e,t,i))}},isFormField:!0,dirtyMark:!0,showDirtyMark:!0},_ensureValues:xui.UI._ensureValues,_ensureValue:function(e,t){var i=e.properties;return!e.box.$DataModel.selMode||"multi"!=i.selMode&&"multibycheckbox"!=i.selMode?xui.isArr(t)?t[0]:t:(xui.isArr(t)||(t=(t?""+t:"").split(i.valueSeparator)),t.sort(),t.join(i.valueSeparator))},EventHandlers:{beforeValueSet:function(e,t,i,r,o){},afterValueSet:function(e,t,i,r,o){},onValueChange:function(e,t,i,r,o){},beforeUIValueSet:function(e,t,i,r,o,n){},afterUIValueSet:function(e,t,i,r,o,n){},onChange:function(e,t,i,r,o,n){},_onChange:function(e,t,i,r,o,n){},beforeDirtyMark:function(e,t){}},RenderTrigger:function(){var e,t=this,i=t.boxing(),r=t.properties;t.behavior.PanelKeys||((e=r.dataBinder)&&i.setDataBinder(e,!0),(e=r.dataField)&&i.setDataField(e)),r.value!==undefined&&("function"==typeof(e=t.box._ensureValue)&&(r.value=e.call(t.box,t,r.value),r.$UIvalue&&(r.$UIvalue=e.call(t.box,t,r.$UIvalue))),r.$UIvalue||(r.$UIvalue=r.value),i._setCtrlValue(r.$UIvalue,!0))}}}),xui.Class("xui.UI.Widget","xui.UI",{Static:{Appearances:{KEY:{},IE67_SHADOW:xui.browser.ie&&xui.browser.ver<=8?{"z-index":"-1",position:"absolute",left:0,top:0,width:"100%",height:"100%",overflow:"visible"}:null},Templates:{className:"xui-uiw-shell {_className} {_requiredfld}",style:"{_style}",IE67_SHADOW:xui.browser.ie&&xui.browser.ver<=8?{}:null,FRAME:{$order:2,className:"xui-uiw-frame ",BORDER:{$order:1,style:"width:{bWidth};height:{bHeight};",className:"xui-uiw-border"}}},DataModel:{width:{$spaceunit:1,ini:"10em"},height:{$spaceunit:1,ini:"10em"},shadow:{ini:!1,action:function(e){if(xui.browser.ie&&xui.browser.ver<=8){var t=this.getSubNode("IE67_SHADOW");e?t.addClass("xui-ui-shadow xui-uiborder-r xui-uiborder-b xui-uiborder-radius-br"):t.removeClass("xui-ui-shadow xui-uiborder-r xui-uiborder-b xui-uiborder-radius-br")}else t=this.getSubNode("BORDER"),e?t.addClass("xui-ui-shadow"):t.removeClass("xui-ui-shadow")}},$hborder:0,$vborder:0},RenderTrigger:function(){var e=this,t=e.properties,i=e.boxing();e.renderId&&!e.$noB&&t.border&&i._border&&i._border(),!e.$noR&&t.resizer&&i.setResizer&&i.setResizer(t.resizer,!0),!e.$noS&&t.shadow&&i.setShadow&&i.setShadow(!0,!0)},_onresize:function(e,t,i){var r,o=e.properties,n=e.getSubNode("BORDER"),a=n.contentBox(),s=xui.browser.ie&&xui.browser.ver<=8?e.getSubNode("IE67_SHADOW"):null,u=xui.$us(e),l=function(t,i){return e.$forceu(t,u>0?"em":"px",i)},d=e.$px(t),c=e.$px(i),p=a?Math.max(0,(o.$b_lw||0)-(o.$hborder||0)):0,h=a?Math.max(0,(o.$b_tw||0)-(o.$vborder||0)):0;return d&&"auto"!==d&&(d-=a?Math.max(2*(o.$hborder||0),(o.$b_lw||0)+(o.$b_rw||0)):0,xui.browser.ie&&xui.browser.ver<=6&&(d=2*e.$px(d/2))),c&&"auto"!==c&&(c-=a?Math.max(2*(o.$vborder||0),(o.$b_lw||0)+(o.$b_rw||0)):0,xui.browser.ie&&xui.browser.ver<=6&&(c=2*e.$px(c/2)),xui.browser.ie&&xui.browser.ver<=6&&null===t&&(n.ieRemedy(),s&&s.ieRemedy())),r={left:l(p),top:l(h),width:l(d),height:l(c)},n.cssRegion(r),s&&s.cssRegion(r),e.$resizer&&xui.browser.ie&&(n.ieRemedy(),s&&s.ieRemedy()),r}}}),xui.Class("xui.UI.Link","xui.UI",{Instance:{fireClickEvent:function(){return this.getRoot().onClick(),this}},Static:{Appearances:{KEY:{cursor:"pointer"}},Templates:{tagName:"a",className:"{_className}",style:"{_style}",href:"{href}",target:"{target}",tabindex:"{tabindex}",text:"{caption}"},Behaviors:{HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},onClick:function(e,t,i){var r;!e.properties.disabled&&e.onClick&&(r=e.boxing().onClick(e,t,i));var o=xui.use(i).attr("href");return"boolean"==typeof r?r:0!==o.indexOf("javascript:")&&0!==o.indexOf("#")}},DataModel:{caption:{ini:undefined,action:function(e){e=(xui.isSet(e)?e:"")+"",this.getRoot().html(xui.adjustRes(e,!0))}},href:{ini:xui.$DEFAULTHREF,action:function(e){this.getRoot().attr("href",e)}},target:{action:function(e){this.getRoot().attr("target",e)}}},EventHandlers:{onClick:function(e,t){}}}}),xui.Class("xui.UI.Element","xui.UI",{Instance:{fireClickEvent:function(){return this.getRoot().onClick(),this}},Static:{_objectProp:{attributes:1},Templates:{_NativeElement:!0,tagName:"{nodeName}",className:"xui-node xui-wrapper {_className}",style:"{_style};",tabindex:"{tabindex}",text:"{html}"+xui.UI.$childTag},DataModel:{width:{$spaceunit:1,ini:"8em"},height:{$spaceunit:1,ini:"1em"},nodeName:{ini:"xui",action:function(e){this.boxing().refresh()}},selectable:!0,html:{html:1,action:function(e,t,i){this.getRoot().html(xui.adjustRes(e,0,1),null,null,i)}},attributes:{ini:{},action:function(e,t){var i=this.getRoot();xui.isEmpty(t)||xui.each(t,(function(e,t){i.attr(t,null)})),xui.isEmpty(e)||xui.each(e,(function(e,t){i.attr(t,e)}))}},tabindex:-1},Appearances:{KEY:{"line-height":"normal"}},Behaviors:{HoverEffected:{KEY:"KEY"},onClick:function(e,t,i){return!e.properties.disabled&&(e.onClick?e.boxing().onClick(e,t,i):void 0)}},EventHandlers:{onClick:function(e,t,i){}},RenderTrigger:function(){var e=this.properties.attributes;if(!xui.isEmpty(e)){var t=this.getRoot();xui.each(e,(function(e,i){t.attr(i,e)}))}}}}),xui.Class("xui.UI.Icon","xui.UI",{Instance:{fireClickEvent:function(){return this.getRoot().onClick(),this}},Static:{Templates:{className:"xui-node xui-wrapper {_className}  {picClass}",style:"{_style};",ICON:{className:"xuicon {imageClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{imageDisplay}{_fontsize}{_fontclr}{iconStyle}",text:"{iconFontCode}"},FLAG:{$order:1,className:"xui-display-none xui-uiflag {flagClass}",style:"{_flagStyle};{flagStyle}",text:"{flagText}"}},DataModel:{selectable:null,html:null,attributes:null,renderer:null,defaultFocus:null,tabindex:-1,image:{format:"image",action:function(e){xui.UI.$iconAction(this)}},imagePos:{action:function(e){this.getSubNode("ICON").css("backgroundPosition",e||"center")}},imageBgSize:{action:function(e){this.getSubNode("ICON").css("backgroundSize",e||"")}},imageClass:{ini:"",action:function(e,t){xui.UI.$iconAction(this,"ICON",t)}},iconFontCode:{action:function(e){xui.UI.$iconAction(this)}},iconFontSize:{action:function(e){this.getSubNode("ICON").css("fontSize",e||"")}},iconColor:{type:"color",action:function(e){this.getSubNode("ICON").css("color",e||"")}},flagText:{ini:"",action:function(e){this.getSubNode("FLAG").text(e)}},flagClass:{ini:"",combobox:["","xui-uiflag-2","xui-uiflag-3","xui-uiflag-4"],action:function(e,t){this.getSubNode("FLAG").removeClass(t).addClass(e)}}},Appearances:{KEY:{overflow:"visible"},ICON:{position:"relative",display:xui.$inlineBlock,zoom:xui.browser.ie?1:null},FLAG:{position:"absolute","z-index":10}},Behaviors:{HoverEffected:{ICON:"ICON"},ClickEffected:{ICON:"ICON"},onClick:function(e,t,i){return!e.properties.disabled&&(e.onClick?e.boxing().onClick(e,t,i):void 0)}},EventHandlers:{onClick:function(e,t,i){}},_prepareData:function(e){var t=arguments.callee.upper.call(this,e);return t.iconFontSize&&(t._fontsize=t.iconFontSize+";"),t.iconColor&&(t._fontclr="color:"+t.iconColor+";"),t._flagStyle="display:"+(t.flagText||t.flagClass?"block":"none"),t.flagClass||(t.flagClass="xui-uiflag-1"),t}}}),xui.Class("xui.UI.HTMLButton","xui.UI.Element",{Instance:{activate:function(){return this.getRoot().focus(!0),this}},Static:{Templates:{tagName:"button",className:"xui-ui-unselectable xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius {_className}",style:"{_style};",tabindex:"{tabindex}",text:"{caption}"+xui.UI.$childTag},Appearances:{KEY:{cursor:"pointer",padding:".334em"}},DataModel:{nodeName:null,tabindex:1,width:"auto",height:"auto",html:{hidden:1,get:function(){return this.boxing().getCaption()},set:function(e,t){return this.boxing().setCaption(e,t)}},caption:{ini:undefined,action:function(e){e=(xui.isSet(e)?e:"")+"",this.getRoot().html(xui.adjustRes(e,0,1))}},disabled:{ini:!1,action:function(e){var t=this.getRoot(),i="xui-ui-disabled";e?this.getRoot().addClass(i):this.getRoot().removeClass(i),t.attr("disabled",e?"1":null)}},shadow:{ini:!1,action:function(e){var t=this.getRoot();e?t.addClass("xui-ui-shadow"):t.removeClass("xui-ui-shadow")}},fontColor:{ini:"",type:"color",action:function(e){this.getRoot().css("color",e)}},fontSize:{combobox:["","14px","18px","22px","30px"],action:function(e){this.getRoot().css("fontSize",e)}},fontWeight:{combobox:["","normal","bolder","bold","lighter","100","200","300","400","500","600","700","800","900"],action:function(e){this.getRoot().css("fontWeight",e)}},fontFamily:{combobox:["","arial","sans-serif","comic","courier new","monospace","serif","times new roman","wingdings"],action:function(e){this.getRoot().css("fontFamily",e)}}},RenderTrigger:function(){var e=this,t=e.properties,i=e.boxing();t.disabled&&i.setDisabled(!0),!e.$noS&&t.shadow&&i.setShadow&&i.setShadow(!0,!0)},Behaviors:{HoverEffected:{KEY:"KEY"}},_prepareData:function(e){var t=arguments.callee.upper.call(this,e);return t._style=t._style+(t.fontColor?";color:"+t.fontColor:"")+(t.fontSize?";font-size:"+t.fontSize:"")+(t.fontWeight?";font-weight:"+t.fontWeight:"")+(t.fontFamily?";font-family:"+t.fontFamily:""),t}}}),xui.Class("xui.UI.Button",["xui.UI.HTMLButton","xui.absValue"],{Initialize:function(){xui.UI.SButton=xui.UI.Button;var e="xui.UI.SButton";xui.absBox.$type[e.replace("xui.UI.","")]=xui.absBox.$type[e]=e,this.$activeClass$="xui.UI.Button"},Instance:{activate:function(){return this.getRoot().focus(!0),this},_setCtrlValue:function(e){return!xui.isNull(e)&&xui.isDefined(e)||(e=!1),this.each((function(t){"status"==t.properties.type&&t.getRoot().tagClass("-checked",e)}))},resetValue:function(e){this.each((function(e){"drop"==e.properties.type&&e.boxing().setCaption("",!0)}));var t=arguments.callee.upper,i=t.apply(this,xui.toArr(arguments));return t=null,i},setUIValue:function(e,t){this.each((function(t){var i=t.properties;i.$UIvalue!==e&&"drop"==i.type&&t.boxing().setCaption("",!0)}));var i=arguments.callee.upper,r=i.apply(this,xui.toArr(arguments));return i=null,r}},Static:{DIRYMARKICON:"BACKGROUND",Templates:{tagName:"button",className:"xui-ui-unselectable xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius {_className}",style:"{_style};{_align}",tabindex:"{tabindex}",BACKGROUND:{tagName:"div"},ICON:{$order:1,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{$order:2,className:"",style:"{_capStyle}",text:"{caption}"},DROP:{$order:3,className:"xuifont xui-special-icon",style:"{_showDrop}",$fonticon:"xui-uicmd-arrowdrop"}},Appearances:{BACKGROUND:{"z-index":-1,position:"absolute",left:0,top:0,width:"100%",height:"100%"},DROP:{"vertical-align":"middle","padding-left":".66667em"}},Behaviors:{HoverEffected:{KEY:["KEY","DROP"]},NavKeys:{KEY:1},onClick:function(e,t,i){var r=e.properties;if(r.disabled)return!1;var o=e.boxing();if("status"==r.type){if(r.readonly)return!1;o.setUIValue(!r.$UIvalue,null,null,"click"),e.onChecked&&o.onChecked(e,t,r.$UIvalue)}return e.onClick?o.onClick(e,t,i,r.$UIvalue):"drop"==r.type&&e.onClickDrop?o.onClickDrop(e,t,i,r.$UIvalue):void 0},onKeydown:function(e,t,i){var r=xui.Event.getKey(t).key;" "!=r&&"enter"!=r||(e.getSubNode("KEY").afterMousedown(),e.__fakeclick=1)},onKeyup:function(e,t,i){var r=xui.Event.getKey(t).key;" "!=r&&"enter"!=r||(e.getSubNode("KEY").afterMouseup(),e.__fakeclick&&xui.use(i).onClick()),delete e.__fakeclick}},DataModel:{html:null,image:{format:"image",action:function(e){xui.UI.$iconAction(this)}},imagePos:{action:function(e){this.getSubNode("ICON").css("backgroundPosition",e||"center")}},imageBgSize:{action:function(e){this.getSubNode("ICON").css("backgroundSize",e||"")}},imageClass:{ini:"",action:function(e,t){xui.UI.$iconAction(this,"ICON",t)}},iconFontCode:{action:function(e){xui.UI.$iconAction(this)}},caption:{ini:undefined,action:function(e){e=(xui.isSet(e)?e:"")+"",this.getSubNode("CAPTION").html(xui.adjustRes(e,0,1))}},hAlign:{ini:"center",listbox:["left","center","right"],action:function(e){this.getRoot().css("textAlign",e)}},vAlign:{ini:"middle",listbox:["top","middle","bottom"],action:function(e){}},value:{ini:!1},fontColor:{action:function(e){this.getSubNode("CAPTION").css("color",e)}},fontSize:{combobox:["","14px","18px","22px",".75em","1.5em","2em","3em"],action:function(e){this.getSubNode("CAPTION").css("fontSize",e)}},fontWeight:{action:function(e){this.getSubNode("CAPTION").css("fontWeight",e)}},fontFamily:{action:function(e){this.getSubNode("CAPTION").css("fontFamily",e)}},type:{ini:"normal",listbox:["normal","status","drop"],action:function(e){var t=this.getSubNode("DROP");"drop"==e?t.css("display",""):t.css("display","none")}}},_isFormField:function(e){return"status"==e.properties.type&&e.properties.isFormField},_ensureValue:function(e,t){return"status"==e.properties.type?!!t:t},_prepareData:function(e){var t=arguments.callee.upper.call(this,e);return t._align="text-align:"+t.hAlign+";",t._showDrop="drop"==t.type?"":"display:none",t._capStyle=(t.fontColor?"color:"+t.fontColor+";":"")+(t.fontSize?"font-size:"+t.fontSize+";":"")+(t.fontWeight?"font-weight:"+t.fontWeight+";":"")+(t.fontFamily?"font-family:"+t.fontFamily+";":""),t},RenderTrigger:function(){var e=this.properties,t=this.boxing();"status"==e.type&&e.value&&t.setValue(!0,!0,"render")},EventHandlers:{onClick:function(e,t,i,r){},onClickDrop:function(e,t,i,r){},onChecked:function(e,t,i){}}}}),xui.Class("xui.UI.Span","xui.UI",{Instance:{fireClickEvent:function(){return this.getRoot().onClick(),this}},Static:{Templates:{className:"{_className}",style:"{_style};{_overflow};",tabindex:"{tabindex}",text:"{html}"+xui.UI.$childTag},DataModel:{width:{$spaceunit:1,ini:"2em"},height:{$spaceunit:1,ini:"1em"},selectable:!0,html:{html:1,action:function(e,t,i){this.getRoot().html(xui.adjustRes(e,0,1),null,null,i)}},overflow:{ini:"touchOnly"==xui.browser.deviceType?"auto":undefined,combobox:["","visible","hidden","scroll","auto","overflow-x:hidden;overflow-y:auto","overflow-x:auto;overflow-y:hidden"],action:function(e){var t=this.getContainer();e&&-1!=e.indexOf(":")?xui.arr.each(e.split(/\s*;\s*/g),(function(e){var i=e.split(/\s*:\s*/g);i.length>1&&t.css(xui.str.trim(i[0]),xui.str.trim(i[1]||""))})):t.css("overflow",e||"")}},tabindex:-1},Appearances:{KEY:{"line-height":"normal"}},Behaviors:{HoverEffected:{KEY:"KEY",ICON:"ICON"},onClick:function(e,t,i){return!e.properties.disabled&&(e.onClick?e.boxing().onClick(e,t,i):void 0)}},EventHandlers:{onClick:function(e,t,i){}},_prepareData:function(e,t){return t=arguments.callee.upper.call(this,e,t),xui.isStr(t.overflow)&&(t._overflow=-1!=t.overflow.indexOf(":")?t.overflow:t.overflow?"overflow:"+t.overflow:""),t}}}),xui.Class("xui.UI.Div","xui.UI",{Initialize:function(){xui.UI.Pane=xui.UI.Div;var e="xui.UI.Pane";xui.absBox.$type[e.replace("xui.UI.","")]=xui.absBox.$type[e]=e,this.$activeClass$="xui.UI.Div"},Instance:{fireClickEvent:function(){return this.getRoot().onClick(),this}},Static:{Appearances:{KEY:{outline:xui.browser.gek?"none":null,zoom:xui.browser.ie&&xui.browser.ver<9?"1":null,background:xui.browser.ie?"url("+xui.ini.img_bg+") no-repeat left top":null,"line-height":"normal"},FLAG:{position:"absolute","z-index":10}},Templates:{tagName:"div",className:"xui-uicontainer {_className}",style:"{_style};{_panelstyle};{_overflow};",tabindex:"{tabindex}",text:"{html}"+xui.UI.$childTag,FLAG:{$order:1,className:"xui-display-none xui-uiflag {flagClass}",style:"{_flagStyle};{flagStyle}",text:"{flagText}"}},DataModel:{iframeAutoLoad:{ini:"",action:function(){this.box._applyAutoLoad(this)}},ajaxAutoLoad:{ini:"",action:function(){this.box._applyAutoLoad(this)}},width:{$spaceunit:1,ini:"10em"},height:{$spaceunit:1,ini:"10em"},selectable:!0,html:{html:1,action:function(e,t,i){this.getRoot().html(xui.adjustRes(e,0,1),null,null,i)}},overflow:{ini:"touchOnly"==xui.browser.deviceType?"auto":undefined,combobox:["","visible","hidden","scroll","auto","overflow-x:hidden;overflow-y:auto","overflow-x:auto;overflow-y:hidden"],action:function(e){var t=this.getContainer();e&&-1!=e.indexOf(":")?xui.arr.each(e.split(/\s*;\s*/g),(function(e){var i=e.split(/\s*:\s*/g);i.length>1&&t.css(xui.str.trim(i[0]),xui.str.trim(i[1]||""))})):t.css("overflow",e||"")}},tabindex:-1,flagText:{ini:"",action:function(e){this.getSubNode("FLAG").text(e)}},flagClass:{ini:"",combobox:["","xui-uiflag-2","xui-uiflag-3","xui-uiflag-4"],action:function(e,t){this.getSubNode("FLAG").removeClass(t).addClass(e)}}},RenderTrigger:function(){var e=this;"xui.UI.Div"==e.box.KEY&&(e.properties.iframeAutoLoad||e.properties.ajaxAutoLoad)&&e.box._applyAutoLoad(this)},Behaviors:{DroppableKeys:["KEY"],PanelKeys:["KEY"],onClick:function(e,t,i){return!e.properties.disabled&&(e.onClick?e.boxing().onClick(e,t,i):void 0)}},EventHandlers:{onClick:function(e,t,i){}},_prepareData:function(e,t){return(t=arguments.callee.upper.call(this,e,t))._flagStyle="display:"+(t.flagText||t.flagClass?"block":"none"),t.flagClass||(t.flagClass="xui-uiflag-1"),xui.isStr(t.overflow)&&(t._overflow=-1!=t.overflow.indexOf(":")?t.overflow:t.overflow?"overflow:"+t.overflow:""),t},_applyAutoLoad:function(e){var t=e.properties,i=e.boxing();if(t.iframeAutoLoad){i.getContainer().css("overflow","hidden");var r="string"==typeof t.iframeAutoLoad?{url:t.iframeAutoLoad}:xui.clone(t.iframeAutoLoad,!0),o="biframe_"+xui.stamp(),n=xui.browser.ie&&xui.browser.ver<9,a=document.createElement(n?"<iframe name='"+o+"'>":"iframe");r.url=xui.adjustRes(r.url,!1,!0),a.id=a.name=o,xui.isHash(t.iframeAutoLoad)&&(t.iframeAutoLoad.frameName=o),t._frameName=o,r.query||(r.query={}),r.query._rand=xui.rand(),a.frameBorder="0",a.marginWidth="0",a.marginHeight="0",a.vspace="0",a.hspace="0",a.allowTransparency="true",a.width="100%",a.height="100%",i.getContainer().html("",!1),i.append(a),"post"==(r.method||"").toLowerCase()?xui.Dom.submit(r.url,r.query,"post",o,r.enctype):a.src=r.url,e.$afterAutoLoad&&e.$afterAutoLoad.call(e.boxing(),e)}else if(t.ajaxAutoLoad){var s="string"==typeof t.ajaxAutoLoad?{url:t.ajaxAutoLoad}:xui.clone(t.ajaxAutoLoad,!0),u={rspType:"text"};s.query||(s.query={}),s.query._rand=xui.rand(),xui.merge(u,s.options),i.busy();var l=i.getContainer();xui.Ajax(xui.adjustRes(s.url,!1,!0),s.query,(function(t){l.html(t,!0,!0),e.$afterAutoLoad&&e.$afterAutoLoad.call(e.boxing(),e),i.free()}),(function(t){l.html("<div>"+t+"</div>",!0,!1),e.$afterAutoLoad&&e.$afterAutoLoad.call(e.boxing(),e),i.free()}),null,u).start()}},_onresize:function(e,t){t&&xui.UI._adjustConW(e,e.getRoot(),e)}}}),xui.Class("xui.UI.CSSBox","xui.UI.Span",{Instance:{fireClickEvent:null,adjustDock:null,draggable:null,busy:null,free:null},Static:{$initRootHidden:!0,_objectProp:{normalStatus:1,hoverStatus:1,activeStatus:1,focusStatus:1},Templates:{style:"left:"+xui.Dom.HIDE_VALUE+";top:"+xui.Dom.HIDE_VALUE+";width:12.5em;height:5em;visibility:hidden;display:none;position:absolute;z-index:0;",className:"{_className}",text:"{_html}"},DataModel:{className:{ini:null,action:function(){this.box._refreshCSS(this)}},sandbox:{ini:"",action:function(e){this.box._refreshCSS(this)}},normalStatus:{ini:{},action:function(e){this.box._refreshCSS(this)}},hoverStatus:{ini:{},action:function(e){this.box._refreshCSS(this)}},activeStatus:{ini:{},action:function(e){this.box._refreshCSS(this)}},focusStatus:{ini:{},action:function(e){this.box._refreshCSS(this)}},childSelector:"",spaceUnit:null,showEffects:null,hideEffects:null,position:null,display:null,visibility:null,zIndex:null,left:null,top:null,width:null,height:null,right:null,bottom:null,rotate:null,activeAnim:null,hoverPop:null,hoverPopType:null,dock:null,dockStretch:null,dockIgnoreFlexFill:null,renderer:null,html:null,selectable:null,overflow:null,tabindex:null,autoTips:null,disableClickEffect:null,disableHoverEffect:null,disableTips:null,disabled:null,defaultFocus:null,dockIgnore:null,dockOrder:null,dockMargin:null,dockFloat:null,dockMinW:null,dockMinH:null,dockMaxW:null,dockMaxH:null,tips:null},$adjustProp:function(e,t){var i=e.properties,r=!t&&i.className||"xui-css-"+e.$xid,o=1,n={};for(e.box.getAll().each((function(t){t!==e&&(n[t.properties.className]=1)}));n[r];)r+=o++;i.className=r},RenderTrigger:function(){this.$inDesign||xui("body").append(this.getRoot())},_prepareData:function(e,t){t=arguments.callee.upper.call(this,e,t);var i=this._getCon(e);return t._html="Text"+(i?"<style id='"+e.getDomId()+"cssnode' type='text/css'>"+i+"</style>":""),t},_getCon:function(e){var t,i="",r="",o=e.properties,n=o.className,a=o.childSelector,s=o.normalStatus,u=o.hoverStatus,l=o.activeStatus,d=o.focusStatus;return a=(e.$inDesign?'[class~="xui-designer-inner-control"]':"")+(a?" "+a:""),s&&!xui.isEmpty(s)&&(i+="."+n+a+"{"+xui.Dom.$adjustCss(s,!0)+"}\n",s.color&&(i+="."+n+" .xui-node{color:"+s.color+"}")),u&&!xui.isEmpty(u)&&(i+="."+n+":hover"+a+", ."+n+"-hover"+a+"{"+xui.Dom.$adjustCss(u,!0)+"}\n",u.color&&(i+="."+n+":hover .xui-node, ."+n+"-hover .xui-node{color:"+u.color+"}")),l&&!xui.isEmpty(l)&&(i+="."+n+":active"+a+", ."+n+":checked"+a+", ."+n+"-active"+a+", ."+n+"-checked"+a+", ."+n+"-checked:hover"+a+", ."+n+"-active:hover"+a+"{"+xui.Dom.$adjustCss(l,!0)+"}",l.color&&(i+="."+n+":active .xui-node, ."+n+":checked .xui-node, ."+n+"-active .xui-node, ."+n+"-checked .xui-node, ."+n+"-checked:hover .xui-node, ."+n+"-active:hover .xui-node{color:"+l.color+"}")),d&&!xui.isEmpty(d)&&(i+="."+n+":focus"+a+", ."+n+"-focus"+a+"{"+xui.Dom.$adjustCss(d,!0)+"}",d.color&&(i+="."+n+":focus .xui-node, ."+n+"-focus .xui-node{color:"+d.color+"}")),(t=o.sandbox)?(t=e.host&&e.host[t]&&e.host[t].get(0)||xui(t).get(0)&&t)&&(r=xui.UI._getThemePrevId(t)):e.$inDesign&&(t=e.parent)&&(r=xui.UI._getThemePrevId(t)),xui.UI._adjustCSS(i,r)},_refreshCSS:function(e){var t=this;xui.resetRun(e.key+":"+e.$xid,(function(){if(!e.destroyed){var i=e.getDomId()+"cssnode",r=e.properties,o=e.getRoot(),n=t._getCon(e);o.query("style").remove(!1),xui.Dom._setClass(o.get(0),r.className),n&&xui.CSS._appendSS(o.get(0),n,i,!1)}}))},EventHandlers:{beforeInputAlert:null,onContextmenu:null,onClick:null,onDock:null,onLayout:null,onMove:null,onRender:null,onResize:null,onShowTips:null,beforeHoverEffect:null,beforeAppend:null,afterAppend:null,beforeRender:null,afterRender:null,beforeRemove:null,afterRemove:null,onHotKeydown:null,onHotKeypress:null,onHotKeyup:null}}}),xui.Class("xui.UI.MoudluePlaceHolder","xui.UI.Div",{Instance:{destroy:function(e,t){var i=this.get(0);if(i)return(i.$afterDestroy=i.$afterDestroy||{}).destroyAttachedModule=function(){!this._replaced&&this._module&&this._module.destroy(e,t)},arguments.callee.upper.apply(this,[e,t])},adjustDock:null,draggable:null,busy:null,free:null,setProperties:function(e,t){var i=this.get(0);return i._properties||(i._properties={}),e?"string"==typeof e?i._properties[e]=t:(xui.merge(i._properties,e,"all"),t&&xui.isHash(t)&&xui.merge(i._properties,t,"all")):i._properties={},this},getValue:function(){return xui.get(this.get(0),["_properties","value"])},setValue:function(e){return xui.set(this.get(0),["_properties","value"],e),this},getUIValue:function(){return this.get(0)._$UIvalue},setUIValue:function(e){return this.get(0)._$UIvalue=e,this},getProperties:function(e){var t=this.get(0);return t._properties||(t._properties={}),e?t._properties[e]:t._properties},setEvents:function(e,t){var i=this.get(0);return i._events||(i._events={}),e?"string"==typeof e?i._events[e]=t:xui.merge(i._events,e,"all"):i._events={},this},getEvents:function(e){var t=this.get(0);return t._events||(t._events={}),e?this._events[e]:this._events},replaceWithModule:function(e){var t,i,r,o,n=this.get(0),a=function(t){n.$afterReplaced&&n.$afterReplaced.call(e),(t=n._render_holder||n._inline_holder)&&t.$afterAttached&&e.getUIComponents().each((function(e){xui.tryF(t.$afterAttached,[e],t)})),n.alias=null,n._module=null,n.box&&n.boxing().destroy()};n&&!n.destroyed&&!n._replaced&&n.getRootNode()&&(n._replaced=1,n.$beforeReplaced&&n.$beforeReplaced.call(e),(n.host||n.alias)&&e.setHost(n.host,n.alias),"_$UIvalue"in n&&(e.$UIvalue=n._$UIvalue),(i=n._events)&&e.setEvents(i),(i=n._properties)&&e.setProperties(i),n.moduleClass&&n.moduleXid&&(t=xui.Module.getInstance(n.moduleClass,n.moduleXid))&&t.AddComponents(e),(r=n.parent)?(o=n.childrenId,e.show(a,r,o)):n.rendered&&(r=n.getRoot().parent())&&!r.isEmpty()&&e.show(a,r),n.$afterReplaced&&n.$afterReplaced.call(e),n.alias=null,n._module=null,this.destroy())}},Static:{Templates:{tagName:"div",style:"left:0;top:0;width:0;height:0;visibility:hidden;display:none;position:absolute;z-index:0;"},DataModel:{showEffects:null,hideEffects:null,activeAnim:null,hoverPop:null,hoverPopType:null,dock:null,dockStretch:null,renderer:null,html:null,disableClickEffect:null,disableHoverEffect:null,disableTips:null,disabled:null,defaultFocus:null,dockIgnore:null,dockOrder:null,dockMargin:null,dockFloat:null,dockMinW:null,dockMinH:null,dockMaxW:null,dockMaxH:null,tips:null},EventHandlers:{onContextmenu:null,onDock:null,onLayout:null,onMove:null,onRender:null,onResize:null,onShowTips:null,beforeAppend:null,afterAppend:null,beforeRender:null,afterRender:null,beforeRemove:null,afterRemove:null,onHotKeydown:null,onHotKeypress:null,onHotKeyup:null},RenderTrigger:function(){var e=this;e&&!e._replaced&&e._module&&e.boxing().replaceWithModule(e._module)}}}),xui.Class("xui.AnimBinder","xui.absObj",{Instance:{_ini:xui.Timer.prototype._ini,_after_ini:function(e,t,i){e.name||e.Instace.setName(i)},getParent:xui.Timer.prototype.getParent,getChildrenId:xui.Timer.prototype.getChildrenId,destroy:function(){this.each((function(e){var t=e.box,i=e.properties.name;delete t._pool[i],e.__gc()}))},setHost:function(e,t){var i=this;return e&&t&&i.setName(t),arguments.callee.upper.apply(i,arguments)},apply:function(e,t){for(var i,r,o,n,a=this.get(0),s=a.properties.frames,u=[],l=0,d=s.length;l<d-1;l++){for(var c in n={},r=s[l],o=s[l+1],delete(i=xui.copy(o)).status,o.status)n[c]=o.status[c];i.endpoints=n,i.start=r,i.end=o,u.push(i)}var p=function(){if(!u.length)return a.onEnd&&a.boxing().onEnd(a),void(xui.isFun(t)&&xui.tryF(t));var i=u.shift();return a.beforeFrame&&!1===a.boxing().beforeFrame(a,i)?void 0:xui(e).animate(i.endpoints,null,p,i.duration,i.step,i.type,null,null,i.restore,i.times).start()};return p()}},Static:{_objectProp:{tagVar:1,propBinder:1,frames:1},_beforeSerialized:xui.Timer._beforeSerialized,$nameTag:"ani_",_pool:{},destroyAll:function(){this.pack(xui.toArr(this._pool,!1),!1).destroy(),this._pool={}},getFromName:function(e){var t=this._pool[e];return t&&t.boxing()},DataModel:{dataBinder:null,dataField:null,name:{set:function(e){var t=this,i=t.properties.name,r=t.box._pool,o=r[i],n=r[e];r[t.properties.name=e]=t,n&&!o&&(t._n=n._n),o&&delete r[i]}},frames:{ini:[]}},EventHandlers:{beforeFrame:function(e,t){},onEnd:function(e){}}}}),xui.Class("xui.UI.Image","xui.UI",{Initialize:function(){this._adjustItems=xui.absList._adjustItems,this.prototype._prepareItems=function(e){return e}},Instance:{fireClickEvent:function(){return this.getRoot().onClick(),this},getRate:function(){return parseFloat(this.get(0)._rate)||1}},Static:{IMGNODE:1,Templates:{tagName:"img",style:"cursor:{cursor};{_style}",className:"{_className}",border:"0",src:xui.ini.img_bg,alt:"{alt}"},Behaviors:{HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},DraggableKeys:["KEY"],onError:function(e,t,i){e.boxing().onError(e)},onLoad:function(e,t,i){var r,o=xui.use(i).get(0);try{r=o.src}catch(t){return}if(r!=xui.ini.img_bg){var n=new Image;n.onload=function(){if(e&&!e.destroyed){var t=e.properties,i=e.box._adjust(e,""===t.width||"auto"==t.width?n.width:t.width,""===t.height||"auto"==t.height?n.height:t.height);e.$afterLoad&&e.$afterLoad.apply(e.host,[e,r,i[0],i[1]]),e.boxing().afterLoad(e,r,i[0],i[1]),"none"!=t.dock&&e.boxing().adjustDock(),n.onload=null}},n.src=r,xui.Dom.fixPng(o)}},onClick:function(e,t,i){return!e.properties.disabled&&(e.onClick?e.boxing().onClick(e,t,i):void 0)},onDblclick:function(e,t,i){if(e.properties.disabled)return!1;e.onDblclick&&e.boxing().onDblclick(e,t,i)}},RenderTrigger:function(){var e=this,t=e.properties,i=t.src,r=t.activeItem;r&&-1!=xui.arr.subIndexOf(t.items,"id",r)?e.boxing().setActiveItem(r,!0):i&&e.boxing().setSrc(i,i!=xui.ini.img_bg)},EventHandlers:{onClick:function(e,t,i){},onDblclick:function(e,t,i){},onError:function(e){},beforeLoad:function(e){},afterLoad:function(e,t,i,r){}},_adjust:function(e,t,i){var r=e.properties,o=e.getRootNode();if(xui.$us(e),t=t?e.$px(t,null,!0):t,i=i?e.$px(i,null,!0):i,o.style.width=o.style.height="",t>0&&i>0){var n=r.maxWidth/t,a=r.maxHeight/i,s=n<a?n:a;return s>=1&&(s=1),e._rate=s,[o.width=t*s,o.height=i*s]}return[0,0]},DataModel:{maxWidth:{ini:800,action:function(e){var t=this.getRootNode(),i=this.properties;this.box._adjust(this,""===i.width||"auto"==i.width?t.width:i.width,""===i.height||"auto"==i.height?t.height:i.height)}},maxHeight:{ini:600,action:function(e){var t=this.getRootNode(),i=this.properties;this.box._adjust(this,""===i.width||"auto"==i.width?t.width:i.width,""===i.height||"auto"==i.height?t.height:i.height)}},width:{ini:"auto",action:function(e){var t=this.getRootNode(),i=this.properties,r=new Image;r.src=t.src,this.box._adjust(this,""===e||"auto"==e?r.width:e,""===i.height||"auto"==i.height?r.height:i.height)}},height:{ini:"auto",action:function(e){var t=this.getRootNode(),i=this.properties,r=new Image;r.src=t.src,this.box._adjust(this,""===i.width||"auto"==i.width?r.width:i.width,""===e||"auto"==e?r.height:e)}},src:{format:"image",ini:xui.ini.img_bg,linkage:["activeItem"],action:function(e){var t=this;!1!==t.boxing().beforeLoad(this)&&xui.asyRun((function(){t.properties;var i=t.getRoot(),r=xui.adjustRes(e);i.attr("src")!==r&&i.attr("src",r)})),t.$inner||(t.properties.activeItem="")}},alt:{ini:"",action:function(e){this.getRoot().attr("alt",e)}},items:{ini:[]},activeItem:{ini:"",linkage:["src","alt","tips"],action:function(e){var t,i,r,o=this.properties.items,n=xui.arr.subIndexOf(o,"id",""+e),a=this.boxing(),s=xui.ini.img_bg;-1!=n&&(t=o[n])&&(s=t.image,i=t.alt||"",r=t.tips||""),this.$inner=1,a.setSrc(s,!0),delete this.$inner,a.setAlt(i||""),a.setTips(r||"")}},cursor:{ini:"auto",combobox:["","default","text","pointer","move","crosshair","wait","help","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize"],action:function(e){this.getRoot().css("cursor",e)}}}}}),xui.Class("xui.UI.Flash","xui.UI",{Instance:{refreshFlash:function(){var e=this.constructor;return this.each((function(t){xui.resetRun(t.domId,(function(){e._clearMemory(t),t.properties.src&&e._drawSWF(t)}))}))},getFlash:function(){return this.constructor._getSWF(this.get(0))}},Static:{Appearances:{KEY:{overflow:"hidden"},BOX:{position:"absolute",left:0,top:0,"z-index":1},COVER:{position:"absolute",left:"-1px",top:"-1px",width:0,height:0,"z-index":4}},Templates:{tagName:"div",className:"{_className}",style:"{_style}",BOX:{tagName:"div"},COVER:{tagName:"div",style:"background-image:url("+xui.ini.img_bg+");"}},DataModel:{selectable:!0,width:{$spaceunit:1,ini:"30em"},height:{$spaceunit:1,ini:"25em"},cover:!1,src:{format:"media",ini:"",action:function(e){this.boxing().refreshFlash()}},parameters:{ini:{},action:function(e){this.boxing().refreshFlash()}},flashvars:{ini:{},action:function(e){this.boxing().refreshFlash()}}},RenderTrigger:function(){(this.$beforeDestroy=this.$beforeDestroy||{}).flashClearMem=function(){this.box&&this.box._clearMemory(this)},this.boxing().refreshFlash()},getFlashVersion:function(){if(xui.browser.ie)try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{e.AllowScriptAccess="always"}catch(e){return"6,0,0"}}catch(e){}finally{try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){}}else try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){}return"0,0,0"},_getSWF:function(e){var t=xui.isStr(e)?e:this._idtag+e.serialId;return(xui.browser.ie?window[t]:document.embeds&&document.embeds[t]||window.document[t])||document.getElementById(t)},_clearMemory:function(e){var t=this._idtag+e.serialId,i=xui.fun(),r=e.box._getSWF(e);if(r){if(r.style.display="none",xui.browser.ie){for(var o in r)"function"==typeof r[o]&&(r[o]=i);window[t]&&(window[t]=undefined)}else document.embeds&&document.embeds[t]&&(document.embeds[t]=undefined),window.document[t]&&(window.document[t]=undefined);r=i=null}},_drawSWF:function(e){var t=e.properties,i=(e.serialId,xui.adjustRes(t.src)),r=t.parameters,o=xui.copy(t.flashvars),n="";o.DOMId=e.box._idtag+e.serialId,o.chartWidth=t.width,o.chartHeight=t.height,navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length?(n+='<embed type="application/x-shockwave-flash" src="'+i+"?"+xui.urlEncode(r)+'" ',n+='width="'+t.width+'" height="'+t.height+'" ',n+='id="'+o.DOMId+'" name="'+o.DOMId+'" ',n+='wmode="opaque" ',n+='flashvars="'+xui.urlEncode(o)+'" ',n+="/>"):(n+='<object id="'+o.DOMId+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ',n+='width="'+t.width+'" height="'+t.height+'">',n+='<param name="movie" value="'+i+"?"+xui.urlEncode(r)+'" />',n+='<param name="wmode" value="opaque" />',n+='<param name="flashvars" value="'+xui.urlEncode(o)+'" />',n+="</object>"),e.getSubNode("BOX").html(n,!1)},_onresize:function(e,t,i){var r=e.properties,o=xui.$us(e),n=function(t,i){return e.$forceu(t,o>0?"em":"px",i)},a=e.getSubNode("BOX").cssSize(),s=t?e.$px(t):t,u=i?e.$px(i):i;(t&&!xui.compareNumber(a.width,s,6)||i&&!xui.compareNumber(a.height,u,6))&&(t&&(r.width=n(s)),i&&(r.height=n(u)),a={width:t?r.width:null,height:i?r.height:null},e.getSubNode("BOX").cssSize(a,!0),(e.$inDesign||r.cover)&&e.getSubNode("COVER").cssSize(a,!0),e.boxing().refreshFlash())}}}),xui.Class("xui.UI.Audio","xui.UI",{Instance:{play:function(){var e=this.getSubNode("H5").get(0);e&&this.getSrc()&&e.play()},pause:function(){var e=this.getSubNode("H5").get(0);e&&this.getSrc()&&e.pause()},load:function(){var e=this.getSubNode("H5").get(0);e&&this.getSrc()&&e.load()},canPlayType:function(e){var t=this.getSubNode("H5").get(0);if(t)return t.canPlayType(e)}},Static:{Appearances:{KEY:{overflow:"hidden"},H5:{position:"absolute",left:0,top:0,"z-index":1},COVER:{position:"absolute",left:"-1px",top:"-1px",width:0,height:0,"z-index":4}},Templates:{tagName:"div",className:"{_className}",style:"{_style}",H5:{tagName:"audio",crossOrigin:"anonymous",autoplay:"{_autoplay}",controls:"{_controls}",loop:"{_loop}",muted:"{_muted}",preload:"{preload}",volume:"{volume}",src:"{src}",text:"Your browser does not support the audio element."},COVER:{tagName:"div",style:"background-image:url("+xui.ini.img_bg+");"}},Behaviors:{HotKeyAllowed:!1},DataModel:{selectable:!0,width:{$spaceunit:1,ini:"18em"},height:{$spaceunit:1,ini:"5em"},src:{format:"media",ini:"",action:function(e){this.getSubNode("H5").attr("src",xui.adjustRes(e))}},cover:!1,controls:{ini:!0,action:function(e){this.getSubNode("H5").attr("controls",e?"controls":null)}},preload:{ini:"none",listbox:["none","metadata","auto"],action:function(e){this.getSubNode("H5").attr("preload",e&&"none"!=e?e:null)}},loop:{ini:!1,action:function(e){this.getSubNode("H5").attr("loop",e?"loop":null)}},muted:{ini:!1,action:function(e){this.getSubNode("H5").attr("muted",e?"muted":null)}},volume:{ini:1,action:function(e){this.getSubNode("H5").attr("volume",e)}},autoplay:{ini:!1,action:function(e){this.getSubNode("H5").attr("autoplay",e?"autoplay":null)}}},RenderTrigger:function(){var e=this,t=e.getSubNode("H5"),i=e.properties,r=function(t){e.onMediaEvent&&e.boxing().onMediaEvent(e,(t||window.event).type,arguments)};xui.arr.each("loadstart progress durationchange seeked seeking timeupdate playing canplay canplaythrough volumechange ratechange loadedmetadata loadeddata play pause ended".split(" "),(function(e,i){(i=t&&t.get(0))&&xui.Event._addEventListener(i,e,r)})),(e.$beforeDestroy=e.$beforeDestroy||{}).detachEvents=function(){xui.arr.each("loadstart progress durationchange seeked seeking timeupdate playing canplay canplaythrough volumechange ratechange loadedmetadata loadeddata play pause ended".split(" "),(function(e,i){(i=t&&t.get(0))&&xui.Event._removeEventListener(i,e,r)}))},i.controls||t.attr("controls",null),i.loop||t.attr("loop",null),i.muted||t.attr("muted",null),i.autoplay?xui.asyRun((function(r){e.$inDesign||i.src&&xui.isStr(i.src)&&(r=t.get(0))&&r.play()})):t.attr("autoplay",null)},_prepareData:function(e){var t=arguments.callee.upper.call(this,e);return t.autoplay&&(t._autoplay="autoplay"),t.controls&&(t._controls="controls"),t.loop&&(t._loop="loop"),t.muted&&(t._muted="muted"),t},EventHandlers:{onMediaEvent:function(e,t,i){}},_onresize:function(e,t,i){var r=e.getSubNode("H5"),o=r.cssSize(),n=e.properties,a=xui.$us(e),s=function(t,i){return e.$forceu(t,a>0?"em":"px",i)},u=t?e.$px(t):t,l=i?e.$px(i):i;(t&&!xui.compareNumber(o.width,u,6)||i&&!xui.compareNumber(o.height,l,6))&&(t&&r.attr("width",u).width(n.width=s(u)),i&&r.attr("height",l).height(n.height=s(l)),(e.$inDesign||n.cover)&&e.getSubNode("COVER").cssSize({width:t?n.width:null,height:i?n.height:null},!0))}}}),xui.Class("xui.UI.Video","xui.UI.Audio",{Instance:{},Static:{Templates:{tagName:"div",crossOrigin:"anonymous",className:"{_className}",style:"{_style}",H5:{tagName:"video",autoplay:"{_autoplay}",controls:"{_controls}",loop:"{_loop}",muted:"{_muted}",type:"application/x-mpegURL",preload:"{preload}",volume:"{volume}",src:"{src}",width:"{width}",height:"{height}",text:"Your browser does not support the video element."},COVER:{tagName:"div",style:"background-image:url("+xui.ini.img_bg+");"}},DataModel:{width:{$spaceunit:1,ini:"34em"},height:{$spaceunit:1,ini:"25em"},poster:{format:"image",ini:"",action:function(e){this.getSubNode("H5").attr("poster",e||null)}}},RenderTrigger:function(){var e,t=this.getSubNode("H5");(e=this.properties.poster)&&t.attr("poster",e)}}}),xui.Class("xui.UI.Resizer","xui.UI",{Instance:{_attachTo:function(e,t){var i=this,r=i.get(0);return r._target=xui(e),r._parent=t||xui("body"),r._parent.append(i),r.$resizeId=xui(e).id(),i},show:function(){var e=this;return e.each((function(e){e.getRoot().css("display","")})),xui.browser.ie&&e.reBoxing().ieRemedy(),e},hide:function(){return this.reBoxing().css("display","none"),this}},Initialize:function(){this.addTemplateKeys(["HANDLER","HIDDEN","MOVE","CONF1","CONF2","ROTATE","L","R","T","B","LT","RT","LB","RB","REGION"]),xui.each({addResizer:function(e,t,i){var r=xui([this.get(0)]);e=e||{},xui.merge(e,{_attached:!0});var o=new xui.UI.Resizer(e)._attachTo(r,r);return t&&o.onUpdate(t),i&&o.onChange(i),o},removeResizer:function(){var e=this.id();return xui.arr.each(xui.UI.Resizer._cache,(function(t){t&&t.$resizeId==e&&t.boxing().destroy(!0)})),this},$getResizer:function(){var e,t=this.id();return xui.arr.each(xui.UI.Resizer._cache,(function(i){if(i&&i.$resizeId==t)return e=i,!1})),e&&e.boxing()}},(function(e,t){xui.Dom.plugIn(t,e)})),xui.each({_resizer:function(e,t){return this.each((function(e){var i=e.getSubNode("BORDER"),r=e.properties;if(!i.$getResizer()){t=t||{};var o=function(e,t,i,r){var o=arguments.callee.profile,n=o.getRoot(),a=o.boxing(),s=o.properties,u=o.box["xui.svg"];if(i){var l=null,d=null,c=null,p=null;(p=i.width)&&(n.widthBy(p),s.width=l=o.$forceu(u?a.getWidth():n.width())),(p=i.height)&&(n.heightBy(p),s.height=d=o.$forceu(u?a.getHeight():n.height())),xui.UI.$tryResize(o,l,d,!0),o.box._onresize||!o.onResize||null===l&&null===d||a.onResize(o,l,d)}return r&&(!(p=r.left)||"auto"==s.left&&Math.round(parseFloat(s.right))>=0||(n.leftBy(p),s.left=c=o.$forceu(u?a.getLeft():n.left())),!(p=r.top)||"auto"==s.top&&Math.round(parseFloat(s.bottom))>=0||(n.topBy(p),s.top=p=o.$forceu(u?a.getTop():n.top())),!o.onMove||null===c&&null===p||a.onMove(o,c,p,null,null)),!1};o.profile=e,e.$resizer=i.addResizer(t,o),e.$resizer.get(0).$parentUIProfile=e,"hidden"==r.visibility&&e.$resizer.hide()}}))},_unResizer:function(){return this.each((function(e){var t=e.getSubNode("BORDER");t.$getResizer()&&(t.removeResizer(),delete e.$resizer)}))}},(function(e,t){xui.UI.Widget.plugIn(t,e)})),xui.UI.Widget.setDataModel({resizer:{ini:!1,action:function(e){var t=this.boxing();if(e){var i=this.properties,r={};xui.each("minHeight,minWidth,maxHeight,maxWidth".split(","),(function(e){e in i&&(r[e]=i[e])})),i.resizerProp&&!xui.isEmpty(i.resizerProp)&&xui.merge(r,i.resizerProp,"all"),i.tagVar.resizerProp&&xui.merge(r,i.tagVar.resizerProp,"all"),t._resizer(e,r),this.$inDesign&&(this.$resizer.get(0).$inDesign=1)}else t._unResizer()}},resizerProp:{ini:{}}})},Static:{Templates:{tagName:"div",className:"{_disabled}",style:"{_style};"},Appearances:{KEY:{position:"absolute",margin:"0 -1px -1px 0",visibility:"visible",background:xui.browser.ie&&!xui.browser.newie?"url("+xui.ini.img_bg+")":"","z-index":60,cursor:"move"},"KEY.readonly, KEY.disabled":{"background-image":"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 8 8'%3E%3Cg fill='%239C92AC' fill-opacity='0.6'%3E%3Cpath fill-rule='evenodd' d='M0 0h4v4H0V0zm4 4h4v4H4V4z'/%3E%3C/g%3E%3C/svg%3E\")"},"KEY.readonly.active, KEY.disabled.active":{"background-image":"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 8 8'%3E%3Cg fill='%239C92AC' fill-opacity='0.4'%3E%3Cpath fill-rule='evenodd' d='M0 0h4v4H0V0zm4 4h4v4H4V4z'/%3E%3C/g%3E%3C/svg%3E\")"},"KEY.readonly div, KEY.disabled div":{display:"none"},"KEY.readonly MOVE":{display:"block",$order:2},"KEY.readonly CONF1, KEY.readonly CONF2":{$order:10,opacity:1,display:"block"},MOVE:{position:"absolute",display:"block","z-index":100,visibility:"visible",cursor:"alias"},"CONF1, CONF2, ROTATE":{position:"absolute",display:"block","z-index":100,visibility:"visible",cursor:"pointer"},ROTATE:{$order:1,cursor:"crosshair"},HANDLER:{$order:0,position:"absolute",display:"block",border:"solid 1px","z-index":100,visibility:"visible"},T:{$order:1,left:"50%",cursor:"n-resize"},RT:{$order:1,cursor:"ne-resize","z-index":110},R:{$order:1,top:"50%",cursor:"e-resize"},RB:{$order:1,cursor:"se-resize","z-index":110},B:{$order:1,left:"50%",cursor:"s-resize"},LB:{$order:1,cursor:"sw-resize","z-index":110},L:{$order:1,top:"50%",cursor:"w-resize"},LT:{$order:1,cursor:"nw-resize","z-index":110},HIDDEN:{$order:10,"background-color":"transparent","border-width":0}},Behaviors:{beforeMousedown:function(e,t,i){if(e.properties.readonly||e.properties.disabled)return!1;e.box._onMousedown(e,t,i,"move")},onDragbegin:function(e,t,i){if(e.properties.readonly||e.properties.disabled)return!1;e.box._onDragbegin(e,t,i,"move")},onDrag:function(e,t,i){e.box._onDrag(e,t,i,"move")},onDragstop:function(e,t,i){e.box._onDragstop(e,t,i,"move")},onDblclick:function(e,t,i){e.onDblclick&&e.boxing().onDblclick(e,t,i)},CONF1:{onMouseover:function(e,t,i){return!e.properties.disabled&&!!e.onConfig&&e.boxing().onConfig(e,t,i,"left","mouseover")},onMousedown:function(e,t,i){return!e.properties.disabled&&!!e.onConfig&&e.boxing().onConfig(e,t,i,"left","mousedown")},onClick:function(e,t,i){return!e.properties.disabled&&!!e.onConfig&&e.boxing().onConfig(e,t,i,"left","click")}},CONF2:{onMouseover:function(e,t,i){return!e.properties.disabled&&!!e.onConfig&&e.boxing().onConfig(e,t,i,"right","mouseover")},onMousedown:function(e,t,i){return!e.properties.disabled&&!!e.onConfig&&e.boxing().onConfig(e,t,i,"right","mousedown")},onClick:function(e,t,i){return!e.properties.disabled&&!!e.onConfig&&e.boxing().onConfig(e,t,i,"right","click")}},MOVE:{beforeMousedown:function(e,t,i){return e.box._onMousedown(e,t,i,"exmove"),!1},onDragbegin:function(e,t,i){e.box._onDragbegin(e,t,i,"exmove")},onDrag:function(e,t,i){e.box._onDrag(e,t,i,"exmove")},onDragstop:function(e,t,i){e.box._onDragstop(e,t,i,"exmove")}},ROTATE:{beforeMousedown:function(e,t,i){return e.box._onMousedown(e,t,i,"rotate"),!1},onDragbegin:function(e,t,i){e.box._onDragbegin(e,t,i,"rotate")},onDrag:function(e,t,i){e.box._onDrag(e,t,i,"rotate")},onDragstop:function(e,t,i){e.box._onDragstop(e,t,i,"rotate")}},LT:{beforeMousedown:function(e,t,i){return e.box._onMousedown(e,t,i,"nw"),!1},onDragbegin:function(e,t,i){e.box._onDragbegin(e,t,i,"nw")},onDrag:function(e,t,i){e.box._onDrag(e,t,i,"nw")},onDragstop:function(e,t,i){e.box._onDragstop(e,t,i,"nw")}},RT:{beforeMousedown:function(e,t,i){return e.box._onMousedown(e,t,i,"ne"),!1},onDragbegin:function(e,t,i){e.box._onDragbegin(e,t,i,"ne")},onDrag:function(e,t,i){e.box._onDrag(e,t,i,"ne")},onDragstop:function(e,t,i){e.box._onDragstop(e,t,i,"ne")}},LB:{beforeMousedown:function(e,t,i){return e.box._onMousedown(e,t,i,"sw"),!1},onDragbegin:function(e,t,i){e.box._onDragbegin(e,t,i,"sw")},onDrag:function(e,t,i){e.box._onDrag(e,t,i,"sw")},onDragstop:function(e,t,i){e.box._onDragstop(e,t,i,"sw")}},RB:{beforeMousedown:function(e,t,i){return e.box._onMousedown(e,t,i,"se"),!1},onDragbegin:function(e,t,i){e.box._onDragbegin(e,t,i,"se")},onDrag:function(e,t,i){e.box._onDrag(e,t,i,"se")},onDragstop:function(e,t,i){e.box._onDragstop(e,t,i,"se")}},L:{beforeMousedown:function(e,t,i){return e.box._onMousedown(e,t,i,"w"),!1},onDragbegin:function(e,t,i){e.box._onDragbegin(e,t,i,"w")},onDrag:function(e,t,i){e.box._onDrag(e,t,i,"w")},onDragstop:function(e,t,i){e.box._onDragstop(e,t,i,"w")}},T:{beforeMousedown:function(e,t,i){return e.box._onMousedown(e,t,i,"n"),!1},onDragbegin:function(e,t,i){e.box._onDragbegin(e,t,i,"n")},onDrag:function(e,t,i){e.box._onDrag(e,t,i,"n")},onDragstop:function(e,t,i){e.box._onDragstop(e,t,i,"n")}},R:{beforeMousedown:function(e,t,i){return e.box._onMousedown(e,t,i,"e"),!1},onDragbegin:function(e,t,i){e.box._onDragbegin(e,t,i,"e")},onDrag:function(e,t,i){e.box._onDrag(e,t,i,"e")},onDragstop:function(e,t,i){e.box._onDragstop(e,t,i,"e")}},B:{beforeMousedown:function(e,t,i){return e.box._onMousedown(e,t,i,"s"),!1},onDragbegin:function(e,t,i){e.box._onDragbegin(e,t,i,"s")},onDrag:function(e,t,i){e.box._onDrag(e,t,i,"s")},onDragstop:function(e,t,i){e.box._onDragstop(e,t,i,"s")}}},DataModel:{_attached:!1,forceVisible:!1,forceMovable:"",singleDir:!1,vertical:!0,horizontal:!0,minHeight:12,minWidth:12,maxHeight:5e3,maxWidth:5e3,handlerSize:xui.browser.contentBox?8:12,handlerOffset:xui.browser.contentBox?1:0,readonly:{ini:!1,action:function(e){e?this.getRoot().addClass("readonly"):this.getRoot().removeClass("readonly")}},disabled:{ini:!1,action:function(e){e?this.getRoot().addClass("disabled"):this.getRoot().removeClass("disabled")}},leftConfigBtn:{ini:!1,action:function(e){this.getSubNode("CONF1").css("display",e?"":"none")}},rightConfigBtn:{ini:!1,action:function(e){this.getSubNode("CONF2").css("display",e?"":"none")}},rotatable:{ini:!1,action:function(e){e&&xui.browser.ie&&xui.browser.ver<=8&&(e=!1),this.getSubNode("ROTATE").css("display",e?"":"none")}},left:100,top:100,height:100,width:100,position:"absolute",display:"block",cover:!1},EventHandlers:{onDblclick:function(e,t,i){},onUpdate:function(e,t,i,r,o){},onChange:function(e,t){},onConfig:function(e,t,i,r,o){}},_dynamicTemplate:function(e){var t,i,r=e.properties,o=e._exhash="$_attached:"+r._attached+";forceVisible:"+r.forceVisible+";singleDir:"+r.singleDir+";vertical:"+r.vertical+";horizontal:"+r.horizontal+";forceMovable:"+r.forceMovable+";",n=arguments.callee.map||(arguments.callee.map={MOVE:{tagName:"div",className:"xuifont",$fonticon:"xui-icon-dragmove",style:"color:#fff;border-radius:50%;background-color:#079bfa;padding: 0.125em;opacity:0.85;font-size: 1.5em;top:50%;left:50%;margin-left: -.625em;margin-top: -.625em;"},CONF1:{tagName:"div",className:"xuifont",$fonticon:"xui-icon-star",style:"color:#079bfa;font-size: 1.5em;top:-1.125em;left:-1.125em;{_leftCofigBtn};"},CONF2:{tagName:"div",className:"xuifont",$fonticon:"xui-uicmd-opt",style:"color:#079bfa;font-size: 1.5em;top:-1.125em;left:auto;right:-1.125em;{_rightCofigBtn};"},ROTATE:{tagName:"div",className:"xuifont",$fonticon:"xui-icon-circle",style:"color:#079bfa;font-size: 2em;top:-1.25em;left:50%;margin-left:-0.5em;{_rotateBtn};"},T:{tagName:"div",style:"top:-{_extend};margin-left:-{_extend};width:{_handlerSize};height:{_handlerSize};"},RT:{tagName:"div",style:"top:-{_extend};right:-{_extend};width:{_handlerSize};height:{_handlerSize};"},R:{tagName:"div",style:"right:-{_extend};margin-top:-{_extend};width:{_handlerSize};height:{_handlerSize};"},RB:{tagName:"div",style:"bottom:-{_extend};right:-{_extend};width:{_handlerSize};height:{_handlerSize};"},B:{tagName:"div",style:"bottom:-{_extend};margin-left:-{_extend};width:{_handlerSize};height:{_handlerSize};"},LB:{tagName:"div",style:"bottom:-{_extend};left:-{_extend};width:{_handlerSize};height:{_handlerSize};"},L:{tagName:"div",style:"left:-{_extend};margin-top:-{_extend};width:{_handlerSize};height:{_handlerSize};"},LT:{tagName:"div",style:"left:-{_extend};top:-{_extend};width:{_handlerSize};height:{_handlerSize};"},cover:{T:{tagName:"div",style:"width:100%;left:0em;top:-{_extend};height:{_handlerSize};"},RT:{tagName:"div",style:"top:-{_extend};right:-{_extend};width:{_handlerSize};height:{_handlerSize};"},R:{tagName:"div",style:"height:100%;top:0em;right:-{_extend};width:{_handlerSize};"},RB:{tagName:"div",style:"right:-{_extend};bottom:-{_extend};width:{_handlerSize};height:{_handlerSize};"},B:{tagName:"div",style:"width:100%;left:0em;bottom:-{_extend};height:{_handlerSize};"},LB:{tagName:"div",style:"left:-{_extend};bottom:-{_extend};width:{_handlerSize};height:{_handlerSize};"},L:{tagName:"div",style:"height:100%;top:0em;left:-{_extend};width:{_handlerSize};"},LT:{tagName:"div",style:"top:-{_extend};left:-{_extend};width:{_handlerSize};height:{_handlerSize};"}}}),a=e.box.getTemplate(o);a||(a=xui.clone(e.box.getTemplate()),t=r._cover||r.cover?n.cover:n,r._move&&(a.MOVE=n.MOVE),a.CONF1=n.CONF1,a.CONF2=n.CONF2,a.ROTATE=n.ROTATE,r.vertical&&(r.singleDir||(a.T=t.T),a.B=t.B),r.horizontal&&(r.singleDir||(a.L=t.L),a.R=t.R,r.vertical&&(r.singleDir||(a.LB=t.LB,a.RT=t.RT,a.LT=t.LT),a.RB=t.RB)),i=e.getClass("KEY","-handler")+" ",(t=a.T)&&(t.className=i),(t=a.RT)&&(t.className=i),(t=a.R)&&(t.className=i),(t=a.RB)&&(t.className=i),(t=a.B)&&(t.className=i),(t=a.LB)&&(t.className=i),(t=a.L)&&(t.className=i),(t=a.LT)&&(t.className=i),r._visible||(i=e.getClass("KEY","-hidden")+" ",(t=a.T)&&(t.className+=i),(t=a.RT)&&(t.className+=i),(t=a.R)&&(t.className+=i),(t=a.RB)&&(t.className+=i),(t=a.B)&&(t.className+=i),(t=a.LB)&&(t.className+=i),(t=a.L)&&(t.className+=i),(t=a.LT)&&(t.className+=i)),e.box.setTemplate(a,o)),e.template=a},_prepareData:function(e){var t=e.properties;t._visible=!0,t._cover=!1,t._move=!0,t._attached?(t._visible=!1,t._cover=!0,t._move=!1,t.position="static",xui.browser.ie67&&(t.display="inline"),t.left=t.top=t.width=t.height=0):t.cover&&(t._visible=!1),t.forceVisible&&(t._visible=!0,t._cover=!1),"boolean"==typeof t.forceMovable&&(t._move=t.forceMovable),t.extend=(parseFloat(t.handlerSize)||0)/2+(parseFloat(t.handlerOffset)||0),t._handlerSize=e.$em(t.handlerSize)+"em",t._extend=e.$em(t.extend)+"em",t._leftCofigBtn=t.leftConfigBtn?"":"display:none",t._rightCofigBtn=t.rightConfigBtn?"":"display:none";var i=t.rotatable;return i&&xui.browser.ie&&xui.browser.ver<=8&&(i=!1),t._rotateBtn=i?"":"display:none",t._disabled=t.disabled?"disabled":"",arguments.callee.upper.call(this,e)},RenderTrigger:function(){var e=this;xui.setNodeData(e.renderId,"zIndexIgnore",1),e.box._tryCursors(e)},_onUpdate:function(e,t,i,r,o){if(t){if(i&&t.widthBy(i.width,!0).heightBy(i.height,!0),r){var n=t.get(0).style;"auto"==n.left&&Math.round(parseFloat(n.right))>=0||t.leftBy(r.left),"auto"==n.top&&Math.round(parseFloat(n.bottom))>=0||t.topBy(r.top)}xui.isDefined(o)&&t.rotate(o)}},_switchAxis:function(e,t,i){var r=(t+360)%360,o=["n","ne","e","se","s","sw","w","nw"],n=Math.round(r/45),a=xui.arr.indexOf(o,e)+n,s=o[a%8];return i&&a%2==1&&(s=r<45*n?o[(a-1)%8]:o[(a+1)%8]),s},_tryCursors:function(e){var t,i=(e.getRoot().rotate()+360)%360,r=this._switchAxis;xui.each({T:"n",RT:"ne",R:"e",RB:"se",B:"s",LB:"sw",L:"w",LT:"nw"},(function(o,n){(t=e.getSubNode(n)).get(0)&&t.css("cursor",r(o,i)+"-resize")}))},_getDDParas:function(e,t,i){switch(t){case"move":return{move:!0};case"exmove":return{exmove:!0};case"rotate":return{rotate:!0};case"nw":return{left:!0,top:!0};case"ne":return{right:!0,top:!0};case"sw":return{left:!0,bottom:!0};case"se":return{right:!0,bottom:!0};case"w":return{left:!0};case"n":return{top:!0};case"e":return{right:!0};case"s":return{bottom:!0}}},_onMousedown:function(e,t,i,r){if(!e.$inDesign){if(e.properties.disabled)return!1;var o=this._getDDParas(0,r);if("left"==xui.Event.getBtn(t)){var n=e.$parentUIProfile;if(!(n&&n["xui.UIProfile"]&&n.beforeResizerDrag&&!1===xui.tryF(n.beforeResizerDrag,[n,e,o],n.boxing()))){var a=xui.Event.getPos(t);xui.use(i).startDrag(t,{dragDefer:2,targetReposition:!1,dragType:"blank",dragCursor:!0,targetLeft:a.left,targetTop:a.top})}}}},_onDragbegin:function(e,t,i,r){var o,n=e.properties.rotatable,a=e.properties._attached?e._target:xui([e.renderId]),s=a.width(),u=a.height(),l=a.offset();if(n)if(o=a.rotate(),a.get(0).getBoundingClientRect){var d=a.get(0).getBoundingClientRect();e.o_center={x:(d.right+d.left)/2,y:(d.bottom+d.top)/2}}else e.o_center={x:l.left+s/2,y:l.top+s/2};e.properties._attached?(e.proxy=xui.Dom.getEmptyDiv(),e.proxy.html(" ",!1).css({border:"1px dashed",visibility:"visible",position:"absolute"}).offset(l).width(s).height(u).css("zIndex",xui.Dom.TOP_ZINDEX+20).removeClass("xui-ui-hidden"),o&&e.proxy.rotate(o)):e.proxy=a,e.o_w2=e.o_w=s,e.o_h2=e.o_h=u,e.o_pos=e.proxy.cssPos(),e.o_size={width:s,height:u},e.o_rotate=o,e.regions&&(e.o_regions=[],e.regions.each((function(t){e.o_regions.push(xui(t).cssSize())}))),e.$onDrag=!0,xui.Tips.hide()},_onDrag:function(e,t,i,r){var o=this._getDDParas(e.o_rotate,r);e.oos=e.oos||{};var n,a,s,u,l,d=xui.DragDrop.getProfile(),c=e.properties,p=c.xOff||0,h=c.yOff||0,f=e.o_rotate,x=e.o_size,g=e.o_pos,m=d.offset,b=m.x,v=m.y,y={};if(0!==b||0!==v){if(f&&!o.move&&!o.rotate){var A=function(e){return(e+360)%360},_=Math.pow(Math.pow(b,2)+Math.pow(v,2),.5),w=A(180*Math.atan2(b,-v)/Math.PI),C=f+90-w,I=A(w-f)<180?1:-1,E=A(w-f)<90||A(w-f)>270?-1:1;b=_*Math.abs(Math.cos(C*Math.PI/180))*I,v=_*Math.abs(Math.sin(C*Math.PI/180))*E}if(b!=e.oos.width||v!=e.oos.height){if(e.oos={width:b,height:v},o.left?(s=e.o_w-b,n=g.left+b,s<c.minWidth?(s=c.minWidth,n=e.o_w+g.left-s):s>c.maxWidth&&(s=c.maxWidth,n=e.o_w+g.left-s),xui.merge(y,{width:s,left:n})):o.right&&((s=e.o_w+b)<c.minWidth?s=c.minWidth:s>c.maxWidth&&(s=c.maxWidth),xui.merge(y,{width:s})),o.top?(u=e.o_h-v,a=g.top+v,u<c.minHeight?(u=c.minHeight,a=e.o_h+g.top-u):u>c.maxHeight&&(u=c.maxHeight,a=e.o_h+g.top-u),xui.merge(y,{height:u,top:a})):o.bottom&&((u=e.o_h+v)<c.minHeight?u=c.minHeight:u>c.maxHeight&&(u=c.maxHeight),xui.merge(y,{height:u})),f&&!o.move&&!o.rotate){delete y.left,delete y.top;var S=Math.abs(Math.cos(f*Math.PI/180)),D=Math.abs(Math.sin(f*Math.PI/180)),k=g.left+x.width/2,$=g.top+x.height/2,N=x.width*S+x.height*D,M=x.width*D+x.height*S,T=(y.left||g.left)+(y.width||x.width)/2,R=(y.top||g.top)+(y.height||x.height)/2,B=(y.width||x.width)*S+(y.height||x.height)*D,L=(y.width||x.width)*D+(y.height||x.height)*S,F=(B-N)/2,O=(L-M)/2,P=T-k,H=R-$;switch(y.left=g.left-P,y.top=g.top-H,this._switchAxis(r,f,!0)){case"e":f<90?y.top-=(y.height||x.height)*S-L/2-(x.height*S-M/2):f>90&&f<180?y.top-=(y.width||x.width)*D-L/2-(x.width*D-M/2):y.top+=f>180&&f<270?(y.width||x.width)*D-L/2-(x.width*D-M/2):(y.height||x.height)*S-L/2-(x.height*S-M/2),y.left+=F;break;case"s":f<90?y.left-=(y.height||x.height)*D-B/2-(x.height*D-N/2):f>90&&f<180?y.left-=(y.width||x.width)*S-B/2-(x.width*S-N/2):y.left+=f>180&&f<270?(y.width||x.width)*S-B/2-(x.width*S-N/2):(y.height||x.height)*D-B/2-(x.height*D-N/2),y.top+=O;break;case"w":f<90?y.top+=(y.height||x.height)*S-L/2-(x.height*S-M/2):f>90&&f<180?y.top+=(y.width||x.width)*D-L/2-(x.width*D-M/2):y.top-=f>180&&f<270?(y.width||x.width)*D-L/2-(x.width*D-M/2):(y.height||x.height)*S-L/2-(x.height*S-M/2),y.left-=F;break;case"n":f<90?y.left+=(y.height||x.height)*D-B/2-(x.height*D-N/2):f>90&&f<180?y.left+=(y.width||x.width)*S-B/2-(x.width*S-N/2):y.left-=f>180&&f<270?(y.width||x.width)*S-B/2-(x.width*S-N/2):(y.height||x.height)*D-B/2-(x.height*D-N/2),y.top-=O}}if((o.left||o.right)&&e.regions&&"width"in y&&y.width!==x.width){var U=y.width-x.width;e.regions.each((function(t,i){xui(t).width(e.o_regions[i].width+U)}))}if((o.top||o.bottom)&&e.regions&&"height"in y&&y.height!==x.height){var z=y.height-x.height;e.regions.each((function(t,i){xui(t).height(e.o_regions[i].height+z)}))}if(o.move&&(n=g.left+b,a=g.top+v,xui.merge(y,{top:a,left:n})),y.transform="",!xui.isEmpty(y)){var K=0;"left"in y&&(K=Math.floor(parseFloat(y.left)),y.left!==K&&(y.transform+=" translateX("+(y.left-K)+"px)",y.left=K)),"top"in y&&(K=Math.floor(parseFloat(y.top)),y.top!==K&&(y.transform+=" translateY("+(y.top-K)+"px)",y.top=K)),xui.each(y,(function(e,t){"transform"!==t&&(y[t]=Math.floor(parseFloat(e))+"px")}))}if(o.rotate?((l=180-180*Math.atan2(d.x-e.o_center.x,d.y-e.o_center.y)/Math.PI)<0&&(l+=360),l=parseInt(l,10),y.transform+=" rotate("+l+"deg)"):f&&(y.transform+=" rotate("+f+"deg)"),y.transform||delete y.transform,!xui.isEmpty(y)){e.proxy.css(y),e.onChange&&e.boxing().onChange(e,e.proxy);var V=o.rotate?parseInt(l,10)+"°":o.move?parseInt(y.left,10)-p+" : "+(parseInt(y.top,10)-h):parseInt(y.width||x.width,10)+" X "+parseInt(y.height||x.height,10);xui.Tips.show(t,{tips:V})}}}},_onDragstop:function(e,t,i,r){var o,n,a,s,u,l=e.o_size,d=e.o_pos,c=e.proxy,p=this._getDDParas(e.o_rotate,r);"exmove"!=r&&(p.move||p.rotate||0===(a={width:(o=c.cssSize()).width-l.width,height:o.height-l.height}).width&&0===a.height&&(a=null),0===(s={left:(n=c.cssPos()).left-d.left,top:n.top-d.top}).left&&0===s.top&&(s=null),p.rotate&&(u=c.rotate()),e.onUpdate&&!1===e.boxing().onUpdate(e,e._target,a,s,u)||e.box._onUpdate(e,e._target,a,s,u),e.properties._attached&&(xui.browser.ie6&&e._target.ieRemedy(),e.proxy.html("",!1).css({visibility:"hidden",border:"none",zIndex:"0",width:"0",height:"0",rotate:0}))),e.$onDrag=!1,delete e.o_rotate,e.box._tryCursors(e),xui.Tips.hide()}}}),xui.Class("xui.UI.Block","xui.UI.Widget",{Initialize:function(){var e=this,t=e.getTemplate();t.className+=" {_sidebarStatus}",xui.merge(t.FRAME.BORDER,{className:"xui-uiw-border {clsBorderType1}",SIDEBAR:{tagName:"div",className:"xui-uisb xui-uibar {_sidebar}",SBCAP:{className:"xui-uisbcap xui-title-node",text:"{sideBarCaption}"},SBBTN:{$order:1,className:"xui-uisbbtn xuifont",$fonticon:"{_fi_btn}"}},PANEL:{tagName:"div",className:"xui-uibar xui-uicontainer {clsBorderType2}",style:"{_panelstyle};{background};{_overflow};",text:"{html}"+xui.UI.$childTag}},"all"),e.setTemplate(t),t=e.getAppearance(),xui.merge(t,{PANEL:{position:"relative",overflow:"auto"},SBCAP:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"},SBBTN:{"z-index":2,margin:"0.33333em"}}),e.setAppearance(t)},Instance:{hide:function(e){return this.each((function(e){e.$inModal&&e.box._unModal(e)})),arguments.callee.upper.apply(this)},getFiles:function(){return this.get(0).$files||[]},removeFiles:function(e){var t=this.get(0);return e&&t.$files?xui.isArr(e)?xui.filter(t.$files,(function(t){return-1==e.indexOf(t)})):xui.arr.removeValue(t.$files,e):t.$files=null,t.onFiles&&t.boxing().onFiles(t,t.$files||[]),t.$files}},Static:{Behaviors:{HoverEffected:{SBBTN:"SBBTN",SBCAP:null},ClickEffected:{SBBTN:"SBBTN"},DroppableKeys:["PANEL"],PanelKeys:["PANEL"],PANEL:{onClick:function(e,t,i){return!e.properties.disabled&&(e.onClickPanel?e.boxing().onClickPanel(e,t,i):void 0)}},SBBTN:{onClick:function(e,t,i){var r=e.properties;if(r.disabled)return!1;e.boxing().setSideBarStatus("fold"==r.sideBarStatus?"expand":"fold")}},SIDEBAR:{onClick:function(e,t,i){var r=e.properties,o=e.getSubNode("SBBTN");if(r.disabled)return!1;xui.Event.getSrc(t).$xid!=o.xid()&&"fold"==r.sideBarStatus&&o.onClick(!0)}}},EventHandlers:{onClickPanel:function(e,t,i){},onClickBackdrop:function(e,t,i){},onFiles:function(e,t){},onFileError:function(e,t,i){}},DataModel:{disabled:null,tips:null,rotate:null,iframeAutoLoad:{ini:"",action:function(){xui.UI.Div._applyAutoLoad(this)}},ajaxAutoLoad:{ini:"",action:function(){xui.UI.Div._applyAutoLoad(this)}},selectable:!0,backdrop:{ini:"",combobox:["","transparent","#FFFFFF","background:#000;opacity:0.7;"],action:function(e){this.box&&(this.box._unModal(this),e&&this.box._modal(this))}},backdropClick:{ini:"",listbox:["","none","hide","destroy"]},dropFileTypes:{ini:"",combobox:["","*","image/*","image/jpeg,image/png,image/gif",".doc,.docx"]},maxFileSize:0,html:{html:1,action:function(e,t,i){this.getSubNode("PANEL").html(xui.adjustRes(e,0,1),null,null,i)}},borderType:{ini:"outset",listbox:["none","flat","inset","outset","groove","ridge"],action:function(e){var t=this,i=t.properties;t.box._borderType(t,e,i.sideBarStatus,i.sideBarType.split("-"),!0)}},sideBarCaption:{ini:"",action:function(e){this.getSubNode("SBCAP").html(e)}},sideBarType:{ini:"none",listbox:["none","left","right","top","bottom","left-top","left-bottom","right-top","right-bottom","top-left","top-right","bottom-left","bottom-right"],action:function(e){var t=this,i=t.properties;t.box._adjustSideBar(t,i.sideBarStatus,e),"none"!=i.dock?t.boxing().adjustDock(!0):t.adjustSize()}},sideBarStatus:{ini:"expand",listbox:["expand","fold"],action:function(e){var t=this,i=t.properties;t.getRoot().tagClass("-fold","expand"!=e),t.box._adjustSideBar(t,e,i.sideBarType),xui.UI.$doResize(t,i.width,i.height,!0),t.boxing().adjustDock(!0)}},sideBarSize:{ini:"2em",action:function(e){var t=this;"none"==t.properties.dock?t.adjustSize():t.boxing().adjustDock(!0)}},background:{format:"color",ini:"",action:function(e){this.getSubNode("PANEL").css("background",e)}},width:{$spaceunit:1,ini:"10em"},height:{$spaceunit:1,ini:"10em"}},Appearances:{KEY:{"line-height":"normal"},"KEY-fold PANEL":{display:"none"},"KEY-fold SIDEBAR":{cursor:"pointer","background-color":"#B6B6B6"}},RenderTrigger:function(){var e=this;"xui.UI.Block"==e.box.KEY&&(e.properties.iframeAutoLoad||e.properties.ajaxAutoLoad)&&xui.UI.Div._applyAutoLoad(this),e.destroyTrigger=function(){var e=this,t=this.getSubNode("PANEL").get(0);e.$inModal&&e.box._unModal(e),e.$input&&e.$inputchange&&e.$input.removeEventListener("change",e.$inputchange,!1),e.$dragover&&t.removeEventListener("dragover",e.$dragover,!1),e.$dragleave&&t.removeEventListener("dragleave",e.$dragleave,!1),e.$drop&&t.removeEventListener("drop",e.$drop,!1),e.$click&&t.removeEventListener("click",e.$click,!1),e.$files=null};var t=e.properties.dropFileTypes,i=e.properties.maxFileSize;if(!e.$inDesign&&xui.Dom.supportDropzone()&&t){var r=e.getSubNode("PANEL").get(0),o=e.$input=document.createElement("input"),n=function(e){e.preventDefault(),e.stopPropagation()},a=function(r){for(var o=[],n=t.split(/,\s*/),a=0,s=r.length;a<s;a++){var u;if(i&&r[a].size>i)e.onFileError&&e.boxing().onFileError(e,"File too large",r[a]);else{if(!r[a].type)try{(new FileReader).readAsBinaryString(r[a].slice(0,5))}catch(t){e.onFileError&&e.boxing().onFileError(e,"It's a dir",r[a]);continue}if(-1!=n.indexOf(r[a].type))o.push(r[a]),u=1;else for(var l=0,d=n.length;l<d;l++)if(-1!=n[l].indexOf("*")&&("*"==n[l]||new RegExp("^"+n[l].replace("*","")+"[.-\\w]+$").test(r[a].type))){o.push(r[a]),u=1;break}!u&&e.onFileError&&e.boxing().onFileError(e,"Type is not allowed: "+r[a].type,r[a])}}return o},s=function(t){var i;if(t.dataTransfer){if(!(i=t.dataTransfer.files)||!i.length){var r=t.dataTransfer.getData("text/html"),o=r&&/\bsrc="?([^"\s]+)"?\s*/.exec(r),n=o&&o[1];if(n){var s=new Image,u=document.createElement("canvas"),l=u.getContext("2d");s.onload=function(){u.width=this.naturalWidth,u.height=this.naturalHeight,l.drawImage(this,0,0),u.toBlob((function(t){e.onFiles&&e.boxing().onFiles(e,e.$files=a([t]))}),"image/png"),s.onload=s.onerror=null},s.onerror=function(t){e.onFileError&&e.boxing().onFileError(e,"Error at: "+n,null),s.onload=s.onerror=null},s.crossOrigin="",s.src=n}return}if(xui.Dom.supportPromise()&&t.dataTransfer.items&&t.dataTransfer.items[0]&&t.dataTransfer.items[0].webkitGetAsEntry){var d=async function(e){for(var t=function(e,t){return new Promise((function(i,r){e.file((function(e){e.filepath=(t||"")+e.name,i(e)}),(function(e){r(e)}))}))},i=function(e,t){return new Promise((function(i,o){e.readEntries((async function(e){var o=[];for(var n of e){const e=await r(n,t);o=o.concat(e)}i(o)}),(function(e){o(e)}))}))},r=async function(e,r){return e.isDirectory?await async function(e,t){var r,o=e.createReader(),n=t+e.name+"/",a=[];do{r=await i(o,n),a=a.concat(r)}while(r.length>0);return a}(e,r||""):[await t(e,r||"")]},o=[],n=[],a=0,s=e.length;a<s;a++)n.push(e[a].webkitGetAsEntry());for(var u of n)o=o.concat(await r(u));return o};return void async function(){try{var i=await d(t.dataTransfer.items);e.onFiles&&e.boxing().onFiles(e,e.$files=a(i))}catch(t){e.onFileError&&e.boxing().onFileError(e,"Error at: "+xui.getErrMsg(t),t)}}()}}else t.target&&(i=t.target.files);e.$files=i,e.onFiles&&e.boxing().onFiles(e,e.$files=a(i))};o.type="file",o.accept=e.properties.dropFileTypes,o.multiple=!0,o.style.display="none",o.addEventListener("change",e.$inputchange=function(e){s(e)},!1),this.getRootNode().appendChild(o),r.addEventListener("dragover",e.$dragover=function(e){n(e),xui.DragDrop.setDropFace(r)},!1),r.addEventListener("dragleave",e.$dragleave=function(e){n(e),xui.DragDrop.setDropFace()},!1),r.addEventListener("drop",e.$drop=function(e){n(e),xui.DragDrop.setDropFace(),s(e)},!1),r.addEventListener("click",e.$click=function(){o.value=null,o.click()},!1)}},_sbicon:function(e,t,i,r){var o="fold"==t?"left"==i?"left":"right"==i?"right":"top"==i?"up":"down":"left"==i?"right":"right"==i?"left":"top"==i?"down":"up";return r?e.getSubNode("SBBTN").replaceClass(/(xui-icon-double)[\w]+/g,"$1"+o):"xui-icon-double"+o},_borderType:function(e,t,i,r,o){r="expand"==i?r[0]:r[1]||r[0];var n=e,a=t,s=n.getSubNode("BORDER"),u=n.getSubNode("PANEL"),l=/^xui-uiborder-/,d="xui-uiborder-",c=d+"radius",p=d+"inset",h=d+"outset",f="left"==r?c+"-tr "+c+"-br":"top"==r?c+"-bl "+c+"-br":"right"==r?c+"-tl "+c+"-bl":"bottom"==r?c+"-tl "+c+"-tr":c,x=p+" "+c,g=h+" "+c,m=p+" "+f,b=h+" "+f;switch(n.getRoot(),s.removeClass(l),u.removeClass(l),a){case"flat":s.addClass("xui-uiborder-flat xui-uiborder-radius"),u.addClass(f);break;case"inset":s.addClass(x),u.addClass(f);break;case"outset":s.addClass(g),u.addClass(f);break;case"groove":s.addClass(x),u.addClass(b);break;case"ridge":s.addClass(g),u.addClass(m)}n.box._setB(n),o&&n.adjustSize()},_adjustSideBar:function(e,t,i){var r=e,o=r.properties,n=i.split("-");r.getSubNode("SIDEBAR").removeClass(/^xui-uisb-/).addClass("xui-uisb-"+("expand"==t?n[0]:n[1]||n[0])),r.box._sbicon(r,t,n[1]||n[0],!0),r.box._borderType(r,o.borderType,t,n,!1)},_setB:function(e){var t=e.properties,i=t.borderType,r=e.getSubNode("BORDER")._borderW("left");t.$hborder=t.$vborder=t.$iborder=0,"flat"==i||"inset"==i||"outset"==i?(t.$hborder=t.$vborder=r,t.$iborder=0):"groove"!=i&&"ridge"!=i||(t.$hborder=t.$vborder=t.$iborder=r)},LayoutTrigger:function(){var e=this,t=e.properties,i=t.sideBarStatus,r=t.borderType;if("none"!=r&&this.boxing().setBorderType(r,!0),"fold"==i&&this.boxing().setSideBarStatus("fold",!0),t.backdrop){var o=e.$modalDiv&&e.$modalDiv.parent(),n=e.box;o&&o.get(0)&&o.get(0)!==e.getRootNode()&&n._unModal(e),n._modal(e)}},_modal:function(e){var t,i=e.getRoot(),r=i.parent(),o=e.properties,n=o.backdropClick,a=o.backdrop;if(!r.isEmpty()&&!e.$inModal){if(e.$modalDiv&&e.$modalDiv.remove(),(t=e.$modalDiv=xui.create("<div class='xui-cover xui-custom xui-cover-modal' style='cursor:default;left:0;top:0;position:absolute;overflow:hidden;display:block;z-index:0;'></div>")).css({display:"block",width:Math.max(r.width(),r.scrollWidth())+"px",height:Math.max(r.height(),r.scrollHeight())+"px"}),/:/.test(a)){var s={};xui.arr.each(a.split(/;\s*/),(function(e){var t=e.split(/:\s*/);t[0]&&"display"!==t[0]&&"visibility"!==t[0]&&(s[t[0]]=t[1])})),xui.isEmpty(s)||t.css(s)}else t.css("background-color",a);t.onClick((function(t,i,r){if(n)"hide"==n?e.boxing().hide():"destroy"==n&&e.boxing().destroy();else if(e.onClickBackdrop)return e.boxing().onClickBackdrop(e,i,r);return!!e.$inDesign&&null})).topZindex(!0).setSelectable(!1),r.append(t),r.get(0)!==document.body&&r.get(0)!==document&&r.get(0)!==window||(r=xui.win),e.$inDesign&&t.onClick((function(){i.onClick(!0)})),r.onSize((function(e){var i=(e=xui(e)).width()+"px",r=e.height()+"px";t.css({width:i,height:r}),xui.asyRun((function(){var i=Math.max(e.width(),e.scrollWidth())+"px",r=Math.max(e.height(),e.scrollHeight())+"px";t.css({width:i,height:r})}))}),"dialog:"+e.serialId);var u=(parseInt(t.css("zIndex"),10)||0)+1;i.css("zIndex",u),u>=xui.Dom.TOP_ZINDEX&&(xui.Dom.TOP_ZINDEX=u+1),e.$inModal=!0,r.setBlurTrigger(e.$xid+"_anti",!0,xui([t.get(0),e.getRootNode()]))}},_unModal:function(e){if(e.$inModal){var t=e.$modalDiv.parent();t.get(0)!==document.body&&t.get(0)!==document&&t.get(0)!==window||(t=xui.win),t.onSize(null,"block:"+e.serialId),e.getRoot().css("zIndex",0),e.$modalDiv.css("display","none");var i=e.getSubNode("BORDER");i.isEmpty()||i.append(e.$modalDiv),e.$inModal=!1,t.setBlurTrigger(e.$xid+"_anti")}},_prepareData:function(e){var t=arguments.callee.upper.call(this,e),i=t.sideBarType.split("-"),r=t.sideBarStatus;return t.background=t.background?"background:"+t.background:"",xui.isStr(t.overflow)&&(t._overflow=-1!=t.overflow.indexOf(":")?t.overflow:t.overflow?"overflow:"+t.overflow:""),t._sidebar="xui-uisb-"+("expand"==r?i[0]:i[1]||i[0]),t._sidebarStatus="fold"==r?e.getClass("KEY","-fold"):"",t._fi_btn=e.box._sbicon(e,r,i[1]||i[0]),t},_onresize:function(e,t,i){var r=arguments.callee.upper.apply(this,arguments),o=e.getRoot(),n=e.getSubNode("BORDER"),a=e.getSubNode("PANEL"),s=e.getSubNode("SIDEBAR"),u=e.getSubNode("SBCAP"),l=e.properties,d=l.sideBarStatus,c=l.sideBarType.split("-"),p=n.contentBox(),h=2*(l.$vborder||0),f=2*(l.$hborder||0),x=a.contentBox(),g=2*(l.$iborder||0),m=xui.$us(e),b=function(t,i){return e.$forceu(t,m>0?"em":"px",i)},v=e.getEmSize()/o._getEmSize(),y=a._getEmSize(v),A=t?e.$px(r.width):r.width,_=i?e.$px(r.height):r.height,w=e.$px(l.sideBarSize),C=b(w);if(c="expand"==d?c[0]:c[1]||c[0],r.left=r.top=0,c&&"none"!=c){if(u.css("line-height",b(w-(p?f:0))),"left"==c||"right"==c?(s.width(C),i&&"auto"!==i&&s.height(b(_-(p?0:h)))):(s.height(C),s.width(b(A-(p?0:f)))),"fold"==d)return void("left"==c||"right"==c?(o.width(b(w+f)),n.width(b(w+(p?0:f)))):(o.height(b(w+h)),n.height(b(w+(p?0:h)))));switch("left"==c||"right"==c?(o.width(b(t)),n.width(b(A))):(o.height(b(i)),n.height(b(_))),c){case"left":A-=w,r.left=w;break;case"right":A-=w;break;case"top":_-=w,r.top=w;break;case"bottom":_-=w}}r.width&&(r.width=b(A-(p?0:f)-(x?g:0),y)),r.height&&"auto"!==r.height&&(r.height=b(_-(p?0:h)-(x?g:0),y)),a.cssRegion(r,!0),r.width&&xui.UI._adjustConW(e,a,r.width)},_showTips:function(e,t,i){var r=e.properties;if(!r.disableTips){if(e.onShowTips)return e.boxing().onShowTips(e,t,i);if(xui.Tips&&"none"!=r.sideBarType){var o=t.id,n=e.keys;return"fold"!=r.sideBarStatus||0!==o.indexOf(n.SBCAP)&&0!==o.indexOf(n.SBBTN)?"expand"==r.sideBarStatus&&0===o.indexOf(n.SBBTN)?(xui.Tips.show(i,{tips:xui.wrapRes("$inline.Fold")}),!1):void 0:(xui.Tips.show(i,{tips:xui.wrapRes("$inline.Expand")}),!1)}}}}}),xui.Class("xui.UI.Label","xui.UI",{Initialize:function(){xui.UI.SLabel=xui.UI.Label;var e="xui.UI.SLabel";xui.absBox.$type[e.replace("xui.UI.","")]=xui.absBox.$type[e]=e},Instance:{fireClickEvent:function(){return this.getRoot().onClick(),this},_applyExcelFormula:function(e){var t,i,r=this.get(0),o=r.properties;(t=o.excelCellFormula)&&(i=xui.ExcelFormula.calculate(t,e),xui.isSet(i)&&(r.beforeApplyExcelFormula&&!1===r.beforeApplyExcelFormula(r,o.excelCellFormula,i)||(this.setCaption(i,!0),r.afterApplyExcelFormula&&r.afterApplyExcelFormula(r,o.excelCellFormula,i))))}},Static:{Templates:{tagName:"label",className:"{_className}",style:"{_hAlign};{_vAlign};{_style}",VALIGN:{$order:0,style:"{_vAlign2}"},ICON:{$order:1,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{$order:2,text:"{caption}",style:"{_fc}{_fw}{_fs}{_ff}","font-size":"1em"}},Appearances:{VALIGN:{"font-size":0,width:0,display:"inline-block",height:"100%"}},DataModel:{selectable:!0,caption:{ini:undefined,action:function(e){this.properties.clock||(e=(xui.isSet(e)?e:"")+"",this.getSubNode("CAPTION").html(xui.adjustRes(e,!0)))}},clock:{ini:"",combobox:["hh : nn : ss","hh - nn : ss"],action:function(e){var t=this;e&&!t._timer?((t._timer=new xui.Timer).get(0).$onTime=function(){t.destroyed||t.getSubNode("CAPTION").html(xui.Date.format(new Date,t.properties.clock))})():!e&&t._timer&&(t._timer.destroy(),t._timer=null,t.boxing().setCaption(t.properties.caption,!0))}},image:{format:"image",action:function(e){xui.UI.$iconAction(this)}},imagePos:{action:function(e){this.getSubNode("ICON").css("backgroundPosition",e||"center")}},imageBgSize:{action:function(e){this.getSubNode("ICON").css("backgroundSize",e||"")}},imageClass:{ini:"",action:function(e,t){xui.UI.$iconAction(this,"ICON",t)}},iconFontCode:{action:function(e){xui.UI.$iconAction(this)}},hAlign:{ini:"right",listbox:["left","center","right"],action:function(e){xui.Dom.css3Support("flex")?this.getRoot().css({"justify-content":"left"==e?"flex-start":"right"==e?"flex-end":"center"}):this.getRoot().css("textAlign",e||"")}},vAlign:{ini:"top",listbox:["top","middle","bottom"],action:function(e){xui.Dom.css3Support("flex")?this.getRoot().css({"align-items":"top"==e?"flex-start":"bottom"==e?"flex-end":"center"}):this.getSubNode("VALIGN").css("verticalAlign",e||"")}},fontColor:xui.UI.Button.$DataModel.fontColor,fontSize:xui.UI.Button.$DataModel.fontSize,fontWeight:xui.UI.Button.$DataModel.fontWeight,fontFamily:xui.UI.Button.$DataModel.fontFamily,excelCellFormula:{ini:"",action:function(e){var t,i=this;i.properties,e&&xui.ExcelFormula.validate(e)&&i.host&&(t=i.host["xui.Module"])&&t.applyExcelFormula(i)}}},Behaviors:{HoverEffected:{KEY:"KEY",ICON:"ICON"},onClick:function(e,t,i){return!e.properties.disabled&&(e.onClick?e.boxing().onClick(e,t,i):void 0)}},EventHandlers:{onClick:function(e,t,i){},beforeApplyExcelFormula:function(e,t,i){},afterApplyExcelFormula:function(e,t,i){}},RenderTrigger:function(){var e,t=this;(t.$beforeDestroy=t.$beforeDestroy||{}).timerClear=function(){t._timer&&(t._timer.destroy(),delete t._timer)},(e=t.properties.clock)&&t.boxing().setClock(e,!0)},_prepareData:function(e,t){var i;return(t=arguments.callee.upper.call(this,e,t)).clock&&(t.caption=""),(i=t.fontSize)&&(t._fs="font-size:"+i+";"),(i=t.fontWeight)&&(t._fw="font-weight:"+i+";"),(i=t.fontColor)&&(t._fc="color:"+i+";"),(i=t.fontFamily)&&(t._ff="font-family:"+i+";"),xui.Dom.css3Support("flex")?(t._hAlign="display:inline-flex;justify-content:"+("left"==t.hAlign?"flex-start":"right"==t.hAlign?"flex-end":"center"),t._vAlign="align-items:"+("top"==t.vAlign?"flex-start":"bottom"==t.vAlign?"flex-end":"center")):(t._hAlign="text-align:"+(t.hAlign||""),t._vAlign2="vertical-align:"+(t.vAlign||"")),t}}}),xui.Class("xui.UI.ProgressBar",["xui.UI.Widget","xui.absValue"],{Instance:{_setCtrlValue:function(e){return this.each((function(t){var i=t.properties.type,r=t.getSubNode("FILL");"horizontal"==i?r.width(e+"%"):r.top(100-e+"%").height(e+"%"),t.getSubNode("CAP").text(t.properties.captionTpl.replace(/\{value\}|\*/g,e))}))}},Initialize:function(){var e=this,t=e.getTemplate();xui.merge(t.FRAME.BORDER,{className:"xui-uiborder-flat xui-uiborder-radius xui-uibase",FILL:{tagName:"div",style:"{fillBG}",className:"xui-uibar",text:"{html}"+xui.UI.$childTag},INN:{$order:2,tagName:"div",CAP:{tagName:"div"}}},"all"),e.setTemplate(t),t=e.getAppearance(),xui.merge(t,{BORDER:{overflow:"hidden"},INN:{display:"table",position:"absolute",left:0,top:0,width:"100%",height:"100%"},CAP:{"text-align":"center"},FILL:{border:"none",position:"relative",width:0,height:0,left:0,top:0}}),e.setAppearance(t)},Static:{DataModel:{value:0,width:{$spaceunit:1,ini:"25em"},height:{$spaceunit:1,ini:"1.5em"},captionTpl:{ini:"* %",action:function(){this.boxing()._setCtrlValue(this.properties.$UIvalue)}},type:{listbox:["vertical","horizontal"],ini:"horizontal",action:function(e){var t=this.properties.width,i=this.properties.height;this.properties.height=t,this.properties.width=i,this.boxing().refresh()}},fillBG:{ini:"",format:"color",action:function(e){this.getSubNode("FILL").css("background",e)}},$hborder:1,$vborder:1},LayoutTrigger:function(){var e=this.properties,t=this.getSubNode("BORDER");e.$hborder=e.$vborder=t._borderW("left")},_prepareData:function(e){var t=arguments.callee.upper.call(this,e);return t.fillBG=t.fillBG?"background:"+t.fillBG:"",t},_ensureValue:function(e,t){return Math.max(0,Math.min(100,(/^\s*\=/.test(t||"")?xui.ExcelFormula.calculate(t||""):parseInt(t,10))||0))},_onresize:function(e,t,i){var r,o=arguments.callee.upper.apply(this,arguments),n=e.properties,a=xui.$us(e),s=function(t,i){return e.$forceu(t,a>0?"em":"px",i)},u=e.getRoot(),l=e.getSubNode("INN"),d=e.getSubNode("CAP"),c=e.getSubNode("FILL"),p=e.getEmSize()/u._getEmSize(),h=l._getEmSize(p),f=d._getEmSize(p),x=c._getEmSize(p);o.width&&"auto"!=o.width&&(o.width=e.$px(o.width)),o.height&&"auto"!=o.height&&(o.height=e.$px(o.height)),"horizontal"==n.type?o.height&&(r=s(o.height,h),l.css({"line-height":r}),r=s(o.height,x),c.css({height:r,"line-height":r}),r=s(o.height,f),d.css({height:r,"line-height":r})):(o.width&&(c.css({width:s(o.width,x)}),d.css({width:s(o.width,f)})),o.height&&(l.css({"line-height":s(o.height,h)}),c.css({"line-height":s(o.height,x)}),d.css({"line-height":s(o.height,f)})))}}}),xui.Class("xui.UI.Slider",["xui.UI","xui.absValue"],{Instance:{_setCtrlValue:function(e){return this.each((function(t){var i,r=t.properties,o=(r.steps,function(e){return t.getSubNode(e)}),n=o("IND1"),a=o("IND2"),s=o("BG"),u="vertical"==r.type,l=t.box._v2a(t,e),d=u?"top":"left",c=u?"height":"width",p=xui.adjustRes(r.labelCaption,!0)||"";r.isRange?(n[d](l[0]+"%"),a[d](l[1]+"%"),s[d](l[0]+"%")[c](l[1]-l[0]+"%"),i=(r.numberTpl+"").replace(/[*12]/g,(function(e){return"1"==e?xui.formatNumeric(l[0],r.precision||0,null,null,!0):"2"==e?xui.formatNumeric(l[1],r.precision||0,null,null,!0):p}))):(n[d](l[0]+"%"),s[c](l[0]+"%"),-1!=(i=(r.numberTpl+"").replace(/1[^2]*2/,"1").replace("1",xui.formatNumeric(l[0],r.precision||0,null,null,!0))).indexOf("*")?i=i.replace("*",p):i+=p),"none"!=r.labelPos&&parseFloat(r.labelSize)&&t.getSubNode("LABEL").html(i)}))},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["BOX"])}},Static:{Templates:{style:"{_style}",className:"{_className} xui-ui-ellipsis {_cls}",LABEL:{className:"{_required}",style:"{labelShow};width:{_labelSize};{labelHAlign}",text:"{labelCaption}"},BOX:{tagName:"div",RULER:{$order:1,tagName:"div",className:"xui-uiborder-flat xui-uibase xui-uiborder-radius",BG:{tagName:"div",className:"xui-uibar xui-uiborder-radius"}},IND:{$order:2,IND1:{tagName:"span",className:"xui-uibar xui-uigradient xui-ui-btn xui-uiborder-circle xuicon xui-icon-placeholder",style:"{_showD}",tabindex:"{tabindex}"},IND2:{tagName:"span",className:"xui-uibar xui-uigradient xui-ui-btn xui-uiborder-circle xuicon xui-icon-placeholder",style:"{_showD2}",tabindex:"{tabindex}"}},DECREASE:{style:"{_showDes}",className:"xuifont",$fonticon:"{_fi_decls}",tabindex:"{tabindex}"},INCREASE:{style:"{_showIns}",className:"xuifont",$fonticon:"{_fi_incls}",tabindex:"{tabindex}"}}},Appearances:{"IND, BT, RULER, IND1, IND2, DECREASE, INCREASE":{position:"absolute"},LABEL:{"z-index":1,top:0,left:0,display:xui.browser.isWebKit?"-webkit-flex":"flex",position:"absolute","padding-top":".5em"},BOX:{position:"absolute",left:0,top:0,width:"100%",height:"100%"},"KEY-h BOX":{$order:1,height:"2em"},"KEY-v BOX":{$order:2,width:"2em"},"KEY-v LABEL":{"writing-mode":"tb-rl",filter:"flipv fliph"},"KEY-h DECREASE, KEY-h INCREASE":{top:"50%","margin-top":"-.5em"},"KEY-h IND1,KEY-h IND2, KEY-v IND1,KEY-v IND2":{padding:0,margin:0},"KEY-h DECREASE":{$order:1,left:0},"KEY-h INCREASE":{$order:1,right:0},BG:{position:"absolute",left:0,top:0,height:"100%",width:"100%"},"KEY-h IND":{"z-index":1,top:"50%",height:xui.browser.contentBox?"2px":"4px","margin-top":"-1px"},"KEY-h RULER":{$order:2,top:"50%",height:xui.browser.contentBox?"2px":"4px","margin-top":"-2px"},"KEY-v DECREASE, KEY-v INCREASE":{$order:10,left:"50%","margin-left":"-.5em"},"KEY-v DECREASE":{$order:10,top:0},"KEY-v INCREASE":{$order:10,bottom:0},"KEY-v IND":{$order:10,"z-index":1,left:"50%",width:xui.browser.contentBox?"2px":"4px","margin-left":"-1px"},"KEY-v RULER":{$order:10,"z-index":1,left:"50%",width:xui.browser.contentBox?"2px":"4px","margin-left":"-2px"},"KEY-h IND1,KEY-h IND2":{$order:1,"z-index":2,left:0,top:0,cursor:"e-resize","margin-top":"-.5em","margin-left":"-.5em"},"KEY-v IND1,KEY-v IND2":{$order:10,"z-index":2,left:0,top:0,cursor:"n-resize","margin-top":"-.5em","margin-left":"-.5em"}},Behaviors:{HoverEffected:{IND1:"IND1",IND2:"IND2",DECREASE:"DECREASE",INCREASE:"INCREASE"},ClickEffected:{IND1:"IND1",IND2:"IND2",DECREASE:"DECREASE",INCREASE:"INCREASE"},IND:{onClick:function(e,t,i){var r=e.properties;if(r.disabled||r.readonly)return!1;var o,n,a=xui.use(i).offset(),s=xui.Event.getPos(t),u=e.box._v2a(e,e.properties.$UIvalue),l="vertical"==r.type,d=l?"top":"left",c=l?"top":"left",p=l?"height":"width",h=s[d]-a[d],f=h/xui.use(i)[p]()*100;r.isRange?(o=e.getSubNode("IND1")[c](),n=e.getSubNode("IND2")[c](),Math.abs(o-h)<Math.abs(n-h)?u[0]=f:u[1]=f):u[0]=f,e.boxing().setUIValue(e.box._adjustValue(e,u),null,null,"click")}},IND1:{onKeydown:function(e,t,i){var r=e.properties;if(!r.disabled&&!r.readonly){var o="vertical"==r.type,n=xui.Event.getKey(t).key;n==(o?"up":"left")&&e.box._auto(e,!1),n==(o?"down":"right")&&e.box._auto(e,!0)}},onKeyout:function(e){xui.Thread.abort(e.$xid+":auto")},onKeyup:function(e){xui.Thread.abort(e.$xid+":auto")},beforeMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t)){var r=e.properties;if(!r.disabled&&!r.readonly){var o="vertical"==r.type,n=o?"top":"left",a=o?"height":"width";e.box,xui.use(i).startDrag(t,{widthIncrement:r.steps?e._size/r.steps:null,dragType:"none",targetReposition:!0,horizontalOnly:!!o||null,verticalOnly:!o||null,maxLeftOffset:xui.use(i)[n](),maxRightOffset:xui.use(i).parent()[a]()-xui.use(i)[n](),dragCursor:"default"}),xui.use(i).css("zIndex",10).focus(!0),e.getSubNode("IND2").css("zIndex",5)}}},beforeDragbegin:function(e,t,i){var r="vertical"==e.properties.type;xui(i)[r?"top":"left"](e.__x=e.$px(xui.use(i)[r?"top":"left"]()))},onDrag:function(e,t,i){var r=xui.DragDrop.getProfile().offset,o="vertical"==e.properties.type,n=e.box._v2a(e,e.properties.$UIvalue);n[0]=(e.__x+r[o?"y":"x"])/xui.use(i).parent()[o?"height":"width"]()*100,e.boxing().setUIValue(e.box._adjustValue(e,n),null,null,"drag")},onDragstop:function(e,t,i){xui(i).onMouseout(!0,{$force:!0}).onMouseup(!0)},onClick:function(){return!1}},IND2:{onKeydown:function(e,t,i){var r=e.properties;if(!r.disabled&&!r.readonly){var o="vertical"==r.type,n=xui.Event.getKey(t).key;n==(o?"up":"left")&&e.box._auto(e,!1),n==(o?"down":"right")&&e.box._auto(e,!0)}},onKeyout:function(e){xui.Thread.abort(e.$xid+":auto")},onKeyup:function(e){xui.Thread.abort(e.$xid+":auto")},beforeMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t)){var r=e.properties;if(!r.disabled&&!r.readonly){var o="vertical"==r.type,n=o?"top":"left",a=o?"height":"width";e.box,xui.use(i).startDrag(t,{widthIncrement:r.steps?e._size/r.steps:null,dragType:"none",targetReposition:!0,horizontalOnly:!!o||null,verticalOnly:!o||null,maxLeftOffset:xui.use(i)[n](),maxRightOffset:xui.use(i).parent()[a]()-xui.use(i)[n](),dragCursor:"default"}),xui.use(i).css("zIndex",10).focus(!0),e.getSubNode("IND1").css("zIndex",5)}}},beforeDragbegin:function(e,t,i){var r="vertical"==e.properties.type;xui(i)[r?"top":"left"](e.__x=e.$px(xui.use(i)[r?"top":"left"]()))},onDrag:function(e,t,i){var r=xui.DragDrop.getProfile().offset,o="vertical"==e.properties.type,n=e.box._v2a(e,e.properties.$UIvalue);n[1]=(e.__x+r[o?"y":"x"])/xui.use(i).parent()[o?"height":"width"]()*100,e.boxing().setUIValue(e.box._adjustValue(e,n),null,null,"drag2")},onDragstop:function(e,t,i){xui(i).onMouseout(!0,{$force:!0}).onMouseup(!0)},onClick:function(){return!1}},DECREASE:{onMousedown:function(e){e.properties.disabled||e.properties.readonly||e.box._auto(e,!1)},onMouseout:function(e){e.properties.disabled||e.properties.readonly||xui.Thread.abort(e.$xid+":auto")},onMouseup:function(e){e.properties.disabled||e.properties.readonly||xui.Thread.abort(e.$xid+":auto")}},INCREASE:{onMousedown:function(e){e.properties.disabled||e.properties.readonly||e.box._auto(e,!0)},onMouseout:function(e){e.properties.disabled||e.properties.readonly||xui.Thread.abort(e.$xid+":auto")},onMouseup:function(e){e.properties.disabled||e.properties.readonly||xui.Thread.abort(e.$xid+":auto")}},LABEL:{onClick:function(e,t,i){if(e.properties.disabled)return!1;e.onLabelClick&&e.boxing().onLabelClick(e,t,i)},onDblClick:function(e,t,i){if(e.properties.disabled)return!1;e.onLabelDblClick&&e.boxing().onLabelDblClick(e,t,i)},onMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t))return!e.properties.disabled&&void(e.onLabelActive&&e.boxing().onLabelActive(e,t,i))}}},DataModel:{position:"absolute",width:{$spaceunit:1,ini:"15em"},height:{$spaceunit:1,ini:"4em"},precision:0,numberTpl:"* - 1% ~ 2%",steps:0,value:"0:0",type:{listbox:["vertical","horizontal"],ini:"horizontal",action:function(e){this.boxing().refresh()}},isRange:{ini:!0,action:function(e){this.boxing().refresh()}},showIncreaseHandle:{ini:!0,action:function(e){this.adjustSize()}},showDecreaseHandle:{ini:!0,action:function(e){this.adjustSize()}},labelSize:{$spaceunit:2,ini:0,action:function(e){this.getSubNode("LABEL").css({display:e?"":"none"}),xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelPos:{ini:"left",listbox:["none","left","top","right","bottom"],action:function(e){xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelGap:{$spaceunit:2,ini:4,action:function(e){xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelCaption:{ini:"",action:function(e){var t=this.properties;"none"!=t.labelPos&&parseFloat(t.labelSize)&&this.getSubNode("LABEL").html(xui.adjustRes((xui.isSet(e)?e:"")+"",!0))}},labelHAlign:{ini:"right",listbox:["","left","center","right"],action:function(e){this.getSubNode("LABEL").css({textAlign:e||"",justifyContent:"right"==e?"flex-end":"center"==e?"center":"left"==e?"flex-start":""})}},labelVAlign:{ini:"top",listbox:["","top","middle","bottom"],action:function(e){this.getSubNode("LABEL").css("align-items","bottom"==e?"flex-end":"middle"==e?"center":"top"==e?"flex-start":"")}}},EventHandlers:{onLabelClick:function(e,t,i){},onLabelDblClick:function(e,t,i){},onLabelActive:function(e,t,i){}},_prepareData:function(e){var t,i=arguments.callee.upper.call(this,e),r="display:none";return i._showDes=i.showDecreaseHandle?"":r,i._showIns=i.showIncreaseHandle?"":r,i._showD2=i.isRange?"":r,i._cls=e.getClass("KEY","vertical"==i.type?"-v":"-h"),i._labelHAlign="text-align:"+(t=i.labelHAlign||"")+";justify-content:"+("right"==t?"flex-end":"center"==t?"center":"left"==t?"flex-start":""),i._labelVAlign="align-items:"+("bottom"==(t=i.labelVAlign)?"flex-end":"middle"==t?"center":"top"==t?"flex-start":""),i.labelShow="none"!=i.labelPos&&i.labelSize&&"auto"!=i.labelSize?"":"display:none",i._labelSize=i.labelSize?"":0+e.$picku(),"none"!=i.labelPos&&i.labelSize&&i.labelCaption&&(i.labelCaption=xui.adjustRes(i.labelCaption,!0)),i._fi_decls="xui-icon-single"+("vertical"==i.type?"up":"left"),i._fi_incls="xui-icon-single"+("vertical"==i.type?"down":"right"),i},_adjustValue:function(e,t){var i=e.properties,r=[];return r[0]=parseFloat(t[0])||0,r[1]=parseFloat(t[1])||0,i.steps&&(t=100/i.steps,r[0]=Math.ceil(r[0]/t),i.isRange&&(r[1]=Math.ceil(r[1]/t))),i.isRange?r.join(":"):r[0]+""},_ensureValue:function(e,t){var i=e.properties,r=String(t).split(":"),o=i.steps?i.steps:100,n=[],a=function(e){return parseFloat(e)||0},s=function(e){return Math.min(o,Math.max(0,e))};return n[0]=a(r[0]),i.isRange&&(n[1]=a(r[1]),n[0]>n[1]&&(r=n[1],n[1]=n[0],n[0]=r)),n[0]=s(n[0]),i.isRange&&(n[1]=s(n[1])),i.isRange?n.join(":"):n[0]+""},_v2a:function(e,t){var i,r=e.properties.steps;return(t="string"==typeof t?t.split(":"):t)[0]=parseFloat(t[0])||0,t[1]=parseFloat(t[1])||0,r&&(t[0]=100*t[0]/r),r&&(t[1]=100*t[1]/r),t[0]>t[1]&&(i=t[0],t[1]=t[0],t[0]=i),t},_auto:function(e,t){var i=e.$xid+":auto";if(!xui.Thread.isAlive(i)){var r=e.properties,o=(r.steps?100/r.steps:1)*(t?1:-1),n={delay:300},a=e.box._v2a(e,r.$UIvalue),s=function(){a[0]+=o,r.isRange&&(a[1]+=o),e.boxing().setUIValue(e.box._adjustValue(e,a),null,null,"auto"),n.delay*=.8};n.task=s,xui.Thread(i,[n],500,null,s,null,!0).start()}},_onresize:function(e,t,i){var r,o,n=e.properties,a=n.type,s=function(t){return e.getSubNode(t)},u=s("KEY"),l=s("RULER"),d=s("IND"),c=s("IND1"),p=e.$px(".75em"),h=s("BOX"),f=s("LABEL"),x=s("INCREASE"),g=s("DECREASE"),m=xui.browser.contentBox,b=xui.$us(e),v=function(t,i){return e.$forceu(t,b>0?"em":"px",i)},y=e.getEmSize()/u._getEmSize(),A=f._getEmSize(y),_=l._getEmSize(y),w=d._getEmSize(y),C=(f=e.getSubNode("LABEL"),n.labelPos),I="none"!=C&&C&&e.$px(n.labelSize,A)||0,E="none"!=C&&C&&e.$px(n.labelGap)||0;if(t&&"auto"!=t&&(t=e.$px(t)),i&&"auto"!=i&&(i=e.$px(i)),h.cssPos({left:v("left"==C?I:0),top:v("top"==C?I:0)}),g.css("display",n.showDecreaseHandle?"":"none"),x.css("display",n.showIncreaseHandle?"":"none"),"vertical"==a){h.cssSize({width:"",height:v(o=null===i?null:Math.max(0,i-("top"==C||"bottom"==C?I:0)))});var S=e.$px("1em"),D=n.showIncreaseHandle?S:0,k=n.showDecreaseHandle?S:0,$=xui.browser.contentBox?c._borderH("top"):0;o&&(l.top(v(D+p,_)).height(v(o-D-k-2*p,_)),d.top(v(D+p-$,w)).height(v(o-D-k-2*p,w))),I&&f.cssRegion({left:v(null===t?null:Math.max(0,"right"==C?h.width()+E:0),A),top:v(null===i?null:Math.max(0,"bottom"==C?i-I+E:0),A),width:"",height:v(null===i?null:Math.max(0,"top"==C||"bottom"==C?I-E:i),A)})}else h.cssSize({width:v(r=null===t?null:Math.max(0,t-("left"==C||"right"==C?I:0))),height:""}),S=e.$px("1em"),D=n.showDecreaseHandle?S:0,k=n.showIncreaseHandle?S:0,$=m?c._borderW("left"):0,r&&(l.left(v(D+p,_)).width(v(r-D-k-2*p,_)),d.left(v(D+p-$,w)).width(v(r-D-k-2*p,w))),I&&f.cssRegion({left:v(null===t?null:Math.max(0,"right"==C?t-I+E:0),A),top:v(null===i?null:Math.max(0,"bottom"==C?h.height()+E:0),A),width:v(null===t?null:Math.max(0,"left"==C||"right"==C?I-E:t),A),height:v(null===i?null:Math.max(0,"top"==C||"bottom"==C?I-E:i),A)})}}}),xui.Class("xui.UI.Input",["xui.UI.Widget","xui.absValue"],{Instance:{_setTB:function(e){var t,i,r=this.get(0),o=r.properties;if(r.host&&o.tipsBinder){var n=r.tips;i=r.tips=r.tips||o.tips||"",!(t=xui.getObject(o.tipsBinder)||(t=r.host[o.tipsBinder])&&t.get(0))||"xui.UI.Span"!=t.key&&"xui.UI.Div"!=t.key&&"xui.UI.Label"!=t.key||t.renderId&&(t.getRootNode().innerHTML="$"==i.charAt(0)?xui.wrapRes(i):i,t.getRoot().css("color",1==e?"gray":2==e?"red":"#000")),n!==r.tips&&xui.Tips&&xui.Tips.getTips()&&xui.Tips.setTips(r.tips)}},activate:function(e){var t=this.get(0);if(t&&t.renderId){var i=t.getSubNode("INPUT").get(0);if(i){try{if(i.focus(),e||!xui.browser.fakeTouch&&"touchOnly"!=xui.browser.deviceType)try{"input"!=i.tagName.toLowerCase()&&/[\n\r]/.test(i.value)?xui(i).caret(0,0):i.select()}catch(e){}}catch(e){}delete t._justFocus}}return this},getAutoexpandHeight:function(){var e=this.get(0),t=e.properties;return t.multiLines&&parseFloat(e._autoexpand||t.autoexpand)?e.$autoExpandH||e.$px(e._autoexpand||t.autoexpand):null},_setCtrlValue:function(e){return!xui.isNull(e)&&xui.isDefined(e)||(e=""),this.each((function(t){t.$Mask&&!e&&(e=t.$Mask),t.$_inner=1,t.getSubNode("INPUT").attr("value",e+""),t.box._checkAutoexpand(t),delete t.$_inner}))},_getCtrlValue:function(){var e=this.getSubNode("INPUT"),t=e&&!e.isEmpty()?this.getSubNode("INPUT").attr("value"):"";return-1!=t.indexOf("\r")&&(t=t.replace(/(\r\n|\r)/g,"\n")),this.get(0).$Mask&&this.get(0).$Mask==t&&(t=""),t},_setDirtyMark:function(){return this.each((function(e){var t=e.properties,i=e.getSubNode("INPUT"),r=(e.box,e.boxing()),o=xui.UI.$css_tag_dirty,n=xui.UI.$css_tag_invalid,a=t.value!==t.$UIvalue,s=e.tips;if(2==e._inValid?e.tips=t.tipsErr||t.tips:1==e._inValid?e.tips=t.tips:e.tips=t.tipsOK||t.tips,s!==e.tips&&xui.Tips&&xui.Tips.getTips()&&xui.Tips.setTips(e.tips),e._dirtyFlag!==a&&(t.dirtyMark&&t.showDirtyMark&&(e.beforeDirtyMark&&!1===r.beforeDirtyMark(e,a)||((e._dirtyFlag=a)?i.addClass(o):i.removeClass(o))),e._dirtyFlag=a),e.beforeFormatMark&&!1===r.beforeFormatMark(e,2==e._inValid));else{var u=e.getSubNode("ERROR");2==e._inValid?(i.addClass(n),u.css("display","block")):(i.removeClass(n),u.css("display","none"))}r._setTB(e._inValid)}))},notifyExcel:function(e){return this.each((function(t){var i="triggerExcelFormulas:";t.properties.excelCellId&&t.host&&t.host["xui.Module"]&&(i+=t.host.xid,!1===e?xui.resetRun.exists(i)||t&&t.host&&t.host.triggerExcelFormulas(t):xui.resetRun(i,(function(){t&&t.host&&t.host.triggerExcelFormulas(null)})))}))},getExcelCellValue:function(){var e,t,i=this.get(0),r=i.properties;return r.excelCellId&&(e=this.getUIValue(),xui.isSet(t=i.onGetExcelCellValue&&i.onGetExcelCellValue(i,r.excelCellId,e))&&(e=t)),e},_applyExcelFormula:function(e){var t,i,r=this.get(0),o=r.properties;(t=o.excelCellFormula)&&(i=xui.ExcelFormula.calculate(t,e),xui.isSet(i)&&(r.beforeApplyExcelFormula&&!1===r.beforeApplyExcelFormula(r,o.excelCellFormula,i)||(this.setUIValue(i,!0,null,"formula"),r.afterApplyExcelFormula&&r.afterApplyExcelFormula(r,o.excelCellFormula,i))))}},Initialize:function(){var e=this.getTemplate();xui.merge(e.FRAME.BORDER,{style:"",LABEL:{className:"{_required} xui-ui-ellipsis",style:"{labelShow};width:{_labelSize};{_labelHAlign};{_labelVAlign};",text:"{labelCaption}"},BOX:{className:"xui-ui-input xui-ui-shadow-input xui-uiborder-flat xui-uiborder-radius xui-uibase",WRAP:{tagName:"div",INPUT:{$order:10,className:"xui-ui-ellipsis {_inputcls}",tagName:"input",autocorrect:"off",autocomplete:"{autocomplete}",type:"{_inputtype}",name:"{_name}",maxlength:"{maxlength}",tabindex:"{tabindex}",placeholder:"{placeholder}",style:"{_css};{hAlign};"}}}},"all"),e.FRAME.ERROR={className:"xuifont",$fonticon:"xui-icon-error"},this.setTemplate(e)},Static:{_syncResize:!0,_maskMap:{"~":"[+-]",1:"[0-9]",a:"[A-Za-z]",u:"[A-Z]",l:"[a-z]","*":"[A-Za-z0-9]"},_maskSpace:"_",Appearances:{KEY:{position:"relative"},BORDER:{},WRAP:{left:0,position:"absolute",overflow:xui.browser.gek&&xui.browser.ver<3?"auto":"visible"},BOX:{left:0,top:0,position:"absolute",overflow:"hidden","z-index":10},".xui-required-field BOX":{"border-color":"#ff0000"},LABEL:{$order:100,"z-index":1,top:0,left:0,display:xui.browser.isWebKit?"-webkit-flex":"flex",position:"absolute","padding-top":"4px","padding-bottom":"4px"},INPUT:{$order:100,"padding-top":"4px","padding-left":"4px","padding-right":"4px","padding-bottom":"4px","background-color":"transparent",border:0,margin:0,"text-align":"left","margin-top":xui.browser.ie67?"-1px":null,position:"relative","z-index":10,width:"8.5em",overflow:xui.browser.ie678?"hidden":"auto","overflow-y":xui.browser.ie678?"hidden":"auto","overflow-x":(xui.browser.ie678,"hidden"),resize:"none"},"KEY textarea.autoexpand":{overflow:"hidden",$order:2},"KEY textarea":{"white-space":"pre","overflow-x":"hidden","overflow-y":"auto"},ERROR:{position:"absolute",right:".25em",top:".25em",display:"none","z-index":20}},Behaviors:{HoverEffected:{BOX:["BOX"]},NavKeys:{INPUT:1},LABEL:{onClick:function(e,t,i){if(e.properties.disabled)return!1;e.onLabelClick&&e.boxing().onLabelClick(e,t,i)},onDblClick:function(e,t,i){if(e.properties.disabled)return!1;e.onLabelDblClick&&e.boxing().onLabelDblClick(e,t,i)},onMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t))return!e.properties.disabled&&void(e.onLabelActive&&e.boxing().onLabelActive(e,t,i))}},INPUT:{onChange:function(e,t,i){if(!(e.$_onedit||e.$_inner||e.destroyed)&&e.box){var r=e.properties,o=e.box,n=e._inValid,a=e.boxing(),s=xui.use(i).get(0).value;e.$Mask&&e.$Mask==s&&(s=""),a.setUIValue(s,null,null,"onchange"),r.$UIvalue!==s&&a._setCtrlValue(r.$UIvalue),n!==e._inValid&&e.renderId&&a._setDirtyMark(),o._asyCheck(e)}},onKeydown:function(e,t,i){var r=e.properties,o=e.box,n=r.multiLines,a=xui.Event.getKey(t);if(!r.disabled&&!r.readonly&&(parseInt(r.autoexpand)&&o._checkAutoexpand(e),"enter"!=a.key||n&&!a.altKey||xui.use(i).onChange(),o._asyCheck(e),r.mask))switch(a.key.length>1?e.$ignore=!0:delete e.$ignore,a.key){case"backspace":return o._changeMask(e,xui.use(i).get(0),"",!1),!1;case"delete":return o._changeMask(e,xui.use(i).get(0),""),!1}},onKeypress:function(e,t,i){var r,o=e.properties,n=e.box,a=e.box,s=(a._maskMap,xui.Event.getKey(t)),u=xui.use(i).caret();return(!e.beforeKeypress||!1!==e.boxing().beforeKeypress(e,u,s,t,i))&&(!(r=e.CF.beforeKeypress||e.$beforeKeypress)||!1!==r(e,u,s,t,i))&&(n._asyCheck(e),o.mask?e.$ignore?(delete e.$ignore,!0):!(!s.ctrlKey&&!s.altKey&&(a._changeMask(e,xui.use(i).get(0),s.key,!0),1)):void 0)},onKeyup:function(e,t,i){var r=e.properties,o=e.box;if("esc"==xui.Event.getKey(t).key&&(e.boxing()._setCtrlValue(r.$UIvalue),e.onCancel&&e.boxing().onCancel(e)),r.dynCheck){var n=xui.use(i).get(0).value;e.box._checkValid(e,n),e.boxing()._setDirtyMark()}o._asyCheck(e)},onMousedown:function(e,t,i){e._mousedownmark=1,xui.asyRun((function(){e&&delete e._mousedownmark}))},onMouseup:function(e,t,i){var r;e.properties.selectOnFocus&&e._justFocus&&(!(r=xui.use(i).get(0)).readOnly&&r.select&&(e.$mouseupDelayFun=xui.asyRun((function(){delete e.$mouseupDelayFun,xui.browser.fakeTouch||"touchOnly"==xui.browser.deviceType||"input"!=r.tagName.toLowerCase()&&/[\n\r]/.test(r.value)||r.select()}))),delete e._justFocus),e._activedonmousedown&&(delete e._activedonmousedown,"input"!=(r=xui.use(i).get(0)).tagName.toLowerCase()&&/[\n\r]/.test(r.value)||r.select())},onFocus:function(e,t,i){if(e.$ignoreFocus)return!1;if(e.beforeFocus&&!1===e.boxing().beforeFocus(e))return e.$ignoreBlur=1,xui(i).blur(),delete e.$ignoreBlur,!1;var r=e.properties,o=e.box;if(r.disabled||r.readonly)return!1;e.onFocus&&e.boxing().onFocus(e),e.getSubNode("BOX").tagClass("-focus");var n=xui.use(i).get(0);r.mask&&(n.value||(e.$focusDelayFun=xui.asyRun((function(){e.box&&(delete e.$focusDelayFun,e.$_inner=!0,n.value=e.$Mask,delete e.$_inner,o._setCaret(e,n))})))),r.selectOnFocus&&!n.readOnly&&n.select&&(xui.browser.kde?e.$focusDelayFun2=xui.asyRun((function(){delete e.$focusDelayFun2,xui.browser.fakeTouch||"touchOnly"==xui.browser.deviceType||"input"!=n.tagName.toLowerCase()&&/[\n\r]/.test(n.value)||n.select()})):xui.browser.fakeTouch||"touchOnly"==xui.browser.deviceType||"input"!=n.tagName.toLowerCase()&&/[\n\r]/.test(n.value)||n.select(),e._mousedownmark&&(e._justFocus=1)),e.boxing()._setTB(3),o._asyCheck(e)},onBlur:function(e,t,i){if(e.$ignoreBlur)return!1;xui.resetRun(e.$xid+":asycheck"),e.$focusDelayFun&&xui.clearTimeout(e.$focusDelayFun),e.$focusDelayFun2&&xui.clearTimeout(e.$focusDelayFun2),e.$focusDelayFun2&&xui.clearTimeout(e.$mouseupDelayFun);var r=e.properties,o=e.box;if(r.disabled||r.readonly)return!1;if(e.onBlur&&e.boxing().onBlur(e),e.destroyed)return!1;e.getSubNode("BOX").tagClass("-focus",!1);var n=xui.use(i).get(0).value;e.$Mask&&e.$Mask==n&&(n=""),r.$UIvalue==n&&e.box._checkValid(e,n),e.boxing()._setDirtyMark(),o._asyCheck(e,!1)},onClick:function(e,t,i){e.onInputClick&&e.boxing().onInputClick(e,t,i)}}},DataModel:{selectable:!0,tipsErr:"",tipsOK:"",dynCheck:!1,selectOnFocus:!0,autocomplete:{ini:"off",listbox:["on","off"],action:function(e){this.getSubNode("INPUT").attr("autocomplete",e)}},placeholder:{ini:"",action:function(e){this.getSubNode("INPUT").attr("placeholder",e)}},labelSize:{$spaceunit:2,ini:"0",action:function(e){this.getSubNode("LABEL").css({display:e?"":"none"}),xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelPos:{ini:"left",listbox:["none","left","top","right","bottom"],action:function(e){xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelGap:{$spaceunit:2,ini:"4",action:function(e){xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelCaption:{ini:"",action:function(e){e=(xui.isSet(e)?e:"")+"",this.getSubNode("LABEL").html(xui.adjustRes(e,!0))}},labelHAlign:{ini:"right",listbox:["","left","center","right"],action:function(e){this.getSubNode("LABEL").css({textAlign:e||"",justifyContent:"right"==e?"flex-end":"center"==e?"center":"left"==e?"flex-start":""})}},labelVAlign:{ini:"top",listbox:["","top","middle","bottom"],action:function(e){this.getSubNode("LABEL").css("align-items","bottom"==e?"flex-end":"middle"==e?"center":"top"==e?"flex-start":"")}},valueFormat:{helpinput:[{caption:"required",id:"[^.*]"},{caption:"email",id:"^[\\w\\.=-]+@[\\w\\.-]+\\.[\\w\\.-]{2,4}$"},{caption:"charOnly",id:"^[a-zA-Z]*$"},{caption:"words",id:"^[\\w ]*$"},{captoin:"size",id:"^(([1-9]d*.d+)|([1-9]d*)|(.dd*))s*(px|em)?$"},{caption:"integer",id:"^-?\\d\\d*$"},{caption:"positiveInteger",id:"^\\d\\d*$"},{caption:"number",id:"^-?(\\d\\d*\\.\\d*$)|(^-?\\d\\d*$)|(^-?\\.\\d\\d*$)"},{caption:"filepath",id:"([\\/]?[\\w_]+)+\\.\\w{1,9}$"},{caption:"URL",id:"^(http|https|ftp)\\:\\/\\/[\\w\\-\\_\\.]+[\\w\\-\\_](:[\\w]*)?\\/?([\\w\\-\\._\\?\\,\\'\\/\\\\\\+&amp;%\\$#\\=~])*$"},{caption:"color",id:"^\\#[0-9A-Fa-f]{6}$"},{caption:"HH:MM",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])$"},{caption:"HH:MM:SS",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])\\:([0-5][0-9])$"},{caption:"YYYY-MM-DD",id:"^([0-9]{4})\\-(([0][0-9])|([1][0-2]))\\-([0-3][0-9])$"},{caption:"DD/MM/YYYY",id:"^(([0-2][0-9])|([3][0-1]))/(([0][0-9])|([1][0-2]))/([0-9]{4})$"}]},mask:{action:function(e){var t=this,i=t.box;if(e){t.$MaskFormat=function(e,t){var i=e._maskMap,r=[],o=/[A-Za-z0-9]/;return xui.arr.each(t.split(""),(function(e,t){r.push(i[e]||(o.test(e)?"":"\\")+e)})),"^"+r.join("")+"$"}(i,e),t.$Mask=function(e,t){var i=e._maskMap,r=[],o=e._maskSpace;return xui.arr.each(t.split(""),(function(e,t){r.push(i[e]?o:e)})),r.join("")}(i,e);var r=t.properties.$UIvalue;r=xui.isSet(r)?r+"":"",t.boxing()._setCtrlValue(r+t.$Mask.slice(r.length))}else delete t.$MaskFormat,delete t.$Mask}},value:"",width:{$spaceunit:1,ini:"10em"},height:{$spaceunit:1,ini:"auto"},hAlign:{ini:"",listbox:["","left","center","right"],action:function(e){this.getSubNode("INPUT").css("textAlign",e)}},disabled:{ini:!1,action:function(e){this.box._handleInput(this,"xui-ui-disabled",e)}},readonly:{ini:!1,action:function(e){this.box._handleInput(this,"xui-ui-readonly",e)}},type:{ini:"text",listbox:["text","password"],set:function(e){var t=this;t.properties.type=e,t.renderId&&t.boxing().refresh(!0)}},maxlength:{ini:-1,action:function(e){this.getSubNode("INPUT").attr("maxlength",e)}},multiLines:{ini:!1,action:function(e){this.boxing().refresh()}},autoexpand:{$spaceunit:1,ini:"",action:function(e){this.boxing().refresh()}},tipsBinder:{ini:"",set:function(e){e["xui.UIProfile"]&&(e=e.$xid),e["xui.UI"]&&(e=e.get(0))&&(e=e.$xid),this.properties.tipsBinder=e+""}},excelCellId:{ini:"",action:function(){this.boxing().notifyExcel(!1)}},excelCellFormula:{ini:"",action:function(e){var t,i=this;i.properties,e&&xui.ExcelFormula.validate(e)&&i.host&&(t=i.host["xui.Module"])&&t.applyExcelFormula(i)}}},EventHandlers:{beforeFocus:function(e){},onFocus:function(e){},onBlur:function(e){},onCancel:function(e){},onInputClick:function(e,t,i){},beforeFormatCheck:function(e,t){},beforeFormatMark:function(e,t){},beforeKeypress:function(e,t,i,r,o){},onLabelClick:function(e,t,i){},onLabelDblClick:function(e,t,i){},onLabelActive:function(e,t,i){},onGetExcelCellValue:function(e,t,i){},beforeApplyExcelFormula:function(e,t,i){},afterApplyExcelFormula:function(e,t,i){},onAutoexpand:function(e,t,i){}},_checkAutoexpand:function(e){var t=e.properties,i=e._autoexpand||t.autoexpand;e.renderId&&parseFloat(i)&&xui.resetRun(e.key+":"+e.$xid+":autoexpand",(function(){if(e.renderId&&!e.destroyed){var t,r,o,n,a=e.getRoot(),s=e.$px(i),u=e.getSubNode("INPUT"),l=a.height();if(u.css("overflow","hidden"),o=u.get(0).style.height,t=u.height(),r=u._paddingH(),u.scrollHeight(),s-=l-t,u.height(s+"px"),s=Math.max(s,u.scrollHeight()-r),n=parseInt(s-t,10),u.get(0).style.height=o,n){var d=e.$autoExpandH=l+n;e.$beforeAutoexpand&&!1===e.$beforeAutoexpand(e,d,n)||(e.boxing().setHeight(d),e.$onAutoexpand&&(d=e.$onAutoexpand(e,d,n)),e.onAutoexpand&&e.boxing().onAutoexpand(e,d,n))}u.css("overflow","")}}))},_handleInput:function(e,t,i){var r=e.getSubNode("INPUT");i||!e.properties.disabled&&!e.properties.readonly||(i=!0),e.getRoot()[i?"addClass":"removeClass"](t),"button"!=(""+r.get(0).type).toLowerCase()&&r.attr("readonly",i)},_prepareData:function(e){var t,i={},r=e.properties;"auto"==r.height&&(i.height="1.83em"),i._inputcls=parseFloat(e._autoexpand||r.autoexpand)?"autoexpand":"",i._name=r.name||e.alias;var o=arguments.callee.upper.call(this,e,i);return o._inputtype=o.type||"",o.maxlength<0&&(o.maxlength=""),xui.browser.kde&&(o._css="resize:none;"),o.hAlign=(t=o.hAlign)?"text-align:"+t:"",i._labelHAlign="text-align:"+(t=i.labelHAlign||"")+";justify-content:"+("right"==t?"flex-end":"center"==t?"center":"left"==t?"flex-start":""),i._labelVAlign="align-items:"+("bottom"==(t=i.labelVAlign)?"flex-end":"middle"==t?"center":"top"==t?"flex-start":""),o.labelShow="none"!=o.labelPos&&o.labelSize&&"auto"!=o.labelSize?"":"display:none",o._labelSize=o.labelSize?"":0+e.$picku(),(t=o.labelCaption)&&(o.labelCaption=xui.adjustRes(t,!0)),o},_dynamicTemplate:function(e){var t,i=e.properties,r=e._exhash="$multiLines:"+i.multiLines,o=e.box.getTemplate(r);i.$UIvalue=i.value,o||(o=xui.clone(e.box.getTemplate()),i.multiLines&&((t=o.FRAME.BORDER.BOX.WRAP.INPUT).tagName="textarea",delete t.type),e.box.setTemplate(o,r)),e.template=o},_ensureValue:function(e,t){return""+(xui.isSet(t)?t:"")},RenderTrigger:function(){var e=this,t=e.properties;xui.asyRun((function(){e.box&&e.boxing()._setTB(1)})),e.getSubNode("WRAP").$firfox2(),t.readonly&&e.boxing().setReadonly(!0,!0),t.tipsBinder&&e.boxing().setTipsBinder(t.tipsBinder,!0),t.excelCellId&&e.boxing().notifyExcel();var i=xui.browser.ie,r=e.getSubNode("INPUT").get(0),o=e.box,n=function(t){i&&"propertyName"in t&&"value"!=t.propertyName||o._asyCheck(e,!1)};i&&r.attachEvent?(r.attachEvent("onpropertychange",n),r.attachEvent("ondrop",n),e.$ondestory=function(){var e=this.getSubNode("INPUT").get(0);e&&(e.detachEvent("onpropertychange",n),e.detachEvent("ondrop",n)),e=n=null}):(r.addEventListener("input",n,!1),r.addEventListener("drop",n,!1),xui.browser.gek&&r.addEventListener("dragdrop",n,!1),e.$ondestory=function(){var e=this.getSubNode("INPUT").get(0);e&&(e.removeEventListener("input",n,!1),e.removeEventListener("drop",n,!1),xui.browser.gek&&e.removeEventListener("dragdrop",n,!1)),e=n=null}),r=null},LayoutTrigger:function(){var e=this.properties;e.mask&&this.boxing().setMask(e.mask,!0)},_changeMask:function(e,t,i,r,o){if(!1!==o){var n=this,a=e.properties,s=n._maskMap,u=n._maskSpace,l=a.mask,d=e.$Mask,c=xui(t),p=c.caret();if(!1===r&&p[0]==p[1]&&p[0]>0&&c.caret(p[0]-1,p[0]),r===undefined&&p[0]==p[1]&&c.caret(p[0],p[0]+1),!0===r&&d.charAt(p[0])!=u){var h=p[0]+d.substr(p[0],d.length).indexOf(u);c.caret(h,Math.max(p[1],h))}p=c.caret();var f,x=t.value,g=a.mask.charAt(p[0]),m=n._maskMap[g];if(m&&i&&1==i.length&&("l"==g?i=i.toLowerCase():"u"==g&&(i=i.toUpperCase())),m&&new RegExp("^"+m+"$").test(i)||""==i){v=x,p[0]!=p[1]&&(v=v.substr(0,p[0])+d.substr(p[0],p[1]-p[0])+v.substr(p[1],v.length-p[1])),i&&(v=v.substr(0,p[0])+i+v.substr(p[0]+1,v.length-p[0]-1));var b=[];xui.arr.each(l.split(""),(function(e,t){b.push(s[e]&&new RegExp("^"+s[e]+"$").test(v.charAt(t))?v.charAt(t):d.charAt(t))})),!0===r?(f=(i=d.substr(p[0]+1,x.length-p[0]-1)).indexOf(u),f=p[0]+(-1==f?0:f)+1):f=p[0],xui.browser.opr&&(r===undefined&&xui.arr.insertAny(b,u,f),!1===r&&xui.arr.insertAny(b,u,f++)),x=b.join(""),t.value=x,e.boxing().setUIValue(x==d?"":x,null,null,"mask"),n._setCaret(e,t,f)}}else{n=this,a=e.properties,s=n._maskMap,l=a.mask,d=e.$Mask;var v=t.value;b=[],xui.arr.each(l.split(""),(function(e,t){b.push(new RegExp("^"+(s[e]?s[e]:"\\"+e)+"$").test(v.charAt(t))?v.charAt(t):d.charAt(t))})),x=b.join(""),t.value=x,e.boxing().setUIValue(x==d?"":x,null,null,"mask")}},_setCaret:function(e,t,i){e.properties.mask&&("number"!=typeof i&&(i=t.value.indexOf(this._maskSpace)),xui(t).caret(i,i))},_checkValid2:function(e){return!e.renderId||this._checkValid(e,e.getSubNode("INPUT").get(0).value)},_checkValid:function(e,t){var i=e.properties,r=i.mask&&e.$MaskFormat,o=i.valueFormat||e.$valueFormat;if(e.boxing()._toEditor&&(t=e.boxing()._toEditor(t)),!(e.beforeFormatCheck&&!1===e.boxing().beforeFormatCheck(e,t)||t&&t.length&&e.$Mask!==t&&r&&"string"==typeof r&&!new RegExp(r).test((0===t?"0":t)||"")||o&&"string"==typeof o&&!new RegExp(o).test((0===t?"0":t)||"")))return e._inValid=3,!0;e._inValid=2},_asyCheck:function(e,t){e.destroyed||(e.properties.dynCheck||e.properties.mask)&&xui.resetRun(e.$xid+":asycheck",(function(){if(e.renderId){var i=e.getSubNode("INPUT").get(0);if(i&&(e.properties.mask&&i.value.length!=e.$Mask.length&&e.box._changeMask(e,i,"",!0,t),e.properties.dynCheck)){var r=i.value;e.$Mask&&e.$Mask==r&&(r=""),e.boxing().setUIValue(r,!1,!0,"asycheck")}}}))},_onresize:function(e,t,i){if(!e._$ignoreonsize){var r,o,n,a=e.properties,s=function(t){return t?t=e.getSubNode(t):null},u=s("KEY"),l=s("INPUT"),d=s("BOX"),c=s("LABEL"),p=xui.$us(e),h=function(t,i){return e.$forceu(t,p>0?"em":"px",i)},f=e.getEmSize()/u._getEmSize(),x=l._getEmSize(f),g=c._getEmSize(f),m=xui.browser.contentBox,b=m?2*Math.round(l._paddingH()/2):0,v=m?2*Math.round(l._paddingW()/2):0,y=d._borderW();r=o=m?y/2:0,i&&(i=(n="auto"==i)?e.$em2px(m?1:1.6666667,null,!0)+b+y:e.$isEm(i)?e.$em2px(i,null,!0):i),t&&(t=e.$isEm(t)?e.$em2px(t,null,!0):t),n&&(e._$ignoreonsize=1,u.height(h(i)),delete e._$ignoreonsize);var A=a.labelPos,_="none"!=A&&A&&e.$px(a.labelSize,g)||0,w="none"!=A&&A&&e.$px(a.labelGap)||0,C=t,I=i,E=Math.max(0,(a.$b_lw||0)-r),S=Math.max(0,(a.$b_tw||0)-o);null!==C&&(C-=Math.max(2*r,(a.$b_lw||0)+(a.$b_rw||0)),xui.browser.ie6&&(C=2*Math.round(parseFloat(C/2)))),null!==I&&(I-=Math.max(2*o,(a.$b_lw||0)+(a.$b_rw||0)),xui.browser.ie6&&(I=2*Math.round(parseFloat(I/2))),xui.browser.ie6&&null===t&&d.ieRemedy());var D=E+("left"==A?_:0),k=S+("top"==A?_:0),$=null===C?null:Math.max(0,C-("left"==A||"right"==A?_:0)),N=null===I?null:Math.max(0,I-("top"==A||"bottom"==A?_:0));null===I||Math.max(0,i-("top"==A||"bottom"==A?_:0)),null!==$&&$-v>0&&l.width(h(Math.max(0,$-v),x)),null!==N&&N-b>0&&l.height(h(Math.max(0,N-b),x)),d.cssRegion({left:h(D),top:h(k),width:h($),height:h(N)}),_&&c.cssRegion({left:h(null===C?null:"right"==A?C-_+w+2*r:0,g),top:h(null===i?null:"bottom"==A?i-_+w:0,g),width:h(null===C?null:Math.max(0,"left"==A||"right"==A?_-w:C),g),height:h(null===i?null:Math.max(0,("top"==A||"bottom"==A?_-w:i)-b),g)}),D+=($||0)+2*r,e.$resizer&&xui.browser.ie&&d.ieRemedy()}}}}),xui.Class("xui.UI.CheckBox",["xui.UI","xui.absValue"],{Initialize:function(){xui.UI.SCheckBox=xui.UI.CheckBox;var e="xui.UI.SCheckBox";xui.absBox.$type[e.replace("xui.UI.","")]=xui.absBox.$type[e]=e},Instance:{fireClickEvent:function(){return this.getRoot().onClick(),this},activate:function(){return this.getSubNode("FOCUS").focus(!0),this},_setCtrlValue:function(e){return this.each((function(t){t.getSubNode("MARK").tagClass("-checked",!!e)}))},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["CAPTION"])},notifyExcel:xui.UI.Input.prototype.notifyExcel,getExcelCellValue:xui.UI.Input.prototype.getExcelCellValue},Static:{Templates:{className:"{_className} ",style:"{_style} {_hAlign}",VALIGN:{$order:0,style:"{_vAlign}"},FOCUS:{tabindex:"{tabindex}",MARK:{$order:0,className:"{_iconPosCls} xuifont",$fonticon:"xui-uicmd-check"},ICON:{$order:1,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{$order:2,text:"{caption}"}}},Appearances:{KEY:{overflow:"visible"},MARK:{cursor:"pointer",margin:"0 .334em 0 .1667em","vertical-align":"middle"},VALIGN:{"font-size":0,width:0,display:"inline-block",height:"100%"},FOCUS:{cursor:"default","vertical-align":"middle",padding:".1667em 0"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"}},Behaviors:{HoverEffected:{KEY:"MARK",ICON:"ICON"},ClickEffected:{KEY:"MARK"},NavKeys:{FOCUS:1},onClick:function(e,t,i){var r=e.properties,o=e.boxing();return!r.disabled&&!r.readonly&&(o.setUIValue(!r.$UIvalue,null,null,"click"),e.onChecked&&o.onChecked(e,t,r.$UIvalue),void e.getSubNode("FOCUS").focus(!0))},FOCUS:{onKeydown:function(e,t,i){var r=xui.Event.getKey(t).key;if(" "==r||"enter"==r)return e.getRoot().onClick(!0),!1}}},DataModel:{value:!1,hAlign:{ini:"left",listbox:["left","center","right"],action:function(e){this.getRoot().css("textAlign",e)}},vAlign:{ini:"top",listbox:["top","middle","bottom"],action:function(e){this.getSubNode("VALIGN").css("verticalAlign",e||"")}},iconPos:{ini:"left",listbox:["left","right"],action:function(e){this.getSubNode("MARK").removeClass("xui-float-left xui-float-right").addClass("xui-float-"+e)}},image:{format:"image",action:function(e){xui.UI.$iconAction(this)}},imagePos:{action:function(e){this.getSubNode("ICON").css("backgroundPosition",e||"center")}},imageBgSize:{action:function(e){this.getSubNode("ICON").css("backgroundSize",e||"")}},imageClass:{ini:"",action:function(e,t){xui.UI.$iconAction(this,"ICON",t)}},iconFontCode:{action:function(e){xui.UI.$iconAction(this)}},caption:{ini:undefined,action:function(e){e=(xui.isSet(e)?e:"")+"",this.getSubNode("CAPTION").html(xui.adjustRes(e,!0))}},excelCellId:{ini:"",action:function(){this.boxing().notifyExcel(!1)}}},EventHandlers:{onChecked:function(e,t,i){},onGetExcelCellValue:function(e,t,i){}},RenderTrigger:function(){this.properties.excelCellId&&this.boxing().notifyExcel()},_prepareData:function(e){var t=arguments.callee.upper.call(this,e);return t._hAlign="text-align:"+t.hAlign+";",t._vAlign="vertical-align:"+(t.vAlign||""),t._iconPosCls="xui-float-"+t.iconPos,t},_ensureValue:function(e,t){return"0"!==t&&!!t}}}),xui.Class("xui.UI.HiddenInput",["xui.UI","xui.absValue"],{Instance:{activate:function(){return this},_setCtrlValue:function(e){return!xui.isNull(e)&&xui.isDefined(e)||(e=""),this.each((function(t){t.getSubNode("KEY").attr("value",e+"")}))},_getCtrlValue:function(){var e=this.getSubNode("INPUT"),t=e&&!e.isEmpty()?this.getSubNode("INPUT").attr("value"):"";return-1!=t.indexOf("\r")&&(t=t.replace(/(\r\n|\r)/g,"\n")),t}},Static:{$initRootHidden:!0,Templates:{className:"xui-display-none",style:"display:none",tagName:"input",type:"hidden"},DataModel:{locked:null,required:null,dataBinder:null,dataField:null,display:null,visibility:null,position:null,left:null,top:null,right:null,bottom:null,width:null,height:null,rotate:null,showEffects:null,hideEffects:null,activeAnim:null,tabindex:null,zIndex:null,defaultFocus:null,hoverPop:null,hoverPopType:null,disabled:null,readonly:null,disableClickEffect:null,disableHoverEffect:null,dock:null,dockOrder:null,dockMargin:null,dockMinW:null,dockMinH:null,dockMaxW:null,dockMaxH:null,dockFloat:null,dockIgnore:null,dirtyMark:null,showDirtyMark:null,selectable:null,autoTips:null,tips:null,disableTips:null,renderer:null,className:null},EventHandlers:{beforeDirtyMark:null,onContextmenu:null,onDock:null,onLayout:null,onMove:null,onRender:null,onResize:null,onShowTips:null,beforeAppend:null,afterAppend:null,beforeRender:null,afterRender:null,beforeRemove:null,afterRemove:null,onHotKeydown:null,onHotKeypress:null,onHotKeyup:null},_ensureValue:function(e,t){return""+(xui.isSet(t)?t:"")}}}),xui.Class("xui.UI.RichEditor",["xui.UI","xui.absValue"],{Initialize:function(){this.addTemplateKeys(["TOOLBARBTN"])},Instance:{getEditorWin:function(){return this.get(0).$win},getEditorDoc:function(){return this.get(0).$doc},getEditorBody:function(){var e=this.get(0).$doc;return e&&(e.body||e.documentElement)},_setCtrlValue:function(e){return xui.isSet(e)||(e=""),this.each((function(t){var i=window["/"];i&&-1!=i.indexOf(":/")&&(e=e.replace(/{\/}/g,i));var r=t.$useOriginalText?e:xui.adjustRes(e,0,1);if(!t.$inDesign){var o=t.$doc,n=o&&(o.body||o.documentElement);if(n)return void(n.innerHTML=r)}t.getSubNode("EDITOR").html(r)}))},_getCtrlValue:function(){var e=this.get(0);if(e.$inDesign)return e.getSubNode("EDITOR").html();var t=e.$doc,i=t&&(t.body||t.documentElement);if(i){var r=i.innerHTML,o=window["/"];return o&&-1!=o.indexOf(":/")&&(r=r.replace(new RegExp(o,"g"),"{/}")),r}return""}},Static:{DIRYMARKICON:"DIRTYMARK",Templates:{tagName:"div",style:"{_style}",className:"{_className} xui-ui-selectable",LABEL:{className:"{_required} xui-ui-ellipsis",style:"{labelShow};width:{_labelSize};{_labelHAlign};{_labelVAlign}",text:"{labelCaption}"},BOX:{EDITOR:{tagName:"div",className:"xui-uiborder-flat xui-uiborder-radius xui-uibase"},DIRTYMARK:{},POOL:{}}},DataModel:{selectable:!0,value:{ini:"",html:1},width:{$spaceunit:1,ini:"32em"},height:{$spaceunit:1,ini:"25em"},frameTemplate:{ini:'<html style="-webkit-overflow-scrolling: touch;padding:0;margin:0.25em;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><style type="text/css">body{height: 100%;-webkit-overflow-scrolling: touch;border:0;padding:0;margin:.0;cursor:text;color:#000;font-family:arial,helvetica,clean,sans-serif;font-style:normal;font-weight:normal;font-size:12px;line-height:1.22}div, p{margin:0;padding:0;} body, p, div{word-wrap: break-word;} img, input, textarea{cursor:default;}</style></head><body scroll="auto" spellcheck="false"></body></html>',action:function(){this.boxing().refresh()}},frameStyle:"",cmdList:{ini:"font1;font2;align;list;font4;font3;insert;clear;html",action:function(e){var t=this;t.properties.disabled||t.properties.readonly||t.box._iniToolBar(t)}},cmdFilter:{ini:""},disabled:{ini:!1,action:function(e){e=this.properties.disabled||this.properties.readonly;var t=this.$doc;t&&(t.body.contentEditable!=undefined&&xui.browser.ie?t.body.contentEditable=e?"false":"true":t.designMode=e?"off":"on",this.box._iniToolBar(this,!e))}},readonly:{ini:!1,action:function(e){this.boxing().setDisabled(e)}},labelSize:{$spaceunit:2,ini:0,action:function(e){this.getSubNode("LABEL").css({display:e&&"auto"!=e?"":"none"}),xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelPos:{ini:"left",listbox:["none","left","top","right","bottom"],action:function(e){xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelGap:{$spaceunit:2,ini:4,action:function(e){xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelCaption:{ini:"",action:function(e){e=(xui.isSet(e)?e:"")+"",this.getSubNode("LABEL").html(xui.adjustRes(e,!0))}},labelHAlign:{ini:"right",listbox:["","left","center","right"],action:function(e){this.getSubNode("LABEL").css({textAlign:e||"",justifyContent:"right"==e?"flex-end":"center"==e?"center":"left"==e?"flex-start":""})}},labelVAlign:{ini:"top",listbox:["","top","middle","bottom"],action:function(e){this.getSubNode("LABEL").css("align-items","bottom"==e?"flex-end":"middle"==e?"center":"top"==e?"flex-start":"")}}},Appearances:{KEY:{overflow:"hidden"},BOX:{left:0,top:0,width:"100%",position:"absolute",overflow:"hidden"},POOL:{position:"absolute",display:"none"},DIRTYMARK:{position:"absolute",width:"1em",height:"1em"},TOOLBARBTN:{},LABEL:{"z-index":1,top:0,left:0,display:xui.browser.isWebKit?"-webkit-flex":"flex",position:"absolute","padding-top":".5em"},EDITOR:{position:"absolute",display:"block",left:0,top:0,width:"100%",height:"100%",padding:0,margin:0,"z-index":"10"}},Behaviors:{LABEL:{onClick:function(e,t,i){if(e.properties.disabled)return!1;e.onLabelClick&&e.boxing().onLabelClick(e,t,i)},onDblClick:function(e,t,i){if(e.properties.disabled)return!1;e.onLabelDblClick&&e.boxing().onLabelDblClick(e,t,i)},onMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t))return!e.properties.disabled&&void(e.onLabelActive&&e.boxing().onLabelActive(e,t,i))}}},EventHandlers:{onInnerEvent:function(e,t,i,r){},onUpdateToolbar:function(e,t,i){},onReady:function(e){},onLabelClick:function(e,t,i){},onLabelDblClick:function(e,t,i){},onLabelActive:function(e,t,i){}},$cmds:{font1:[{id:"bold",command:"Bold",statusButton:!0,imageClass:"xuifont xui-icon-bold",_fi_:"xui-icon-bold"},{id:"italic",command:"Italic",statusButton:!0,imageClass:"xuifont xui-icon-italic",_fi_:"xui-icon-italic"},{id:"underline",command:"Underline",statusButton:!0,imageClass:"xuifont xui-icon-underline",_fi_:"xui-icon-underline"},{id:"strikethrough",command:"strikeThrough",statusButton:!0,imageClass:"xuifont xui-icon-strikethrough",_fi_:"xui-icon-strikethrough"}],font2:[{id:"subscript",command:"subscript",statusButton:!0,imageClass:"xuifont xui-icon-sub",_fi_:"xui-icon-sub"},{id:"superscript",command:"superscript",statusButton:!0,imageClass:"xuifont xui-icon-super",_fi_:"xui-icon-super"}],font3:[{id:"forecolor",command:"custom",imageClass:"xuifont xui-icon-forecolor",_fi_:"xui-icon-forecolor"},{id:"bgcolor",command:"custom",imageClass:"xuifont xui-icon-bgcolor",_fi_:"xui-icon-bgcolor"}],font4:[{id:"fontsize",command:"custom",caption:"$editor.fontsize",dropButton:!0},{id:"fontname",command:"custom",caption:"$editor.fontname",dropButton:!0},{id:"formatblock",command:"custom",caption:"$editor.formatblock",dropButton:!0}],align:[{id:"left",command:"justifyleft",imageClass:"xuifont xui-icon-alignleft",_fi_:"xui-icon-alignleft"},{id:"center",command:"justifycenter",imageClass:"xuifont xui-icon-aligncenter",_fi_:"xui-icon-aligncenter"},{id:"right",command:"justifyright",imageClass:"xuifont xui-icon-alignright",_fi_:"xui-icon-alignright"},{id:"justify",command:"justifyfull",imageClass:"xuifont xui-icon-alignjustify",_fi_:"xui-icon-alignjustify"}],list:[{id:"indent",command:"indent",imageClass:"xuifont xui-icon-indent",_fi_:"xui-icon-indent"},{id:"outdent",command:"outdent",imageClass:"xuifont xui-icon-outdent",_fi_:"xui-icon-outdent"},{id:"ol",command:"insertorderedlist",imageClass:"xuifont xui-icon-number",_fi_:"xui-icon-number"},{id:"ul",command:"insertunorderedlist",imageClass:"xuifont xui-icon-bullet",_fi_:"xui-icon-bullet"}],insert:[{id:"hr",command:"insertHorizontalRule",imageClass:"xuifont xui-icon-inserthr",_fi_:"xui-icon-inserthr"},{id:"insertimage",command:"custom",imageClass:"xuifont xui-icon-picture",_fi_:"xui-icon-picture"},{id:"createlink",command:"custom",imageClass:"xuifont xui-icon-link",_fi_:"xui-icon-link"},{id:"unlink",command:"unlink",imageClass:"xuifont xui-icon-breaklink",_fi_:"xui-icon-breaklink"}],clear:[{id:"removeformat",command:"removeformat",imageClass:"xuifont xui-icon-formatclear",_fi_:"xui-icon-formatclear"}],html:[{id:"html",command:"custom",imageClass:"xuifont xui-icon-html",_fi_:"xui-icon-html"}]},_prepareData:function(e){var t,i=arguments.callee.upper.call(this,e);return i._labelHAlign="text-align:"+(t=i.labelHAlign||"")+";justify-content:"+("right"==t?"flex-end":"center"==t?"center":"left"==t?"flex-start":""),i._labelVAlign="align-items:"+("bottom"==(t=i.labelVAlign)?"flex-end":"middle"==t?"center":"top"==t?"flex-start":""),i.labelShow="none"!=i.labelPos&&i.labelSize&&"auto"!=i.labelSize?"":"display:none",i._labelSize=i.labelSize?"":0+e.$picku(),i.labelCaption&&(i.labelCaption=xui.adjustRes(i.labelCaption,!0)),i},_updateToolbar:function(e,t,i){var r,o=xui.$cache.profileMap[e];if(o&&!o.properties.disabled&&!o.properties.readonly&&o&&(r=o.$toolbar)){var n=o.$doc,a=!t&&n.queryCommandState("bold"),s=!t&&n.queryCommandState("italic"),u=!t&&n.queryCommandState("underline"),l=!t&&n.queryCommandState("strikethrough"),d=!t&&n.queryCommandState("subscript"),c=!t&&n.queryCommandState("superscript"),p=r.boxing();p.updateItem("bold",{value:a}),p.updateItem("italic",{value:s}),p.updateItem("underline",{value:u}),p.updateItem("strikethrough",{value:l}),p.updateItem("subscript",{value:d}),p.updateItem("superscript",{value:c}),o.onUpdateToolbar&&o.boxing().onUpdateToolbar(o,i,n),n=null}},RenderTrigger:function(){var e=this;if(e.properties.disabled||e.properties.readonly||e.box._iniToolBar(e),e.$inDesign)e.boxing()._setCtrlValue(e.properties.value||"");else{var t=e.getSubNode("EDITOR").get(0),i=e.$domId,r=e.properties.frameTemplate,o=e.properties.frameStyle,n=t.id;if(o&&(r=r.replace(/<\s*\/\s*head\s*>/,"<style>"+(o||"")+"</style></head>")),!e.$once){e.$once=!0;try{var a=e.$ifr=document.createElement("IFRAME")}catch(t){a=e.$ifr=document.createElement("<iframe name='"+n+"' id='"+n+"'></iframe>")}var s,u,l=this,d=e._eventOutput=function(e){if(!l||!l.properties.disabled&&!l.properties.readonly)return l.onInnerEvent?l.boxing().onInnerEvent(l,e.type,xui.Event.getSrc(e),e):void 0},c=e._event=function(t){if(!l||!l.properties.disabled&&!l.properties.readonly){var r=t.type;if("mouseover"!==r&&"mouseout"!==r&&(xui.resetRun("RichEditor:"+i,(function(){l.box&&xui.UI.RichEditor._updateToolbar(i,!1,r)}),100),"mousedown"==r)){if(xui.browser.applewebkit&&"IMG"==t.target.tagName){var o=e.$win.getSelection(),n=e.$doc.createRange();n.selectNode(t.target),o.removeAllRanges(),o.addRange(n)}xui.doc.onMousedown(!0)}return l.onInnerEvent?l.boxing().onInnerEvent(l,r,xui.Event.getSrc(t),t):void 0}},p=e._event2=function(e){if((!l||!l.properties.disabled&&!l.properties.readonly)&&l.onInnerEvent){var t=e.type;xui.resetRun(l.$xid+":frmInnerAsyEvent",(function(){l&&!l.destroyed&&l.boxing().onInnerEvent(l,t,xui.Event.getSrc(e),e)}))}},h=function(e){l&&(l.properties.disabled||l.properties.readonly||l.box._onchange(l))},f=function(e){if(l&&!l.properties.disabled&&!l.properties.readonly){xui.resetRun("RichEditor:"+i,(function(){l.box&&xui.UI.RichEditor._updateToolbar(i,!0,"blur")}),100),l._onchangethread&&(clearInterval(l._onchangethread),l._onchangethread=null,l&&l.box&&l.box._checkc(l));var t=l.boxing()._getCtrlValue();l.boxing().setUIValue(t,null,!0,"blur")}},x=function(e){if(l){var t=l.boxing();xui.asyRun((function(){l.box&&t.refresh()}))}},g=function(){xui.setTimeout((function(){if(window.frames[n]&&window.frames[n].document&&e.$win!=window.frames[n].window){u=e.$win=window.frames[n].window,(s=e.$doc=u.document).open(),s.write(r),s.close();try{s.execCommand("styleWithCSS",0,!1)}catch(e){try{s.execCommand("useCSS",0,!0)}catch(e){}}var t=e.properties.disabled||e.properties.readonly;if(s.body.contentEditable!=undefined&&xui.browser.ie?s.body.contentEditable=t?"false":"true":s.designMode=t?"off":"on",t&&e.box._iniToolBar(e,!1),u._gekfix=x,xui.browser.ie&&s.attachEvent)s.attachEvent("unload",x),t||(s.attachEvent("onmousedown",c),s.attachEvent("ondblclick",c),s.attachEvent("onclick",c),s.attachEvent("oncontextmenu",d),s.attachEvent("onkeyup",c),s.attachEvent("onkeydown",c),s.attachEvent("onmouseover",c),s.attachEvent("onmouseout",c),s.attachEvent("onmousemove",p),u.attachEvent("onfocus",h),u.attachEvent("onblur",f),(e.$beforeDestroy=e.$beforeDestroy||{}).ifmClearMem=function(){var e=this.$win,t=this.$doc,i=this._event,r=this._event2;this._onchangethread&&(clearInterval(this._onchangethread),this._onchangethread=null);try{var o=t.designMode;t.designMode="off",t.designMode="on",t.designMode=o}catch(e){}e._gekfix=undefined;try{t.detachEvent("unload",e._gekfix)}catch(e){}this.properties.disabled||this.properties.readonly||(t.detachEvent("onmousedown",i),t.detachEvent("ondblclick",i),t.detachEvent("onclick",i),t.detachEvent("oncontextmenu",d),t.detachEvent("onkeyup",i),t.detachEvent("onkeydown",i),t.detachEvent("onmouseover",i),t.detachEvent("onmouseout",i),t.detachEvent("onmousemove",r),e.detachEvent("onfocus",h),e.detachEvent("onblur",f)),e=t=i=r=null});else{var i=e;xui.browser.opr||!u.addEventListener?i.$repeatT=xui.Thread.repeat((function(){if(!window.frames[n])return!1;i.$win.document&&i.$win.document.defaultView||i.boxing().refresh()}),99):u.addEventListener("unload",x,!1),t||(s.addEventListener("mousedown",c,!1),s.addEventListener("dblclick",c,!1),s.addEventListener("click",c,!1),s.addEventListener("contextmenu",d,!1),s.addEventListener("keyup",c,!1),s.addEventListener("mouseover",c,!1),s.addEventListener("mouseout",c,!1),s.addEventListener("mousemove",p,!1),xui.browser.gek||!u.addEventListener?(s.addEventListener("focus",h,!1),s.addEventListener("blur",f,!1),s.addEventListener("keypress",c,!1)):(u.addEventListener("focus",h,!1),u.addEventListener("blur",f,!1),s.addEventListener("keydown",c,!1))),(e.$beforeDestroy=e.$beforeDestroy||{}).ifmClearMem=function(){var e=this.$win,t=this.$doc,r=this.$ifr,o=this._event,n=this._event2;xui.browser.opr&&i.$repeatT&&i.$repeatT.abort(),r.detachEvent?r.detachEvent("onload",g):r.onload=null;try{e.removeEventListener("unload",e._gekfix,!1)}catch(e){}e._gekfix=undefined,delete window.frames[this.$frameId],this.properties.disabled||this.properties.readonly||!t.removeEventListener||(t.removeEventListener("mousedown",o,!1),t.removeEventListener("dblclick",o,!1),t.removeEventListener("click",o,!1),t.removeEventListener("contextmenu",d,!1),t.removeEventListener("keyup",o,!1),t.removeEventListener("mouseover",o,!1),t.removeEventListener("mouseout",o,!1),t.removeEventListener("mousemove",n,!1),xui.browser.gek||!e.removeEventListener?(t.removeEventListener("focus",h,!1),t.removeEventListener("blur",f,!1),t.removeEventListener("keypress",o,!1)):(e.removeEventListener("focus",h,!1),e.removeEventListener("blur",f,!1),t.removeEventListener("keydown",o,!1))),i=x=o=n=e=t=null}}e.boxing()._setCtrlValue(e.properties.$UIvalue||""),a.style.visibility="",a.style.overflow="auto",e.onReady&&e.boxing().onReady(e)}}))};e.$frameId=n,a.id=a.name=n,a.className=t.className,a.src="about:blank",a.frameBorder=0,a.border=0,a.scrolling="yes",a.marginWidth=0,a.marginHeight=0,a.tabIndex=-1,a.allowTransparency="allowtransparency",a.style.visibility="hidden",xui.$cache.domPurgeData[a.$xid=t.$xid].element=a,t.parentNode.replaceChild(a,t),a.attachEvent?a.attachEvent("onload",g):a.onload=g}}},_checkc:function(e){if(e&&e.$doc){var t=e.$doc,i=t&&(t.body||t.documentElement);if(e.__oldv||(e.__oldv=i.innerHTML),i.innerHTML!=e.__oldv){var r=e.__oldv;e.__oldv=i.innerHTML,e.boxing().onChange(e,r,i.innerHTML)}}},_onchange:function(e){e.onChange&&(e._onchangethread&&(clearInterval(e._onchangethread),e._onchangethread=null),e._onchangethread=setInterval((function(){e&&e.box&&e.box._checkc(e)}),500))},_clearPool:function(e){e.getSubNode("POOL").empty(),e.$colorPicker=e.$fontsizeList=e.$fontnameList=e.$formatblockList=e.$htmlEditor=null},_iniToolBar:function(e,t){var i,r=e,o=r.properties,n=(o.cmdFilter||"").split(/[\s,;]+/);if(r.$toolbar&&(r.$toolbar.boxing().destroy(!0),delete r._$tb,delete r.$toolbar),!1!==t){var a,s,u=[],l=r.getClass("TOOLBARBTN"),d=o.cmdList.split(/[\s,;]+/),c={};xui.arr.each(d,(function(e){(s=r.box.$cmds[e])&&!c[e]&&(c[e]=1,xui.filter(s,(function(e){if(-1!==xui.arr.indexOf(n,e.id))return!1;e.imagePos&&(e.imageClass=l),e.tips=xui.wrapRes("editor."+e.id)})),u.push({id:e,sub:s}))})),(a=new xui.UI.ToolBar({selectable:!1,handler:!1,items:u,disabled:o.disabled||o.readonly})).setCustomStyle("ITEMS","border:none"),r.getSubNode("BOX").prepend(a),a.render(!0),e.$_tbH=i=a.getRoot().offsetHeight(),xui.browser.ie&&a.getSubNode("BOX").query("*").attr("unselectable","on"),(a=r._$tb=a.get(0)).onClick=r.box._toolbarclick,(r._$composed={})[a.$xid]=a,r.$toolbar=a,a.$hostage=r}return e.adjustSize(!0),i},_toolbarclick:function(e,t,i,r,o){var n,a=e.$hostage;if(a.$doc)if(a.properties,a.$win.focus(),"custom"==t.command){var s,u,l,d,c,p=t.id;switch(p){case"forecolor":case"bgcolor":a.$colorPicker||(n=!0,a.$colorPicker=new xui.UI.ColorPicker({selectable:!1,barDisplay:!1}).render(!0)),s=a.$colorPicker;break;case"fontsize":case"fontname":case"formatblock":if(a.$lang!=xui.getLang()&&a.box._clearPool(a),a.$lang=xui.getLang(),"fontsize"==p)a.$fontsizeList||(d=(d=xui.getRes("editor.fontsizeList")).split(";"),c=[],xui.arr.each(d,(function(e){e=e.split(","),h="..."==e[0]?"1":e[0],c.push({id:e[0],caption:'<font size="'+e[0]+'" '+xui.$IEUNSELECTABLE()+">"+e[1]+"</font>"})})),n=!0,a.$fontsizeList=new xui.UI.List({selectable:!1,height:"auto",items:c,width:150}).render(!0)),s=a.$fontsizeList;else if("fontname"==p)a.$fontnameList||(d=(d=xui.getRes("editor.fontnameList")).split(";"),c=[],xui.arr.each(d,(function(e){h="..."==e?"":e,c.push({id:e,caption:'<span style="font-family:'+e+'" '+xui.$IEUNSELECTABLE()+">"+e+"</span>"})})),n=!0,a.$fontnameList=new xui.UI.List({selectable:!1,height:"auto",items:c}).render(!0)),s=a.$fontnameList;else if("formatblock"==p){var h;a.$formatblockList||(d=(d=xui.getRes("editor.formatblockList")).split(";"),c=[],xui.arr.each(d,(function(e){e=e.split(","),h="..."==e[0]?"span":e[0],c.push({id:e[0],caption:"<"+h+' style="display:inline;padding:0;margin:0" '+xui.$IEUNSELECTABLE()+">"+e[1]+"</"+h+">"})})),n=!0,a.$formatblockList=new xui.UI.List({selectable:!1,height:"auto",items:c}).render(!0)),s=a.$formatblockList}break;case"html":a.$htmlEditor||(n=!0,a.$htmlEditor=new xui.UI.Input({multiLines:!0,width:400,height:300,resizer:!0})),s=a.$htmlEditor}if(s){var f=e.key+":"+a.$xid;if(u=function(){s.beforeUIValueSet(null),a.getSubNode("POOL").append(s.getRoot()),l.setBlurTrigger(f),xui.Event.keyboardHook("esc",0,0,0,f),xui.asyRun((function(){a&&a.$win&&a.$win.focus()}))},s.setValue("",!0,"clear"),l=s.reBoxing(),a.$htmlEditor==s){a.getRoot();var x=a.getSubNode("EDITOR");s.setLeft(x.left()).setTop(x.top()).setWidth(x.offsetWidth()).setHeight(x.offsetHeight()),s.setZIndex(10),a.getSubNode("BOX").append(l)}else l.popToTop(o);n&&xui.browser.ie&&s.getSubNode("BOX").query("*").attr("unselectable","on"),xui.tryF(s.activate,[],s),l.setBlurTrigger(f,(function(){if(s==a.$htmlEditor)var e=s._getCtrlValue();s.setUIValue(e,null,!0,"blur"),u()})),xui.Event.keyboardHook("esc",0,0,0,(function(){u()}),f,null,null,e.domId)}switch(p){case"forecolor":case"bgcolor":s.beforeUIValueSet((function(e,t,i){u();var r=a.$doc;return"bgcolor"==p&&xui.browser.gek?(r.execCommand("useCSS",0,!1),r.execCommand("hilitecolor",!1,"#"+i),r.execCommand("useCSS",0,!0)):("bgcolor"==p&&(p=xui.browser.opr?"hilitecolor":"backcolor"),r.execCommand(p,!1,xui.browser.kde?"#"+i:i)),r=null,!1}));break;case"fontsize":case"fontname":case"formatblock":s.beforeUIValueSet((function(e,t,i){if(u(),xui.browser.ie&&("..."==i||"formatblock"==p)){var r=a.$doc.selection,o=r?r.createRange():null;o&&o.parentElement().ownerDocument!=a.$doc&&(o=r=null)}var n=function(e,t){var i=a.$doc;if(o){if(a.$win.focus(),"formatblock"==e&&t){var n,s=o.parentElement();s.ownerDocument==i&&(/^\s*</.test(o.htmlText)?(o.collapse(!0),"BODY"==(s=o.parentElement()).tagName?(n=s.innerHTML,s.innerHTML="<"+t+">"+n+"</"+t+">"):(n=(n=s.outerHTML).replace(/\<[\w]+/,"<"+t).replace(/[\w]+\>$/,t+">"),s.outerHTML=n)):o.pasteHTML("<"+t+">"+o.htmlText+"</"+t+">")),s=null}o.select(),r=o=null}i.execCommand(e,!1,t),i=null};if("..."==i){var s=xui.getRes("editor."+p);xui.UI.Dialog.prompt(s,s,"",(function(e){e&&n(p,e)}),(function(){xui.browser.ie&&(o&&(a.$win.focus(),o.select()),r=o=null)}))}else n(p,i)}));break;case"insertimage":case"createlink":var g=xui.getRes("editor."+p),m=xui.getRes("editor."+p+"2");if(xui.browser.ie){var b=a.$doc.selection,v=b?b.createRange():null;v&&v.parentElement().ownerDocument!=a.$doc&&(v=b=null)}xui.UI.Dialog.prompt(g,m,"http://",(function(e){if(xui.browser.ie&&(v&&(a.$win.focus(),v.select()),b=v=null),e){var t=a.$doc;t.execCommand(p,!1,xui.adjustRes(e,0,1)),t=null}}),(function(){xui.browser.ie&&(v&&(a.$win.focus(),v.select()),b=v=null)}));break;case"html":var y=a.boxing().getUIValue();xui.Coder&&(y=xui.Coder.formatText(y,"html")),s.setValue(y,!0,"editor"),s.beforeUIValueSet((function(e,t,i){u(),a.boxing().setUIValue(i,null,null,"html")}))}}else a.$doc.execCommand(t.command,!1,t.commandArgs||null),"removeformat"==t.id&&xui.UI.RichEditor._updateToolbar(a.$domId,!0,"none"),a.$win.focus()},_ensureValue:function(e,t){var i=xui.$getGhostDiv();return i.innerHTML=(xui.isSet(t)?t:"")+"",t=i.innerHTML,i.innerHTML="",t},_onresize:function(e,t,i){if(t||i){i||(i=e.properties.height);var r,o,n=e.properties,a=e.getRoot(),s=e.getSubNode("BOX"),u=e.getSubNode("LABEL"),l=xui.$us(e),d=function(t,i){return e.$forceu(t,l>0?"em":"px",i)},c=e.getEmSize()/a._getEmSize(),p=u._getEmSize(c),h=n.labelPos,f="none"!=h&&h&&e.$px(n.labelSize,p)||0,x="none"!=h&&h&&e.$px(n.labelGap)||0;t&&"auto"!=t&&(t=e.$px(t)),i&&"auto"!=i&&(i=e.$px(i)),s.cssRegion({left:d("left"==h?f:0),top:d("top"==h?f:0),width:d(r=null===t?null:Math.max(0,t-("left"==h||"right"==h?f:0))),height:d(o=null===i?null:Math.max(0,i-("top"==h||"bottom"==h?f:0)))}),f&&u.cssRegion({left:d(null===t?null:Math.max(0,"right"==h?t-f+x:0),p),top:d(null===i?null:Math.max(0,"bottom"==h?i-f+x:0),p),width:d(null===t?null:Math.max(0,"left"==h||"right"==h?f-x:t),p),height:d(null===i?null:Math.max(0,"top"==h||"bottom"==h?f-x:i),p)}),xui.asyRun((function(){if(e.renderId){var t,i,n=e._$tb,a={};n&&(n.getRoot().width(d(r,n.getRoot())),(i=n.getRoot().offsetHeight(!0))?e.$_tbH=i:i=e.$_tbH),t=n?i-1:0,a.height=o-t-2,r&&(a.width=r-2),a.width<0&&(a.width=0),a.height<0&&(a.height=0),(r||o)&&e&&e.renderId&&(a.width=d(a.width),a.height=d(a.height),e.getSubNode("EDITOR").top(d(t)).cssSize(a,!0),e.getSubNode("DIRTYMARK").left(0+e.$picku()).top(d(t+1)))}}),100)}}}}),xui.Class("xui.UI.ComboInput","xui.UI.Input",{Instance:{_adjustV:function(e){var t=this.get(0),i=t.properties;return t.$isNumber?(e=(""+e).replace(/[^\d.-]/g,""),e=xui.isNumb(parseFloat(e))?xui.toFixedNumber(e,i.precision):null):"date"==t.properties.type||"datetime"==t.properties.type?e=xui.isDate(e)?e:xui.isFinite(e)?new Date(parseInt(e,10)):null:"string"==typeof e&&-1!=e.indexOf("\r")&&(e=e.replace(/(\r\n|\r)/g,"\n")),e},getValue:function(){var e=arguments.callee.upper,t=e.apply(this,xui.toArr(arguments));return e=null,this._adjustV(t)},getUIValue:function(){var e=arguments.callee.upper,t=e.apply(this,xui.toArr(arguments));return e=null,this._adjustV(t)},_getCtrlValue:function(){return this.get(0).properties.$UIvalue},_setCtrlValue:function(e){var t=this,i=arguments.callee,r=i._r1||(i._r1=/\</),o=i._r2||(i._r2=/\<\/?[^>]+\>/g);return this.each((function(i){i.$typeOK||i.box._iniType(i);var n=i.getSubNode("INPUT"),a=i.properties.type;if("string"==typeof(e=i.$_onedit?t._toEditor(e):t.getShowValue(e))&&"input"!=n.get(0).tagName.toLowerCase()&&"textarea"!=n.get(0).tagName.toLowerCase()&&r.test(e)&&(e=e.replace(o,"")),i.$Mask&&!e&&(e=i.$Mask),i.$_inner=1,n.attr("value",e||""),delete i.$_inner,"color"==a){var s=xui.UI.ColorPicker.getTextColor(e);n.css({backgroundColor:e,color:s}),"compact"==i.properties.showMode&&i.getRoot().query("button").css("color",s)}i.box._checkAutoexpand(i)}))},_compareValue:function(e,t){var i,r=this.get(0);return(i=r.CF.compareValue||r.$compareValue)?i(r,e,t):e===t},getShowValue:function(e){var t,i,r=this.get(0),o=r.properties;if(xui.isDefined(e)||(e=o.$UIvalue),r.$typeOK||r.box._iniType(r),i=r.CF.getShowValue||r.$getShowValue)t=i(r,e);else if("listbox"==o.type){var n=o.listKey?xui.UI.getCachedData(o.listKey):o.items;n&&-1!=(i=xui.arr.subIndexOf(n,"id",e))?(t=n[i].caption+"")&&t.length>0&&(t=xui.adjustRes(t)):t=null}else t=r.$showValue;return xui.isSet(t)||!r.$inputReadonly&&!o.inputReadonly||(t=xui.isSet(o.caption)?o.caption:null),""+(xui.isSet(t)?t:xui.isSet(e)?e:"")},_toEditor:function(e){var t,i=this.get(0);return i.properties,(t=i.CF.toEditor||i.$toEditor)?t(i,e):e},_fromEditor:function(e){var t,i=this.get(0);return i.properties,(t=i.CF.fromEditor||i.$fromEditor)?t(i,e):e},setPopWnd:function(e){if(!this.isDestroyed()){var t=this.get(0);t.$poplink=e?e["xui.Module"]?e.getRoot(!0):e["xui.UI"]?e.get(0):e:null,(t.$poplink.$beforeDestroy=t.$poplink.$beforeDestroy||{}).$poplink_to=function(){delete t.$poplink},(t.$beforeDestroy=t.$beforeDestroy||{}).$poplink=function(){t.$poplink&&(xui.filter(t.box.$drop,(function(e){return e!==t.$poplink})),t.$poplink.boxing().destroy(),t.$poplink=null)}}},_cache:function(e,t){if(!this.isDestroyed()){var i=this.get(0),r=i.$poplink,o=i.properties.cachePopWnd;return r&&(o?i.__tryToHide||(i.__tryToHide=xui.asyRun((function(){i.box&&(delete i.__tryToHide,r.destroyed||(xui.browser.opr&&r.getRoot().css("display","none"),r.boxing()._clearMouseOver&&r.boxing()._clearMouseOver(),i.getSubNode("POOL").append(r.getRoot())),t&&i.boxing().activate())}))):(r.destroyed||r.boxing().destroy(!0),delete i.$poplink,t&&i.boxing().activate())),delete i.$poplink,i.afterPopHide&&this.afterPopHide(i,r,e),o}},clearPopCache:function(){var e=this.get(0);return e.renderId&&e.getSubNode("POOL").empty(),delete e.$poplink,this},setUploadObj:function(e){var t=this.get(0),i=t.properties,r=xui(e).get(0);if(r.tagName&&"input"==r.tagName.toLowerCase()&&"file"==r.type&&t.renderId&&"file"==i.type){var o=t.getSubNode("FILE").get(0);xui.setNodeData(r.$xid=o.$xid,"element",r),r.id=o.id,r.onclick=o.onclick,r.onchange=o.onchange,o.$xid=null,o.id=o.onclick=o.onchange=null,delete t.$_domid[t.keys.FILE],xui([o]).addPrev(r).remove(!1),this.setUIValue(r.value||"",null,null,"setfile",r)}return this},getUploadObj:function(){var e=this.get(0),t=e.properties;if(e.renderId&&"file"==t.type){var i=e.getSubNode("FILE").get(0);if(!i.value)return null;var r=i.cloneNode(!1);return r.value="",xui.setNodeData(r.$xid=i.$xid,"element",r),r.onclick=i.onclick,r.onchange=i.onchange,i.$xid=null,i.id=i.onclick=i.onchange=null,delete e.$_domid[e.keys.FILE],xui([i]).addPrev(r).remove(!1),r=null,this.setUIValue(this.getValue(),null,null,"getfile",i),i}},popFileSelector:function(e,t){var i=this.get(0),r=i.properties;if(i.renderId&&"file"==r.type){var o=i.getSubNode("FILE"),n=o.get(0);if(o.attr("accept",e||r.fileAccept||null),o.attr("multiple",t||r.fileMultiple?"multiple":null),xui.browser.ie11){var a=document.createElement("div");n.appendChild(a),a.click(),n.removeChild(a)}else n.click()}},resetValue:function(e){this.each((function(e){"file"==e.properties.type&&e.getSubNode("FILE").attr("value","")}));var t=arguments.callee.upper,i=t.apply(this,xui.toArr(arguments));return t=null,i},_drop:function(e,t,i,r){return this.each((function(o){var n=o.properties,a=n.type,s=n.cachePopWnd;if(!n.disabled&&!n.readonly&&!o.$poplink){var u,l,d=o.boxing(),c=o.getSubNode("BOX"),p=o.getSubNode("RBTN"),h=c.offset();if(h.top+=c.offsetHeight(),r||!o.beforeComboPop||!1!==d.beforeComboPop(o,h,e,t)){if("combobox"==a||"listbox"==a||"helpinput"==a||"date"==a||"time"==a||"datetime"==a||"color"==a){var f;if(o.__tryToHide&&(xui.clearTimeout(o.__tryToHide),delete o.__tryToHide),s){switch(a){case"time":case"date":case"datetime":case"color":f=a;break;default:n.listKey?"function"==typeof xui.get(xui.$cache,["UIDATA",n.listKey])?l=f=null:f="!"+n.listKey:f="$"+o.$xid}f&&(xui.filter(o.box.$drop,(function(e){return!!e.renderId})),l=o.box.$drop[f])}if(!l){switch(a){case"combobox":case"listbox":case"helpinput":(u=xui.create("List")).setHost(o).setDirtyMark(!1).setItems(xui.copy(n.items)).setListKey(n.listKey||""),n.dropListWidth?u.setWidth(n.dropListWidth):u.setWidth(o.$forceu(c.offsetWidth()+p.offsetWidth())),u.setHeight(n.dropListHeight||"auto"),u.afterClick((function(){return this.destroyed?u.destroy(!0):this.boxing()._cache("",!0),!1})),u.beforeUIValueSet((function(e,t,i){var r,o=this.boxing();return"combobox"!=a&&"listbox"!=a||(r=e.queryItems(e.properties.items,(function(e){return e.id==i}),!1,!0),"combobox"==a&&r.length&&(i=r[0].caption)),o.setUIValue(i,null,null,"pick",r&&r[0]),o._cache("",!0)}));break;case"time":(u=xui.create("TimePicker")).setHost(o),u.beforeClose((function(){return this.destroyed||this.boxing()._cache("",!0),!1})),u.beforeUIValueSet((function(e,t,i){var r=this.boxing();return r.setUIValue(i,null,null,"pick"),r._cache("",!0)}));break;case"date":case"datetime":u=xui.create("DatePicker"),"datetime"==a&&u.setTimeInput(!0),u.setHost(o),u.beforeClose((function(){return this.destroyed?u.destroy(!0):this.boxing()._cache("",!0),!1})),u.beforeUIValueSet((function(e,t,i){var r=this.boxing();return r.setUIValue(String(i.getTime()),null,null,"pick",i),r._cache("",!0)}));break;case"color":(u=xui.create("ColorPicker")).setHost(o),u.beforeClose((function(){return this.destroyed?u.destroy(!0):this.boxing()._cache("",!0),!1})),u.beforeUIValueSet((function(e,t,i){var r=this.boxing();return r.setUIValue(("transparent"==i?"":"#")+i,null,null,"pick"),r._cache("",!0)}))}xui.isHash(n.popCtrlProp)&&!xui.isEmpty(n.popCtrlProp)&&u.setProperties(n.popCtrlProp),xui.isHash(n.popCtrlEvents)&&!xui.isEmpty(n.popCtrlEvents)&&u.setEvents(n.popCtrlEvents),l=u.get(0),f&&(o.box.$drop[f]=l),u.render()}switch((u=l.boxing()).setHost(o),a){case"combobox":case"listbox":case"helpinput":case"time":u.setValue(o.properties.$UIvalue,!0,"pop");break;case"date":case"datetime":var x=l.properties;(x=o.properties.$UIvalue)&&u.setValue(new Date(parseInt(x,10)),!0,"pop");break;case"color":u.setValue(o.properties.$UIvalue.replace("#",""),!0,"pop")}if(o.boxing().setPopWnd(u),!r&&o.beforePopShow&&!1===d.beforePopShow(o,l,o.properties.items))return;var g=u.reBoxing(),m=n.parentID||xui.ini.$rootContainer;g.popToTop(i||o.getSubNode("BOX"),null,m?xui.get(o,["host",m])?o.host[m].getContainer():xui(m):null),xui.tryF(u.activate,[],u);var b=o.key+":"+o.$xid;g.setBlurTrigger(b,(function(){d._cache("blur"),xui.Event.keyboardHook("esc",0,0,0,b)})),xui.Event.keyboardHook("esc",0,0,0,(function(){return o.$escclosedrop=1,xui.asyRun((function(){delete o.$escclosedrop})),d.activate(),d._cache("esc",!0),xui.Event.keyboardHook("esc",0,0,0,b),!1}),b,null,null,o.domId)}else"file"==a&&o.boxing().popFileSelector();!r&&o.afterPopShow&&d.afterPopShow(o,l)}}}))},expand:function(e,t,i){var r=this.get(0);r.renderId&&r.boxing()._drop(i,e,e,t)},collapse:function(){var e=this.get(0);e.renderId&&e.$poplink&&e.boxing()._cache("call")},getPopWnd:function(){var e=this.get(0);if(e&&e.$poplink)return e.$poplink.boxing()}},Initialize:function(){var e=this;e.addTemplateKeys(["ICONB","ICON","UNIT","FILE","LMID","RMID","LBTN","RBTN","SPINBTN","R1","R1B","R2","R2B"]);var t=e.getTemplate();xui.merge(t.FRAME.BORDER,{LBTN:{},RBTN:{},SPINBTN:{R1:{},R2:{}},CMD:{$order:50,tagName:"button",className:"xui-ui-unselectable xui-uiborder-radius-tr xui-uiborder-radius-br xui-uiborder-noradius-l xui-nofocus xui-ui-btn xui-uibar xui-uigradient",style:"{_cmdDisplay}",SMID:{className:"xuifont",$fonticon:"{_fi_commandCls}"}}},"all");var i=t.FRAME.BORDER.BOX;i.className="xui-ui-input xui-ui-shadow-input xui-uiborder-flat xui-uibase {_radius_input} ",i.ICONB={tagName:"button",className:"xui-ui-unselectable xui-nofocus xui-ui-clear-bg",tabindex:"-1",ICON:{className:"xuifont {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"}},i.UNIT={tagName:"button",tabindex:"-1",className:"xui-ui-unselectable xui-nofocus",text:"{unit}"},t.FRAME.POOL={},t.className+=" {typecls}",e.setTemplate(t),e._adjustItems=xui.absList._adjustItems;var r=e.prototype,o=xui.absList.prototype;r.getItems=o.getItems,r.getItemByItemId=o.getItemByItemId},Static:{_beforeResetValue:function(e){e.properties.caption=undefined},_iniType:function(e){var t=e.properties,i=t.type,r=e.box;if(delete e.$beforeKeypress,delete e.$inputReadonly,delete e.$isNumber,delete e.$compareValue,delete e.$getShowValue,delete e.$toEditor,delete e.$fromEditor,delete e.$typeOK,"listbox"!=i&&"file"!=i&&"cmdbox"!=i&&"button"!=i&&"dropbutton"!=i||(e.$inputReadonly=!0),"file"==i&&(e.$xuiFileCtrl=!0),"listbox"!=i&&"combobox"!=i&&"helpinput"!=i&&(t.items=[]),"time"==i){var o={a:1,c:1,v:1,x:1};xui.merge(e,{$beforeKeypress:function(e,t,i){return 1!=i.key.length||/[-0-9:]/.test(i.key)||i.ctrlKey&&!!o[i.key]},$getShowValue:function(e,t){return t?xui.UI.TimePicker._ensureValue(e,t):""},$fromEditor:function(e,t){return t&&"00:00"==(t=xui.UI.TimePicker._ensureValue(e,t))&&(t=e.properties.$UIvalue),t}},"all")}else if("date"==i||"datetime"==i){var n=xui.Date;o={a:1,c:1,v:1,x:1},xui.merge(e,{$beforeKeypress:function(e,t,i){return 1!=i.key.length||/[0-9:/\-_ ]/.test(i.key)||i.ctrlKey&&!!o[i.key]},$compareValue:function(e,t,i){return!t&&!i||String(t)==String(i)},$getShowValue:function(e,t){return e.properties.dateEditorTpl?t?n.format(t,e.properties.dateEditorTpl):"":t?n.getText(new Date(parseInt(t,10)),"datetime"==e.properties.type?"ymdhn":"ymd").replace(/\<\/?[^>]+\>/g,""):""},$toEditor:function(e,t){if(!t)return"";if(t=new Date(parseInt(t,10)||0),e.properties.dateEditorTpl)return n.format(t,e.properties.dateEditorTpl);var i=n.get(t,"m")+1+"",r=n.get(t,"d")+"",o=n.get(t,"h")+"",a=n.get(t,"n")+"";return n.get(t,"y")+"-"+(1==i.length?"0":"")+i+"-"+(1==r.length?"0":"")+r+("datetime"==e.properties.type?" "+(1==o.length?"0":"")+o+":"+(1==a.length?"0":"")+a:"")},$fromEditor:function(e,t){return t&&((t=e.properties.dateEditorTpl?n.parse(t,e.properties.dateEditorTpl):xui.Date.parse(t))||(t=e.properties.$UIvalue,xui.isFinite(t)&&(t=new Date(parseInt(t,10)))),t&&("datetime"!=e.properties.type&&(t=n.getTimSpanStart(t,"d",1)),t.getFullYear()<e.properties.min&&t.setTime(e.properties.min),t.getFullYear()>e.properties.max&&t.setTime(e.properties.max))),t?String(t.getTime()):""}},"all")}else"currency"==i?(e.$isNumber=1,o={a:1,c:1,v:1,x:1},xui.merge(e,{$beforeKeypress:function(e,t,i){return 1!=i.key.length||/[-0-9,. ]/.test(i.key)||i.ctrlKey&&!!o[i.key]},$compareValue:function(e,t,i){return!(""===t&&""!==i||""===i&&""!==t)&&e.box._number(e,t)==e.box._number(e,i)},$getShowValue:function(e,t){var i=e.properties;return xui.isSet(t)&&""!==t?(t=xui.formatNumeric(e.box._number(e,t),i.precision,i.groupingSeparator,i.decimalSeparator,i.forceFillZero,i.trimTailZero),e.properties.currencyTpl&&(t=e.properties.currencyTpl.replace("*",t))):t="",t},$toEditor:function(e,t){var i=e.properties;return xui.isSet(t)&&""!==t?xui.formatNumeric(e.box._number(e,t),i.precision,i.groupingSeparator,i.decimalSeparator,i.forceFillZero,i.trimTailZero):""},$fromEditor:function(e,t){return xui.isSet(t)&&""!==t?e.box._number(e,t):""}},"all")):"number"!=i&&"spin"!=i&&"counter"!=i||(e.$isNumber=1,o={a:1,c:1,v:1,x:1},xui.merge(e,{$beforeKeypress:function(e,t,i){return 1!=i.key.length||/[-0-9. ]/.test(i.key)||i.ctrlKey&&!!o[i.key]},$compareValue:function(e,t,i){return!(""===t&&""!==i||""===i&&""!==t)&&e.box._number(e,t)==e.box._number(e,i)},$getShowValue:function(e,t){var i=e.properties;return""!=(t=xui.isSet(t)&&""!==t?xui.formatNumeric(e.box._number(e,t),i.precision,i.groupingSeparator,i.decimalSeparator,i.forceFillZero,i.trimTailZero):"")&&e.properties.numberTpl&&(t=e.properties.numberTpl.replace("*",t)),t},$toEditor:function(e,t){var i=e.properties;return xui.isSet(t)&&""!==t?xui.formatNumeric(e.box._number(e,t),i.precision,i.groupingSeparator,i.decimalSeparator,i.forceFillZero,i.trimTailZero):""},$fromEditor:function(e,t){return xui.isSet(t)&&""!==t?e.box._number(e,t):""}},"all"));t.value&&(t.$UIvalue=t.value=r._ensureValue(e,t.value)),e.$typeOK=!0},$drop:{},Appearances:{POOL:{position:"absolute",left:0,top:0,width:0,height:0,display:"none",visibility:"hidden"},FILE:{visibility:"hidden","z-index":30,border:0,width:"100%",height:"100%",position:"absolute",padding:0,top:0,right:0,cursor:"pointer",overflow:"hidden"},"KEY-type-number INPUT, KEY-type-spin INPUT, KEY-type-counter INPUT, KEY-type-currency INPUT":{$order:4,"text-align":"right"},"KEY-type-counter INPUT":{$order:4,"text-align":"center"},"KEY-type-file INPUT, KEY-type-button INPUT, KEY-type-dropbutton INPUT, KEY-type-cmdbox INPUT, KEY-type-listbox INPUT":{$order:4,cursor:"pointer","text-align":"left","white-space":"normal",overflow:"hidden"},"KEY-type-button INPUT, KEY-type-dropbutton INPUT":{$order:5,"text-align":"center"},"LBTN,RBTN,SPINBTN,CMD":{display:"block","z-index":20,cursor:"pointer",padding:0,position:"absolute",width:"1.5em",overflow:"visible"},"ICONB, UNIT":{"z-index":20,cursor:"pointer",position:"absolute",margin:0,border:0,background:"none",height:"100%",padding:"0 2px",display:xui.$inlineBlock,zoom:xui.browser.ie67?1:null,width:xui.browser.ie&&xui.browser.ver<=7?"auto":null,overflow:xui.browser.ie&&xui.browser.ver<=7?"visible":null},ICONB:{left:0,top:0},ICON:{width:"1em"},UNIT:{top:0,right:0},CMD:{$order:2,"z-index":22,padding:0},"R1,R2":{$order:1,display:"block",cursor:"pointer",padding:0,position:"absolute",height:"50%",width:"1.5em",overflow:"visible"},R1:{top:0},R2:{bottom:0},"R1B,R2B":{cursor:"pointer",position:"absolute",left:0,top:"50%",height:"6px","margin-top":"-2px",padding:0,"z-index":2},"SMID,LMID,RMID":{$order:2,cursor:"pointer",padding:0,left:0}},_objectProp:{popCtrlProp:1,popCtrlEvents:1},Behaviors:{HoverEffected:{BOX:"BOX",ICON:"ICON",ICONB:"ICONB"},ClickEffected:{BOX:"BOX"},ICONB:{onClick:function(e,t,i){var r=e.properties;r.disabled||r.readonly||e.onClickIcon&&e.boxing().onClickIcon(e,i)}},UNIT:{onClick:function(e,t,i){var r=e.properties;if(!r.disabled&&!r.readonly&&r.units){var o=xui.create("List",{dirtyMark:!1,items:r.units.split(/[,;\:]/),width:"auto",height:"auto",value:r.unit});o.afterClick((function(){return o.destroy(!0),!1})),o.beforeUIValueSet((function(t,i,r){e.boxing().setUnit(xui.str.trim(r))})),o.render();var n=o.reBoxing(),a=r.parentID||xui.ini.$rootContainer;n.popToTop(i,null,a?xui.get(e,["host",a])?e.host[a].getContainer():xui(a):null),xui.tryF(o.activate,[],o);var s=e.key+":unit:"+e.$xid;n.setBlurTrigger(s,(function(){o.destroy(),xui.Event.keyboardHook("esc",0,0,0,s)})),xui.Event.keyboardHook("esc",0,0,0,(function(){return o.destroy(),xui.Event.keyboardHook("esc",0,0,0,s),!1}),s,null,null,e.domId)}}},FILE:{onClick:function(e,t,i){var r=e.properties;r.disabled||r.readonly||e.onFileDlgOpen&&e.boxing().onFileDlgOpen(e,i)},onChange:function(e,t,i){var r=e.properties,o=xui.use(i).get(0),n=o.value+"";if("file"==r.type){for(var a=[],s=0,u=o.files,l=u.length;s<l;s++)a.push(u[s].name);n=a.length?'"'+a.join('", "')+'"':""}e.boxing().setUIValue(n,null,null,"onchange",o)}},LBTN:{onMousedown:function(e){var t=e.properties;t.disabled||t.readonly||e.box._spin(e,!1)},onMouseout:function(e){xui.Thread.abort(e.$xid+":spin")},onMouseup:function(e){xui.Thread.abort(e.$xid+":spin")}},RBTN:{onMousedown:function(e){var t=e.properties;"counter"==t.type&&(t.disabled||t.readonly||e.box._spin(e,!0))},onMouseout:function(e){"counter"==e.properties.type&&xui.Thread.abort(e.$xid+":spin")},onMouseup:function(e){"counter"==e.properties.type&&xui.Thread.abort(e.$xid+":spin")},onClick:function(e,t,i){var r=e.properties,o=r.type;if("counter"!=o&&("popbox"!=o&&"cmdbox"!=o&&"getter"!=o&&"dropbutton"!=o||!e.onClick||!1!==e.boxing().onClick(e,t,i,"right",r.$UIvalue)))if("file"!=o){if(!r.disabled&&!r.readonly)return e.boxing()._drop(t,i),!1}else e.boxing().popFileSelector()}},CMD:{onClick:function(e,t,i){var r=e.properties;r.disabled||r.readonly||e.onCommand&&!1===e.boxing().onCommand(e,i,r.commandBtn)||"delete"!=r.commandBtn&&"remove"!=r.commandBtn||e.boxing().setUIValue("",!0,null,"cmd")}},BOX:{onClick:function(e,t,i){var r=e.properties;if("cmdbox"==r.type||"button"==r.type||"dropbutton"==r.type){if(e.onClick)return e.boxing().onClick(e,t,i,"left",r.$UIvalue)}else if(r.inputReadonly||e.$inputReadonly){if(r.disabled||r.readonly)return;e.boxing()._drop(t,i)}}},INPUT:{onClick:function(e,t,i){return(!e.$cell||0!==(t=xui.Event.getPos(t)).left||0!==t.top)&&(e.onInputClick?e.boxing().onInputClick(e,t,i):void 0)},onChange:function(e,t,i){if(!(e.$_onedit||e.$_inner||e.destroyed)&&e.box){var r=e._inValid,o=e.properties,n=e.box,a=e.boxing(),s=a._fromEditor(xui.use(i).get(0).value),u=o.$UIvalue;a._compareValue(u,s)||(null===s?a._setCtrlValue(u):(a.setUIValue(s,null,null,"onchange"),o.$UIvalue!==s&&a._setCtrlValue(o.$UIvalue),r!==e._inValid&&e.renderId&&a._setDirtyMark())),n._asyCheck(e)}},onKeyup:function(e,t,i){var r=e.properties,o=e.box,n=xui.Event.getKey(t);if(r.disabled||r.readonly)return!1;if(!e.$inputReadonly&&!r.inputReadonly){if("esc"==n.key){if(e.$escclosedrop)return;e.boxing()._setCtrlValue(r.$UIvalue),e.onCancel&&e.boxing().onCancel(e)}if(r.dynCheck){var a=xui.use(i).get(0).value;e.box._checkValid(e,a),e.boxing()._setDirtyMark()}return o._asyCheck(e),"down"!=n.key&&"up"!=n.key||"spin"!=r.type&&"counter"!=r.type?void 0:(xui.Thread.abort(e.$xid+":spin"),!1)}},onMousedown:function(e,t,i){e._mousedownmark=1,xui.asyRun((function(){e&&delete e._mousedownmark}))},onMouseup:function(e,t,i){if(e.properties.selectOnFocus&&e._stopmouseupcaret){var r=xui.use(i).get(0);!r.readOnly&&r.select&&(e.$mouseupDelayFun=xui.asyRun((function(){delete e.$mouseupDelayFun,"input"!=r.tagName.toLowerCase()&&/[\n\r]/.test(r.value)||r.select()}))),delete e._stopmouseupcaret}},onFocus:function(e,t,i){if(e.$ignoreFocus)return!1;if(e.beforeFocus&&!1===e.boxing().beforeFocus(e))return e.$ignoreBlur=1,xui(i).blur(),delete e.$ignoreBlur,!1;var r=e.properties,o=e.box;if(r.disabled||r.readonly)return!1;if(e.onFocus&&e.boxing().onFocus(e),!e.$inputReadonly&&!r.inputReadonly){e.getSubNode("BORDER").tagClass("-focus");var n=e.boxing(),a=r.$UIvalue,s=n._toEditor(a),u=xui.use(i).get(0),l=u.value;if(a!==s&&l!==s&&(e.$_onedit=!0,u.value=s,delete e.$_onedit),r.mask){var d=u.value;d||(e.$focusDelayFun=xui.asyRun((function(){e.box&&(delete e.$focusDelayFun,e.$_onedit=!0,e.boxing()._setCtrlValue(d=e.$Mask),delete e.$_onedit,o._setCaret(e,u))})))}r.selectOnFocus&&!u.readOnly&&u.select&&(xui.browser.kde?e.$focusDelayFun2=xui.asyRun((function(){delete e.$focusDelayFun2,"input"!=u.tagName.toLowerCase()&&/[\n\r]/.test(u.value)||u.select()})):"input"!=u.tagName.toLowerCase()&&/[\n\r]/.test(u.value)||u.select(),e._mousedownmark&&(e._stopmouseupcaret=1)),e.boxing()._setTB(3),o._asyCheck(e)}},onBlur:function(e,t,i){if(e.$ignoreBlur)return!1;xui.resetRun(e.$xid+":asycheck"),e.$focusDelayFun&&xui.clearTimeout(e.$focusDelayFun),e.$focusDelayFun2&&xui.clearTimeout(e.$focusDelayFun2),e.$focusDelayFun2&&xui.clearTimeout(e.$mouseupDelayFun);var r=e.properties;if(r.disabled||r.readonly)return!1;if(e.onBlur&&e.boxing().onBlur(e),!e.$inputReadonly&&!r.inputReadonly){var o=e.box,n=e.boxing(),a=r.$UIvalue,s=xui.use(i).get(0).value;e.$Mask&&e.$Mask==s&&(s="",a=e.$Mask),s=n._fromEditor(s),e.getSubNode("BORDER").tagClass("-focus",!1),n._compareValue(r.$UIvalue,s)&&(e.box._checkValid(e,s),n._setCtrlValue(a)),n._setDirtyMark(),o._asyCheck(e,!1)}},onKeydown:function(e,t,i){var r=e.properties;if(!r.disabled&&!r.readonly){var o=e.box,n=r.multiLines,a=xui.Event.getKey(t);if(parseInt(r.autoexpand)&&o._checkAutoexpand(e),"enter"!=a.key||n&&!a.altKey||r.inputReadonly||e.$inputReadonly||(e.$_onedit=!0,e.boxing().setUIValue(e.boxing()._fromEditor(xui.use(i).get(0).value),!0,null,"enter"),e.$_onedit=!1),o._asyCheck(e),r.mask)switch(a.key.length>1?e.$ignore=!0:delete e.$ignore,a.key){case"backspace":return o._changeMask(e,xui.use(i).get(0),"",!1),!1;case"delete":return o._changeMask(e,xui.use(i).get(0),""),!1}if("down"==a.key||"up"==a.key)if("spin"==r.type||"counter"==r.type){if(!a.ctrlKey)return e.box._spin(e,"up"==a.key),!1}else if(a.ctrlKey&&"none"!=r.type&&"input"!=r.type&&"password"!=r.type)return e.boxing()._drop(t,i),!1}},onDblclick:function(e,t,i){e.getSubNode("RBTN").onClick(!0)}},R1:{onMousedown:function(e){var t=e.properties;t.disabled||t.readonly||e.box._spin(e,!0)},onMouseout:function(e){xui.Thread.abort(e.$xid+":spin")},onMouseup:function(e){xui.Thread.abort(e.$xid+":spin")}},R2:{onMousedown:function(e){var t=e.properties;t.disabled||t.readonly||e.box._spin(e,!1)},onMouseout:function(e){xui.Thread.abort(e.$xid+":spin")},onMouseup:function(e){xui.Thread.abort(e.$xid+":spin")}}},EventHandlers:{onFileDlgOpen:function(e,t){},onCommand:function(e,t,i){},beforeComboPop:function(e,t,i,r){},beforePopShow:function(e,t,i){},afterPopShow:function(e,t){},afterPopHide:function(e,t,i){},onClick:function(e,t,i,r,o){},onInputClick:function(e,t,i){},onClickIcon:function(e,t){},beforeUnitUpdated:function(e,t){},afterUnitUpdated:function(e,t){}},DataModel:{cachePopWnd:!0,dateEditorTpl:"",groupingSeparator:",",decimalSeparator:".",forceFillZero:!0,trimTailZero:!1,parentID:"",popCtrlProp:{ini:{}},popCtrlEvents:{ini:{}},image:{format:"image",action:function(){xui.UI.$iconAction(this),this.boxing().reLayout(!0)}},imagePos:{action:function(e){this.getSubNode("ICON").css("backgroundPosition",e||"center")}},imageBgSize:{action:function(e){this.getSubNode("ICON").css("backgroundSize",e||"")}},imageClass:{ini:"",action:function(e,t){xui.UI.$iconAction(this,"ICON",t),this.boxing().reLayout(!0)}},iconFontCode:{action:function(e){xui.UI.$iconAction(this),this.boxing().reLayout(!0)}},dropImageClass:{action:function(){this.boxing().refresh()}},unit:{ini:"",set:function(e){var t=this;t.beforeUnitUpdated&&!1===t.boxing().beforeUnitUpdated(t,e)||(t.properties.unit=e,t.renderId&&(t.getSubNode("UNIT").html(e),t.boxing().reLayout(!0)),t.afterUnitUpdated&&t.boxing().afterUnitUpdated(t,e))}},units:"",numberTpl:{ini:"",action:function(){this.boxing().setUIValue(this.properties.$UIvalue,!0,null,"tpl")}},currencyTpl:{ini:"$ *",action:function(){this.boxing().setUIValue(this.properties.$UIvalue,!0,null,"tpl")}},listKey:{set:function(e){var t=xui.UI.getCachedData(e),i=this;i.boxing().setItems(t?xui.clone(t):i.properties.items),i.properties.listKey=e}},dropListWidth:0,dropListHeight:0,items:{ini:[],set:function(e){var t=this;e=t.properties.items=t.box._adjustItems(e),t.renderId&&(t.SubSerialIdMapItem={},t.ItemIdMapSubSerialId={},t.box._prepareItems(t,e),t.$poplink&&t.$poplink.box?t.$poplink.boxing().setItems(e):t.boxing().clearPopCache())}},type:{ini:"combobox",listbox:xui.toArr("none,input,password,combobox,listbox,file,getter,helpinput,button,dropbutton,cmdbox,popbox,date,time,datetime,color,spin,counter,currency,number"),set:function(e){var t=this;t.properties.type=e,t.renderId&&t.boxing().refresh(!0)}},showMode:{ini:"normal",listbox:["","normal","compact","transparent"],action:function(){this.boxing().refresh()}},precision:2,increment:.01,min:-Math.pow(10,15),max:Math.pow(10,15),commandBtn:{ini:"none",combobox:xui.toArr("none,save,delete,add,remove,pop,select,search"),action:function(){this.boxing().refresh()}},disabled:{ini:!1,action:function(e){this.box._handleInput(this,"xui-ui-disabled",e)}},inputReadonly:{ini:!1,action:function(e){this.box._handleInput(this,"xui-ui-inputreadonly",e)}},readonly:{ini:!1,action:function(e){this.box._handleInput(this,"xui-ui-readonly",e)}},caption:{ini:null,set:function(e){var t=this.properties;t.caption=e,xui.isSet(e)&&(e+="",t.caption=xui.adjustRes(e,!1)),this.renderId&&(this.$inputReadonly||t.inputReadonly)&&this.getSubNode("INPUT").attr("value",this.boxing().getShowValue())},get:function(){return this.boxing().getShowValue()}},fileAccept:"",fileMultiple:!1},RenderTrigger:function(){var e=this,t=e.boxing(),i=e.properties;e.box._iniType(e),i.readonly?t.setReadonly(!0,!0):i.inputReadonly&&t.setInputReadonly(!0,!0)},_spin:function(e,t){if(!e.$inDesign){var i=e.$xid+":spin";if(!xui.Thread.isAlive(i)){var r=e.properties,o=Math.max(r.increment,Math.pow(10,-r.precision))*(t?1:-1),n={delay:300},a=function(){if(e.destroyed)return!1;var t=(+r.$UIvalue||0)+o;t=xui.isSet(t)&&""!==t?xui.formatNumeric(e.box._number(e,t),r.precision,r.groupingSeparator,r.decimalSeparator,r.forceFillZero,r.trimTailZero):"",e.boxing().setUIValue(t,null,null,"spin"),n.delay*=.9};n.task=a,xui.Thread(i,[n],500,null,a,null,!0).start()}}},_dynamicTemplate:function(e){var t=e.properties,i=t.type,r=t.multiLines,o=t.fileAccept,n=t.fileMultiple,a=t.showMode,s=e._exhash="$multiLines:"+r+";type:"+i+";mode:"+a+";",u=e.box.getTemplate(s),l=function(e){return a&&"normal"!=a?"xui-ui-clear-bg "+e.replace(/\b(xui-ui-btn|xui-uibar|xui-uigradient|xui-uibase)\b/g,""):e};if(t.$UIvalue=t.value,!u){var d=(u=xui.clone(e.box.getTemplate())).FRAME.BORDER,c=d.BOX.WRAP.INPUT;switch(delete d.LBTN,delete d.RBTN,delete d.SPINBTN,c.tagName="input",c.type="text",i){case"none":case"input":case"number":case"currency":break;case"button":c.type="button";break;case"password":c.type="password";break;case"spin":d.SPINBTN={$order:20,className:"xui-ui-unselectable",style:"{rDisplay}",R1:{tagName:"button",className:l("xui-ui-btn xui-uibar xui-uigradient xui-nofocus {_radius_dropt}"),R1B:{className:"xuifont",$fonticon:"xui-icon-smallup"}},R2:{tagName:"button",className:l("xui-ui-btn xui-uibar xui-uigradient xui-nofocus {_radius_dropb}"),R2B:{className:"xuifont",$fonticon:"xui-icon-smalldown"}}};break;case"counter":d.LBTN={$order:1,tagName:"button",className:l("xui-ui-unselectable xui-ui-btn xui-uibar xui-uigradient xui-nofocus {_radius_dropl}"),style:"{_btnlDisplay}",LMID:{className:"xuifont",$fonticon:"{_fi_btnlClass}",style:"{_btnlStyle}"}};break;case"file":d.FILE={$order:20,className:"xui-ui-unselectable  {_radius_dropr}",tagName:"input",autocorrect:"off",autocomplete:"off",type:"file",accept:o||null,multiple:n?"multiple":null,hidefocus:xui.browser.ie?"hidefocus":null,size:"1"};case"listbox":case"cmdbox":case"dropbutton":d.className+=" xui-ui-noshadow",c.type="button"}if("none"!=i&&"input"!=i&&"password"!=i&&"button"!=i&&"spin"!=i&&"currency"!=i&&"number"!=i&&(d.RBTN={$order:20,tagName:"button",className:l("xui-ui-unselectable xui-ui-btn xui-uibar xui-uigradient xui-nofocus {_radius_dropr}"),style:"{_btnrDisplay}",RMID:{className:"xuifont",$fonticon:"{_fi_btnrClass}"}}),"button"!=i&&"dropbutton"!=i||(d.BOX.className+=" xui-uigradient"),r)switch(i){case"none":case"input":case"getter":case"helpinput":case"popbox":case"number":case"combobox":c.tagName="textarea",c.className="",delete c.type}a&&"normal"!=a&&("transparent"==a&&(d.BOX.className="{_radius_input} "),d.CMD.className=l(d.CMD.className)),e.box.setTemplate(u,s)}e.template=u},_handleInput:function(e,t,i){var r=e.getSubNode("INPUT"),o="button"==(""+r.get(0).type).toLowerCase();!i&&(e.properties.disabled||e.properties.readonly||!o&&e.$inputReadonly)&&(i=!0),e.getRoot()[i?"addClass":"removeClass"](t),o||r.attr("readonly",i)},_prepareData:function(e){var t,i,r={},o="display:none",n=e.properties,a=n.type,s=n.showMode,u=e.box.$DataModel.commandBtn.combobox,l=a,d="counter"==l;return l="combobox"==l||"listbox"==l||"dropbutton"==l?"arrowdrop":l,(r=arguments.callee.upper.call(this,e,r))._fi_btnlClass="xui-icon-singleleft",r._fi_btnrClass="counter"==l?"xui-icon-singleright":r.dropImageClass||"xui-uicmd-"+l,r._type="text",r._cmdDisplay=(t=!r.commandBtn||"none"==r.commandBtn)?o:"",r._fi_commandCls=(-1!=xui.arr.indexOf(u,r.commandBtn)?"xui-uicmd-":"")+r.commandBtn,r._btnrDisplay=(i="none"==a||"input"==a||"password"==a||"currency"==a||"number"==a||"button"==a)?o:"",r.typecls=e.getClass("KEY","-type-"+r.type),s&&"normal"!=s?"compact"==s&&(r._radius_input="xui-uiborder-radius"):(r._radius_dropl="xui-uiborder-radius-tl xui-uiborder-radius-bl xui-uiborder-noradius-r",r._radius_input=t&&i?"xui-uiborder-radius":d?"xui-uiborder-noradius":"xui-uiborder-radius-tl xui-uiborder-radius-bl xui-uiborder-noradius-r",r._radius_dropr=t?"xui-uiborder-radius-tr xui-uiborder-radius-br xui-uiborder-noradius-l":"xui-uiborder-noradius",r._radius_dropt=t?"xui-uiborder-radius-tr xui-uiborder-noradius-l xui-uiborder-noradius-b":"xui-uiborder-noradius",r._radius_dropb=t?"xui-uiborder-radius-br xui-uiborder-noradius-l xui-uiborder-noradius-t":"xui-uiborder-noradius"),r},_ensureValue:function(e,t){if(e.properties,!xui.isSet(t)||""===t)return"";switch(e.$Mask&&e.$Mask==t&&(t=""),e.properties.type){case"date":case"datetime":var i;return t&&(i=xui.isDate(t)?t:xui.isFinite(t)?new Date(parseInt(t,10)):xui.Date.parse(t+"")),i?String("datetime"==e.properties.type?i.getTime():xui.Date.getTimSpanStart(i,"d",1).getTime()):"";case"color":var r=xui.UI.ColorPicker._ensureValue(null,t);return("transparent"==r?"":"#")+r;case"time":return xui.UI.TimePicker._ensureValue(null,t);case"currency":case"number":case"spin":case"counter":return this._number(e,t);default:return"string"==typeof t?t:t||0===t?String(t):""}},_number:function(e,t){var i=e.properties;return/^\s*\=/.test(t||"")&&(t=xui.ExcelFormula.calculate(t||"")||""),t=xui.toNumeric(t,i.precision,i.groupingSeparator,i.decimalSeparator,i.forceFillZero,i.trimTailZero),xui.isSet(i.max)&&(t=t>i.max?i.max:t),xui.isSet(i.min)&&(t=t<i.min?i.min:t),t},_onresize:function(e,t,i){if(!e._$ignoreonsize){var r,o,n,a,s,u,l,d=e.properties,c=d.type,p="compact"==d.showMode,h=function(t){return t?t=e.getSubNode(t):null},f=h("KEY"),x=h("INPUT"),g=h("ICONB"),m=h("UNIT"),b=h("BOX"),v=h("LABEL"),y=h("none"!=d.commandBtn?"CMD":null),A=h("counter"==c?"LBTN":null),_=h("spin"==c?"SPINBTN":"none"==c||"input"==c||"password"==c||"currency"==c||"number"==c||"button"==c?null:"RBTN"),w=xui.$us(e),C=function(t,i){return e.$forceu(t,w>0?"em":"px",i)},I=e.getEmSize()/f._getEmSize(),E=x._getEmSize(I),S=v._getEmSize(I),D="button"==x.get(0).type.toLowerCase(),k=xui.browser.contentBox,$=k?D?0:2*Math.round(x._paddingH()/2):0,N=k?2*Math.round(x._paddingH()/2):0,M=0,T=0,R=b._borderW(),B=R/2;r=o=k?B:0,l=parseInt(1.5*e.getEmSize(),10),i&&(i=(a="auto"==i)?e.$em2px(k?1:1.6666667,null,!0)+N+R:e.$isEm(i)?e.$em2px(i,null,!0):i),t&&(t=e.$isEm(t)?e.$em2px(t,null,!0):t),a&&(e._$ignoreonsize=1,f.height(C(i)),delete e._$ignoreonsize);var L=d.labelPos||"left",F="none"!=L&&L&&e.$px(d.labelSize,S,!0)||0,O="none"!=L&&L&&e.$px(d.labelGap,null,!0)||0,P=t,H=i,U=0,z=0,K=0,V=Math.max(0,(d.$b_lw||0)-r),j=Math.max(0,(d.$b_tw||0)-o);null!==P&&(P-=Math.max(2*r,(d.$b_lw||0)+(d.$b_rw||0)),z=A?l:0,K=_?l:0,U=y?l:0,xui.browser.ie6&&(P=2*Math.round(P/2))),null!==H&&(H-=Math.max(2*o,(d.$b_lw||0)+(d.$b_rw||0)),xui.browser.ie6&&(H=2*Math.round(H/2)),xui.browser.ie6&&null===t&&b.ieRemedy());var Y=null===P?null:V+("left"==L?F:0),G=null===H?null:j+("top"==L?F:0),W=null===P?null:Math.max(0,P-("left"==L||"right"==L?F:0)),X=null===H?null:Math.max(0,H-("top"==L||"bottom"==L?F:0)),Q=null===H?null:Math.max(0,i-("top"==L||"bottom"==L?F:0)),q="right"==L?F:0;F?(v.css("display",""),v.cssRegion({left:C(null===P?null:"right"==L?P-F+O+2*r:0,S),top:C(null===i?null:"bottom"==L?i-F+O:0,S),width:C(null===P?null:Math.max(0,"left"==L||"right"==L?F-O:P),S),height:C(null===i?null:Math.max(0,("top"==L||"bottom"==L?F-O:i)-$),S)})):v.css("display","none"),null!==W&&(p?(M+=z,T+=U+K):W-=U+K+z),A&&(null!==Q&&A.height(C(Math.max(0,Q))),null!==W&&A.left(C(Y)),A.top(C(G)),p||(Y+=z),null!==W&&(Y-=B,W+=B)),(d.image||d.imageClass)&&(g.setInlineBlock(),(s=g.offsetWidth(!0))&&(M+=s)),s?p&&z&&g.left(C(z,g)):g.css("display","none"),U&&(y.top(C(G)),null!==Q&&y.height(C(Math.max(0,Q))),null!==W&&(y.css("right",C(q)),q+=U-r,W+=B)),K&&(_.top(C(G)),null!==Q&&_.height(C(Math.max(0,Q))),null!==W&&(_.css("right",C(q)),W+=B),null!==Q&&"spin"==d.type&&Q/2-2*o>0&&(h("R1").height(C(Q/2)),h("R2").height(C(Q/2+(Math.round(Q)-2*Math.round(Q/2)))))),d.unit&&(m.setInlineBlock(),(u=m.offsetWidth(!0))&&(T+=u)),u?p&&(K||U)&&m.css("right",C(K+U,m)):m.css("display","none"),b.cssRegion({left:W?C(Y):null,top:X?C(G):null,width:W?C(W):null,height:X?C(X):null}),M&&x.css("paddingLeft",C(M,g)),T&&x.css("paddingRight",C(T,m)),n=k?D?0:x._paddingW():0,null!==W&&W-n>0&&x.width(C(Math.max(0,W-n),E)),null!==X&&X-$>0&&x.height(C(Math.max(0,X-$),E)),e.$resizer&&xui.browser.ie&&b.ieRemedy()}}}}),xui.Class("xui.UI.ColorPicker",["xui.UI","xui.absValue"],{Instance:{activate:function(){return this.getSubNode("TOGGLE").focus(!0),this},_setCtrlValue:function(e,t){return this.each((function(i){if(i.renderId){var r=i.box,o=i.properties;e&&"transparent"==e.toLowerCase()&&(e="transparent");var n=i.$hex=r._to3(e),a=i.$hex.join(""),s=i.$rgb=r.hex2rgb(e),u=i.$hsv=r.rgb2hsv(s),l=function(e,t){i.getSubNode(e).get(0).firstChild.nodeValue=String(t)},d=function(e){return parseInt(100*e,10)};"transparent"==e&&(n=i.$hex=["00","00","00"],s=i.$rgb=[0,0,0],u=i.$hsv=[0,0,0]),l("R",s[0]),l("G",s[1]),l("B",s[2]),l("H",n[0]),l("E",n[1]),l("X",n[2]),i.$hexinhsv!=a&&(l("HH",u[0]),l("S",d(u[1])),l("V",d(u[2])),delete i.$hexinhsv),r._setClrName(i,"transparent"==e?e:a),r._updateDftTip(i),o.advance&&i.$hexinadv!=a&&(r._updateMarks(i,e,!0,u[0]),delete i.$hexinadv),0!=t&&i.getSubNode("CAPTION").html(("transparent"==e?"":"#")+e,!1)}}))},getColorName:function(){return this.get(0).$clrN||""}},Initialize:function(){var e,t,i=this,r=xui.UI.$ID,o=xui.UI.$CLS,n=xui.UI.$tag_special,a=i.KEY,s=i._slist,u=s.length,l=[],d=xui.$IEUNSELECTABLE(),c='style="visibility:hidden;"',p="xui-node xui-node-span xui-ui-draggable xui-uibase xui-uiborder-flat";for(i.addTemplateKeys(["DD1","DD2","DD3","R","G","B","TXT","HH","S","V","H","E","X"]),e=0;e<u;e++)l.push('<span  id="'+a+"-SC:"+r+":"+s[e]+'" style="background-color:#'+s[e]+'" '+d+' class="xui-node xui-span xuicon xui-uiborder-flat xui-icon-placeholder">'+(xui.__iefix2&&xui.__iefix2["xui-icon-placeholder"]||"")+"</span>"),(e+1)%17==0&&l.push("<br />");t="<div "+d+'><span class="'+o+'-txt"'+d+'>R: </span><span id="'+a+"-R:"+r+':" class="'+o+"-dd2 "+p+" "+n+"DD2_CC"+n+'" '+d+">R</span><span "+c+'>%</span><span class="'+o+'-txt"'+d+'>G: </span><span id="'+a+"-G:"+r+':" class="'+o+"-dd2 "+p+"  "+n+"DD2_CC"+n+'" '+d+">G</span><span "+c+'>°</span><span class="'+o+'-txt"'+d+'>B: </span><span id="'+a+"-B:"+r+':" class="'+o+"-dd2 "+p+"  "+n+"DD2_CC"+n+'" '+d+">B</span></div><div "+d+'><span class="'+o+'-txt"'+d+'>S: </span><span id="'+a+"-S:"+r+':" class="'+o+"-dd2 "+p+"  "+n+"DD2_CC"+n+'"  '+d+">S</span><span "+d+'>%</span><span class="'+o+'-txt"'+d+'>H: </span><span id="'+a+"-HH:"+r+':" class="'+o+"-dd2 "+p+"  "+n+"DD2_CC"+n+'" '+d+">H</span><span "+d+'>°</span><span class="'+o+'-txt"'+d+'>V: </span><span id="'+a+"-V:"+r+':" class="'+o+"-dd2 "+p+"  "+n+"DD2_CC"+n+'" '+d+">V</span><span "+d+">%</span></div><div "+d+'><span class="'+o+'-txt"'+d+'>HEX: </span><span id="'+a+"-H:"+r+':" class="'+o+"-dd3 "+p+"  "+n+"DD3_CC"+n+'" '+d+'>H</span><span id="'+a+"-E:"+r+':" class="'+o+"-dd3 "+p+"  "+n+"DD3_CC"+n+'" '+d+d+'>E</span><span id="'+a+"-X:"+r+':" class="'+o+"-dd3 "+p+"  "+n+"DD1_CC"+n+'" '+d+">X</span></div>",i.setTemplate({style:"{_style};height:auto;width:auto",tagName:"div",BORDER:{tagName:"div",className:"xui-uiborder-outset xui-uiborder-box xui-uiborder-radius-big",BAR:{tagName:"div",className:"{classBar}",BARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-tl",BARTDLT:{className:"xui-uibar-tdlt"}},BARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar",BARTDMT:{className:"xui-uibar-tdmt"}},BARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-tr",BARTDRT:{className:"xui-uibar-tdrt"}},BARCMDL:{$order:3,tagName:"div",className:"xui-uibar-cmdl",SPACE:{className:"xuifont",$fonticon:"xui-icon-placeholder"}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr",CLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",style:"{closeDisplay}"}},TBARTDB:{$order:5,tagName:"div",className:"xui-uibar-tdb xui-uiborder-inset xui-uiborder-radius"}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main xui-uibar",MAINI:{tagName:"div",className:"xui-uicon-maini xui-uibar",CON:{$order:1,tagName:"div",className:"xui-uiborder-inset xui-uiborder-radius",SIMPLE:{tagName:"div",TOP:{$order:1,tagName:"div",DATA:{$order:0,tagName:"div",text:t},EXAM:{$order:3,tagName:"div",className:"xui-uiborder-inset xui-uiborder-radius"}},LIST:{$order:2,tagName:"div",text:l.join("")}},ADV:{$order:2,style:"{advDispay}",tagName:"div",ADVWHEEL:{$order:0,tagName:"div"},ADVCLR:{$order:1,tagName:"div"},ADVMARK1:{$order:3,tagName:"div"},ADVMARK2:{$order:4,tagName:"div"}}}}},TAIL:{$order:3,tagName:"div",className:"xui-uicon-main xui-uibar",TAILI:{tagName:"div",className:"xui-uibar xui-uicon-maini",TRANS:{className:"xuicon",$fonticon:"xui-icon-transparent",tabindex:"{tabindex}",title:"{_transparent}"},CAPTION:{text:"{caption}"},SET:{tagName:"button",className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tabindex:"{tabindex}",text:"{_set}"},TOGGLE:{$order:2,className:"xuifont",$fonticon:"xui-icon-doubleright",tabindex:"{tabindex}"}}},BBAR:{$order:4,tagName:"div",className:"xui-uibar-bottom-s",BBARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-bl"},BBARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar"},BBARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-br"}}}})},Static:{_radius:84,_square:100,_bigRadius:97,DataModel:{height:{ini:"auto",readonly:!0},width:{ini:"auto",readonly:!0},value:{ini:"FFFFFF",format:"color"},barDisplay:{ini:!0,action:function(e){e?this.getSubNode("BAR").replaceClass("xui-uibar-top-s","xui-uibar-top"):this.getSubNode("BAR").replaceClass("xui-uibar-top","xui-uibar-top-s")}},closeBtn:{ini:!0,action:function(e){this.getSubNode("CLOSE").css("display",e?"":"none")}},advance:{ini:!1,action:function(e){var t=this,i=t.getSubNode("TOGGLE");t.getSubNode("ADV").css("display",e?"":"none"),t.getSubNode("CON").css("padding-right",e?"205px":"0px"),xui.__iefix2?i.html(xui.__iefix2[e?"xui-icon-doubleleft":"xui-icon-doubleright"]):e?i.removeClass("xui-icon-doubleright").addClass("xui-icon-doubleleft"):i.removeClass("xui-icon-doubleleft").addClass("xui-icon-doubleright"),e&&t.box._updateMarks(t,t.properties.$UIvalue,!0,t.$hsv[0])}}},Appearances:{KEY:{},"TBART, BBART":{"border-spacing":0,"border-collapse":"separate"},MAINI:{padding:".5em .3333em .3333em 0"},CON:{padding:".25em",position:"relative"},".xui-uibar-top BARCMDL":{padding:".25em 0 0 0"},".xui-uibar-top BARCMDR":{top:".3334em",right:".5em"},CMDL:{padding:".25em 0 .25em 0"},DATA:{},"DATA span":{padding:"0 1px","margin-left":"-1px","margin-right":"1px",width:"2em"},"DATA div":{padding:".5em 0"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"},EXAM:{padding:".125em",position:"absolute",width:"5.5em",height:"5.5em",top:".25em",right:".25em","white-space":"normal","text-align":"center"},"DD1, DD2, DD3":{"padding-right":"2px",cursor:"e-resize","text-align":"center"},TOP:{position:"relative"},LIST:{position:"relative",overflow:"hidden",padding:".25em","white-space":"nowrap","line-height":"1em"},TAILI:{position:"relative",padding:".5em 0 0 0","text-align":"center"},SIMPLE:{position:"relative"},ADV:{position:"absolute",right:"4px",bottom:"4px",width:"195px",height:"195px"},"ADV div":{cursor:"crosshair",position:"absolute"},ADVCLR:{background:xui.browser.ie6?null:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAYAAABUfC3PAAAABGdBTUEAANbY1E9YMgAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjIyt5EXfQAATvhJREFUeF7t3AeUl+Wd8P3ZfXaTbHo1xsQSY2JMjLFHjS32rih2EVEUFEQFkSoCAgKiSG/Se++9997bAMPMML333v7v55qd8UyIKVvenOe85zXnuwzGxPX34Xdd9/0H8i8TJkyInH/++VH+iIT88cXX4Yu6P1f77zX4a77064Z/rf+emi/562vq/gbhm9p/v+77f/b1l/w19f+5L/vP/9mfa/jf2+Drs/+a8P9/7Z+r++OLv//Z//n6v+Csv75+Vl/2nz/736ufYfj7NZznf/7D/+efrJ97+PdvjVq7dm3tgFStSpWrTKUqVqHylatsZSpdKUpWguJ1WqcUrWM6rAPap93aoa3apA0Kf+OVWq7FWqh5mqUZmqKJGqcxGqmhGqRP1V991Us91E2d1UHv6h29qTfUQs3VTE30nJ5WYzXSI3pQ9+lu3aHbdLNu0vW6VlfpCl2uy3SpLtHFulDn6zydq3P0Q31f39W39E19XV/TV/Xv+jf9q/4liPTt2/fT/6+hdPEP1xClje+3qqmpaaHmaqYX9byeVmM10iN6UPfpbt2h23SzbtIfdK2u0hW6XJdVV1dfqkt0sS7U+TpPP6mqqjpHP9T39d3KyspvV1RUfLO8vPzrZWVlXystLf1qcXHxV/Ly8v4tMSHxX7dv2/4v/x717/+JsmbNmoj/khqFPypVrjKVqliFyleuspWpdKUoWQmK12mdUrSO6bAOaJ92a4e2apM2aK1WabmWaKHmabZ/iBmaqkkarzEaqWEarIH6WH3VWz30gbqoo9obQlu1USu11Kt6WS8azvN6Rk/qcT1qWA/pft1jaHfqdt2qPxrgDbpO15SUlFxpmL/Tb4uKin6tXxUWFv6ioKDg5/n5+Rca8s9yc3PPy87O/nFmZuaPMtIzfpiWmvb9pMSk78THxX/r1MlT3zhy+MjX9+3d9x9bNm/56vx58/+9z4d9/k/jRo3/Fcq/fvTRR/+J4h+iRtWqVLnKVKpiFSpfucpWptKVomQlKF6ndUrROqYjOqh9BrFHO7VNm7VR67RKK7REizRfszVTUzVJ4/W5RmmYBhviQH2sfuqtnuquruqk9wy3rd5Sa7U03Ff1sprqBQN+Vk/pCT1m2A/rAd1r4HfpT7rV0G829Bt0vcFfY/BX6grDv9zwL8vJyfkVgEsAXJyRkXFhelr6+ampqT9NSko6NyEh4RwQPzodc/oHx48d/+6hg4e+vXvX7m9u2rjpG6tXrv6P+XPnf23E0BFfaf1663+77ebb/g+U/wNlYNTq1asj/kFrVK3wR7nKVKpiFSpfucpWpn/odKUoWQmKV6xidELHdUQHtV97tFPbDGizNmqdVmmFlmqR5muOoc3UNE3WBI3VaMMbriH6TAPU3xD76EN11/vqZJgd1E5vG+qbel2v6RXDfUlN9JwhP63GhtxIjxr0gwZ9v+4x7DsM+/asrKxbsjIzbzL0P6Snp19r6Fcb+u9TUlIuT05K/o2j59Iz8Wd+afi/MPyfnzxx8oIT0SfOP3rk6HkHDxw810acs3PHzh9t3LDx+ytXrPzuwvkLvz1tyrRvjh0z9hsDBwz8+rvvvPu1h+9/+Cu/+dVv/h3Kv/Xp02dg1KpVqyIGUaNqVSr8UaZSFatQ+co1mGxlKkOpSlGizihWMTqh4zqigwa3X3u0U9u0RRu1TqsNcaWWarEWaI5mGeg0TdEEjdVoQx2hoRqkT/Sx4X6kXuqhbobcWR0N+V29ozaG3UotDftVNTPwpnre0J8x9Cf1uKE/5kf6Q+npGfenpaXd68i5y/D/ZPi3Gv4fHT83+pF/PYBr4mLjroo9HXtFzKmYywFcZgsudSRdAuFiCBft2rnrgq1btv7URpy3bu26c2Gcs2Degh/OmDbj++M+H/fdQQMHfbtvn77f6tyh8zdfavLS12+58ZavXfSzi74K5Su9e/f+LGrlypURw6lRtSpVrjKFP4pVqHyDylWOspShVKUoUWcUqxid0HFDPKJDOqC92qXt2qJNBrpeq7VSS7XYUBdormZpuqYY8ESN0xiNMOShGqxP9bFh91Vvw+6pbupi4B3V3tDb6i1Db63XDf5VvWz4TfWCH/nPAnjK8BunpqQ2AvBISnLKg46e+2zA3QlnEu6AcBuEm23BTRD+YBOuiz4effWxo8euBPE7EL/dv2//rx1Lv9qxfccl7omfb1i/4cJVK1f9bOmSpT9duGDhT2bPnP3jKZOm/GjMqDE/+OzTz77fq0ev73bp2OU7jq1vNX6s8TeuvfLar//0xz/9DyhfgzKoFsUQa1StSpWrTKUqVqEKDDJPOcpShlKVokSdUaxidMKAj+uoDumA9mqXtmuLYW/Seq3RSi3TYkNfqLmaremaYvATNc7gx2ikhhn8YH2qAYbfV731IYAP1BVAJ7UH0E5vAWit1yG8BuEVvQSiCYTnIDxtExrbhEYgHgHxEIj7HUf3wLgTxu0u51tsxE0wboBxHYxr3A9XHdh/4Iq9e/ZebjMu27Z126WbN23+pc24GMhFSxYvOd8l/rNZM2adN3ni5HM/H/35OUMGDflhvz79ftC1U9fvtXu73XdfffnVbz/8wMPf/P1vf/+Nn/zwJ1+H8h+9evUaFLVixYqIQdWoWpUqV5lKVazwR4Gh5SlHWcpQqlKUqDOKNcQYnVS0juqQDmivwe7SDm3VZm3QGkNepWVaooUGPU+zNUNTDXuSxutzAx+l4Rpi6AP1iaH3Ux/1MvjuBv++Oht8B71r+G/bgjcBvJGcnNwCQHMAzQC8COB5AM/qKQhPOJIeg/CwjXjARtwL4S5H0x3uh9sOHzp8s624yVb8Yc/uPdeCuNpj7O9txu/cF7+FcRmMX9mOS2zHxbbjwqmTp54/fuz4n40cPvK8Af0H/NhT1jnvd37/h++0eecHLV9t+b3nnn7uu3fdfte3L/vlZd8853vnfAPKN6AMjlq+fHnE0GpUrUqVq8zASlWiIhUoTznKUoZSDTFFiUpQnE7rpGFG66gO66D2Gepu7dBWbTbYDVqr1Ya7XEu1yHDna45mGvI0TdYEgx6r0QY9QkMN+zN9auAfG/hHfsT3NvAe6mboXQ29o9obfFtDf8vQW/uR/7rBv2bwrxj8SzagieE/bwueNvwnbUEjW/AogIcA3A/gXptwl6PpTy7rW23DzRBudFf8Yf269detXrX66hXLV/zeVvzOnfGbubPnXubeuNRR9UubcfGIYSMuclxd0O+jfufDOM92nPtGizd+/HLTl3/07FPP/tCW/OCm62/63sUXXPydH3z7B9+G8q0Pe344JGrZsmURg6xRtSpVrjKVGmaJilSgPOUoSxkGm6YUJSlBcTptyCcVrWM6rIOGvU+7tUPbDHyLNmqtga/WCi0z9EWab+hzNUvTDX6KJhr+OMMfY/gjNczwByUlJQ8EMMDw+6oPgJ76AML7EDpBeA9COwhvQ3gTwhsQWkBobguagXgRxAsgngHxFIgnHEmPuawftg0P2Ib73BN3u7TvcDTd7q64Ze2atTfBuAHG9bbi2kULFl01b86838+cPvNym/Ebm/FrIL8aNmTYJQM/GXixC/2inh/0vKB92/Y/a9Wy1XnNXmx27jNPPvPjJx594px777z3R+6TH1z40wu/971vfv+7UL7Ts2fPoVFLly6NGGaNqlWpcpUZZqhERSpQnnJkrlkZSlOqkpSgOEM+rVM6oWMGfVgHtV97DHyntmmLgW/UOq0x9BVapsVaYPjzDH6WZmgqgEkaD2CM4Y/ScMMfrM8ADADQTx9B+BBCdwjvQ+isDiDeBfEOiDYQWkFo6Th6FcTL7oWXQDQB8RyIp0E0thWNbMWjjqaHYNxvK+61FXfC+BOM22DcvHTx0ptg/MF7xnVzZs25xnZc5d64wpPV5Y6qy9wdl37y8Se/BHIJkItd6he91fqt890hP3NknffoQ4+e6zH43DtuveOcKy+/8kfnn3v+D777je9+H8r3evToMawWxUBrVK1KlYcMtUwlKlKB8pSjLAPOVJpSlaQEg45XrE7phI4Z+BEd0n7D3qOd2q6tBr9J6wx9jVY675cb/BItNPx5mm34MzTV8CdpPIDPNQrAcABD9BmETyD0V18IvSD0gNANQhfb0BFEexBtQbwFojWI10G8BqI5iGaOpxdBPG8rnrEVTzminnBEPQbjYZvxoLviPhh3w7jDZty+eOHiWx1Vf3RU3Wg7rrcd104cP/Fq23ElkCsGfzb4t0Au692z96VAfulSv8SWXPz6a69f2PSFpuc/2ejJnz1wzwPnuUt+4lH43Mt/ffk5Pz3npz/6zte/80MoP+jRvcfwqCVLlkQMtUbVqlSFgZarTCUqUoHyDDdH2cpU+CNVSYacoHjFOmZOGfYJHdcRAz9k4Pu118B3abu2GvomrTf0tVpl6Mu1xNAXar7mGP5Mg5+myYY/QWMNf7Thj9RQAIMADATwMYB+6g3hQwjdIXR1JHWG0AFCOwjvuCPagGhlI1pCeNVGvAziJRBNQDwH4mkQT4J4fM3qNY96v3ho+bLlD7gz7rUZd9uMO2zGbTBugfHHSRMm3egl8PpRI0ZdO3Tw0KvcH1f279v/d70/7H25O+Syju07Xuoe+dWbb7x5iXvkYsfWRY8++OgFQH528w03//T6q68/zyX/E09eP/72f3z7HCg/6t69+4ioxYsXRwy2RtWqVIXhlqtMJSpSgWHnGXKuspWpNANPVfhXouINO1YxOmngx3VUhw39gPZql8Hv0DZD36wNBr9Wq7TC8Jca/CItMPy5mmX40zUFwEQA4zQGwkgAwwAMAfAZgAHqbxM+gtBLPSB0g9AFQkfb0B5EWxBvgWjtaHodxGsgmrsrmnl6etER9YIj6llb8ZStaLxs6bLHlixa8giMh2DcD+MeGHd5G78Dxm2Oqlu8d9zkMr/BdlxvO65xXF31YY8Pr+z+fvcrOrzb4beesi5zj1zq2PrV8888f8njjz5+sS256LY/3nbBH675w/lX/e6qn/3y57/86Y+//+OffOtr3zoXyo8/+OCDkVGLFi2KGGiNqlWpCkMtV5lKVKQC5RtwrrKVqXSlGnSyEhVv2LGK0UkdN/SjOmzgB7RPuw1+p7YZ/GZt0DrDX62Vhr/M8BdrgeHP1WwAMwBM1SQI4yGM1SgAwzXUNgyC8Ilt+BhEXxC9QPSE8IFjqSuIziDesxHtQLzjnmgDohWIlrbiVVvxiq14yeNskxXLVjwH4xkYT/o45HEYjzmmHobx4PSp0+9zb9wzYdyEOx1Vf7Idt9mOm23HTR53b/io90fX9+ze8xobclWn9zpdCeR3Xg5/C+Q3Lz7/4q+feuKpXz3y4COX3P2nuy/+4x/++PNrfn/NRY6uC35x4S/O9zj8UyjnQTmvW7duo6I8U0cMt0bVqjTcCpWrTCUqUqEh5ytX2co07HSlKVmJBn5G4V8xhn5S0QZ+VId10ND3abfB79R2g9+ijVpv+GsMf6WWG/4SLQQwz/Dn2ICZmgZgMoAJGgthDIQREIZBGAxhoG0YAKIfiD4QPoTQ3Ua8D6KLjegIoj2ItiDeAtEaxOu2ooUjqrkjqpn7oqn74gUYz8J42mY09uL3OIxHYTwE4wFH1X2jR46+e/jQ4Xfajts9Xd3muLrZcXVTjw963ADkehtyDZCrbcjvX3vltSt8jHK5x9/fPPbwY7+2JZf+6ZY//dKW/MIFf/Glv7j0op+f//OLfvidH17wza9+83woP3v//fdHRy1YsCBiyDWqVqUBV6hcZSpRkQoNO1+5ylaWoacrTcmGnqQzijP40zqlaMM/piM6aPj7DX+Pdmk7gK3aBGA9gDVaBWG5lkBYBGG+5kCYCWE6hCkQJmociDEgRoIYDmIwiM9sxCcw+oP4CEQvG9EDRjf3RFcYnRxP78FoB+NtW9EGRqvlS5e3hPHa4kWLX/GD8yUX+Is243kYz3iiesq98YSjqpHH3Edsx0O2436Puvf67Ooux9UdQG7v06vPrT269bjZhX6jO+QGd8h17pBrgFzlHrnyhWdfuOLJx5+8/MF7H/zNPXfc8+tbb7r1Uo/Bv7ziN1dc4ui62OPwz72jXPSNr3zjQigXvN/1/TFRPgqIGGyNqlVlsBUqV5lKVKxCQ85XrnKUZdDpSlOKgSfpjOIN/LROGfgJHdMRgz+k/Qa/V7sMfoe2Gv4mg9+gtVoNYAWApQAWawGAuQBmAZihqRAmQRgP4XMIoyCMsBFDQQwCMRDCxzaiH4g+NuJDEN3dE++D6AyiI4j2tqItiLccUW8uWrjoDZvR0nvGqzbjZRgv2YwmMJ6D8QyMJ23HEzAesx2PeNR9yHbc/3G/j+9xf9ztM6w7Puj6we1Abn2v3Xs3t32r7U1AbvC2fr0NucY9cvXTjZ++qtHDjX4P5PLbb779t14WL3OX/Pq3l/72UkfXL8/70XmXfP9b378Yys+h/Lxrl66fR82bOy9iyDWqNuAqVahcZSox6GIVKl+5Bp6jLGUYeLpSlGToCYo39NOKMfQTOq6jhn9IBwx+r3Yb/k7D36bNhr/R8NdpDYCVhr9MSwAsBDAPwGwAMzUNwmQIEyGMswljIIyEMAzCYNvwGYhPbEN/EH0dTb1A9ATxAYiu7opOnqI6OKLeBfGOI6qNrWjt45A33BmvwWjuTbwZjKYwmtiMZx1VT8N4Esbj7o7H3B0Pezt/0HF1v8fde4Hc7ZPeOzzy3u7IutUdcrM75KZXXnrlRiDX25BrGz3S6BrvJFd7J/k9kN954rrclvzm15f8+rKf/+znv/bk9avvffN7v/z6v3/9Eii/6NK5y9iouXPmRgy4RtWqMuAKlatMJSo27ELlK085hp6lDKUbeoqSDD1B8Yo1+Bid1HEARw3/sA4A2KfdAHZqG4QtADZqPYQ1EFZBWK6lEBZBmA9hDoRZmg5iiibBGA/jcxCjQIwAMUSDbMSnMD6G0c8TVB8YH9qK7rbifRhdYHSE0R5GOxhvw3gTRiub0RLGa943XvFU9ZKnqhe9czzvqHrW3fH0pwM+bQzkcdvxaK+evR52fzzYrUu3+4HcY0PuAnKHDbndhtzqyLq5yXNNbvL4e4OnreuBXHf/3fdf64nrqhuuveH3LvgrXPC/c59c7uj6zbk/OPcyL46XQvkVlF917tx5XNTs2bMjBl2jakOuUoXKVaZSAy9WofINPE85yjLwDKUr1eCTlWDwZxSrGMM/qWjDP2b4h3XQ8PdpD4BdALZrC4BNADZoLYTVEFYAWOo4WgxggeZCmA1hho2YCmIyiAmOprE2YgyIkSCGgRgMYiCIAbaiv634CERvj7Q93RUfOKK6wugMowOMd2G0hfGWS/xNl/gbMFrAeNVR9bLteMl2NLEdz7s7nnV3PPVRrz6NPe428rj7qOPqYU9YD9qQ+99+8+17gdzdonmLO2zI7Z60bnOx3/LEY0/80TvJjUD+4L3kei+K11531XVX+0T4Sj+h9ftLLrrkigt+csHvPA7/FspvoFwG5dedOnUaHzVr1qyIIdeo2oCrVKFylanUsItVqALDzlOOsg08Q+lKNfhkJRr8GcUZ/GmdNPxoHTP8IzoIYL/h79UuAOFfWyFshrABwjqthrASwjIIiyEshDAPwhwIM23DNBBTQEwEMQ7E5yBGgRgOYiiIQS7tT0EMsBX9bEUfGB+6L7q7L7q5vLt4z+jkmHrPZrSD8Q6MNjBaw3jDO0cLj7nNXeQv246m7o4mtuN5x9UzjqunHFeNfWTSyIX+qJ8xfBjIg46s+4HcC+RuIHcC+ZNj67ZHHnjkFpf7ze6Sm9wlNzi6rr/6iquvsyXX2JKr3SdX+Xjl9568rvA2/zsol0P5bceOHSdGzZw5M2LINapWlSFXqFxlKjXsYhWpwMDzlKtsQ89UhqGnKlmJBn9GcYZ/WqcM/4SOG/4RHQKwH8Be7QawE8A2AFu0EcJ6CGsgrNJyEEtALAIxH8RcELMgTHdHTNUkEONBjHU8jXY8jbAVw0AMthWfwfjEVvS3FX1tRW9b0RNGdxjvw+gMoyOM9jDawXgbRhtHVStH1esu8ha2o7m7o5knq6aOqyaerp5zXD3juHrKI29jT1iNgDwG5GEgDwK5H8i9Pte62y+AuNM9cgeQ23zgeOudt915iy35o7vkRo/Bf/AGf52nrms9Cl/r45WrPXld6W3+9//xb/9xBZQrOnboOClqxvQZEQOvUbVhV6lC5SFDL1Wxigy9QHmGnqtsZRp8hlINPkVJBp+geMOP1SnDP6HjAI4COKwDAPYB2KOdELYD2ApgE4ANWgthNYQVEJbahsUgFkCYZyNmg5gJYpqNmAxiIohxtuJzEKNADAcxxFYMshUDbcUAGP0cUX0cUb1g9IDxgaeprjA6w+gAoz2MtjDedlS9CaOV7WhpO16zHa94GWzmuGrquGriuHrO/fGMJ6ynfLjY2HvI40Aec4c87DOth4Dc7wXxPiD3uEfuuu+u++4Acrstuc2W3Oox+I8u+JtsyQ1A/uCnf6+Hcp0nr2u8OF4N5SooV3Z4r8PkqOnTpkcMu0bVBl2lCpWHDLxUxSoy9ALlK9fgs5Vp8BlKM/gUJRl+guINP1YxAE4qGsBRAId1EMI+CHsA7AKwXVshbIKwAcI6CKu1EsRyEEtALLIN830yOxfELBDTQUwFMQnEBMfTWBCjbcVIWzEMxmBb8RmMT2B87PLu62mqt834EEZ3GN1gdIHRyb3xnqPqXUdVWxf5W7bjTdvRyna0tB2vOa5eAdLMcdXU/dHEhf5cm1ZtnvFzIk8BaQzkcRvyGJBHgDzkYn/AsXWfl8R7HVt3A7nTZ1x/csHf7i651dF1y68u/tUfgdx4wXkX3OjJ6wZPXtdDuQ7KtVCuea/9e1Oipk6dGjHoGlUbdJUqVB4y8FKVqMjQC5Rv6LnKUabBZyjN4FOUZPiJijf8OMOP0UkA0ToG4QiAg9oPYS+EXRB2aBuEzRA2QlgPYY1tWAViuY1YCmIxiAUg5oGYrRkwptmKySAm2opxMMbAGAVjuCNqqK0YBGMgjAE2oz+Mj2D0htETRncY78Po4qjqCOM9F3k72/GO7Xjrw+4ftu7erfsb3s5buD9eBfKK+6MZkKYu9BeAPOfF8BlH1lM2pLFH38e9izwG5BEfyT8M5AFbcr8393u9KN5z43U33uWCv/N3l/3udkfXbS74Wy8878Kb3Sc3Q7nJJX8DlBug/AHK9e3fbT81asqUKRHDrlG1qgy7oq5yAy9ViYoMvUD5yjX4HGUZfqbSDD9VyYafqDMA4nQawCkAJ3QMwlEAh3QAwj4IuyHs1HYQW0BsArEexFqX9WoQK0Asc08sBrHQRswHMcdWzAIxHcQUEJMcUeNtxVgYY2CMdEQNgzEExmfeNT6F8TGMfp6o+rjEe8HoAeMDR1VXR1Vn29HRdrS3He086r5jO9oAae24esNx1cL98ar74xUgzYA0BfICkOeAPOtt/Wkgjd0jTzz20GONHFuPukce9vnWQ0Du9xnXfT5SudcFf7ctudPR9ScX/O1AbvPSeKvH4Vug/NFHLDd97f987UYoN77b7t3pUZMnT44Yeo2qDbxKFSFDL1epSgy+SIUGn6885Rh+ljINP12pAJKVCOCM4iCcBnAKwAkdh3AUwGEAB7Qfwh4IuxxL223DVhCbIWzQOhBrbMNKEMtBLAWxyFYsgDEXxmwQM2zFVBiTHVETbcU4GJ87okbBGGEzhsEY7F1jIIxPYPSH0de90dtR9SGMHrajmw8Ru9qOzu6ODo6r9i7zdo6rt4G0cVy1AvIGkBZAXvXzIa8AaebIagqkCZDnvYs8C+Rpn2s9CeQJj7+NgDxqSx5xbD3k2HrAltzvgr/XY/A9tuQu98mdP/vxz/5kS273OHw7lFuh3ALlZih/bNeu3YyoSRMnRQy8RtWGXaWKkIGXq9TAS1SkQkPPV56h5yhLmYafbvhpSjb8JCUAiAcQqxgAJwFE6xiEwzbhIIT9NmEvgN0AdmqbbdgCYhOE9VoLYhWIFRCW2YjFIBaCmAdiDohZIKaDmGorJoGYYCvGeQMfA2KkzRjumBrimBoEY6DNGGAz+juqPrIZvWF8CKO7945uMLrC6ASjg6er9p6u2jmu3nFctXGht/aE9YaXwpbe1F8F8oo7pJkjqymQF4G8YEOedY88A+Qp90hjII/bkkaOrUeBPGxLHnLBP+gN/n5bcq/75B4X/F225E6fDt/pcfhPUG6HchuUW9u2bTszKvxWCIOuCRlylSpVoXIDL1OJgRerUAWGnqdcg89WpsGnK83wU5Rk+AmGH6/YpYuXxAA4ZQuiIRyDcATAIR2AsA/CbtuwE8J2CFshbLYNG0CsA7EGxEoIy7UExCLH0wIY80DMthUzQEyzFVNsxUQY423FWFsxGsZIGMNgDIExyGZ8ajMGwOgH4yMYvR1VPT1ZdXdUdYPRxd3R2XHVwXa0B9LOdrztuGoDpHXzZs3f8HPrLYG8BqS5I+tlIC950noRyAvukeeAPOtp62kgT9qSxh6BH/f2/pgL/lFH1yMu+IdsyQNeGO+Hcp8tucc7yj1Q7vKOcieUO6Dc0fadtrOjxo8fHzH4GgMPValSFQZfrjKDL1GxCg2/QHmGn6tsAFnKAJDmGEqxBckQEiGcgRAH4TSAUzoB4TiEoxAO6yCIfSD2gNgFYgeIbSC2gNhoI9aDWOueWA1iBYhltmIxjIW2Yj6MObZiJowZMKbCmGQzJsIYB+Nzx9RoGCNsxjCbMdgl/pl74xMfIH7sJbCf7ehjO3rZjp6Oqu62433HVRePu51sRwcg7YG09YT1tg15C0hrIG8AaQnkNSDNgbwMpJn3kaYu9iZAnve09SyQZ2zJU0Aa++DxCRd8I0fXY46uR2zJw+6TB90nD9iS+72j3Ocd5V6X/N1Q7oZy1ztvvzMnatzYcRGDrgkZdJUqVaFyAy9TiaEXq9DgC5Rv+LmGn23wWcow/HSlGn6y4SfqjOIgnAYQA+AkgGgdhXAYwiEI+yHshbAbwk4I2yFssRGbQGwAsQ7EGhArQSwHsdRWLAKxAMQ8ELNBzLQZ071nTIExyWZMgDEWxhgYo2AMhzEUxiD3xkAYn7jIP4bRz3b0sR29bEdP29HddnTzuNvFcdXJ/dHB/dHehd4OyDs+y3rLY++bQFoBed2nvi2AvPrQfQ+9AqSZe+Qlx9aLtuQFIM/bkmeBPG1LnvJp8JMu+Cf8MqJGPut6zJY84uh6+Eff/dFD3lEegvIAlPuh3Aflvrffentu1NjPP48YfE3I4KtUafAVBl+uMsMv9SO/2PCLVKB8ALkAspVl+JlKB5AKIFmJEBIUDyEWQgyEkxCidQzEERCHQBwAsQ/EHhA7QewAsRXEZhAbHU/rYawFscpWrICxzF2xGMZCGPNtxRwYs23FDJf3VBhTHFMT+3/UbzyMsTBGO6pGesQdDmOIo2qQo2qgx9wBtqM/jL7ujj62o5fLvIft6O6F8H3HVRcgnYB08PF7eyDtgLwD5C0gb9qQVj7Teh1IC/fIa0Ca+wT4ZSAvedpq6mmriRfFF1zuzzm2nrElTzu6nnJ0NfZu8oQtaeToegzKo1AegfIwkAe/+q9ffRDKA2+1eWt+1JjRYyIGX2PYoSpVGnqFyg29TKUqNvgiFRh+vsHnKUfZhp9p+OlKBZACIEkJAOIBxOk0hFMQTkA4DuEohMMQDkLYD2EvhF3aCWKbjdgCYhOIDSDW2Yo1IFaCWG4rloJYbCsW2Ip5MObAmAVjus2Y6s6YBGMCjPE243NH1WgYI2AMsx1DbMcg2zHQUTXAdvS3HX0dV31sRy/HVU/HVXfHVTcXeldPWJ08YXUA0h5IOyDvAHkbSBsgrYG84R5pCeQ1x9arjq1XPG297HJ/yeX+osu9iS153pY85+h61tH1tKPrSU9djR1dT7hPHvfk1cg7ymNQHoXyCJSH27zZZkHU6FGjI4ZdEzLwKlUadkVdZb4tNfgSQy9SofINP085hp9t+JnKMPw0pQBIApCoMxDiIJyGcEonQUSDOAbiCIRDEPbbhn0gdoPYCWG7toLYbCs2glgPYq2tWAVjha1YBmMJiEWOqPku77kwZsOYCWO6d40pNmOSzZgAY5x7YwyMUTBGwBhmO4bYjkEwPoUxwHb0tx19HVd9bEcvF3pPx1V3IN2AdPXhYmdv6h194vsekHeBtAXyNpA2QN50j7QC8jqQlo6t1xxbzd0lrzi2mgFp6mXxRVvSxFPXC14Yn/Mo/AyUp23JU1CedMk3hvIElMehNILSqE3rNgujRo0cFTH0mpCBV6nSwCvqKjP4UpUYfJEKDb5AeYafo2zDzzL8DKUBSFUygCQAZwDEKxZCDISTEKIhHINwBMIh23BA+yHsgbDLRuwAsQ3EFhCbQGywFetArLEVq0AstxVLYSx2RC2EMd9WzPU0NctmzIAxzZ0xBcYkGONhjIUxBsYoGCMcVcMcVUPcHYNgfApjgO3obzv6Oq4+clz1cqH3dKF398jbDUhXIF3cIR3dIR2AtAfSDsg7QN4C0saHja19tvWGY+t1IC0cW6/akuaOrZdtSTNb8tLF51/c1FNXE0fX8+6T54E865J/FsrTUJ6C8iSUJ6E0frP1m4ujRgwfETH0mpChV6nS0CvqKvNtqeGXGH6RCg2/QPmGn6scAFnKgJAOIFXJEJIgJECIVyyI0yBOgTgB4bhtOAriMIiDIPaD2AtiN4idILaD2GorNsPYaCvWw1gLYrWtWAljua1YAmORzVgAYx6MOTZjFowZMKa6Nya7NyZ6qhrvqBrrqBpjO0bZjuG2YyiQwe6Oz2zHp7ZjgOOqP5C+7o8+QHoB6QmkO5BuNuR9G9IFSCcgHYC09/Mj7YC0dY+8DaSNY+tNx1Yrx9YbtqSlu6SF95JXfRrc3Ja84uhq5uh6yZa86D5pAuUFKC9Aec47yrNQnoHyDJSnW7dqvSRq+LDhEUOvCRl6lSoNvSJk6OUqVYnBF6vQ8AuUb/i5hp+jLACZhp+uVAApAJKUCOEMhDgIpyHEQDgJIRrCMR2BcEgHIOyDsAfCLhuxA8R2EFtsxWYQG0CssxVrQKwCscIRtQzEYhCLbMYCd8ZcGHNsxkybMR3GNBiTYUyEMR7GWBhjYIyyHSNsxzDbMcR2DHJcDXRcfeK4+tj90c/98ZGfD+nts6wPvRj2sCEfeOx9H0hXIJ1tSEcg7wFp72JvB6StY+ttIG1syZtAWtmSNxxbLW1JCxf8ay745p66XoHysvukGZCmLvmmLvkXoTSB8jyU56E81+qNVsuihg4dGjH0mpChV6kyZPAVKjf8UpUYfrHhF6pA+QByAeQoC0CmMiCkQUiBkKxEEGdAxIOIhRBjG05CiNZxEEdBHNZBEPu1F8RuEDttxXYY22BssRUbYayHsRbGai99K4Esh7HUZiyGsRDGfJsxF8ZsGDMdVdMdVVMdVZMcVRNc5OOAjLUdo23HSNsx3HYMtR2DHVeDgHwK5BMgHwPpZ0M+8tFJbxvyoQ3pCaS7z7S62ZCuHn07+6ndTu6RDu6R9kDe9bTV1iPwO46tt9wlbWxJa1vSypa8YUtaOrpaOLpedXS96j55BcjLLvlmUF6C8hKUF6G8CKXJG6+/sTxqyOAhEQOvCRl2tSoNPFShckMvU4mhF6vI4AuVb/h5yjX8bMPPUgaANACpAJKVBCEBQLwjKQ7CaZ2CcMJGREM4ZiOOgDgE4gCIfRD22IhdIHaC2A5iK4jNnqI2glgPYi2I1TZjpSNqOYylNmMxjIUw5tuMuTBmwZgJY7rtmApjMowJtmO87RhrO8bYjlG2Y4TjahiMIY6rQY6rgZ6wPnn8kcc/tiH9bUhfG9IHSC8b0tOG9ADygQ1534Z0BdLZPdIJSAcg7YG8a0vaudzfcZe8DaQNkDdtSWtHVysor9uSlo6uFlBec3S9CqW5t/lXoLwMpRmUZq+3fH1l1OBBgyOGX2PwoWqDr6yrwvDLVWb4pSoGUKRCAAXKg5ALIVtZEDIgpCsVRAqIJAiJEM4oDkQsiBgQJ0FEgzgO4qiNOAzjIIz9MPaC2O3i3uWu2AFjG4wtMDbB2ABjHYw1MFbBWAFjmUt8ic1YBGMBjHmOqjkwZtmOGR5zpwGZYjsm2Y4JtmOc7RhrO8bYjlFARgAZZjuGABnk/hgI5BMfLg4A0h9IXxvSx4b0AvKhDenhYu/uHukGpKt7pItjq5Njq6M39/dsSXtb8q4taetl8W0ob9mSNp663nR0tYbyBpTX/RxKSygtXPItoLwKpTmU5lBegbIq6rOBn0UMvCZk4NWqNPBQhcoNvkylBl9s8EUqVIHh5ykXQA6ALACZSgeQBiAFQLISISRAiIcQCyEGwimdgHAcwlEbcQTEIRAHQOwDsRfEbvfFThjbQWx1RG2GsdERtR7GWhCrbcYqm7ECxjIYi2EsgrHAZsxzb8yBMct2zLAd02BMsR2TbMcE2zHOZT7W4+4Yx9UoICMcV8OADHVcDQbyGZBPvakPsCEfA+kH5CMgfYD0AtITSA8gH3ja6gakqy3pAqSTLekI5D13SXt3ybseg9vZkrbuk7dd8G85utq4T96E0hpKKyhvQHkdSMsQlBYtW7RcHTXw04ERQ68JGXy1qgy9UhWGXq4ylRp+ieEXqdDwCww/LwQgR9kAMgFkAEhTKoRkCEkAEmzCGQhxOg0iBsRJENGOpmMQjkI4DOEghP02Yh+IPSB2gdgBYhuILbZiM4yNtmI9jLUu8NUwVsFYYSuWtmrZegmMhTAW2Ix5NmMOjFkwZsCYZjum2o7JtmMijPEwxtqOMS700bZjpONquPtjqA8XhwAZBGSgI+sTIAOA9AfSD8hHQHq7R3oB6QmkB5APHFvdgHR1bHUB0tnR1clHKh1syXu2pL2j610obW3JO46ut90nbzm62rhP3oTSGkirEJQ3WrzWYm3UJwM+iRh6Tcjgq1Vl8JWqMPxylakUQImKARQCKFA+hDwAOcqGkAUhQ+kgUkGkQEiCkKgzIOJBxNqIGBtxCsYJGMdhHIVxBMQhHQCxX3th7IaxE8YOW7ENxhZbsUkbYKyDscZmrLIZKx1Ty4EstRmLbcZCIAuAzHNUzQEyC8YM2zHNdkwBMgnIRNsx3naMBfI5kNFARgIZDmQYkCFABgH5DMinQAYA6e9Jqx+QvkD6uEd6e/z9EEgPW9LdsfWBLXkfSFdb0sWWdLYlHW1JB0fXe7bkXVvyri1pB6UtlHegvA3lLSBtQlDebPFqi3VRAz4eEDHsmpCBV6vKwCvrKjf4MpUafInBF6vI4AuVb/h5ygWQAyBLmQDSAaQBSFEyhEQICRDOQIiDcBpCjI04CSHaRhyHcNQ9cRjEIRAHQOwDsQfEbluxE8R2EFtBbHaBb7IZG2CsA7HGZqyCsRLGcpf4UhiLYSyEscBRNQ/GHBizYMxwmU+3HVNtx2QvhBMdVxMcV+McV5+7P8a4P0b5LGsEkOFAhgIZDGQQkIFAPgUyAEh/IP2A9HWP9AHS25Z86BG4py3pcfH5P//AlnSzJe/bkq62pIunrs5QOkLpAOU9R1d7KO2hvOvDyHZA2uodKO+81vy1DVH9+/WPGHpNyOCrVWXwlXVVGH6ZSg2/xPCLVWT4hYafHwKQqxwAWQAyHUkZENIhpEJIgZCkRBBnQMSBiAURA+IUiBMgokEcczQd0WEQB7UfxF5H1B4Yu0DssBXbYWy1FZthbISxwTG1DsYaGKtgrISxHMZSGIthLHRULXCRz4Mxx3bMhjHDdky3HVNtx2TbMcl2TAAy3naMdX+MATIayEggwz32DgMyBMggIJ950hroYv8EyAAg/W1JPyAfObb6AOltS3q53Hvakh5AutuSD2xJN0fX+46uLlA625JOQDq6Tzr69cMdoLwHpH0IyruvNn91Y1S/vv0ihl4TMvhqVRl8ZV0VAMpVBqDE8ItVpEIIBRDylQchB0I2hCxlQEiHkAYhBUKyEkEkgIgHEQfiNIhTNuIkiBO24jiIo7biMIxDMA7Yin0w9sLYDWMnjB0wtsHYAmMTjI2OqfUw1ro3VgNZ5d5Y4ahaBmOp7VhsOxYCWWA75gGZ491jlu2YaTum246pQKYAmQRkApDxPlwc68XwcyCjb77hllFARgAZBmQokMFABrlHBgL5FMgnXhI/dmz1tyX9gHzk2OpjS3rbkl5QetqSHraku6eu7kC62ZL3bUlXIF1CUDpD6QSkYwhKh+avNN8U5X+gJWLoNYYeqlaVoVeGDL5C5SqzAaUqAVDsBa7I8AuUDyAPQK6yIWQByASQrjQIqRCSISRBSIRwBkIchFgIMRBOQTgBIdpGHANxFMRhEAdBHHBE7QOxF8RuR9QuGDtAbLMZW0BsArHRZqy3GWthrIGxCsZKGMthLIWxGMZC27HAdswDMhfIbBgzYcxwXE0DMhXIZNsxEcgE7yHjbMhYIGOAjAYyEshwIMOADHWxDwYyCMhnQAYC+cSWDPAI3N+W9APS113yEZA+tqS3Lenl6PoQSg8o3aF88K2vfVvf6gblfShdgXQJQenc/OXmW6L69O4T8aO9xsBrDLzaj/gqVRp8paFXqNzgy1Rq8CUqNvwiwy8IGX6e4ecqB0BWCEIGhHQIqRBSlAwiEUKC4kHEgTgNIgbESRAnQBwHcQzEEVtxGMRBEAdA7LMVe0DsshU7YWyHsc1WbIGxyTG1EcR6rYOxBsYqGCthLIex1HYsgbEIxgLbMR/IXJf5HBizYMx0XE0HMtV2THF/TAYyEcgET1njgIwFMgbIaCAjbchwIMOBDAUyBMggl/tntmSgLfnUlnxy/k/O/9iW9IfSz5b0Ped7P/4ISh9PXb2h9ILyIZCeISg9oHQH8kEISrdXmr2yLap3r94Rg48Yeo2qVWXwoUrDr1C5ygCUAihRsYogFAIoUD6EPAg5ygaRBSETQrrSbEQKiGQQSSASQJwBEQ8iFsRpEKdAnAQRbSuOwzgK4wiMQ7bioPbD2AtjD4xdNmMnjO0wtmoLjE3ujY0w1sNY66lqDZBVQFb6dVjL3R1L3R2LgSyyHQttx3wgc4HMcVzNAjITyHQg07ypTwEyGchEIBOAjAMyFsgYGzIayiggI9wjw4EMAzLUhgwGMgjIZ7ZkIJBP3SWfAPnYlvR3dPV3n/QD8hGQPu6T3kB6A+nlyetDL449v/IvX+kBpLaXm728Pcr/wkHE0COGXqNqA6+qq9LgK1Ru8GUqNfwSFRt+keEXqgBAvvIA5ALIBpClTAgZENIhpEJIgZCsRBAJIM6AiAMRCyIGxCkQJ0BE24pjII6COAziEIgDIPbbjL2OqN0gdjmmdoLYbjO2wdgCYxOMjT4iWW8z1jqq1sBYZTtWwlhhO5bZjiUwFnu6Wmg7FsCY57ia67iabTtmAZnpo5PpQKYCmeIpaxKQiUAmABkHZKwnrc+BjHGxjwIy0oaMgDLcsTXUxylDHFuDoQyyJZ9BGQjkU1vyCZQBUD6G0h9IP09dfaF8BOUjKH2g9AbSK/TySy/viOrZo2fEwCOGXaNqVRl6qNLQK1QeMvjSkOGXGH6xigy/0PDzQwBylQMhG0IWgAylQ0iDkAohGUIShEQlQIiHEAvhNIQYx9NJECdAHAdxDMRREIdtxUEYB0DstxV7YeyBscvT1E4Y22FssxlbYGxyTG2EsR7GOhhrYKy2HatsxwoYy23HUtuxGMYi27HQdswHMs92zHF/zAYyy5v6DCDTPfZOBTIFyGRH1kQgE4CMBzLWlnzuHhkDZDSQUZ62RgAZDmQYkKHukiFABgMZBOQzR9dAKJ9C+QTKACgDoHwMpT+UflD6AqmtWdNmu6LcHRFDjxh4japVZfChSlUYfqgcQJlKAZQYfrGKABSqAEI+gDzlQMiBkAUhUxkg0iCk2YYUEMlKhJEA4oziQMQqBsYpECcVDeI4iGO24giMwzAOwjhgK/bB2AtjD4xdMHbA2O6Y2gpkC4xNjqqNMDbAWAdjre1YDWOV7VgBZDmQpbZjCZBFtmMhkAVA5gGZC2QOkFlAZnrsnQ5kGpCpQKYAmQRkog2ZAGScLRkH5HPH1hjH1mggoxxbI4GMsCXDoQyDMtQFPwTKYI/Cgxxdn0EZCGUgkE/dJ59AGQDlYyC1vdT0pd1RH3T7IGLoEQOvUbWhV9VV6dtKw69QueGXGX6pSgy/WEUACgEUKB9AHoBc5UDIhpAFIEPpENJsRCqEZBuRBCERQoKNiIcQp1hbEQPiFIgTigZxHMRRW3EExmEYB2EcALHPfbEXxm4Yu2zGThjbYWyzHVtgbHZUbYKxwXasB7IWxmrH1SrbsRLICtuxDMhSx9ViIIscVwuAzAcyD8hcGzIbyCwgM4FMBzINyFQgk4FMBjLRPTIBynjH1jhbMhbK57ZkDJDR7pJRQEbakhFQhtuSYbZkKJQhQAaHoAyC8hmUz6AMBPJp6KUXX9ob5XejRgw8VGPg1aoy8PoqDb5C5QZfZvClKgkZfpHhhwoAFBh+vnIB5ADIVhaETAgZENKV9lKTZikgkiEkQUi0EWdAxEOIsxGxIGJAnAJxAkQ0iOMgjtqKIzAOews/6L44YCv2w9gLYw+IXTZjJ4wdNmMbjK0wNtuMTTA22oz1MNbBWANjNYxVMFbAWG47lsFYAmOx+2MRjAU2ZL77Yx6QuS712UBmAZnpyJoBZDqQqUCmXPjTiyYDmQRkIpAJQMbbknFAxtqSz4GMATLaloyCMgrKSFsyAshwR9cwKMOgDIUyBMpgILU1bdJ0X5TfjRqBEDH4GlUbfqgqZPiVqgBQrjIApSEIJQCKVQShEECB8iHkQchVDoRs25CpDBDpINJApIJIAZEMIvH5p59LgHEGRjyMWBinYcTAOAnjBIxoGMdgHIVxBMYhGAdhHICxD8ZeGHtsxi4gO2HssBnbgGy1GZuBbAKy0VG1Hsg6IGuBrIaxynasBLLCE9YyIEuBLAGyyIYsBLIAyHwg84DMATIbyCwgM90jM2zIdCDTHFtToUxxbE2CMtGWTIAy3paMgzIWyFggn2uMLRkNZRSUUUBGagSUEVCGQxkGZGjoxSYvHojq0qlLxMAjhl2j6pChV9VVafAVKjf8spDhl6oEQLHhF6kQQIHyAeQByAWQo2wIWRAyIWQoHUQahBQIyRCSICRCSIAQrzgIsToNIsYRdRLECUdUNIhjII46oo7AOAzjIIwDMPbbjL0w9sDYBWOX7dgBYzuMrTC2wNgMY6O7Y4PtWA9k3fVXXbcGxmobsspxtRLIciDLbMhSIEuALAayEMgCIPOBzAMy14bMATLbPTITyEwg04FMAzLVlkwBMsWWTIYyyZZMhDLBXTLeloyDMhbK51A+BzImBGS0RkEZCaS2F1948WBUp46dIoYeMfAaVYcMvaquSsOvMPhQucoMv9TwS1QcMvwiFaoAQL7yAOQqB0I2hCwImRAylAYiFUQKhGTbkAQhEcIZCPGKc1fEgjhtK2JgnIJxAkQ0iOMgjoI4YisOwzgI4wCI/SD22Yy9MHbD2OWo2gljO4xtMLbaji1ANtmOjTA2wFhvO9YCWQNjte1YBWSl+2MFkGVeDJcCWQJksXtkEZCFQBYAmedJay6QOUBmO7ZmA5kJZAaQ6UCmAZlqS6YCmWJDJkOZBGUSkAlAJji6xgMZFwIyNgTlcyBjQk2eb3I4yu+xixh8xMBrVB0y+KqQoVeqImQDylVm+KUhW1CiYghFAApVACEfQh6EXOVAyIaQpUwQGSDSQaSBSFUKhCQlOp4SbMUZEPEg4kDE2ooYGKdgnIRxAkY0jGMwjsI4YjMOAzkI5ACM/TD2wdhrO3YD2QVjJ4wdMLbZjq1AtgDZDGQTjA22Yz2QdUDW2o41QFYDWQlkBZDlMJbZkKVAlgBZDGSRDVng2FoAZT6QebZkLpDZjq3ZUGYBmQlkhi2ZDmRaCMpUWzIFymQok6FMAjIxBGRC6Cv/8tXxQMaFoByJ8tu5IoYdqjHsUPWLzzetMvBQpaGHKgy9XGUGHyo1/BIVG35RCECh4RcoH0AegFwAOcoGkKVMG5EBId02pEFIhZACIUmJIBJAnAERDyIORCyI0yBiQJwEcQJENIjjII7ZjCMwDsM4BOMgjAM2Yx+MvTD2wNgNYxeMnTC2w9hmO7YC2QJjM4yNtmMjkPUw1jmu1gJZYztWA1kFZKX7YwWQ5UCWAVkKY4kNWQxkEZCFQBYAmQ9kHpC5mgNkti2ZDWQWkJm2ZAaUGVCmA5mmqUBqAzLFxyuTbcokILW98NwLR6P8dq6I4UcMvqauasMPVRl+ZV0VAMoNP1QGoFQlAELFEIpUCKIAQr7yIORCyAmByLYNWSAyHE3pMNJBpIJIAZEMIkmJMBJgnIERDyMORiyM0zBOwTgJ4wSMaBjHYRyDcRTGYRiHYByEcQDGfhj7YOyBsRvGLhg7YeywHduBbAOyBchm27EJyEYgG4CsB7IOyFoga4CsBrIKyEpH1gogy4EsA7IUyBLH1mIoi4AsdGwtADLflswHMk9zgcwBMhtIaBaUmUBmhIBMBxKaBmUqlKlApoSef+7541Hvtn03YuARw66pq9q31YZeFTL0SlWo3ODLDb5MpSHDLzH8YhUZfmEIQIFNyFcehFwAOcqGkAUhE0KG0iGkQUiFkAIhWUkQEiEk6AyIeBBxIGJBnAYRA+LkbTfdegJEtCPqOIxjMI7COALjMIxDMA56qjoAZB+MvdoDYzeMXTB2wthhO7YD2QZkK4wtjqtNQDYB2QhkgyNrPZC1QNbYkDVAVgFZCWQFkBVAlgNZZkuWQlkCZDGQRbZkEZCFtmQBlPlQ5gOZB2Suo2sOkDmeuGaHgMwKQZkJZSaQGaHnn30+OspvUokYeMTAa+qq9m21oVeFDL5SFSHDLzf4spDhl6rE8Itre+ixIhUCKACQH4KQp1wIORCyIWQpE0QGhHTbkAYiVSkgkkEkgUgEkQDiDIh4EHGKtRWnYcTAOAXjJIxoGNEwjsE4CuMIjMMwDtmOgzAOwNivfTD2wtgDYzeMXTB22o4dQLYD2QZkC4zNMDbbkE1ANgJZb0PWA1kHZC2QNUBWA1kFZCWQlUBW2JLlQJYBWRqCsgTIYiCLtBDKQigLgMwPAZkXAjI3BGSOZgOp7blnnjsZ5TepRAw8YuA1dVX7ttrgq0IGX1nbw40qVA6g3BFUZvildZUAKDb8IsMvrKsAQj6APAC5IQg5ELJCEDIhZEBIVxqIVBApIJKVBCMRRAKIMyDiQcSBiAVxGkQMiFM6CeMEiGgQx0Ec01EYRxxVh2EcgnEQxgEY+2Hsg7EXxh4Yu2HsgrHTduwAsh3INiBbgWwBstmFvgnIRiAbgKwHsg7IOiBrgawBshrIKluyCspKICtsyHIgy0JAlgJZAmSJLVkMZFEIyMIQkAUhIPNDQOaFoJyK8vshIoYeMeyauqp9W+1HfajK4CtDBl+h8hCAMsMvDRl+SV3FEIoAFAIoqCsfQh6EXAg5ALJDELKUCSIDQjqENKWCSAGRDCIJRCKIRBBnFA8jDkQsiFhbcRpGDIxTIE5cc8XVJ0BEgzjumDoG4yiMIzAOwzgE46AOwNgPYx+MvTD2wNgNYxeMnTB2wNjuuNoGZCuQrUC2ANkMZBOQjUA2AFkPY10IyFoga4CsBrIqBGQlkJVAVgBZHoKyDMhSd8lSIEtghBaHgCwKAVkYevbpZ2Oi/H6IiKFHDLumrmrfVht8qMrgK0MGX1FXueGHygCUGn5JXcUAigCECiEUKB9CPoA85ULIgZAdgpAFIRNChtJBpIFIBZGiZBBJIJJAJIJI0BkY8TDiYMTCOG0rYmCcgnESxgkY0ToO5BiQoyCO2IzDMA7BOATjoA4A2Q9kH5C9QPYA2Q1kF5CdMHbC2KHtMLZpK5AtQLYA2WxDNgHZCGQDkA1A1juy1gFZG4KyBspqGKtCQFaGoKyAsgLKchihZe6TZUCWhoAsCUGJjXqz1ZsRQ48YeE1d1b6tzeCrQoZfafAVdZX7thxAWQhAqeGXqDgEoQhAYQhCAYB85UEI5YLIgZANISsEIhNChtJBpIFIBZECIRlCUghEohJgnIERDyMORiyM0zBiQJwCEToJ44TtiAZyHMgxIEeBHIFxGMYhGIdgHIRxAMZ+GPtg7LUde4DshrErZEN2AtkBZDuMbSEgW4FsAbL5R9/54WYgm4BshBHaAGQ9kHW2ZB2QtSEga0JAVgNZFQKyMgRlJZAVISDLQ8889UxcVOs3WkcMPWLQNXVV+7Y2Q68KGXylgYcqQgZfrrKQ4ZcafqjE8IvrKgJQCKAAQCgfQB6AUC6AHGVDyIKQBSFTGSDSIaQpFUIqhBQlg0gCkQgiAUQCiDMg4hUHIhbEaRAxIE6BOKkTME7AiIZxHMYxGEdhHIFxBMZhGId0EMgBIPuB7IexD8ZeGHtg7LYdu2Hs0k4gO4DsALLdhmwDshVIaAuQzUA2A9kEZGMIyAYY60O2ZD2UdUDWhoCsCUFZA2R1CMiqEJT4qFavt4oYesSwa+qqNuz6qnxdZfCVIYOvCBl8eV1lhl8aAlASAlCsIgihQggFAEL5EPIg5IYg5CgbRFYIRCaIDAjpENJCIFJBpCgZRhKMRBAJIRhnYMTDiIMRCyJ0GkYMjFMwTsIInQASDeQ4kGNAjsI4AuOIp6vDQA75efWDQA4AOQBkP5B9QPaGgOwBshvILiC7gOwEsiMEZDuQbSEgW0NAtgDZHAKyKQRkI4wN9QFZH4KyDkhtQNaGnn7y6YSo11u8HjHwiGGHakIGXt2gKl9XGXyloYcqQgZfXleZ4ZeGAJQYfqgYQFEIQKEKABQYfr7yAOQCyAWQo+wQhCxlgsiAkHHV5Vemg0gDkQohBUIKhGQlgUgEkQAhdAZEPIg4ELEQTodAxIA4BeIkiNAJGNEwjoM4ZjNCR2EcgXEExmEdAnIQxkEYB2Dsh7EPRmgvkD0wQruB7IKxy4bshLEjBGQ7jNA227E1BCS0BcjmEIxN9cHYGIKxoT4oiVEtX2sZMfCIQYdqQoZd3aAqX1cZemXI4CtCBl8eMviyukoNP1QCoNjwQ0UAQoUqAJEfgpAHIBdAKAdCNoBQFoRMCKGMKy77XTqMNBCpIEIpMJJBJINIUiKMBBgJIM4oHkYcjFgYodMwYmCcCgE5CeQEjGgY0TCO6xiMYzCOwjgCI3QYyCEgB0NADgDZDyO0D8beEJA9MEK7gYR2AdkZArIjBGR7CMi2EJCt9QHZEgKyub6nGj+VFOXXrkYMuzbDrgkZdnWDqnxdZfCVIUMPVRh8qNzgQ2UqDRl+Scjwiw2/KASgMASgAEB+XXkQQrkgciBkhyBkQQhlQsiAkA4hlAYhVSkgQskwkkCEEmEkwDgDIhQPIw5EHIhYnYYR45iKgXEKxEmdgHECRnQIyHEYx2AcDcE4AiN0GMghGIdsx0EYoQNA9sMI7QsB2Qtjj+NqD4zQbhi76gOyMwRkR31AtoeAbKsPSkqUXyYZMezaDLumPgOvrqvKt7UZemXI0CtCBl8eMviyukoNP1QSglCsIgihQgCFAAqUDyAfQF5duRByQiCylQUjC0SmMkBkQEiHkBaCkAohJQQiWUkgEkEkgkgIgTgDIl5xNiMORqxOwzgNIwbEqRCMkzoB5ASM6BCQ4zCOwTgK4yiMIyEYh0NADoVgHNQBIAeA7AdSG5B92gukNhh7QjB21+c+2QWkNiA763vyiSdTo/yKvIhB12bQNQ2qvu6q6+u6rsrwQ5WGX5uhV9RVbvDlhl4WMvjSukp8WwKgOAShSIUQQgUAQvkA8gCEcgGEciBkh0BkKRNEKANGBoh0pYFIBRFKgZECIllJMEKJMBJgJIA4o3gYoTggcTBidRrGaRgxIE6BCJ2EcQJGKBpI6DiQ4zCOhWAc1REYocMwaoNxSAdh1AbjQF37gdQGYl9de2F8EZA99UFJi/Ir8iKGHTHoUE19Bl7doCpfVxl+qDIEoCJk8OUhgw+VGXyoNGT4JXUVAwgVQQgVQigAEMoHEMoDkGv4oRwAoWwAoSwImSEIGUoHkQ4hTakQQikgUkAkKwlEKBFEIogEnYEQigcRF4IRG4JxGkYoBkboFIyTMEInYISiYYSOwzgWsiHHgByFEToSAnI4BORQCEbooA05CORAfVD21wdkX32NH2+cHuUXf0UMuTZDrmmYYVc3qMrXVQZfWZ/BV4QMvjxk6GX1GXxpyPBLQoZfXFcRgFBhCEQBhPwQhLwQhNwQhJwQhGwIWSEImSEIGSEQ6RDSQhBSIaSEICSHbERSCEYiiIQQiDMhGPEhGHEgQrEwTodgxIRgnArBOBkCcSIEI7o+GMdDMI6FYBytD8iREJTDQGqDcahhQA7WByUzyi/+ihhybQZc0zCDrq7PsKsaVOnrUIXB12bw5XWVGX5thl4aMviSkMEX11Vk+KHCEICCEID8EIS8EIRc5UCoDUK2skBkQcgMgcgIgUhXGohQKohQCowUEMkhEEkhEIkhGAkhGGcUD6M2GHEgYiGETtuK2mDEhGCcquskjNpgnAjBiK4PxvH6YByrD8jRhgE5Uh+UrKimLzaNGHxthlzTMMOurs/Aq86q0vcrDb8iZPihcsMPlYUAhEoNPlRi8KFigw8VhQy/sD4ABXXlQwjlQQjlggjlgMjxFJUNIgtCKBNCbRAyQiDSlQYilAoilAIilAwilAQilAiiNhgJMM6EYMSHYITiYIRiYYROg6gvBkboVAjIyRCM0In6gETXB+R4w4Acq++JRk9kR/nVExHDrc1waxpmyDWqrs+gqxpU6evaDL6iPsMvDxl+WX2GXxoy/JL6DL84ZPBFIYMPFRp8qMDwQ/mGH8oLAcitKwdCKBtCKAtCbRAylQGhNgjpSoNQG4TUEIQUCKFkCKGkEIjEEIiE+mCcCcGIDwGJqw9EbH0wTodAnHZcxdQH41R9ME6eHZAT9UHJifIT9RFDr82Aaxpm0DWqrs+wqxpm6JUNqvB1heGHykMAQmUhAKUhAKGSEITiEIRQEYRQIYBQQQhCfghAKA9AKPcnPwz9JAdAKDsEISsEIZQJIZQBIZQegpEWghFKBRFKARFKDsFICoEIJYZgJIRghM6EYITiQzBCcSEocUBi6wNyuj4gpxXTMCCn6gs/jR7lJ+ojBl2bodacneFWN8yAqxpm0JUNqvB1bYZeXp/Bl4UMvvSLfnJBCYDaDL+4PgBFIQCF9UEoCEHIDwEI5YUg5IYg5IQgZIcAZNUHITMEIaM+EOkhCGn1gUitD0RKfTCSQyCS6gORWB+IhBCMBBBnGgYjvmEw4s4OSGx9jz/2eF6UnxOOGPIXGWjN2Rlu9VlVGfIXGXRlgyp8XWHYofKGGXxZXaUG/0WGXxIy+OIGFQEIFRp+fQUAagOQXx+EvBCE3Pog5NSVDaI2CFl1ZYKoLwNEbRDSG5QGojYQqQ1KgVEbiGQQXwQjqUGJMP4sGAlnB+NMw6AURPnpx4iBf5Fh13xJ1Qb95/3kgioD/yLDrqzPwCvOqtz36ysDUBuA0gaVAKgNQnF9AIrqg1BYVwGE+vJB1JcHor5cELWByKkPRnZdWSDqy4TxRSAy6kqH8UUg0kB8EZDU+mCkNAxIcsNgJH1ZQBIb1ujRRgVRfqYrcuF5F9Rm8BGDrvF085ede361oX+RIVerqmEGXdkwA69omIGXN6jM12WGHyoNGX59Jb4uARAqBlBfEYD6Cn1dCCFUYPj15fs6H0J9eRBCubV9/Tu5MHJCIOrLhlBfFojaIGTWByOjPhDpDYOR1jAYaUptGJCULwtIcsOgFEb5SZWIYX+RIdd8WYZdfXYGXq2qhhl0ZcMMu6I+g65QeX0GXq6yBpUCaFiJ75cYfqi4PghF9QEoUmEIRKigPgj59UHIVx6I+nJB1AYgpz4IOcquD0S2suqDkdkwGBkNA5Gh9LMDknZ2MNKU2jAoxVE+v48Y6p9lqDV/pWp/vtqQG1bl+1UG3bBK36807IZV+H6FIddX7utygw6V1WfYZSqtz7BLVVKfgZeouD5DL1ZRyNBDhfUBKFRBfQAKlF8fiHzlhSDUl+vrXAj15fg6B0TDsn0/G0bDsnw/C0bDMn0/E8aXlQHjL/KLWIqjfFQcMdQ/y0Br/laGW312Blx1dgZdeXaGXXF2Bl5+doZe1jBDL22YwZc0zOCLG2bwRQ0z+MKGGXzB2Rl+/tkZft7ZGX7u2Rl+ztnByP5bQck6u8ceeaw0yqeSEQP+iwy45m9l2NVfloFXfUmVhv4XGXrF2Rl8+VmVGf7ZlQL4swCUnFUxhLMrAvFnQSg8OwgFX1I+iL8IRN6XBSP3bwUj58v6T5THn4wY7pdVY7h/M4Ou/htVff+b36sy9LOrNPSzqzD4L6vc8P8iwy87OwClZweg5EsqhvAXQSj6kgpBfFkFIP5a+TD+ZjDy/lpQyqJ8ABYx/C/NwGv+XoZe/dcy/GpVnR2AKlWeHYBKVZwdgAqVnx2EcpU1DEKZSs8ORKlKzg5EiYrPDkaxis4ORpEK/1pACv5eQPL/Wo8+/Gh5lNf6iKH91Qyu5h/NMKv/VoZa9fcy4Mq/lkFX/LUMu/yvZeBlfy1DL/17ASj5W0Eo/kcCUayivxWUiii/XjhikH83w6z5r2Sw1f9Ihlz19zLsyr+XoVf8vQy//O9l+GX/SBBK/yuBKPlHglIZ5bk4Yth/NwOu+e9k4NX/aAZf9Y9k+JX/SAAq/pEglP+jgSj77wSk9B/pP1H84u5vfOWb+sZ/pRrD+59Ubaj/naoM+b9apYH/d6ow/P9J5RD+y/kdDVVRbvuIAf+3Mtia/40MukbV/5MMvup/EoDK/61gVPx3e+ShR6qjrEvEMP7XM6Caf2YGWv3PysCrVfX/RlBqovyfiOH9UzO8iGr+b+7fo75SUzf8APBP6wsUf9PIP6+v/BP/Xv/Mf67/nb9XWJLa3zT0yIOP/P/9XzKD4PH/ABYzZXBSXEBtAAAAAElFTkSuQmCC)",height:"101px",left:"47px",top:"47px",width:"101px"},ADVWHEEL:{background:xui.browser.ie6?null:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAADDCAYAAAA/f6WqAAAAB3RJTUUH1gcOCDIojJpTggAALYlJREFUeNrtnXmYHUW58H9V1WdmMtlDQtijSSDKorLovRAWAwqyiBJugoCK6CfqRdSLityLkIsiF9SIyqIsRhZBlu+TK0JEQBBFUEAEZQ9LgkCABBPIJJnMdFd9f5wzM2d6qrqr+/SZmUy6nqef06e6z9Ld76/epd6qgrKUpSxlKUtZylKWspSlLGVxF1HeguKLAQmTp0JlOuitQU+BaHJ105NBj4JoDEQKolYwoxAmQtKBxKBYi6ITxWokK1GsQPI6ilcQLEWxjBfpFGDKu13CMBwEXsA2bTB+BzA7Qbgz6B0hmgl6GugxEAG6tkX0va/fr70XBhQgqb72bLb3kgjFy0ieQ/EUiscQPErAo/yNlaL6pWUpYWia8Cv4l21BzwYzG6K9IHo7mBarcPcTfG0BwROGNED67xsUy5E8gOSPBNyD5mH+VGqREoaGhX+/KSD3h+j9EL231uILt+AnaYACYcgCiKADxZ+R3IHgNlp4jFvpKuEoYUgBYL8A2mYB80AfDGZXiCp+gu8CwXY8AYaigHABInkJyW+R3Mga7uBu1pZglDDUAJinIJoOZh5ER0L0LjDSLsjaQ9BThN5VlwZDEUD0hwIkK1DcguQ61vN7cTPrShg2Sef3Q+Nh1GGgPwF6X9CV/K2/zghCThgaAUWmOuXLEPwcxZW8wBJxN2EJw4g3g6btCOLTEM0DPdXd6usMTnAW08hxrB4Gl3AH/YR3YF3Pq+08l3YIYucJulH8HskiWrlJXERHCcOIguC4NmjbB6KTQB8EumWgIOuMwp0Vjoww2IAIKN6UkgM0RP37JUguJeBKfshrI923ECMbghPaITgMzMmg31ONBLkEX3uaP41C4DgnDkMQa8HjMKiCwZBOvwIUKxFcTsAFLOQfI7UfQ4xMCL48GsLDgK+A3qNP2NNMH90kCNLMJgcMPj6ELxg2gQ88YOj/ugrJIgQX0MYL4syRBYUYWRCc1AptBwFngN7dHQnKA4GPo5xUlwJLEgxZBD5wCH1WcylZW6xCcAkB3xdn8koJw7CCYIGEaCcwZ4I+HLRyh0V9Wn2dQ6C1p4lUAAxJgGQxpdIiTK7XvnOXYvgGa7heLGTtxi5HcuMH4VtTQJ4N8o8gjwChqozXb5KBdSQcc21g/245NO2K628Iy99JuwwRuwyfWyh4CwGL2IxbzDnsba5HlTAMkUlk+NZc0PeA+BrIsenSkf50/QBwSdww1Pu+ly499utva/9z9kNwGy/wPfNttihhGDQIEIZzt4dtLgd5PcgdskGQZ8Mi/Hm+owmCPRSbDRbJKARfoMI95gfMNwtoK2Form/QBucdD8EfQH4EpHILv3S85tEOvsJdMBhZv6Z5gu7WEvE2SDEDyTVswU/NhWxbwtAUEH6wDUy+FOSlIKfadLW/VpANCn+jrX9B5lWjFl6WWyQTXgfWKeAjVLjL/ITDzAKCEoZCIJinDD/+AAR3gvgoSJluFskM2sH2HUU1szmBSPu478/JDIKfdgvTbqe0tkkzENzAWznHXMTEEoaGQLi4HQ78Ksj/C2p71x3P1pTZzofGfQhvqTZAN9AJrK1tbwJravvrgK5azNX9dUWYSdIRQUozh4SHU913bhuSLzOGX5irmDXc4w3DFISfbgFiIURHV9MojKW/QJPcsZanL8GzX8C5hRFE6yFcD3otRMsgeh7ClyH8J4SrIHoD9Bro6qyez3qgQkArCoVkDAHjUYwnYBIBUwiYRsAMFJuhaEPRTkCFAJHYv5Clv6K+r0KSrWNOpuz3ZMbC51DcJuZbYC9hsIFwza6gL4NoN7fw+/QupwHQQCdZddMQroNoNURPQPgg6Ceg+3nQS+GZ5YJiH7qZzngqbIdkOhVmongHinejmErAWAIquTvusiT3JeUyJQPSAfw3a7hQHE9nCYM7WiRh54MgvAz0VunCn0cz5Emr6N0MhJ0QrYDoftB3QfgIrH9M8MjqIbtv+xHQxUwUO6PYE8X+KKahGEeAStQasgEgkjTDQK1QX6cRXIThdHEEq0sYBoDwYAWWfRKib4MZlw5AxEDTqdG0bBcA0TqIXoDoFtC/gbV/EdyzatiamPsRUOHtVJhNhblI3oViEgHKy4RKy4LtEe7AA4Iks0lwM4bPig/yUglDLwg3tYM+tbZV0k2jpHyjJCiSxigPgKATwuerAES3QHS/4OaNblikAcFcZqI4AMlcAnZHMYGgFgBNM5V8/Qfbe5noP/TUP4Tgo+JAntjkYTDcNQY6zgZ9YnXscSMQZMlGtYKgQa+E6G4Ir4aOOwU3rWGEFAOSY9iJVo5EMg/FTBQtmf0IHxCUFwg9GmIJAUeJ9/LXTRYGw+3jofs8MJ/oP/CmZzMeplIaCF7aIaqZQdfChqsEVz3BCC/mWMYxhkNRnIDi3QS0o2qRKVfqt8wAhy8Q9ZEmwTHsx31DNaJODB0It04C9SPQ8/3MoiwOs7dmiEA/B9Fl0HWV4JLlbGLFzKOFrZiD4osE7ItktNOx9knz9neibdtyJB9nL347FECIoQHh9vGgLqmCYAoEwXuEmga9DKJFsP4ywUWvsIkXcwIVJvF+JCfXIlLtmUFQHjCkA/EaAUeKPbhnxMNg+NM46Dof9Mft5lBen8ErgmQgehX05dB5keB7/6As/Z/PSbQynkNp4atIdkfV9Vv4hliTzKN0cwkEL6GYL3bj3hELg+E3o2H098CcMBAA4wGAacA8CteCvhHEtwVn/L0U+5Rn9TXGM4GPIjkZyVt7e7obgcEHhD4gliGZK97JQyMOhmo/QvhNMKf0OcvGA4asKRgDHGZd7RXWC6Dzl4Izw1LUMzy3bzMDxQICjkTRnjjnUp6+BjsIPftP08LBYhbPjRgYqj3LH/wcmO+DDuwANAKDE4Q3wFwF684RfP2lUrRzPr+LqbCBuSjOQPE2VK2PwqdHOq926APiHhRzxQ6s2OhhqE7l+JcPgrgazJhk08jk1AoDHGYN0eNVLfT6bwRnlusVFPEsz2crWvgGAcegGOXVz5A9olSVStUPiJ8zhk+LLZs76cAgwPD4bhAthmiqn5/gA0RSx1vYCdENoE8TnFg6yM3QEq18FMkCJNv19k34RpOy+A19GsIgOJdlnC7mNG8OWNFcEJ6dCht+DXpXf7PIBwhnROk10N+AsZcK5neVotvEZ3s576CFHxKwNxLlBUNWEPqbSxsQfIptuUaI5vRBiOaB8GA7jF0E+qg+4faFISsQkQH9GIRfEHzirlJUBwmIq5lMC2ehOA5FW2KOUh4QBg4tXYnkELEVDzTjemRzQDASJn4J5Dz7lamMdyHxPA3yTlAfLkEY3CKOZSUv80UkZyB5I5ew26fHt4OkmIzgJ+bV5kxH06Rhny8cAPK06nhlm1clPO6KV1MSgrwO5NGCo58txXMIgPgiG/grCxGchOTV1MemUh6zcoLQE87dBcV3jaFl2JtJhqVbgrwLzCy3aZSlw81pGnXXcopOEczvKMVyGJhNt3EIkh+j2DZRoPOYSf3NpYiAzzCORUXmMMliQTAVqJwLalZygFmQX59KQG4AdR50fbkEYRhpiQNZjORjSJ5FYgqNLPUXJYXgf1jDTsPYTHrtGFBHu+cOSRsB4nVX1oH4FnScLpi/vhTBYQbE/tyN4WgUj6NiQLh6q33Npv7t6RQCLjCG0cPOTDL8cxroe6tjl02CWZQUUTIpppHeANHZIM4WzCnTKoazyXQ/uyK4DslMJKKBHuiBnXD9X79Che8VEW4VxYBgAlh9OZhj7RAYTxCiBP8h6gJzLrx8Vk8fgjGm7FkeIgXgPCBE7zHzAO8h4OcopjtGuKXHVUTKvmAVitlCND5stCAY3vww6BuAYKDwpznNPs6zCUFfDOu+IpjTO72IMaZrOFz/EP32UH7eCwYA8zD7U+FqJFvk6ltwOdK1VyPACBZLmCsEG4ZUGAxvbAbqPjDb24U/i3awwRLpaup15/GCvfuNRzbGrB3EaxcFnCMG+f8U9d+8/3scBgDzGEehuATFuLpVRf1iKo75XI3oe9WgNRzfKrhyyGAwGAFd3wR9mlsT2LSEC4q4mRSZ6voL+kjBbgOyFo0xqxoQNNEEYRVDCEqzrj9TnRUGEDzDSQjO7ddT7asZ7NogLllLu+A940T+7NYGYejcEeR91XmOkkwjHy1h1Q7PAIcKdnza+vvGrMhwTWIQIRGD9Ps+5zb7+0TMTJL2Z0XAUhYScGJvLpMtUzVhlu8ebaCFs4n9zhj4Wl5nWuQHwQTA9aCPSIYgyTxKNJlWgT5G8LZbnf/BmJcyPsyGH3ZOYRMb0ffn+S6RBgOAWck4urgBwfv7RZg8zCPTZxINkKq6/Y4QZk8S/G1QYejGHCzhJoEJql+SVytY07i7QP8nzDgvqYfRGLM06cEU8XBzfGeW80WD/6VZv5P7s0kwAJgXmEkri1Fs7wVB7dvi2iDBAP/VJDhCiOxz3IqcWqHSBXdK2Lsn3bz6ZYb8TrSp9xOuh67jBDskRgeMMUsyCE8RIOQVHFHQ8WYJtiiqLg0GAPMah1LhWiRjXH5CzEFOBaFOokIFcyaJ7LNr5IKhE3OogZskyP5T9Zve1+waofczS2D9+wQzXki9qcY8nvGBNyqAIid8RQleoYLr8epzLDsMBsEazkVwci21YgAIBn8QLFAsngqHZ9UOIo9WWAt3ippWsK9lUa8pMmmItaCPFWzxS6//YswjOYRBDJJgFfm5Is91fdanEUl69YYBwKxiAi3cgmLPHv/B5SBnAaFWFxrYf2vBH7LIdua1tt6EA4G96gEwdSBU90Vd0pOqQVF/po69CqqhYnE5XPirTK5L9pasaIHJKrB5fyuPgMbPNY738f363zEpdfWf92+FJ7LarOVkJL9GMdFYTKKsENTVBxr+0xj+KAS6KZrBYNQquF3AHJ8lhWXMfErWCtHTEOwnGOM9u50x5r6M2iDPa14zwxe0PN8lMv5n399Nq3Mdr3egMy2MbgxnaTjVgGoEBEtdGMLsGYL7m6IZVsBeAvZ1aYX6OtnvmKgBIeu0RD+tsAHU1wXtWad57M7Q0mcRwqyCluXz3oLlccz3901KnU+jaSz31hQQmfyuhkM07OobezR+YATAfxjDMb79Dt4wLMBIAyebatcIWACoh8JlOonavug7y4BcDC035orwNi6kaQLrC1bS7+eBQWT8ftt7E9tPOm6DxniYTA0VIVjdaTjDwPUaRukcELhMJgMffgpmAU8WaiYtx+xk4CEBLVmWDXavvdnrZP8T5P4C8UhmZ96YW5uh6nEvKisyAiRShDftu/N+n0i5bt/PCs//Vu9Aq+zPEdUB1xo4Uldbx8TwqQcEvceBC94mOKlQzRDCcS4Q4k2MTNAUfa8CAVohFuUBIaYZsgp9ViH0FTAfOLK+9xXGrIIsPZzjNIe5kKxfIYjWGM6MYH8NkzxCp17mUm37yNOG03YQvFkIDC9h2rvhWN81to0HJLXXVzfADxq4j905W/9mtqJ5W9ws/62+Tub8j9oRZRIpPoMrgtQQGGMFj64wXGPgRBPTDnm0Qt02eT0cAVyR9h+8YsKdVQdnqyyrISettRlVNY0O4ZLRiBcbhCFtCxPeh3Vbt2PftnUn1MUuc0Bd5FnnM0OCsfVaWupMhjrXhuUVhzOdq2j4voaVPstP+ixNWXdxn1xg0mU9lWaDEc/AzQIOyboAfXK4lZcE7DYW8Vrem2eM+VmDtrpPnSiotZc5fzvtPJnhs83aeq8tj8/QzwoxLNTwHz3awaYRyKYZalY+79xN8HhDZtKTsKWAA7LecekwnUxfJ+MVExsAoVa6ChTWLALo+9n649rzvKy32uQUXhP7vUb6pgrzH9bDjyvwSQMTsoRUiYFC/+OBgY8AZzRkJkUwV0OrzzKBOkF9xepWGbikgHvXnWNLM3fClM/4mlKhxUxy1UU5N98pyxOTwVLMpbgJFD9WqKk0U7Akgv8XgklamNhncYLYNv96g8qtGQxGPArzohzOsnBrBiPguimIZQXAEGYMS+Zp/X1b86Tv0I46mxbQHorWdcttXUDxvlBivyFjTrUcaMoPiDzFHehCx5ILuEDDRzSMzuEwD6C49vkdtoJdgQdzwfAIvEXAnjQgMZantl7CTwu6b90Z4+CNCr/M4A+k1aWZTtKjnZEOgdcOv0J71NmAMI4IeVNMpbfAI0/CHzUcaHJA4NgEcFRuGCI4TEDFN/aX9LTqDNS/bE1h63R1eQiqLxTS47hO+WzSucIhpGk2vchwjsvfMAxMLtYJmiEOhImBEBd+U6R2EALzqOEKA3M0VBqBIGbXfcgYTnGlZyTAYISBg4yj6ZUWMGwSEXtaoYFFAqEL1AxZW+8iIi8yQ4svE0wXFxw6BRjpMImwdO2kQU0KEMLiI8TrmjHlzk0hvGxgWh4AtCUWbGDGHbA98HQmGB6EURHs49IEJqWu3siseyKvATcWeMO6M9jwPnUyIxB4tPARfhkrLnPIODSCsfgCBnvOpIx1ssXNJCyaAIcTLYrWBLays6DjL4ZrIjiVujBr1s6Q2DGp4f2ZYeiCvYBxcS3gep8ERt3+r3dAvFHgPQubHGOXnsddLbm27MuYA+0j+PH38dBo/HbLmBYwlscU1xRxhU6d7yoHwzyymOk3aviSgVG+ppAjtFoPyYHAhZlgiOB9OLSASdEIWJ4w0CXgfwu+X12DJPhJpk7asA6RAIF2QCUTQLAlBUsGZs9Lh2kUb8fiZpELgDgEJmYuFQ7GUnhoK3gW2NnDH3Bpg/j+fosNrYdYZt8LXP5CBPvkyTwz7qZ6JVD0yjrdBdr5WTSCfbRr8nHtcaxeqHVCJ5kruiMtoU8bFDJmHtnqfGWsaZphviD6g+EXGnbq6ZHGw0ewmUx1x8dreBfwZy8YfgPtGnbzScK33X2Hl7p4d8TaYQCDSGjls9S5nF9bK+8KXwrHvq7TDjZzxWYyxf2GtDoXEMbS2rvqbB1yhZYQfmXgq9TGOvjAQLp22NsbBgF7aGhzAeBrMtVHkTTc0YTGo5viHN1GWn7XexcIwmLX21p9bdEA2qEdbEJvYvuqTm6wdNTVD04nBqgLCNFkLfFwBK8Ab9X+plCaQz0bWBj/IVc6xt6+XeEJ3d/1+QbrgN81CQafbFVbmoUt/SIpJSNL+kVaykZStmpIcpqGLRlYk57x6lp02zXs2KfjtynaoL7MEYQh3OFzM9Lq627WXrYs1sChmt5ta/mT6lL8i0dnI14dIs2Q1fzx0R6S9AF9OsEk0rFzjeO4TQu4Wn1jCY/aepJtDaC0aAzfKGbTp/XX8DsDx9fGNXs50ZCYXLX5DJgGPJ8CgxEadrGZRXFV4vIbLHD8sUn3qSgYpKf5IzPAIRMAS1q+Ly26Y1KO9dQpiwAnJWbGv98XjKZrhxDuN9XIYeDjJJMCRrWTm11SYVgMY7urOUkDhD5tigTHFBKhhD81EYYsznCaRiAmnHgKc2Spiwusy4GWFqfZJuz1Ah73H+LPXaaYwRY3sZ+fEAfL1gs9KCAAHA7P/gKWAzOSWn0PjVD/fhfgpkQYumFHXXcT07SCSIFBQOf6hOSogmDI6+SKlNbbt+X3eXUtyJTU0tvMJOlwklXsNa01t2mGJCjSvqdpUAiBud5wXxyGJMHXjj9WV79zqs/QBbu4Jh8yDhhSzKkXDod/DLKZJGksWlSE8MsEPyIu7PHlOXQCLEmmT1aNYNMOtkiWtsDBYJpLEdwr4JiehjpN8E1CzLd2MekwGNhe4zcHYhIMddri73X9JUMBQ5L5k0X4XX6AzZySHr6By0ewQSBJnxVFZdQEceWuU4AwGeSt8GLgqbAaYWvJoQUG/LkQZi4wyDPrpp8MLM7KdNdIDiyhA+k4Vvu8MSSPOx0EMylJ+NPMpEY1RBoItgVeXVDUH7OdB96ZzE67P2lGwqwTBBStGZ6Oqs/bG4YUWtu2hq2AF50waJhuPIWfBGh07zX4zWaWs3Q5hNRX+Mkh8FkiQ2mtv80kskWNkjrS6h+FItuQTNss0EkAJGmKppaPwUs/gVVQXQTdVz3phJsgYXoiDBFMT1oYIGl+QYs5FZpY+KoJmsFX+H3Mn0Yd4qSl+RTJS3271rGJawRXNoJ0+JQueUlacUg6zCWRYno1rwhMZFgCbJOh9U/09HUVht9bYfgpZoKGcSIh3ECC1rDMQBUKeKGJtygkexKdzOEwZzWFbFBoS51J0BhJGkHG4LBFler3SXhUrnTzeJdRnghV0Z1vzxmYYzyFPUkl1gh/i9OB7obNlaNHsSeYnhGGtR9vTs9zWj9DHi2RxfxpxDeIw5CkGWy+gcrQ+vtGkbAIvw8Ag6ohwioM/Xq9jR0aLxvRwBQnDBo2czUhUcpdtMFgmhdSTfIZfNIlmgmDzFCXpBHix5VFOxiHlqjvc3A5uq7Hlzbm2qSEe5vZ8r0o+oIJia2+cUel6vc3S4Jhiklu6Z130mZKGXi9yTB0F+An5DGRfPyEtDqfTVn6FOJ1PmaRSdEMPhDYhH9Qi4FV2gMGl3awhNDcmiGEKfEBtFlAIBaSYOhgyGMa5QmRpqxl3/BmUuqUBYI0c8k42jkXCPFxGTLFRGvmw14t6uTcpAh82p/SSTAIGOPzJcLjeA2mfzbfjMzkM8iMmsKnTnn6DMpyXFmO+8IQd55VgqaoN5mIWb1xS9g2e0fS4J9BC7GGsEp6wpCmHWplTJJmaBd+Qu7llQ0CDF0ZQqZJHWl5o0eupDtf/yAeMq2HQqXAYNMIqgEHuh4KYemDiHcADnrnWxesrtRk3PeHUhr3dicMUW0xEtedynqlBlYPIzMpr/BnjRjZWvk0bRDV7RuH8yxjEOAAIwkSm0kU1WkL11iMLDO0NLO8GTb4OzEbstUJgwEV75ExBf3wRghDI0BozwhRvIdZxLSFzVwyjqhSHJKefeVW3APg0HVQRHV19Vt8xr1B8xnWgWmluNFEJnZv4tGksUX2kWhYOwxgaDSvKClalOQfiDqhttW5IDEOAJKiS1giTGmCqiymURIIrmGgg1baYW036AK/MtFnKKwIiv3X1t8Q1WkqjTHC0cq6Jgo3jtbYNnAm3hoL0meOiMcZXIm9NoESObp00pa50ikhU+FpGhEDgsEGImrid8d9ho4Cv1tSS6rayMugjPMti5eZNNrkG6vhKmuSzKRQDAXuZSmLR+kEERT0XcISfY3D0FWUM1w7f0L5CMtSYBnXXR3Mn1lVO2zPDUkwrDN+Qp56Tm2bVD6/shQYLZkga2aSaACCumPrUn2GRoCIeYQlDGUprIQwUYIUHoIO9lXfY7La4YQhhBW+wWPjAYOwZMGWpSwNRDImRHUwJAFhG3IQ1xgGVjhhMLAi/gU6Iwyx8aglDGUprGiYSCyaJNyC7mM2rUjyGV7Pkh/uMcRu2/IRlqWo0gXbKA8YpKf/EB9iIGM+w2tR3fq78Vlssy5MHMLoT2Gmlo+xLAVphukhiLwLZlvqVjhh+AFitYY3fRahTlsgvbYFErYrH2NZCnKgp4f5hH7Ae1PdX5qoUSJ4rj4RxWf6b9vc6rX9IIS3lo+xLAV4z6Jngrs0INJAqJua/jmnz0DfCbu6/ACT7DDH/QcFvK18kmVptHwAtg5hou/M8Lb38c465QNDmmOcYWo/AexYPsqyNFoE7BBCRVqE3DXLQdLMkEDnLHg5EYYIluTQAE5IDOwCRjRxvtWybBJWErM0BMYTBkHyFKkCnqmfZ9XlM/zdZmuZDL5DbNvusDLEWpbGI0l7hSDzLGOlLT5DCI/Gf8M28fDjom4kU5oWSBsIq6EtgD1o7sx6ZRnhznMEe9q0QNos8HFtIfrkcgAMAzTD1bBGw1JfLZAUau2JKEXwr+UTLUvesi/MDGHLyDOSpD00h4G/p2oGEEZj/m5is3H7agTHvIezy0dalrwlgncLaPFYO3CABnDUmdACg3T8+AO2tVKT1lpN6X/Yef+yJ7os+WF4r65aGF5ZETZZjdW9djss84KhG+7J28XtOK9dwHvLx1qWHP5CEMH7fHqeM6QN3YsYmINqhWEtPKih00VXGomWLdDwvvLJliVr2RXeFcEWEf5awOXL1smndSlmKwy3w7oIHtIeP5ghxHrIOzCjy8dbliwlhA9G0JY3Mc8GRwj3eMNQdaL5g2/Sk6c3P3k0zCkfb1kymEhKw9zIkqmqM8hkTDu88Qo8nAEGCOGOPFohwZxq0fDh8gmXxbfsALtpmOHrC6TJaO393c+I/hMBpMKwEu4Na+ncOoXKDI7LwbtjxpePuSw+RcMRcRMpTdZ0SuPcDbe5fs8Jw19gvYY/pNlfaZGlWBRg8xCOKB9zWdLKFMOYCI6JEgbzJDXEDi2hu+D2zDCAMBH8JgsAOj36FETwKTCyfNxlSSqtcHgEW2VxmD3k89m/1RJRM8IAGm7W0K09QlgZPP3dZsFu5eMuS4LjLDQcF0El7xBPW8Mcwi8R7klfEmH4AywN4b5GQqqWPzVKw/HlEy+L00SCd4YwO0tOXJK5VNuMgeuSfjfFXBFGww05+hSSHBsRwVFvwUwrH3tZbCWEz2to90nP9oGkduzpR+GvDcAAG+AXEWxw+QRpuUsOWidqOKF87GWJl7GG7Q0cmda3kLUhDuF6RPKM9qkw/BWWR/Bbn8hRBnNKRnDcVMzm5eMvS393gc9GMD7J1HbJXEJiXmjg2rTf9ojqCKPhp0k/6mO3Weq2BP69fPxl6Y0gGWaE8DENIq1T1wWItoNy7zPwZAEwwKuwOISXfbSDT1Jf7ZjUcMIkzDalGJSl5it8ScPkLAN1fML7ISyyZanmgmE5Yp2Gq3WCNvDJUbJc2FQNXyzFoCwYdtaxTra0ccyefWAr18KNPn9B+v9XroigK01FaT8I6n2HT7Zj3llKwyYNggKxwMDEPONmUhroa/8peLNQGJ6AJzQsTnJefHunLZGlBWCCUio21aIOBnUoKEHNntGe1oUmscOtsxsu9P0XGdIihI5gYQRRXtPIEXUSGg5RZc7SpqoVJkDlG6BG1a8KbGpQRBmgsIDxv6/DU02AAZ6D+wz83icnJCkcZoGj1cBZYLYopWNTK2O/AuodVQjiW34oNITdcF5S+kVDMICIumGhri547kWo9gREw0wEXy+T+DYlrTD2X0D9OyhVD8DANePFgImw00x0Dbe/CQ9m+TuZBe8luE3DvQlEeneU9E4PLgCFRPEJWvhgKSWbAgjjJ0Dr90BN6A9B0tYfioSGOOyC//EJpzYEA4juLjgnimmHtE4Q2zFDrCFQjEbxHdpMuabDyPYTBIz6L1D/Ul2izaUVlONV9E536rBEbuuEe7P+rVwmyco67ZBmFrmAQFiuu7rNpMK3wbSWUjNSy9aHgPpcn3kkGQiESgGiCoVF3sKoqhWiQYEBRHcEZ2sIPXNDel+NsFxb/2sXKI5gIp+vnV2WEaUVtpkJwXmgxgzUADIHEH1Q1GRscQj35flruZ3VVXB7BL/yBaFXG7iut399CwGnMYWDSukZSSDMHAejLoRg5sBWUGY0ldQALWGgw8DpebRCQzCACDV8vX4NOBcIA7SBdJpI9dtEAs5nK7NDKUUjwk8IIPgmyAP6/ATpEGwfEGzniB9hmUN1EGCADngihPNdDnSvg5x0HQp3IxEwg4DL2MJMKaVpY3eYdzkR1Akglbt1lwnvU02lpWC+k6VfoVAYQJgNcF4ES5wmkXQArxLuRX//YTaj+RGzzNhSqjbWsut8kN8A1ebWCK79JEHq/R4NagGi/1K2gwwDgHhdwyk9znSiNvABYOB9kUg+BJzDNNNWCtbGphXesz+o70MwLtlOTmo1U0Ott0LndQ1LckFXHACXIzi2F2TXqxwQCPAAH5B0ITmXiLN4XHSVUrYxgPCv7wHxc9DTk3NLezbj2K9/b2L7ehVEsxEdTzT6dwtKfRAhcBqSl1Odf5ViMrn8CEULklNo49Qyw3VjAGHfXaHyM1Bvdbf8MqN2sGkJvgUdTxYixYXegIo5DsllCIIBrb5oSCvUb+tQnMMazi01xHAF4YB3g74czNtBC/dQMJOiHVzaovf1blhxKIK1ww8GTIVWfoLiY06hrzebVAoc7kDDBiQ/IOK/+ZNYX0rfcALhA/uB/gmY6RAJP/PIx1SKgxCtAPZHvPpoUX+9+B7edrMlkruQzLICIHNuAzVlN4pL0XyNu0VHKYXDAYRDDwF+DHpbv6kj8voMOoLoM7B8USOh1Cb5DHVlnViO5CQk65w97Ao/MzKpj0JSQXICLVzCB8p+iKGFAImZ+zGoLAK1rZ8vkGYPi6Rj18Lyq4oEoTmaoXp3JJM4Fck3kUjvaJJKMKHc7zWKu9B8hlvFs6VkDrpZ1ArjvwD6NIjGJw/Vr2/lXT6DTvIRAP13iA5ELHul6EtpYiKcaWdzfoLkI4l+gfBsQJL7JgySxwj4Ar8Qd5USOlggHD0Z1FkQHgemLXlmrSjFUfYymVZCeAji+QeacTnNzQrd3ExF8WsUu2aKIPmAYDefXkPyDeBSbigjTc0F4VPvgOiHoPeGSPkBkAWIATBsAP0peOqaos2jwYEBYEuzGwGLUUzNBYMrf8vdMdmJ4gYqnMbl4h+l1BYNwQkV4KNgFkC0XTV0GnkKvy8QA+oMROfCE6cjCJt1ac0fb7ycvwInIOjI5E8lgZD8mTYkx2JYzPHm4HJMdZEgnLgVVH4E6kKQ06rZp42qea8OqGuhclYzQRgczdDjUM/gc0i+j6x1yCkPLZElodFuOr1BwFUYzuFi8VIpzY1ogzFzITod9NtBS/c8FT7h1DTtUP8+ugfMXMTDK5p9mYM4ksxUmMU3UZyCROTqgfaBYWDqh0bxBJIFPMIvuVuEpXRneWxfmQFqAegjIWpPXrfJd1pqb4f5adAHIx58bjAudXCHVU41o5nMQhSfyeQ7pCU7puVBVffXIrkRwXf4rvhbKeVpEHxtPLR+FPTJEL21rzc5bUFknxU80mDQgFkGG+Yi/vLQYF3y4I8xnmnGMZrzkXy8KTAkgaEwKF5FcgVwId8qHeyBEPygFToOheiroHcHXUmd8N1r33iYT72pFi9CdBTivnsH89KHZsD97mY8cAmS+Q050T6v9jEjmoBlKBbRymWcIl4pIbi4Ah3vh+hkiPasmkQ+k/7oHBoicXsNuo9E/PGewb4FQzf7xI5mEmP4ESoBCIV/eobKAEPfFqF4DsllGH7G18TLmx4EC1pg8hzQXwS9L0Sjk9dj8lkZPC8I0XKIPga/u7NZfQnDE4YeDdHK91Ac3+tUZ8tPyqYVJBBYz4kI+AeKa5FcyYniiZEPwcXjQR4K0Qmg96g5xyLdJEozl9I63FwdbdEyMMcgbrt3qG7J0M9LtJ8Zg+FsJCfWhnjm8x3ShtbWw+AaVBSgkbyO4ncEXI3mTv6PWDOCtICE7XcCcySE80HPgKjFb7W+PP5CUii1X27SEgiPQtz616G8PcNjkq7dTTvjORXJqSgqDadlpDvS/evsgHQS8DyKW2jhFlq5n8PFuo0PAAT8aiZ0HwDhXAh3Bz0BIpm+IJSPv5AlH8m6PQTRsYibnxzqWzV8Zqzb3VSYxCeRfJuAcdbsVd/UjCwgpG8GxToULxBwCxVuw/Agh4lVwxeAuwII3w7de4M+AqJ3gZ4EofJbB8d3xbQsZpJthFt0M2z4LOKWYdEhOsymbzSSgzkIyWUotvLWCD490kEKIGlb0AtGJ4oVVHgAyV0EPIzgcfYZQjjMXQGMnQnrdwG9J0RzQE+DaFwVgKzLimfRCLk62zToi8B8HXHDG8NF+obnXKaHm10RXIZit960DZXDf0gPsbocahsItjpd0xpvEPAEAQ8geBLJc7SzlO1ZjhBRsYL/7HhgO+icDnp7CN8B+t0Qbg7hWIgq/QU1xHsxYnyXFvTRDM76DogWwMsXIe7uHE5iN3wn9j3EbMEoFqI4ul+kKW9vdJpjbRN86YAhSAQmQtFJhXW1Xu9lKJ6nhZeR/JOAVSjeoMIaJJ0ERFRYD90VoLWaDt01ttqqMx7CSRBOgXAaRDMg2gx0G4TtNcEX/YU6JB8MWcOoefoVomXQ/Tnovg1xQzTcRG54z3J9mGlnNCchOR3F6NwzEPoAoRJ8i8BTawQJwFToW5kpIKyFc6PauRFSi5pTK6A7AK2qYEQJQu1zLKtfkBY9ytvrHP2u6h9c/dRwFbfhnd58s1iH5rso/g3BEufEAj4Tl9XXxetdm8859ZuruRH93guggqANwWgEo4FxwFhgNNAOoqWGTsIX2Y75bDLjcdeNTdvvPb8TxELonDucQRj+MADcICJ+Jm5Fsz+CnyHQqc8r6bnLjLLhC4DrOwtX2PEfLwqSLDcnDYLeumdBzoOnTkVcs2q4i9rGM/DlavEihk8j+TSCV1PHhAjPBi1N0PPIkI+si0aAiJ+T96JkxgtMaoX6HYuqM1hEcxAX3oy4e6NIm9+4RoFdITq5lJ8C+yC4FkHopamFBxBpWiSTICfIrMj6wSwfEgVtPjfK2co8A+IYWH084kcbVVbwRjgkUhguFktQfALDUcDTTm2Q10zOoiFkgq8hizCZ6h+Va8ur2ijoJklArgfxQzD7IBZej7iic2OTrI13fPD5YgMXiF8QsTdwLoI1drO1yT7C8G44CtYYTrV7N5gD4ZmTEd/daNPhN/7B8ueLFYzmv4DZtZFsUaYGrSi/YVgIfpKN53uhMov2WArmk9BxKOJb9wzHvoOR08+QtZxkWpnAgQScgWSP1MxWnzEPPkl+efKeBnwuS85QWkeZz3FXz7JXZ9oqiC6B6DzEaa+OFPEZmUvLftmMZhKHIvkqkj1S0zTyJPVlzW+SRcGgyZdg10iaRVQHgV4E0fnQ8Q/EmXokic3IXmd5gWlnFIdR4WQk70HV0jp8YZAFgWFLEvSGIQ0Cn9Zfe9QlQrASwsthwwUjEYJNA4Y+KNqYyD4oTkJyUG0VIP90jaxp4ElawAmUT1pEoxAknWeFYQmYS2HdlfDF1xDCjGQx2TRg6IMiYHN2pMKngXkETE1cilfGWnJJtoFCSblNMg0G3YAfkPZdtvN684i6Qd9dNYc6foX4/Caz9sWmBUNvMYLzGM84DiPgEyj27R1h55vlakv/lp5aIBWGNBB8tUgmv2AZRD8HcSU8uQRx5iY32domCkNdud4oupmOZB6KI1G8C4nM5UNk9SlkVhiS6vOkYEcrILoFzHVQ+T3i8HWbsiiUMNSXu0zASmZR4d+QHFwbXFTJPAVNnjqpG2z5faZ7jAD9IoR3grkR1t4B89aOdF+ghKFhS8pIbmIKo9gfwfuRzEExDYXIPGCoKTB4j0/ugOjPYG6H7ttg1WMwv3so5iUqYRhJ5tQUtqXCbCSzUeyF5O0oWgoBIhEG7esgG9DLQd8P0b1g7oHoYdizs2z9SxiaqTkES2llFbNQ7ETAzkh2RDKzpkHGZAJEag8N0HssAv0yRM+Bfgq6HwPzKISPwo0rR2o/QAnDxmpiLWMqMJ1WtgamoJiMYjKSyQSMQjIGhULQhqINpaPqYHltIFoLUSdEq6sdXtEK0K9D9AqYpRAtQ2xXrn9dlrKUpSxlKUtZylKWwSj/HyHl/ePsagXCAAAAAElFTkSuQmCC)",height:"195px",width:"195px"},"ADVMARK1, ADVMARK2":{background:xui.browser.ie6?null:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAK3RFWHRDcmVhdGlvbiBUaW1lAHZyIDE0IGp1bCAyMDA2IDEzOjMxOjIzICswMTAwHvJDZwAAAAd0SU1FB9YHDgsgJYiZ4bUAAAAJcEhZcwAALiIAAC4iAari3ZIAAAAEZ0FNQQAAsY8L/GEFAAAB5ElEQVR42q2Tz0sqURTH72Qq4mASSAoSIfSDdCEI8qJFLXSjLYSQNoGLINrI8/0ZD9q0KnDlKkIMebmP9xZRCEEiLQLBiMiNJDYq/Zg573vpCkM6CdGBD3Pn3OvXe77nDGPfENKwJBHx/CxYAtNAAVfgXJKk7khVCCyCP6ALVKAJXkEdbINxw5tgM4HHPphSFEUql8usXq8zWZZZKBRiPp+PH3sBx2Br4FbiBg+aplGxWKRgMPiMH1+YTKZDq9V64na7G+l0mprNJo7RG/g94IEoQSsUCuRyue6QToIJYAJWMA/Bo2QySZ1Ohws9gZBeZI570Gq1yO/395BKGJg+ZbFYznK5HAmf9vQiKW5iqVQim832Fyn5E+83Y7EYieAdY2Nig7dRqtVqrNfr3YiWGsVltVrtr2f0IrwEZrfbGeqWhQ9GMeFwOPprRS9SAWo4HGZOp/MH1l4DAS6+HolE+u9Xek9kcK+qKqVSKUL/s0hPDhFY83g8j5VKhcQg7nxs80/w0mg0KB6Pa2az+RTpDbDA3sd/lwvk8/l+Z7iS/FHEAor8H9rtNmWzWYpGo+T1eikQCFAmkyFxAy7AJ255aMHYcIID8d1oNBi8hGuwwkYFDq0CPlG3YsTb4B/4BRwjBb4S/wGzT16tu5THiAAAAABJRU5ErkJggg==)",height:"16px",margin:"-8px 0 0 -8px",overflow:"hidden",width:"16px"},".xui-nodatauri ADVCLR":{background:xui.browser.ie6?null:xui.UI.$oldBg("clrbg.png","no-repeat left top"),_filter:xui.UI.$ieOldBg("clrbg.png"),"-ms-filter":xui.browser.ie8?xui.UI.$ieOldBg("clrbg.png"):null},".xui-nodatauri ADVWHEEL":{background:xui.browser.ie6?null:xui.UI.$oldBg("clr.png","no-repeat left top"),_filter:xui.UI.$ieOldBg("clr.png"),"-ms-filter":xui.browser.ie8?xui.UI.$ieOldBg("clr.png"):null},".xui-nodatauri ADVMARK1, .xui-nodatauri ADVMARK2":{background:xui.browser.ie6?null:xui.UI.$oldBg("picker.png","no-repeat left top"),_filter:xui.UI.$ieOldBg("picker.png"),"-ms-filter":xui.browser.ie8?xui.UI.$ieOldBg("picker.png"):null},"LIST span":{overflow:"hidden",cursor:"pointer",margin:"0 -1px -1px 0",display:xui.$inlineBlock,"font-size":"1.18em"},TRANS:{position:"absolute",top:".25em",left:"0",display:xui.$inlineBlock,cursor:"pointer"},SET:{position:"absolute",display:"none",top:".125em",right:"2.5em"},TOGGLE:{position:"absolute",right:".5em",top:"0.25em",display:xui.$inlineBlock,cursor:"default"}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",SET:"SET",TRANS:"TRANS",TOGGLE:"TOGGLE"},ClickEffected:{CLOSE:"CLOSE",SET:"SET",TRANS:"TRANS",TOGGLE:"TOGGLE"},KEY:{onClick:function(){return!1}},SC:{onMouseover:function(e,t,i){e.box._setTempUI(e,e.getSubId(i))},onClick:function(e,t,i){var r=e.getSubId(i);return e.boxing()._setCtrlValue(e.$tempValue=r,!1),e.box._vC(e),e.properties.advance||e.boxing().setUIValue(r,!0,null,"click"),!1},onDblclick:function(e,t,i){var r=e.getSubId(i);return e.boxing()._setCtrlValue(e.$tempValue=r,!1),e.box._vC(e),e.boxing().setUIValue(r,!0,null,"dblclick"),!1}},LIST:{onMouseout:function(e,t,i){e.box._updateDftTip(e)}},SET:{onClick:function(e,t,i){e.box._vC(e),e.boxing().setUIValue(e.$tempValue,!0,null,"setbtn")}},TRANS:{onClick:function(e,t,i){e.box._vC(e),e.boxing().setUIValue(e.$tempValue="transparent",!0,null,"transbtn")}},CANCEL:{onClick:function(e,t,i){e.getSubNode("CLOSE").onClick(!0)}},TOGGLE:{onClick:function(e,t,i){e.boxing().setAdvance(!e.properties.advance)}},R:{beforeMousedown:function(e,t,i){e.box._dd1(e,t,i)},onDrag:function(e,t,i){e.box._dd2(e,t,i,0)},onDragstop:function(e,t,i){e.box._dd3(e,t,i,0)}},G:{beforeMousedown:function(e,t,i){e.box._dd1(e,t,i)},onDrag:function(e,t,i){e.box._dd2(e,t,i,1)},onDragstop:function(e,t,i){e.box._dd3(e,t,i,1)}},B:{beforeMousedown:function(e,t,i){e.box._dd1(e,t,i)},onDrag:function(e,t,i){e.box._dd2(e,t,i,2)},onDragstop:function(e,t,i){e.box._dd3(e,t,i,2)}},HH:{beforeMousedown:function(e,t,i){e.box._dd1(e,t,i,!0)},onDrag:function(e,t,i){e.box._dd2(e,t,i,0,"hsv1")},onDragstop:function(e,t,i){e.box._dd3(e,t,i,0,!0,"hsv1")}},S:{beforeMousedown:function(e,t,i){e.box._dd1(e,t,i,!0)},onDrag:function(e,t,i){e.box._dd2(e,t,i,1,"hsv2")},onDragstop:function(e,t,i){e.box._dd3(e,t,i,1,!0,"hsv2")}},V:{beforeMousedown:function(e,t,i){e.box._dd1(e,t,i,!0)},onDrag:function(e,t,i){e.box._dd2(e,t,i,2,"hsv2")},onDragstop:function(e,t,i){e.box._dd3(e,t,i,2,!0,"hsv2")}},H:{beforeMousedown:function(e,t,i){e.box._dd1(e,t,i)},onDrag:function(e,t,i){e.box._dd2(e,t,i,0,"hex")},onDragstop:function(e,t,i){e.box._dd3(e,t,i,0)}},E:{beforeMousedown:function(e,t,i){e.box._dd1(e,t,i)},onDrag:function(e,t,i){e.box._dd2(e,t,i,1,"hex")},onDragstop:function(e,t,i){e.box._dd3(e,t,i,1)}},X:{beforeMousedown:function(e,t,i){e.box._dd1(e,t,i)},onDrag:function(e,t,i){e.box._dd2(e,t,i,2,"hex")},onDragstop:function(e,t,i){e.box._dd3(e,t,i,2)}},CLOSE:{onClick:function(e,t,i){var r=e.properties,o=e.boxing();r.disabled||r.readonly||!1!==o.beforeClose(e)&&o.destroy()}},ADVWHEEL:{beforeMousedown:function(e,t,i){var r=e.box;r._prepareAdv(e,t),r._updateClrByPos(e,t,!0),e.getSubNode("ADVMARK1").startDrag(t,{dragType:"none"})}},ADVMARK1:{beforeMousedown:function(e,t,i){var r=e.box;r._prepareAdv(e,t),r._updateClrByPos(e,t,!0),e.getSubNode("ADVMARK1").startDrag(t,{dragType:"none"})},onDrag:function(e,t,i){e.box._updateClrByPos(e,t,!0)},onDragstop:function(e,t,i){e.box._updateValueByPos(e,t)},onDblclick:function(e,t,i){e.box._updateValueByPos(e,t),e.box._vC(e),e.boxing().setUIValue(e.$tempValue,!0,null,"advdblclick")}},ADVCLR:{beforeMousedown:function(e,t,i){var r=e.box;return r._prepareAdv(e,t),r._updateClrByPos(e,t),e.getSubNode("ADVMARK2").startDrag(t,{dragType:"none"}),!1}},ADVMARK2:{beforeMousedown:function(e,t,i){var r=e.box;return r._prepareAdv(e,t),r._updateClrByPos(e,t),e.getSubNode("ADVMARK2").startDrag(t,{dragType:"none"}),!1},onDrag:function(e,t,i){e.box._updateClrByPos(e,t)},onDragstop:function(e,t,i){e.box._updateValueByPos(e,t)},onDblclick:function(e,t,i){e.box._updateValueByPos(e,t),e.box._vC(e),e.boxing().setUIValue(e.$tempValue,!0,null,"adv2dblclick")}}},_vC:function(e){var t=e.properties.$UIvalue==e.$tempValue;e.getSubNode("SET").css("display",t?"none":"block"),e.getSubNode("CAPTION").css("color",t?"#000":"#ff0000")},_prepareData:function(e){var t=arguments.callee.upper.call(this,e),i="display:none";return t.classBar=t.barDisplay?"xui-uibar-top":"xui-uibar-top-s",t.closeDisplay=t.closeBtn?"":i,t.advDispay=t.advance?"":"display:none;",t._transparent=xui.getRes("inline.transparent"),t._set=xui.wrapRes("inline.set"),t},EventHandlers:{beforeClose:function(e,t){}},RenderTrigger:function(){this.$onValueSet=this.$onUIValueSet=function(e,t){this.box._setClrName(this,t)}},_setClrName:function(e,t){var i=e,r="color.LIST.",o=xui.getRes(r+t);o==t?i.$clrN2=i.$clrN=("transparent"==t?"":"#")+t:(i.$clrN=o,i.$clrN2=xui.wrapRes(r+t))},_slist:"FFFFFF,FFFFF0,FFFFE0,FFFF00,FFFAFA,FFFAF0,FFFACD,FFF8DC,FFF5EE,FFF0F5,FFEFD5,FFEBCD,FFE4E1,FFE4C4,FFE4B5,FFDEAD,FFDAB9,FFD700,FFC0CB,FFB6C1,FFA500,FFA07A,FF8C00,FF7F50,FF69B4,FF6347,FF4500,FF1493,FF00FF,FF00FF,FF0000,FDF5E6,FAFAD2,FAF0E6,FAEBD7,FA8072,F8F8FF,F5FFFA,F5F5F5,F5DEB3,F4A460,F0FFFF,F0FFF0,F0F8FF,F0E68C,F08080,EEE8AA,EE82EE,E9967A,E6E6FA,E1FFFF,DEB887,DDA0DD,DCDCDC,DC143C,DB7093,DAA520,DA70D6,D8BFD8,D3D3D3,D2B48C,D2691E,CD853F,CD5C5C,C71585,C0C0C0,BDB76B,BC8F8F,BA55D3,B22222,B0E0E6,B0C4DE,AFEEEE,ADFF2F,ADD8E6,A9A9A9,A52A2A,A0522D,9932CC,98FB98,9400D3,9370DB,90EE90,8FBC8F,8B4513,8B008B,8B0000,8A2BE2,87CEFA,87CEEB,808080,808000,800080,800000,7FFFAA,7FFF00,7CFC00,7B68EE,778899,708090,6B8E23,6A5ACD,696969,6495ED,5F9EA0,556B2F,4B0082,48D1CC,483D8B,4682B4,4169E1,40E0D0,3CB371,32CD32,2F4F4F,2E8B57,228B22,20B2AA,1E90FF,191970,00FFFF,00FFFF,00FF7F,00FF00,00FA9A,00CED1,00BFFF,008B8B,008080,008000,006400,0000FF,0000CD,00008B,000080,000000".split(","),_C16:"0123456789ABCDEF",_dd1:function(e,t,i,r){if("left"==xui.Event.getBtn(t)){var o=e.properties,n=e.box,a=function(){var t=n.hex2rgb(e.$tempValue||o.$UIvalue);return r?n.rgb2hsv(t):t};xui.use(i).css("backgroundColor","red").startDrag(t,{dragType:"blank",targetReposition:!1,widthIncrement:2,dragCursor:!0}),e.$temp=0,e.$start=a(),e.$temp2=a()}},_dd2:function(e,t,i,r,o){var n,a,s=xui.DragDrop.getProfile().offset,u=(e.properties,e.$temp2),l=e.box,d="hsv1"==o?361:"hsv2"==o?101:256;n=((n=("hsv2"==o?parseInt(100*e.$start[r],10):parseInt(e.$start[r],10))+parseInt(s.x/2,10))%d+d)%d,e.$temp!=n&&(u[r]=e.$temp="hsv2"==o?n/100:n,a="hsv1"==o||"hsv2"==o?l.hsv2rgb(u):u,a=l.rgb2hex(a),l._setTempUI(e,a),xui.use(i).text("hex"==o?l._toFF(n):n))},_dd3:function(e,t,i,r,o){if(e.$start[r]!==e.$temp){e.properties;var n,a=e.box,s=e.$start;s[r]=e.$temp,n=o?a.hsv2rgb(s):s,n=a.rgb2hex(n),o&&(e.$hexinhsv=n),e.boxing()._setCtrlValue(e.$tempValue=n,!1),delete e.$hexinhsv,e.box._vC(e)}xui.use(i).css("backgroundColor",""),e.$temp=e.$start=0},_setTempUI:function(e,t){var i=this.hex2rgb(t),r=e.boxing().getSubNode("EXAM"),o=this.rgb2hsv(i),n=xui.getRes("color.LIST."+t),a=("transparent"==t?"":"#")+t;r.css({backgroundColor:a,color:o[2]>.6?"#000":"#FFF"}),r.text(e.show_color=n==t?a:n)},_updateDftTip:function(e){e.box;var t=e.properties,i="transparent"==(e.$tempValue||t.$UIvalue),r=e.boxing().getSubNode("EXAM");r.css({backgroundColor:i?"transparent":"#"+e.$hex.join(""),color:i||e.$hsv[2]>.6?"#000":"#FFF"}),r.html(e.$clrN2||"",!1)},_to3:function(e){return e&&"transparent"!=e||(e="FFFFFF"),[e.substr(0,2),e.substr(2,2),e.substr(4,2)]},_toFF:function(e){var t=this._C16;return e=(e=parseInt(e,10)||0)>255||e<0?0:e,t.charAt((e-e%16)/16)+t.charAt(e%16)},_to255:function(e){var t=this._C16,i=e.split("");return 16*t.indexOf(i[0].toUpperCase())+t.indexOf(i[1].toUpperCase())},_webSafe:function(e,t,i){var r=arguments.callee,o=r.f||(r.f=function(e){return 51*parseInt(e/51,10)});return"object"==typeof e&&(t=e[1],i=e[2],e=e[0]),[o(e),o(t),o(i)]},_updateMarks:function(e,t,i,r){var o=this,n=o.hex2rgb(t),a=o.rgb2hsv(n),s=a[0]/360*6.28,u=e.getSubNode("ADVCLR");if(i){var l=e.getSubNode("ADVMARK1"),d=e.getSubNode("ADVMARK2");l.cssPos({left:Math.round(Math.sin(s)*o._radius+o._bigRadius),top:Math.round(-Math.cos(s)*o._radius+o._bigRadius)}),d.cssPos({left:Math.round(o._square*(a[1]-.5)+o._bigRadius),top:Math.round(o._square*(.5-a[2])+o._bigRadius)})}r!==undefined&&u.css("backgroundColor","#"+o.rgb2hex(o.hsv2rgb([r,1,1]))),o._setTempUI(e,t)},_updateClrByPos:function(e,t,i){var r,o,n,a,s,u,l,d,c,p=this,h=xui.Event.getPos(t),f=e.$tpos,x=h.left-f.left,g=h.top-f.top;i?(o=e.getSubNode("ADVMARK1"),r=Math.atan2(x,-g),o.cssPos({left:Math.round(Math.sin(r)*p._radius+p._bigRadius),top:Math.round(-Math.cos(r)*p._radius+p._bigRadius)}),(a=Math.floor(r/Math.PI*180))<0&&(a+=360),l=[a,e.$hsv[1],e.$hsv[2]],d=p.hsv2rgb(l),c=p.rgb2hex(d),p._updateMarks(e,e.$t_hex=c,!1,a)):(n=e.getSubNode("ADVMARK2"),s=Math.max(0,Math.min(1,x/p._square+.5)),u=Math.max(0,Math.min(1,.5-g/p._square)),n.cssPos({left:Math.round(p._square*(s-.5)+p._bigRadius),top:Math.round(p._square*(.5-u)+p._bigRadius)}),l=[e.$hsv[0],s,u],d=p.hsv2rgb(l),c=p.rgb2hex(d),p._updateMarks(e,e.$t_hex=c))},_updateValueByPos:function(e,t){e.$hexinadv=e.$t_hex,e.boxing()._setCtrlValue(e.$tempValue=e.$t_hex,!1),delete e.$hexinadv,e.box._vC(e)},_prepareAdv:function(e,t){var i=e.getSubNode("ADVWHEEL").offset();e.$tpos={left:i.left+this._bigRadius,top:i.top+this._bigRadius}},_ensureValue:function(e,t){var i,r=this,o=arguments.callee,n=o.map||(o.map=(i={},xui.arr.each(r._C16.split(""),(function(e,t){i[e]=1})),i)),a=o._r||(o._r=/rgb\(([^)]*)\)/);if(!t||"string"!=typeof t||"transparent"==t)return"transparent";a.test(t)&&((t=(t=t.replace(a,"$1")).split(","))[0]=parseInt(t[0],10)||0,t[1]=parseInt(t[1],10)||0,t[2]=parseInt(t[2],10)||0,t=r.rgb2hex(t)),"#"==t.charAt(0)&&(t=t.substr(1,t.length));for(var s,u="",l=0;l<6;l++)u+=n[s=t.charAt(l).toUpperCase()]?s:"F";return u},hsv2rgb:function(e,t,i){e instanceof Array&&(t=e[1],i=e[2],e=e[0]);var r,o,n,a,s,u,l,d,c=arguments.callee,p=c.f||(c.f=function(e){return Math.min(255,Math.round(256*e))});if(0==t)return[i=p(i),i,i];switch(u=i*(1-t),l=i*(1-(s=e/60-(a=Math.floor(e/60%6)))*t),d=i*(1-(1-s)*t),a){case 0:r=i,o=d,n=u;break;case 1:r=l,o=i,n=u;break;case 2:r=u,o=i,n=d;break;case 3:r=u,o=l,n=i;break;case 4:r=d,o=u,n=i;break;case 5:r=i,o=u,n=l}return 0==t?[i=p(i),i,i]:[p(r),p(o),p(n)]},rgb2hsv:function(e,t,i){e instanceof Array&&(t=e[1],i=e[2],e=e[0]),e/=255,t/=255,i/=255;var r,o=Math.min(e,t,i),n=Math.max(e,t,i),a=n-o,s=0===n?0:1-o/n,u=n;switch(n){case o:r=0;break;case e:r=60*(t-i)/a,t<i&&(r+=360);break;case t:r=60*(i-e)/a+120;break;case i:r=60*(e-t)/a+240}return[Math.round(r),s,u]},rgb2hex:function(e,t,i){var r=this;return e instanceof Array&&(t=e[1],i=e[2],e=e[0]),r._toFF(e)+r._toFF(t)+r._toFF(i)},hex2rgb:function(e){var t=this;return e&&"transparent"!=e||(e="FFFFFF"),"#"==e.charAt(0)&&(e=e.slice(1)),[t._to255(e.substr(0,2)),t._to255(e.substr(2,2)),t._to255(e.substr(4,2))]},getTextColor:function(e){var t=this;return(e=t._ensureValue(0,e))&&"transparent"==e.toLowerCase()?"#000000":(e=t.hex2rgb(e),((e=t.rgb2hsv(e))&&e[2])>.6?"#000000":"#FFFFFF")},_onresize:function(){}}}),xui.Class("xui.UI.DatePicker",["xui.UI","xui.absValue"],{Required:["xui.Date"],Instance:{activate:function(){return this.getSubNode("PRE").focus(!0),this},_setCtrlValue:function(e){return this.each((function(t){if(t.renderId){var i=t.box,r=t.properties;i._to(t,e,!0),t.keys.CAPTION&&t.getSubNode("CAPTION").html(xui.Date.getText(e,"ymd",xui.getFirstDayOfWeek(r)),!1)}}))},getDateFrom:function(){return this.get(0)._realstart}},Initialize:function(){var e=this,t=xui.UI.$ID,i=xui.UI.$tag_special,r=xui.UI.$CLS,o=e.KEY;e.addTemplateKeys(["H","COL","W","TBODY","THEADER","TD"]);var n,a,s,u,l,d='<colgroup id="'+o+"-COL:"+t+':"  class="'+i+"COL_CS"+i+' xui-custom {comcls}"  style="'+i+"COL_CS"+i+'"><col width="1px"/><col width=""/><col width=""/><col width=""/><col width=""/><col width=""/><col width=""/><col width=""/></colgroup>',c='<thead ID="'+o+"-THEADER:"+t+':" class="'+i+"THEADER_CS"+i+' xui-custom {comcls}"  style="'+i+"THEADER_CS"+i+'" ><tr height="1px"><th id="'+o+"-H:"+t+':7" class="xui-node  xui-node-th xui-uiborder-b xui-uiborder-r '+r+"-h "+r+"-w "+i+"H_CC"+i+' xui-custom {comcls}" style="'+i+"H_CS"+i+'"></th>',p='<th id="'+o+"-H:"+t+':@" class="xui-node xui-node-th xui-uiborder-b xui-uiborder-r '+r+"-h "+i+"H_CC"+i+' xui-custom {comcls}"  style="'+i+"H_CS"+i+'">@</th>',h='<tbody id="'+o+"-TBODY:"+t+':"  class="'+i+"TBODY_CS"+i+' xui-custom {comcls}"  style="'+i+"TBODY_CS"+i+'" >',f='<th id="'+o+"-W:"+t+':@"  class="xui-node xui-node-th xui-uiborder-b xui-uiborder-r '+r+"-w "+i+"W_CC"+i+' xui-custom {comcls}"  style="'+i+"W_CS"+i+'">@</th>',x='<td id="'+o+"-TD:"+t+':@" class="xui-node xui-uicell  xui-node-td xui-uiborder-b xui-uiborder-r '+r+"-td "+i+"TD_CC"+i+' xui-custom {comcls}"  style="'+i+"TD_CS"+i+'" '+xui.$IEUNSELECTABLE()+" ></td>",g=[],m=[];for(a=0;a<7;a++)m[m.length]=p.replace(/@/g,a);for(u=l=0,a=0;a<48;a++)s=a%8,g[g.length]=(0==s?"<tr>":"")+(0==s?f:x).replace(/@/g,0==s?l:u)+(7==s?"</tr>":""),0!==s?u++:l++;n=d+c+m.join("")+"</tr></thead>"+h+g.join("")+"</tbody>",e.setTemplate({tagName:"div",style:"{_style};height:auto;",BORDER:{tagName:"div",className:"xui-uiborder-outset xui-uiborder-box xui-uiborder-radius-big",BAR:{tagName:"div",className:"xui-uibar-top",style:"{barDisplay};",BARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-tl",BARTDLT:{className:"xui-uibar-tdlt"}},BARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar",BARTDMT:{className:"xui-uibar-tdmt"}},BARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-tr",BARTDRT:{className:"xui-uibar-tdrt"}},BARCMDL:{$order:3,tagName:"div",className:"xui-uibar-cmdl",PRE2:{$order:0,className:"xuifont",$fonticon:"xui-icon-doubleleft",tabindex:"{tabindex}"},PRE:{$order:1,className:"xuifont",$fonticon:"xui-icon-singleleft",tabindex:"{tabindex}"},YEAR:{$order:2,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},YTXT:{$order:3,text:"-"},MONTH:{$order:4,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},MTXT:{$order:5,text:"-"},DAY:{$order:6,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},NEXT:{$order:7,className:"xuifont",$fonticon:"xui-icon-singleright",tabindex:"{tabindex}"},NEXT2:{$order:8,className:"xuifont",$fonticon:"xui-icon-doubleright",tabindex:"{tabindex}"}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr",CLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",style:"{closeDisplay}"}},TBARTDB:{$order:5,tagName:"div",className:"xui-uibar-tdb xui-uiborder-inset xui-uiborder-radius"}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main xui-uibar",MAINI:{tagName:"div",className:"xui-uicon-maini xui-uicon-maini xui-uibar",CON:{tagName:"div",className:"xui-uiborder-inset",BODY:{tagName:"table",cellpadding:"0",cellspacing:"0",text:n}}}},TAIL:{$order:3,tagName:"div",className:"xui-uicon-main xui-uibar",TAILI:{tagName:"div",className:"xui-uicon-maini xui-uibar",CAPTION:{tagName:"div",style:"{_nocap}",text:"{caption}",$order:0},TIME:{style:"{_timectrl}",tagName:"div",TPRE2:{$order:0,className:"xuifont",$fonticon:"xui-icon-doubleleft",tabindex:"{tabindex}"},TPRE:{$order:1,className:"xuifont",$fonticon:"xui-icon-singleleft",tabindex:"{tabindex}"},HOUR:{$order:2,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},MTXT:{$order:3,text:":"},MINUTE:{$order:4,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},TNEXT:{$order:6,className:"xuifont",$fonticon:"xui-icon-singleright",tabindex:"{tabindex}"},TNEXT2:{$order:7,className:"xuifont",$fonticon:"xui-icon-doubleright",tabindex:"{tabindex}"}},TODAY:{tabindex:"{tabindex}",className:"xuifont",$fonticon:"xui-icon-date",title:"{_todaytitle}"},SET:{tagName:"button",className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tabindex:"{tabindex}",text:"{_set}"}}},BBAR:{$order:4,tagName:"div",className:"xui-uibar-bottom-s",BBARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-bl"},BBARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar"},BBARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-br"}}}})},Static:{Appearances:{KEY:{},"TBART, BBART":{"border-spacing":0,"border-collapse":"separate"},BORDER:{},BODY:{position:"relative",overflow:"visible"},BARCMDL:{top:".125em"},TAILI:{position:"relative",padding:".5em 0 0 0"},TIME:{padding:".25em 1.5em"},SET:{position:"absolute",display:"none",top:".125em",right:".5em"},TODAY:{position:"absolute",top:".25em",left:".125em",display:xui.$inlineBlock,cursor:"default"},"PRE,PRE2,NEXT,NEXT2,TPRE,TPRE2,TNEXT,TNEXT2":{$order:0,display:xui.$inlineBlock,position:"relative",margin:"0 .25em","vertical-align":"middle",cursor:"default"},"YEAR,MONTH,DAY,HOUR,MINUTE":{$order:4,"font-weight":"bold","vertical-align":"middle",cursor:"e-resize",margin:"0 .25em",padding:"0 .25em"},YEAR:{},"MONTH, DAY,HOUR, MINUTE":{},CAPTION:{"text-align":"center","vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"},MAINI:{padding:".5em .3333em .3333em 0"},TD:{$order:1,"text-align":"center"},"TD-checked":{$order:4,"font-weight":"bold"},"W,H":{$order:3,"vertical-align":"middle","text-align":"center",padding:".25em"},W:{$order:4,padding:".125em"},H:{$order:4,padding:".25em 0.6666667em"}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",TD:"TD",PRE:"PRE",PRE2:"PRE2",NEXT:"NEXT",NEXT2:"NEXT2",TPRE:"TPRE",TPRE2:"TPRE2",TNEXT:"TNEXT",TNEXT2:"TNEXT2",SET:"SET",TODAY:"TODAY"},ClickEffected:{CLOSE:"CLOSE",TD:"TD",PRE:"PRE",PRE2:"PRE2",NEXT:"NEXT",NEXT2:"NEXT2",TPRE:"TPRE",TPRE2:"TPRE2",TNEXT:"TNEXT",TNEXT2:"TNEXT2",SET:"SET",TODAY:"TODAY"},KEY:{onClick:function(){return!1}},TD:{onClick:function(e,t,i){var r=e.properties,o=e.getSubId(i),n=e.$daymap[o];if(r.disabled||r.readonly)return!1;xui.use(i).onMouseout(!0,{$force:!0}),n=xui.Date.add(e.$tempValue,"d",xui.Date.diff(e.$tempValue,n,"d",xui.getFirstDayOfWeek(r))),e.box._to(e,n),r.timeInput||e.boxing().setUIValue(n,null,null,"click")},onDblclick:function(e,t,i){e.properties.timeInput&&(xui.use(i).onMouseout(!0,{$force:!0}),e.boxing().setUIValue(e.$tempValue,!0,null,"dblclick"))}},TODAY:{onClick:function(e,t,i){xui.use(i).onMouseout(!0,{$force:!0}),e.boxing().setUIValue(e.properties.timeInput?new Date:xui.Date.getTimSpanStart(new Date,"d",1),!0,null,"today")}},SET:{onClick:function(e,t,i){xui.use(i).onMouseout(!0,{$force:!0}),e.boxing().setUIValue(e.$tempValue,!0,null,"set")}},CLOSE:{onClick:function(e,t,i){var r=e.properties,o=e.boxing();r.disabled||r.readonly||!1!==o.beforeClose(e,i)&&o.destroy(!0)}},PRE:{onClick:function(e,t,i){var r=e.properties;r.disabled||r.readonly||e.box._to(e,xui.Date.add(e.$tempValue,"m",-1))}},NEXT:{onClick:function(e,t,i){var r=e.properties;r.disabled||r.readonly||e.box._to(e,xui.Date.add(e.$tempValue,"m",1))}},PRE2:{onClick:function(e,t,i){var r=e.properties;r.disabled||r.readonly||e.box._to(e,xui.Date.add(e.$tempValue,"y",-1))}},NEXT2:{onClick:function(e,t,i){var r=e.properties;r.disabled||r.readonly||e.box._to(e,xui.Date.add(e.$tempValue,"y",1))}},TPRE:{onClick:function(e,t,i){var r=e.properties;r.disabled||r.readonly||e.box._to(e,xui.Date.add(e.$tempValue,"n",-1))}},TNEXT:{onClick:function(e,t,i){var r=e.properties;r.disabled||r.readonly||e.box._to(e,xui.Date.add(e.$tempValue,"n",1))}},TPRE2:{onClick:function(e,t,i){var r=e.properties;r.disabled||r.readonly||e.box._to(e,xui.Date.add(e.$tempValue,"h",-1))}},TNEXT2:{onClick:function(e,t,i){var r=e.properties;r.disabled||r.readonly||e.box._to(e,xui.Date.add(e.$tempValue,"h",1))}},YEAR:{beforeMousedown:function(e,t,i){return e.box._ondown(e,t,i,10)},onDrag:function(e,t,i){var r,o=xui.DragDrop.getProfile().offset;r=parseInt(e.$year,10)+parseInt(o.x/10,10),e.$temp!=r&&(e.$temp2=parseInt(o.x/10,10),e.getSubNode("YEAR").html(r,!1))},onDragstop:function(e,t,i){return e.box._onds(e,t,i,"y")}},MONTH:{beforeMousedown:function(e,t,i){return e.box._ondown(e,t,i,20)},onDrag:function(e,t,i){var r,o=xui.DragDrop.getProfile().offset;r=((r=parseInt(e.$month,10)+parseInt(o.x/20,10)%12)%12+12)%12,e.$temp!=r&&(e.$temp=r,e.$temp2=r-e.$month+1,e.getSubNode("MONTH").html((r+1<=9?"0":"")+(r+1),!1))},onDragstop:function(e,t,i){return e.box._onds(e,t,i,"m")}},DAY:{beforeMousedown:function(e,t,i){return e.box._ondown(e,t,i,10)},onDrag:function(e,t,i){var r,o=new Date(e.$year,e.$month,0).getDate(),n=(e.properties,xui.DragDrop.getProfile().offset);r=((r=parseInt(e.$day,10)+parseInt(n.x/10,10)%o)%o+o)%o+1,e.$temp!=r&&(e.$temp=r,e.$temp2=r-e.$day,e.getSubNode("DAY").html((r<=9?"0":"")+r,!1))},onDragstop:function(e,t,i){return e.box._onds(e,t,i,"d")}},HOUR:{beforeMousedown:function(e,t,i){return e.box._ondown(e,t,i,20)},onDrag:function(e,t,i){return e.box._ondrag(e,20,24,"HOUR",e.$hour)},onDragstop:function(e,t,i){return e.box._onds(e,t,i,"h")}},MINUTE:{beforeMousedown:function(e,t,i){return e.box._ondown(e,t,i,10)},onDrag:function(e,t,i){return e.box._ondrag(e,10,60,"MINUTE",e.$minute)},onDragstop:function(e,t,i){return e.box._onds(e,t,i,"n")}}},DataModel:{timeInput:{ini:!1,action:function(e){this.getSubNode("CAPTION").css("display",e?"none":"block"),this.getSubNode("SET").css("display",e?"block":"none"),this.getSubNode("TIME").css("display",e?"block":"none"),this.getSubNode("TODAY").attr("title",xui.getRes(e?"inline.now":"inline.today"))}},height:{$spaceunit:1,ini:"auto",readonly:!0},width:{$spaceunit:1,ini:"auto",readonly:!0},value:{ini:new Date,format:"date"},closeBtn:{ini:!0,action:function(e){this.getSubNode("CLOSE").css("display",e?"":"none")}},firstDayOfWeek:{ini:0,action:function(){this.boxing().refresh()}},offDays:{ini:"60",action:function(){this.boxing().refresh()}},hideWeekLabels:{ini:!1,action:function(){this.boxing().refresh()}},dateInputFormat:{ini:"yyyy-mm-dd",listbox:["yyyy-mm-dd","mm-dd-yyyy","dd-mm-yyyy"],action:function(){this.boxing().refresh()}}},EventHandlers:{beforeClose:function(e,t){}},_prepareData:function(e){var t=arguments.callee.upper.call(this,e),i="display:none";t.closeDisplay=t.closeBtn?"":i;var r="display:none;";return e.properties.timeInput?(t._todaytitle=xui.getRes("inline.now"),t._nocap=r):(t._todaytitle=xui.getRes("inline.today"),t._timectrl=r),t._set=xui.wrapRes("inline.set"),t},_ensureValue:function(e,t){var i;return t&&(i=xui.isDate(t)?t:xui.isFinite(t)?new Date(parseInt(t,10)):xui.Date.parse(t+"")),i=i||new Date,e.properties.timeInput||(i=xui.Date.getTimSpanStart(i,"d")),i},RenderTrigger:function(){var e=this,t=e.properties;e.boxing(),e.box._setWeekLabel(e);var i={yyyy:"YEAR",mm:"MONTH",dd:"DAY"},r=t.dateInputFormat.split("-");i[r[0]]&&i[r[1]]&&i[r[2]]&&(e.getSubNode("YTXT").addPrev(e.getSubNode(i[r[0]])),e.getSubNode("MTXT").addPrev(e.getSubNode(i[r[1]])),e.getSubNode("MTXT").addNext(e.getSubNode(i[r[2]])))},_getWeekNodes:function(e){return e.$weeks||(e.$weeks=e.getSubNode("W",!0))},_getTDNodes:function(e){return e.$tds||(e.$tds=e.getSubNode("TD",!0))},_getLabelNodes:function(e){return e.$days||(e.$days=e.getSubNode("TD",!0))},_getHeaderNodes:function(e){return e.$header||(e.$header=e.getSubNode("H",!0))},_setWeekLabel:function(e){var t=e.properties,i=xui.getFirstDayOfWeek(t);e.box._getHeaderNodes(e).each((function(t,r){t.innerHTML=xui.wrapRes("date.WEEKS."+function(t){return"7"==(t=e.getSubId(t))||(t=parseInt(t,10)+i)<7?t:t-7}(t.id))})),t.hideWeekLabels&&(e.getSubNode("BODY").query("TR").first().remove(),e.getSubNode("COL").first().remove());var r="xui-uicell-alt",o={};t.offDays&&(xui.arr.each(t.offDays.split(""),(function(e){(e=parseInt(e,10))>=0&&e<=6&&(o[e]=1)})),e.box._getTDNodes(e).each((function(e,t){t=t+i-7*parseInt((t+i)/7,10),o[t]?e.className=e.className+" "+r:e.className=e.className.replace(r,"")})))},_setBGV:function(e,t,i){var r,o,n=xui.Date,a=e.properties,s=e.$daymap||(e.$daymap=[]);e.box._getLabelNodes(e).each((function(e,a){o=n.add(t,"d",a),s[a]=o,r=n.get(o,"m")==i?"#":'<p class="xui-node xui-node-p xui-ui-readonly xui-custom {comcls}">#</p>',o=n.get(o,"d"),e.innerHTML=r.replace("#",o)})),a.hideWeekLabels||e.box._getWeekNodes(e).each((function(e,i){e.innerHTML=n.get(n.add(t,"ww",i),"ww",xui.getFirstDayOfWeek(a))}))},_to:function(e,t,i){var r,o,n=e.properties,a=xui.getFirstDayOfWeek(n),s=xui.Date,u=(e.keys,n.$UIvalue),l=-1,d=s.getTimSpanStart(s.getTimSpanStart(t,"m"),"ww",1,a),c=s.get(t,"m",a);e.$tempValue=t,this._setBGV(e,e._realstart=d,c),e.$selnode&&e.$selnode.tagClass("-checked",!1),xui.arr.each(e.$daymap,(function(e,i){if(s.get(e,"m",a)+"-"+s.get(e,"d",a)==s.get(t,"m",a)+"-"+s.get(t,"d",a))return l=i,!1})),r=this._getTDNodes(e).get()[l],e.$selnode=xui([r]).tagClass("-checked"),e.getSubNode("SET").css("display",i||u.getTime()==t.getTime()?"none":"block"),e.getSubNode("CAPTION").css("color",i||u.getTime()==t.getTime()?"":"#ff0000"),o=s.get(t,"y",a),e.$year!=o&&(e.$year=o,e.getSubNode("YEAR").html(o,!1)),o=s.get(t,"m",a)+1,e.$month!=o&&(e.$month=o,e.getSubNode("MONTH").html((o<=9?"0":"")+o,!1)),o=s.get(t||t,"d",a),e.$day!=o&&(e.$day=o,e.getSubNode("DAY").html((o<=9?"0":"")+o,!1)),o=s.get(t,"h",a),e.$hour!=o&&(e.$hour=o,e.getSubNode("HOUR").html((o<=9?"0":"")+o,!1)),o=s.get(t,"n",a),e.$minute!=o&&(e.$minute=o,e.getSubNode("MINUTE").html((o<=9?"0":"")+o,!1))},_ondown:function(e,t,i,r){"left"==xui.Event.getBtn(t)&&(xui.use(i).startDrag(t,{dragType:"blank",targetReposition:!1,widthIncrement:r,dragCursor:!0}),e.$temp=e.$temp2=0)},_ondrag:function(e,t,i,r,o){e.properties;var n,a=xui.DragDrop.getProfile().offset;n=((n=parseInt(o,10)+parseInt(a.x/t,10)%i)%i+i)%i,e.$temp!=n&&(e.$temp=n,e.$temp2=n-o,e.getSubNode(r).html((n<=9?"0":"")+n,!1))},_onds:function(e,t,i,r){if(e.$temp2){e.properties;var o=xui.Date.add(e.$tempValue,r,e.$temp2);e.box._to(e,o)}e.$temp=e.$temp2=0},_onresize:function(){}}}),xui.Class("xui.UI.TimePicker",["xui.UI","xui.absValue"],{Required:["xui.Date"],Instance:{activate:function(){return this.getSubNode("PRE").focus(!0),this},_setCtrlValue:function(e){return this.each((function(t){if(t.renderId){var i=t.box,r=i._v2a(e);t.$hour=r[0],t.$minute=r[1],t.getSubNode("HI",!0).removeClass(i._excls_c3).removeClass(i._excls_mo3),t.getSubNode("HI",r[0]).addClass(i._excls_c3),t.getSubNode("MI",!0).removeClass(i._excls_c).removeClass(i._excls_mo),t.getSubNode("MI",r[1]).addClass(i._excls_c),t.getSubNode("HOUR").html(r[0],!1),t.getSubNode("MINUTE").html(r[1],!1),t.getSubNode("CAPTION").html(t.box._showV(t,t.box._v2a(r)),!1)}}))}},Initialize:function(){var e,t,i,r,o,n,a,s;for(this.addTemplateKeys(["HI","MI"]),o=this._excls3,n=this._excls4,a=xui.UI.$ID,s='<span id="'+this.KEY+"-HI:"+a+':@" class="xui-node xui-node-span '+o+' !" '+xui.$IEUNSELECTABLE()+" >@</span>",e=[],t=0;t<24;t++)e[e.length]=s.replace(/@/g,t<10?"0"+t:t).replace("!",(t%6==0?n:"")+" xui-custom {comcls}"),t+1==12&&(e[e.length]="<br />");for(i=e.join(""),e.length=0,o=this._excls,n=this._excls2,a=xui.UI.$ID,s='<span id="'+this.KEY+"-MI:"+a+':@" class="xui-node xui-node-span '+o+' !" '+xui.$IEUNSELECTABLE()+" >@</span>",e=[],t=0;t<60;t++)e[e.length]=s.replace(/@/g,t<10?"0"+t:t).replace("!",(t%5==0?n:"")+" xui-custom {comcls}"),(t+1)%10==0&&59!=t&&(e[e.length]="<br />");r=e.join(""),e.length=0,this.setTemplate({tagName:"div",style:"{_style};height:auto;",BORDER:{tagName:"div",className:"xui-uiborder-outset xui-uiborder-box xui-uiborder-radius-big",BART:{tagName:"div",className:"xui-uibar-top",style:"{barDisplay};",BARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-tl",BARTDLT:{className:"xui-uibar-tdlt"}},BARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar",BARTDMT:{className:"xui-uibar-tdmt"}},BARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-tr",BARTDRT:{className:"xui-uibar-tdrt"}},BARCMDL:{$order:3,tagName:"div",className:"xui-uibar-cmdl",PRE2:{$order:0,className:"xuifont",$fonticon:"xui-icon-doubleleft",tabindex:"{tabindex}"},PRE:{$order:1,className:"xuifont",$fonticon:"xui-icon-singleleft",tabindex:"{tabindex}"},HOUR:{$order:2,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},MTXT:{$order:3,text:":"},MINUTE:{$order:4,className:"xui-ui-draggable xui-uibase xui-uiborder-flat xui-uiborder-radius"},NEXT:{$order:6,className:"xuifont",$fonticon:"xui-icon-singleright",tabindex:"{tabindex}"},NEXT2:{$order:7,className:"xuifont",$fonticon:"xui-icon-doubleright",tabindex:"{tabindex}"}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr",CLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",style:"{closeDisplay}"}},TBARTDB:{$order:5,tagName:"div",className:"xui-uibar-tdb xui-uiborder-inset xui-uiborder-radius"}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main xui-uibar",MAINI:{tagName:"div",className:"xui-uibar xui-uicon-maini xui-uibar",CONH:{tagName:"div",className:"xui-uibase xui-uiborder-flat",text:i},CONM:{$order:2,tagName:"div",className:"xui-uibase xui-uiborder-flat",text:r}}},TAIL:{$order:3,tagName:"div",className:"xui-uicon-main xui-uibar",TAILI:{tagName:"div",className:"xui-uibar xui-uicon-maini",CAPTION:{text:"{caption}"},SET:{tagName:"button",className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tabindex:"{tabindex}",text:"{_set}"}}},BBAR:{$order:4,tagName:"div",className:"xui-uibar-bottom-s",BBARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-bl"},BBARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar"},BBARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-br"}}}})},Static:{_excls:"xuiex-timepicker xui-uicell",_excls2:"xuiex-timepicker xui-uicell xui-uicell-alt ",_excls3:"xuiex-timepicker3 xui-uicell",_excls4:"xuiex-timepicker xui-uicell xui-uicell-alt",_excls_mo:"xui-uicell-hover",_excls_c:"xui-uicell-checked",_excls_mo3:"xui-uicell-hover",_excls_c3:"xui-uicell-checked",_mover:function(e,t){var i=this,r=e.className;2==t?-1==r.indexOf(i._excls_mo3)&&(e.className=r+" "+i._excls_mo3):-1==r.indexOf(i._excls_mo)&&(e.className=r+" "+i._excls_mo),e=null},_mout:function(e,t){var i=this,r=e.className;2==t?-1!=r.indexOf(i._excls_mo3)&&(e.className=r.replace(i._excls_mo3,"")):-1!=r.indexOf(i._excls_mo)&&(e.className=r.replace(i._excls_mo,"")),e=null},Appearances:{KEY:{},"TBART, BBART":{"border-spacing":0,"border-collapse":"separate"},MAINI:{padding:".5em .3333em .3333em 0"},CONH:{"white-space":"nowrap","text-align":"center"},CONM:{"margin-top":".5em","white-space":"nowrap","text-align":"center"},BARCMDL:{top:".125em"},"PRE,PRE2,NEXT,NEXT2":{position:"relative",margin:"0 .25em","vertical-align":"middle",cursor:"default"},"HOUR, MINUTE":{$order:3,"font-weight":"bold","vertical-align":"middle",cursor:"e-resize",margin:"0 .25em",padding:"0 .25em"},SET:{position:"absolute",display:"none",top:".125em",right:".5em"},TAILI:{position:"relative",padding:".5em 0 0 0","text-align":"center"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"},".xuiex-timepicker":{width:"2em","text-align":"center",padding:".25em 0",margin:0},".xuiex-timepicker3":{width:"1.6666em","text-align":"center","font-weight":"bold",padding:".25em 0",margin:0}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",PRE:"PRE",NEXT:"NEXT",PRE2:"PRE2",NEXT2:"NEXT2",SET:"SET"},ClickEffected:{CLOSE:"CLOSE",PRE:"PRE",NEXT:"NEXT",PRE2:"PRE2",NEXT2:"NEXT2",SET:"SET"},KEY:{onClick:function(){return!1}},HOUR:{beforeMousedown:function(e,t,i){"left"==xui.Event.getBtn(t)&&(xui(i).startDrag(t,{dragType:"blank",targetReposition:!1,widthIncrement:5,dragCursor:!0}),e.$temp2=0)},onDrag:function(e,t,i){var r=xui.DragDrop.getProfile().offset,o=e.properties.$UIvalue,n=o.split(":");n[0]=Math.round((parseFloat(n[0])||0)+parseInt(r.x/10)),n[0]=(n[0]%24+24)%24,e.$temp2=(n[0]<=9?"0":"")+n[0],o[0]!=e.$temp2&&e.getSubNode("HOUR").html(e.$temp2,!1)},onDragstop:function(e,t,i){e.$temp2&&(e.$hour=e.$temp2,e.boxing()._setCtrlValue(e.$hour+":"+e.$minute)),e.$temp2=0,e.box._hourC(e)}},MINUTE:{beforeMousedown:function(e,t,i){"left"==xui.Event.getBtn(t)&&(xui(i).startDrag(t,{dragType:"blank",targetReposition:!1,widthIncrement:5,dragCursor:!0}),e.$temp2=0)},onDrag:function(e,t,i){var r=xui.DragDrop.getProfile().offset,o=e.properties.$UIvalue,n=o.split(":");n[0]=Math.round((parseFloat(n[0])||0)+parseFloat(r.x/20)),n[0]=(n[0]%60+60)%60,e.$temp2=(n[0]<=9?"0":"")+n[0],o[0]!=e.$temp2&&e.getSubNode("MINUTE").html(e.$temp2,!1)},onDragstop:function(e,t,i){e.$temp2&&(e.$minute=e.$temp2,e.boxing()._setCtrlValue(e.$hour+":"+e.$minute)),e.$temp2=0,e.box._hourC(e)}},SET:{onClick:function(e){var t=e.properties.$UIvalue.split(":");t[0]=e.$hour,t[1]=e.$minute,e.boxing().setUIValue(t.join(":"),!0,null,"click"),e.box&&e.box._hourC(e)}},HI:{onMouseover:function(e,t,i){e.properties.disableHoverEffect||e.box._mover(xui.use(i).get(0),2)},onMouseout:function(e,t,i){e.properties.disableHoverEffect||e.box._mout(xui.use(i).get(0),2)},onClick:function(e,t,i){e.$hour=e.getSubId(i),e.boxing()._setCtrlValue(e.$hour+":"+e.$minute),e.box&&e.box._hourC(e)},onDblclick:function(e,t,i){e.$hour=e.getSubId(i),e.boxing().setUIValue(e.$hour+":"+e.$minute,!0,null,"dblclick"),e.box&&e.box._hourC(e)}},MI:{onMouseover:function(e,t,i){e.properties.disableHoverEffect||e.box._mover(xui.use(i).get(0))},onMouseout:function(e,t,i){e.properties.disableHoverEffect||e.box._mout(xui.use(i).get(0))},onClick:function(e,t,i){e.$minute=e.getSubId(i),e.boxing().setUIValue(e.$hour+":"+e.$minute,!0,null,"click2"),e.box&&e.box._hourC(e)}},PRE:{onClick:function(e,t,i){var r=e.properties;if(!r.disabled&&!r.readonly){var o=e.$minute;o=((o=(parseFloat(o)||0)-1)%60+60)%60,e.$minute=o=(o<=9?"0":"")+o,e.boxing()._setCtrlValue(e.$hour+":"+e.$minute),e.box&&e.box._hourC(e)}}},NEXT:{onClick:function(e,t,i){var r=e.properties;if(!r.disabled&&!r.readonly){var o=e.$minute;o=((o=(parseFloat(o)||0)+1)%60+60)%60,e.$minute=o=(o<=9?"0":"")+o,e.boxing()._setCtrlValue(e.$hour+":"+e.$minute),e.box&&e.box._hourC(e)}}},PRE2:{onClick:function(e,t,i){var r=e.properties;if(!r.disabled&&!r.readonly){var o=e.$hour;o=((o=(parseFloat(o)||0)-1)%24+24)%24,e.$hour=o=(o<=9?"0":"")+o,e.boxing()._setCtrlValue(e.$hour+":"+e.$minute),e.box&&e.box._hourC(e)}}},NEXT2:{onClick:function(e,t,i){var r=e.properties;if(!r.disabled&&!r.readonly){var o=e.$hour;o=((o=(parseFloat(o)||0)+1)%24+24)%24,e.$hour=o=(o<=9?"0":"")+o,e.boxing()._setCtrlValue(e.$hour+":"+e.$minute),e.box&&e.box._hourC(e)}}},CLOSE:{onClick:function(e,t,i){var r=e.properties,o=e.boxing();r.disabled||r.readonly||!1!==o.beforeClose(e,i)&&o.destroy(!0)}}},DataModel:{height:{ini:"auto",readonly:!0},width:{ini:"auto",readonly:!0},value:{ini:"00:00",format:"time"},closeBtn:{ini:!0,action:function(e){this.getSubNode("CLOSE").css("display",e?"":"none")}}},EventHandlers:{beforeClose:function(e,t){}},_hourC:function(e){var t=e.properties.$UIvalue.split(":"),i=t[0]+""==e.$hour+""&&t[1]+""==e.$minute+"";e.getSubNode("SET").css("display",i?"none":"block"),e.getSubNode("CAPTION").css("color",i?"":"#ff0000")},_prepareData:function(e){var t=arguments.callee.upper.call(this,e),i="display:none";return t.closeDisplay=t.closeBtn?"":i,t._set=xui.wrapRes("inline.set"),t},_ensureValue:function(e,t){var i,r=[];return i=t&&"string"==typeof t?t.split(":"):t&&"object"==typeof t&&xui.isArr(t)?t:[],r[0]=parseFloat(i[0])||0,r[1]=parseFloat(i[1])||0,r[0]<0&&(r[0]=0),r[0]>23&&(r[0]=23),r[1]<0&&(r[1]=0),r[1]>59&&(r[1]=59),r[0]=(r[0]<=9?"0":"")+r[0],r[1]=(r[1]<=9?"0":"")+r[1],r.join(":")},formatValue:function(e){return e.join(":")},_v2a:function(e){return"string"==typeof e?e.split(":"):e},_showV:function(e,t){var i=e.CF;return"function"==typeof i.formatCaption?i.formatCaption(t):t.join(":")},_onresize:function(){}}}),xui.Class("xui.UI.List",["xui.UI","xui.absList","xui.absValue"],{Instance:{_setCtrlValue:function(e){return this.each((function(t){if(t.renderId){var i=t.box,r=t.boxing().getUIValue(),o=t.properties,n=i._ITEMKEY||"ITEM",a=(i._DIRTYKEY,"MARK"),s=function(e,i){return t.getSubNode(e,i)},u=function(e){return t.getSubIdByItemId(e)};if("single"==o.selMode){var l=u(r);if(null!==r&&l&&(s(n,l).tagClass("-checked",!1).tagClass("-hover",!1),s(a,l).tagClass("-checked",!1)),(l=u(e))&&(s(n,l).tagClass("-checked"),s(a,l).tagClass("-checked")),l){var d=s(n,l);if(d){var c=t.getSubNode("ITEMS"),p=d.offset(null,c),h=p?p.top:0,f=d.offsetHeight(),x=c.scrollHeight(),g=c.scrollTop(),m=c.height();x>m&&(h<g||h+f>g+m)&&c.scrollTop(h)}}}else"multi"!=o.selMode&&"multibycheckbox"!=o.selMode||(r=r?r.split(o.valueSeparator):[],e=e?e.split(o.valueSeparator):[],xui.arr.each(r,(function(e){s(n,u(e)).tagClass("-checked",!1).tagClass("-hover",!1),s(a,u(e)).tagClass("-checked",!1)})),xui.arr.each(e,(function(e){s(n,u(e)).tagClass("-checked"),s(a,u(e)).tagClass("-checked")})))}}))},_clearMouseOver:function(){var e=this.constructor._ITEMKEY||"ITEM";this.getSubNode(e,!0).tagClass("-hover",!1)},adjustSize:function(){return this.each((function(e){var t,i,r=e.getRoot(),o=e.getSubNode("ITEMS"),n=e.properties,a=n.maxHeight,s=e.$isEm(n.height);e.$isEm(a)&&(a=e.$em2px(a,o,!0)),"none"==r.css("display")&&(i=1,r.css("visibility","hidden")),o.height("auto"),"auto"!=e.properties.height?(t=Math.min(a,o.offsetHeight()),s&&(t=e.$px2em(t,o)+"em"),o.height(n.height=t)):(t=o.offsetHeight())>a&&(o.height(n.maxHeight),e.getRoot().height(n.maxHeight)),i&&(r.css("visibility",""),r.css("display","none")),e.getRoot().height("auto")}))},activate:function(){return xui.absList.prototype.activate.call(this)},getShowValue:function(e){var t,i=this.get(0).properties;return xui.isDefined(e)||(e=i.$UIvalue),t=-1!=(t=xui.arr.subIndexOf(i.items,"id",e))?"$"==(t=i.items[t].caption).charAt(0)?xui.getRes(t.slice(1)):t:""},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["ITEMS"])}},Static:{_DIRTYKEY:"ITEM",Templates:{tagName:"div",style:"{_style}",className:"{_className}",LABEL:{className:"{_required} xui-ui-ellipsis",style:"{labelShow};width:{_labelSize};{_labelHAlign};{_labelVAlign}",text:"{labelCaption}"},ITEMS:{$order:10,tagName:"div",className:"xui-uibase {_cmdsalign} {_bordertype} {_itemscls1}",text:"{items}"},$submap:{items:{ITEM:{className:"xui-uitembg xui-uiborder-radius xui-showfocus {_itemCls} {_split} {itemClass} {disabled} {readonly}",style:"{itemStyle};{_itemDisplay};",tabindex:"{_tabindex}",LTAGCMDS:{$order:2,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},MARK:{$order:5,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{_cbDisplay}"},ICON:{$order:10,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{style:"{_capDisplay}",text:"{caption}",$order:20},EXTRA:{style:"{_extraDisplay}",text:"{ext}",$order:30},RTAGCMDS:{$order:40,tagName:"span",style:"{_rtagDisplay}",text:"{rtagCmds}"},OPT:{$order:50,style:"{_optDisplay}",className:"xuifont",$fonticon:"{_fi_optClass}"}}},"items.ltagCmds":function(e,t,i,r,o){var n=arguments.callee,a=n._m||(n._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(e,t,i,"items.tagCmds"+(a[i.type]||".button"),o)},"items.rtagCmds":function(e,t,i,r,o){var n=arguments.callee,a=n._m||(n._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(e,t,i,"items.tagCmds"+(a[i.type]||".button"),o)},"items.tagCmds.text":xui.UI.$getTagCmdsTpl("text"),"items.tagCmds.button":xui.UI.$getTagCmdsTpl("button"),"items.tagCmds.image":xui.UI.$getTagCmdsTpl("image")}},Appearances:{KEY:{},LABEL:{"z-index":1,top:0,left:0,display:xui.browser.isWebKit?"-webkit-flex":"flex",position:"absolute","padding-top":".333em"},EXTRA:{display:"none"},ITEMS:{position:"relative",overflow:"auto","overflow-x":"hidden"},ITEM:{display:"block",zoom:xui.browser.ie?1:null,cursor:"pointer",position:"relative","white-space":"nowrap"},MARK:{$order:1,cursor:"pointer","vertical-align":"middle"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle",padding:".167em","font-size":"1em","white-space":"normal"},OPT:{$order:10,position:"absolute",left:"auto",top:"50%","margin-top":"-0.5em",right:".167em",display:"none"},"LTAGCMDS, RTAGCMDS":{padding:0,margin:0,"vertical-align":"middle"},"ITEMS-tagcmdleft RTAGCMDS":{"padding-right":".333em",float:"left"},"ITEMS-tagcmdfloatright RTAGCMDS":{"padding-right":".333em",float:"right"}},Behaviors:{HoverEffected:{ITEM:"ITEM",OPT:"OPT",CMD:"CMD",ICON:"ICON"},ClickEffected:{ITEM:"ITEM",OPT:"OPT",CMD:"CMD"},DraggableKeys:["ITEM"],DroppableKeys:["ITEM","ITEMS"],ITEM:{onDblclick:function(e,t,i){e.properties;var r=e.getItemByDom(i);e.boxing().onDblclick(e,r,t,i)},onClick:function(e,t,i){var r=e.properties,o=e.getItemByDom(i),n=(e.getSubId(i),e.boxing()),a=xui.Event.getKey(t);if(e.beforeClick&&!1===n.beforeClick(e,o,t,i))return!1;if(r.disabled||o.disabled||"split"==o.type)return!1;switch(e.onClick&&n.onClick(e,o,t,i),xui.use(i).focus(!0),r.selMode){case"none":n.onItemSelected(e,o,t,i,0);break;case"multibycheckbox":if(r.readonly||o.readonly)return!1;if(e.keys.MARK&&e.getKey(xui.Event.getSrc(t).id||"")!=e.keys.MARK){n.onItemSelected(e,o,t,i,0);break}case"multi":if(r.readonly||o.readonly)return!1;var s=n.getUIValue(),u=s?s.split(r.valueSeparator):[],l=1;if(u.length&&(a.ctrlKey||a.shiftKey||r.noCtrlKey||r.$checkbox)){if(a.shiftKey){var d,c=r.items,p=xui.arr.subIndexOf(c,"id",e.$firstV.id),h=xui.arr.subIndexOf(c,"id",o.id);for(u.length=0,d=Math.min(p,h);d<=Math.max(p,h);d++)u.push(c[d].id)}else-1!=xui.arr.indexOf(u,o.id)?(xui.arr.removeValue(u,o.id),l=-1):u.push(o.id);u.sort(),s=u.join(r.valueSeparator),n.getUIValue()!==s&&(n.setUIValue(s,null,null,"click"),n.get(0)&&n.getUIValue()==s&&n.onItemSelected(e,o,t,i,l));break}case"single":if(r.readonly||o.readonly)return!1;n.getUIValue()!==o.id&&(e.$firstV=o,n.setUIValue(o.id,null,null,"click"),n.get(0)&&n.getUIValue()==o.id&&n.onItemSelected(e,o,t,i,1))}return e.afterClick?n.afterClick(e,o,t,i):void 0},onKeydown:function(e,t,i){var r=xui.Event.getKey(t),o=(r[0],r[2]),n=xui(i),a=e.getRoot().nextFocus(!0,!0,!1),s=e.getRoot().nextFocus(!1,!0,!1);switch(xui.Event.getKey(t)[0]){case"tab":if(o){if(n.get(0)!=a.get(0))return a.focus(!0),!1}else if(n.get(0)!=s.get(0))return s.focus(!0),!1;break;case"left":case"up":return n.nextFocus(!1,!0,!1),n.get(0)==a.get(0)?s.focus(!0):n.nextFocus(!1),!1;case"right":case"down":return n.nextFocus(!0,!1,!1),n.get(0)==s.get(0)?a.focus(!0):n.nextFocus(),!1;case"enter":n.onClick(!0)}},onContextmenu:function(e,t,i){if(e.onContextmenu)return!1!==e.boxing().onContextmenu(e,t,i,e.getItemByDom(i))},onMouseover:function(e,t,i){if(!xui.browser.fakeTouch&&"touchOnly"!=xui.browser.deviceType){var r=e.getItemByDom(i);r&&(e.properties.optBtn||r.optBtn)&&e.getSubNode("OPT",e.getSubId(i)).setInlineBlock()}},onMouseout:function(e,t,i){if(!xui.browser.fakeTouch&&"touchOnly"!=xui.browser.deviceType){var r=e.getItemByDom(i);r&&(e.properties.optBtn||r.optBtn)&&e.getSubNode("OPT",e.getSubId(i)).css("display","none")}}},OPT:{onClick:function(e,t,i){if(e.onShowOptions){var r=e.getItemByDom(i);if(!r)return;if(!e.properties.optBtn&&!r.optBtn)return;e.boxing().onShowOptions(e,r,t,i)}return!1},onDblclick:function(e,t,i){return!1}},CMD:{onClick:function(e,t,i){var r=e.properties,o=e.getItemByDom(xui.use(i).parent().get(0));return!!o&&(r.disabled||o.disabled||"split"==o.type||e.onCmd&&e.boxing().onCmd(e,o,xui.use(i).id().split("_")[1],t,i),!1)}},LABEL:{onClick:function(e,t,i){if(e.properties.disabled)return!1;e.onLabelClick&&e.boxing().onLabelClick(e,t,i)},onDblClick:function(e,t,i){if(e.properties.disabled)return!1;e.onLabelDblClick&&e.boxing().onLabelDblClick(e,t,i)},onMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t))return!e.properties.disabled&&void(e.onLabelActive&&e.boxing().onLabelActive(e,t,i))}}},DataModel:{lite:{private:1,ini:!1,action:function(e){this.boxing().refresh()}},selMode:{ini:"single",listbox:["single","none","multi","multibycheckbox"],action:function(e){this.box._ITEMMARKED||this.getSubNode("MARK",!0).css("display","multi"==e||"multibycheckbox"==e?"":"none")}},borderType:{ini:"flat",listbox:["none","flat","inset","outset"],action:function(e){var t=this,i=(t.properties,t.getSubNode("ITEMS"));t.getRoot(),i.removeClass(/^xui-uiborder-/),i.addClass("xui-uiborder-"+e),t.adjustSize()}},noCtrlKey:!0,width:{$spaceunit:1,ini:"10em"},height:{$spaceunit:1,ini:"15em"},maxHeight:420,itemRow:{ini:"",combobox:["row","cell"],action:function(e){var t=this.getSubNode("ITEM",!0);t.removeClass(/xui-item-[\w]+/),e&&t.addClass("xui-item-"+(e||"row"))}},optBtn:{ini:"",combobox:xui.toArr("xui-uicmd-opt,xui-icon-singleright"),action:function(){this.boxing().refresh()}},tagCmds:{ini:[],action:function(){this.boxing().refresh()}},tagCmdsAlign:{ini:"right",listbox:["left","right","floatright"],action:function(e){var t=this,i=t.getSubNode("ITEMS"),r=t.getClass("ITEMS","-tagcmd");i.removeClass(new RegExp(r+"[w]*")).addClass(t.getClass("ITEMS","-tagcmd"+e))}},labelSize:{$spaceunit:2,ini:0,action:function(e){this.getSubNode("LABEL").css({display:e?"":"none"}),xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelPos:{ini:"left",listbox:["none","left","top","right","bottom"],action:function(e){xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelGap:{$spaceunit:2,ini:4,action:function(e){xui.UI.$doResize(this,this.properties.width,this.properties.height,!0)}},labelCaption:{ini:"",action:function(e){e=(xui.isSet(e)?e:"")+"",this.getSubNode("LABEL").html(xui.adjustRes(e,!0))}},labelHAlign:{ini:"right",listbox:["","left","center","right"],action:function(e){this.getSubNode("LABEL").css({textAlign:e||"",justifyContent:"right"==e?"flex-end":"center"==e?"center":"left"==e?"flex-start":""})}},labelVAlign:{ini:"top",listbox:["","top","middle","bottom"],action:function(e){this.getSubNode("LABEL").css("align-items","bottom"==e?"flex-end":"middle"==e?"center":"top"==e?"flex-start":"")}}},EventHandlers:{onClick:function(e,t,i,r){},onCmd:function(e,t,i,r,o){},beforeClick:function(e,t,i,r){},afterClick:function(e,t,i,r){},onDblclick:function(e,t,i,r){},onShowOptions:function(e,t,i,r){},onItemSelected:function(e,t,i,r,o){},onLabelClick:function(e,t,i){},onLabelDblClick:function(e,t,i){},onLabelActive:function(e,t,i){}},_onStartDrag:function(e,t,i,r){return r=xui.Event.getPos(t),xui.use(i).startDrag(t,{dragSource:e.$xid,dragType:"icon",shadowFrom:i,targetLeft:r.left+12,targetTop:r.top+12,dragCursor:"pointer",dragDefer:2,dragKey:e.box.getDragKey(e,i),dragData:e.box.getDragData(e,t,i)}),!1},_onDropTest:function(e,t,i,r,o,n){var a=o&&o.domId,s=xui.use(i).id();if(a){if(a==s)return!1;if(xui.get(xui.use(i).get(0),["previousSibling","id"])==a)return!1}},_onDrop:function(e,t,i,r,o,n){var a,s=e.getKey(xui.use(i).id()),u=o.profile,l=o.domId,d=xui.absObj.$specialChars,c=e.properties.$UIvalue;return a=xui.clone(u.getItemByDom(l),(function(e,t){return!d[(t+"").charAt(0)]})),u.boxing().removeItems([a.id]),s==e.keys.ITEM?e.boxing().insertItems([a],n.id,!0):e.boxing().insertItems([a]),a.id==c&&e.boxing().setUIValue(a.id,!0,null,"drop"),o._new=a,!1},_prepareData:function(e){var t,i=arguments.callee.upper.call(this,e);return i._bordertype="xui-uiborder-"+i.borderType,i._labelHAlign="text-align:"+(t=i.labelHAlign||"")+";justify-content:"+("right"==t?"flex-end":"center"==t?"center":"left"==t?"flex-start":""),i._labelVAlign="align-items:"+("bottom"==(t=i.labelVAlign)?"flex-end":"middle"==t?"center":"top"==t?"flex-start":""),i.labelShow="none"!=i.labelPos&&i.labelSize&&"auto"!=i.labelSize?"":"display:none",i._labelSize=i.labelSize?"":0+e.$picku(),i.labelCaption&&(i.labelCaption=xui.adjustRes(i.labelCaption,!0)),i._cmdsalign=e.getClass("ITEMS","-tagcmd"+e.properties.tagCmdsAlign),i},_prepareItem:function(e,t){var i,r=e.properties,o=r.selMode;t._cbDisplay="multi"==o||"multibycheckbox"==o?"":"display:none;",t._itemCls=(i=e.properties.itemRow)?"xui-item-"+i:"",r.lite&&(t._itemCls+=" xui-ui-clear-size "),(xui.browser.fakeTouch||"mouseOnly"!==xui.browser.deviceType)&&(t._optDisplay=r.optBtn?"display:block;":""),t._fi_optClass=r.optBtn,"split"==t.type&&(t._split="xui-uitem-split",t._ltagDisplay=t._rtagDisplay=t.imageDisplay=t._cbDisplay=t._capDisplay=t._extraDisplay=t._optDisplay="display:none;"),this._prepareCmds(e,t)},_dynamicTemplate:function(e){var t,i=e.properties,r=e._exhash="$lite:"+i.lite,o=e.box.getTemplate(r);i.$UIvalue=i.value,o||(o=xui.clone(e.box.getTemplate()),i.lite&&(delete o.LABEL,(t=o.$submap.items).ITEM={className:t.ITEM.className,style:t.ITEM.style,tabindex:t.ITEM.tabindex,text:"{caption}"}),e.box.setTemplate(o,r)),e.template=o},RenderTrigger:function(){if("xui.UI.List"==this.key){var e=this.properties;xui.UI.$doResize(this,e.width,e.height)}},_onresize:function(e,t,i){var r,o,n=e.properties,a=xui.$us(e),s=function(t,i){return e.$forceu(t,a>0?"em":"px",i)},u=e.getRoot(),l=xui.browser.contentBox,d=function(t){return e.getSubNode(t)},c=d("ITEMS"),p=d("LABEL"),h=e.getEmSize()/u._getEmSize(),f=c._getEmSize(h),x=p._getEmSize(h),g=l&&"none"!=n.borderType?c._borderW():0,m=n.dock,b=n.maxHeight,v=n.labelPos,y="none"!=v&&v&&e.$px(n.labelSize,x)||0,A="none"!=v&&v&&e.$px(n.labelGap)||0;t&&"auto"!=t&&(t=e.$px(t)),i&&"auto"!=i&&(i=e.$px(i)),c.cssRegion({left:s("left"==v?y:0,f),top:s("top"==v?y:0,f),width:s(r=null===t?null:"auto"==t?t:Math.max(0,t-(l?c._paddingW("both"):0)-("left"==v||"right"==v?y:0)-g),f),height:s(o=null===i?null:"auto"==i?i:Math.max(0,i-(l?c._paddingH("both"):0)-("top"==v||"bottom"==v?y:0)-g),f)}),"auto"==i&&"fill"!=m&&"cover"!=m&&"height"!=m&&"left"!=m&&"right"!=m&&c.height()>b&&(c.height(s(b,f)),u.height("auto")),y&&("auto"==t&&(r=c.offsetWidth()),"auto"==i&&(o=c.offsetHeight()),p.cssRegion({left:s(null===t?null:Math.max(0,"right"==v?("auto"==t?r:t-y)+A:0),x),top:s(null===i?null:Math.max(0,"bottom"==v?("auto"==i?o:i-y)+A:0),x),width:s(null===t?null:Math.max(0,"left"==v||"right"==v?y-A:"auto"==t?r:t),x),height:s(null===i?null:Math.max(0,"top"==v||"bottom"==v?y-A:"auto"==i?o:i),x)}))}}}),xui.Class("xui.UI.Gallery","xui.UI.List",{Instance:{getStatus:function(e){var t=this.get(0).getItemByItemId(e);return t&&t._status||"ini"},_afterInsertItems:function(e){e.getSubNodes("IMAGE",!0).each((function(e){e.src==xui.ini.img_bg&&(xui.browser.isFF&&(e.src=""),e.src=e.title,e.title="")}))}},Initialize:function(){var e=this.getTemplate();e.$submap={items:{ITEM:{tabindex:"{_tabindex}",className:"xui-uitembg xui-uiborder-radius xui-showfocus {itemClass} {disabled} {readonly}",style:"padding:{itemPadding};margin:{itemMargin};{_itemSize};{itemStyle}",ITEMFRAME:{style:"{_inneritemSize}",CAPTION:{tagName:"div",className:"xui-ui-ellipsis",style:"{capDisplay}",text:"{caption}",$order:0},CONTENT:{tagName:"div",$order:1,style:"{_loadbg}",ICON:{className:"xuifont {_imageClass}",style:"{_fontSize}",text:"{iconFontCode}"},IMAGE:{tagName:"img",src:xui.ini.img_bg,title:"{image}",style:"{_innerimgSize};{imgStyle}"}},COMMENT:{tagName:"div",className:"xui-ui-ellipsis",text:"{comment}",style:"{commentDisplay}",$order:2}},FLAG:{$order:20,className:"xui-display-none xui-uiflag {flagClass}",style:"{_flagStyle};{flagStyle}",text:"{flagText}"},EXTRA:{text:"{ext}",$order:30}}}},this.setTemplate(e),xui.UI.IconList=xui.UI.Gallery;var t="xui.UI.IconList";xui.absBox.$type[t.replace("xui.UI.","")]=xui.absBox.$type[t]=t},Static:{IMGNODE:1,Appearances:{EXTRA:{display:"none"},KEY:{overflow:"visible"},ITEMS:{position:"relative",overflow:"auto","overflow-x":"hidden",zoom:xui.browser.ie6?1:null},"ITEMS-nowrap":{"white-space":"nowrap"},ITEM:{display:xui.$inlineBlock,zoom:xui.browser.ie67?1:null,position:"relative",cursor:"pointer","vertical-align":"top",margin:0},ITEMFRAME:{display:xui.browser.ie67?xui.$inlineBlock:"block",zoom:xui.browser.ie67?1:null,position:"relative",overflow:"hidden",border:0,padding:0,margin:0,"-moz-box-flex":"1"},IBWRAP:{},IMAGE:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,"vertical-align":"middle"},CAPTION:{"text-align":"center",overflow:"hidden","white-space":"nowrap","font-weight":"bold","font-size":"1em"},CONTENT:{"text-align":"center","white-space":"nowrap","background-repeat":"no-repeat","background-position":"center center","font-size":"1em"},COMMENT:{display:"block",margin:".1667em","text-align":"center","font-size":"1em"},FLAG:{position:"absolute","z-index":10}},Behaviors:{IMAGE:{onLoad:function(e,t,i){var r=xui.use(i).get(0).src;if(r!=xui.ini.img_bg){var o=e.properties,n=xui.use(i),a=n.get(0),s=e.getItemByDom(i);if(!s)return;var u=e.getSubNodeByItemId("ICON",s.id);s.autoImgSize||o.autoImgSize?(n.attr("width",""),n.attr("height","")):(n.attr("width",s.imgWidth),n.attr("height",s.imgWidth)),u.removeClass("xui-icon-loading"),s.iconFontCode||s.imageClass||u.addClass("xui-display-none"),n.onLoad(null).onError(null).$removeEventHandler("load").$removeEventHandler("error"),s._status="loaded",xui.ini.img_blank==r?a.style.display="none":a.style.display=""}},onError:function(e,t,i){var r=e.getItemByDom(i);if("error"!=r._status){e.properties;var o=xui.use(i),n=o.get(0);e.getSubNodeByItemId("ICON",r.id).removeClass("xui-icon-loading xui-display-none").addClass("xui-load-error"),o.onLoad(null).onError(null).$removeEventHandler("load").$removeEventHandler("error"),n.style.display="none",r._status="error"}}},FLAG:{onClick:function(e,t,i){var r=e.getItemByDom(i),o=e.boxing();if(e.onFlagClick)return o.onFlagClick(e,r,t,i),!1}}},DataModel:{lite:null,tagCmds:null,tagCmdsAlign:null,autoImgSize:{ini:!1,action:function(){this.boxing().refresh()}},autoItemSize:{ini:!0,action:function(){this.boxing().refresh()}},iconOnly:{ini:!1,action:function(){this.boxing().refresh()}},iconFontSize:{ini:"",action:function(e){this.getSubNode("ICON",!0).css("font-size",e)}},itemMargin:{ini:6,action:function(e){this.getSubNode("ITEM",!0).css("margin",e||0)}},itemPadding:{ini:2,action:function(e){this.getSubNode("ITEM",!0).css("padding",e||0)}},itemWidth:{$spaceunit:1,ini:32,action:function(e){this.properties.autoItemSize||this.getSubNode("ITEMFRAME",!0).width(e||"")}},itemHeight:{$spaceunit:1,ini:32,action:function(e){this.properties.autoItemSize||this.getSubNode("ITEMFRAME",!0).height(e||"")}},imgWidth:{ini:16,action:function(e){this.properties.autoImgSize||this.getSubNode("IMAGE",!0).width(e||"")}},imgHeight:{ini:16,action:function(e){this.properties.autoImgSize||this.getSubNode("IMAGE",!0).height(e||"")}},width:{$spaceunit:1,ini:"16rem"},height:{$spaceunit:1,ini:"16rem"},columns:{ini:0,action:function(){this.boxing().refresh()}},rows:{ini:0,action:function(){this.boxing().refresh()}}},EventHandlers:{onCmd:null,onFlagClick:function(e,t,i,r){}},_prepareData:function(e){var t=arguments.callee.upper.call(this,e),i=e.properties;return i.cols&&(t._itemscls1=e.getClass("ITEMS","-nowrap")),t},_prepareItem:function(e,t){var i,r=e.properties,o=r.columns,n=r.rows,a=t.autoItemSize||r.autoItemSize,s=t.autoImgSize||r.autoImgSize;xui.arr.each(xui.toArr("itemWidth,itemHeight,imgWidth,imgHeight,itemPadding,itemMargin,iconFontSize,autoItemSize,autoImgSize"),(function(e){t[e]=xui.isSet(t[e])?t[e]:r[e]})),t.itemWidth=!a&&(i=t.itemWidth)?e.$forceu(i):"",t.itemHeight=!a&&(i=t.itemHeight)?e.$forceu(i):"",t.itemMargin=(i=t.itemMargin)?e.$forceu(i):0,t.itemPadding=(i=t.itemPadding)?e.$forceu(i):0,t.imgWidth=!s&&(i=t.imgWidth)?e.$forceu(i):"",t.imgHeight=!s&&(i=t.imgHeight)?e.$forceu(i):"",t._tabindex=r.tabindex,(i=t.iconFontSize)&&(t._fontSize="font-size:"+i),t._imageClass="",t.iconFontCode||t.imageClass||(t._imageClass+="xui-icon-loading"),t.imageClass&&(t._imageClass+=" "+t.imageClass),(t.flagText||t.flagClass)&&(t._flagStyle="display:block"),t.flagClass||(t.flagClass="xui-uiflag-1"),r.iconOnly&&(delete t.caption,delete t.comment),""===(t.caption=t.caption||"")&&(t.capDisplay="display:none;"),""===(t.comment=t.comment||"")&&(t.commentDisplay="display:none;"),t._itemSize="",o&&(t._itemSize+="width:"+100/o+"%;border:0;margin-left:0;margin-right:0;padding-left:0;padding-right:0;"),n&&(t._itemSize+="height:"+100/n+"%;border:0;margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;"),a||(t._inneritemSize=(!o&&t.itemWidth?"width:"+t.itemWidth+";":"")+(!n&&t.itemHeight?"height:"+t.itemHeight:"")),s||(t._innerimgSize=(t.imgWidth?"width:"+t.imgWidth+";":"")+(!n&&t.imgHeight?"height:"+t.imgHeight:""))},RenderTrigger:function(){this.boxing()._afterInsertItems(this)}}}),xui.Class("xui.UI.Panel","xui.UI.Div",{Instance:{activate:function(){return this.get(0).getSubNode("CAPTION").focus(!0),this},resetPanelView:function(e,t){var i;return xui.isSet(e)||(e=!0),xui.isSet(t)||(t=!0),this.each((function(r){r.renderId&&(delete r.$ini,e&&(i=r.boxing()).removeChildren(!0,t),r.properties.toggle&&i.setToggle(!1))}))},iniPanelView:function(){return this.each((function(e){if(!e.$ini){e.$ini=!0;var t=e.properties;e.onIniPanelView&&e.boxing().onIniPanelView(e),(t.iframeAutoLoad||t.ajaxAutoLoad)&&xui.UI.Div._applyAutoLoad(e)}}))}},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",BORDER:{tagName:"div",className:"xui-uiborder-outset xui-uiborder-box xui-uiborder-radius-big",TBAR:{tagName:"div",className:"xui-uibar-top",BARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-tl",BARTDLT:{className:"xui-uibar-tdlt"}},BARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar",BARTDMT:{className:"xui-uibar-tdmt"}},BARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-tr",BARTDRT:{className:"xui-uibar-tdrt"}},BARCMDL:{$order:3,tagName:"div",className:"xui-uibar-cmdl",style:"{_align}",LTAGCMDS:{tagName:"span",className:"xui-ltag-cmds",style:"{_ltagDisplay}",text:"{ltagCmds}"},TOGGLE:{$order:1,className:"xuifont",$fonticon:"{_fi_toggleCls2}",style:"{toggleDisplay}"},ICON:{$order:2,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{tabindex:"{tabindex}",className:"xui-title-node",text:"{caption}",$order:3}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr",RTAGCMDS:{$order:0,tagName:"span",className:"xui-rtag-cmds",style:"{_rtagDisplay}",text:"{rtagCmds}"},INFO:{className:"xuicon",$fonticon:"xui-uicmd-info",style:"{infoDisplay}",$order:1},OPT:{className:"xuicon",$fonticon:"xui-uicmd-opt",style:"{optDisplay}",$order:2},POP:{className:"xuicon",$fonticon:"xui-uicmd-pop",style:"{popDisplay}",$order:3},REFRESH:{className:"xuicon",$fonticon:"xui-uicmd-refresh",style:"{refreshDisplay}",$order:4},CLOSE:{className:"xuicon",$fonticon:"xui-uicmd-close",style:"{closeDisplay}",$order:5}}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main xui-uibar",style:"{_leftp}",MAINI:{tagName:"div",className:"xui-uicon-maini xui-uibar",style:"{_rightp}",PANEL:{tagName:"div",className:"xui-uibase xui-uicontainer {_bordertype}",style:"{panelDisplay};{_panelstyle};{_overflow};",text:"{html}"+xui.UI.$childTag}}},BBAR:{$order:3,tagName:"div",className:"xui-uibar-bottom-s",style:"{_bbarDisplay}",BBARTDL:{className:"xui-uibar-tdl xui-uibar xui-uiborder-radius-big-bl"},BBARTDM:{$order:1,className:"xui-uibar-tdm xui-uibar"},BBARTDR:{$order:2,className:"xui-uibar-tdr xui-uibar xui-uiborder-radius-big-br"}}},$submap:xui.UI.$getTagCmdsTpl()},Appearances:{KEY:{background:"transparent"},"LTAGCMDS, RTAGCMDS":{padding:0,margin:0,"vertical-align":"middle"},"KEY BORDER":{zoom:xui.browser.ie6?1:null},"TBART, BBART":{"border-spacing":0,"border-collapse":"separate"},PANEL:{position:"relative",left:0,top:0,overflow:"auto","line-height":"normal",zoom:xui.browser.ie6?1:null},CAPTION:{display:"inline",padding:".25em","vertical-align":xui.browser.ie6?"baseline":"middle"}},Behaviors:{DroppableKeys:["PANEL"],PanelKeys:["PANEL"],DraggableKeys:["TBAR"],NavKeys:{CAPTION:1},NoDraggableKeys:["INFO","OPT","CLOSE","POP","REFRESH","TOGGLE","CMD","TOGGLE"],HoverEffected:{INFO:"INFO",OPT:"OPT",CLOSE:"CLOSE",POP:"POP",REFRESH:"REFRESH",CMD:"CMD",TOGGLE:"TOGGLE",ICON:"ICON"},ClickEffected:{INFO:"INFO",OPT:"OPT",CLOSE:"CLOSE",POP:"POP",REFRESH:"REFRESH",CMD:"CMD",TOGGLE:"TOGGLE"},TOGGLE:{onClick:function(e,t,i){if(e.properties.toggleBtn)return e.box._toggle(e,!e.properties.toggle),!1}},CAPTION:{onClick:function(e,t,i){if(!e.onClickBar||!1===e.boxing().onClickBar(e,i))return xui.Event.getKey(t).shiftKey}},PANEL:{onClick:function(e,t,i){return!e.properties.disabled&&(e.onClickPanel?e.boxing().onClickPanel(e,t,i):void 0)}},INFO:{onClick:function(e,t,i){e.boxing().onShowInfo(e,t,i)}},OPT:{onClick:function(e,t,i){e.boxing().onShowOptions(e,t,i)}},REFRESH:{onClick:function(e,t,i){e.boxing().onRefresh(e)}},CLOSE:{onClick:function(e,t,i){if(!e.properties.disabled){var r=e.boxing();!1!==r.beforeClose(e)&&r.destroy()}}},POP:{onClick:function(e,t,i){var r=e.properties;if(!r.disabled){var o=e.getRoot().offset(),n=e.getRoot().cssSize(),a={parent:null,host:null,properties:null,events:null,CS:null,CC:null,CB:null,CF:null,init:null};if(e.beforePop&&0==e.boxing().beforePop(e,a,t,i))return!1;var s=xui.copy(xui.UI.Dialog.$DataStruct),u={};xui.merge(s,r,"with"),xui.merge(s,{dock:"none",width:Math.max(n.width,200),height:Math.max(n.height,100),left:o.left,top:o.top,landBtn:!0},"all"),a.properties&&xui.merge(s,a.properties,"with"),a.events&&xui.merge(u,a.events,"all");var l=new xui.UI.Dialog(s,u,a.host||e.host,a.CS||null,a.CC||null,a.CB||null,a.CF||null);if(xui.isFun(a.init)&&!1===a.init(l,e,a));else{l.show(a.parent||xui("body"));var d=[];xui.arr.each(e.children,(function(e){d.push(e[0])})),d.length&&l.append(xui.UI.pack(d,!1)),e.boxing().removeChildren().destroy(!0)}}}},CMD:{onClick:function(e,t,i){return e.properties.disabled||e.onCmd&&e.boxing().onCmd(e,xui.use(i).id().split("_")[1],t,i),!1}}},DataModel:{rotate:null,selectable:!0,dock:"fill",caption:{ini:undefined,action:function(e){e=(xui.isSet(e)?e:"")+"",this.getSubNode("CAPTION").html(xui.adjustRes(e,!0))}},html:{action:function(e,t,i){this.getSubNode("PANEL").html(xui.adjustRes(e,0,1),null,null,i)}},toggle:{ini:!0,action:function(e){this.box._toggle(this,e)}},image:{format:"image",action:function(e){xui.UI.$iconAction(this)}},imagePos:{action:function(e){this.getSubNode("ICON").css("backgroundPosition",e||"center")}},imageBgSize:{action:function(e){this.getSubNode("ICON").css("backgroundSize",e||"")}},imageClass:{ini:"",action:function(e,t){xui.UI.$iconAction(this,"ICON",t)}},iconFontCode:{action:function(e){xui.UI.$iconAction(this)}},borderType:{ini:"inset",listbox:["none","flat","inset","outset"],action:function(e){var t=this,i=(t.properties,t.getSubNode("PANEL"));t.getRoot(),i.removeClass(/^xui-uiborder-/),i.addClass("xui-uiborder-"+e),t.adjustSize()}},noFrame:{ini:!1,action:function(e){var t=this;t.getRoot(),t.getSubNode("BBAR").css("display",e?"none":""),t.getSubNode("MAIN").css("paddingLeft",e?"0":""),t.getSubNode("MAINI").css("paddingRight",e?"0":"").css("backgroundImage",e?"none":""),t.adjustSize()}},hAlign:{ini:"left",listbox:["left","center","right"],action:function(e){this.getSubNode("BARCMDL").css("textAlign",e)}},toggleIcon:{listbox:["xui-uicmd-toggle","xui-uicmd-check"],ini:"xui-uicmd-toggle",action:function(e,t){this.getSubNode("TOGGLE").replaceClass(new RegExp("\\b"+t,"img"),e)}},infoBtn:{ini:!1,action:function(e){this.getSubNode("INFO").css("display",e?"":"none")}},optBtn:{ini:!1,action:function(e){this.getSubNode("OPT").css("display",e?"":"none")}},toggleBtn:{ini:!1,action:function(e){this.getSubNode("TOGGLE").css("display",e?"":"none")}},closeBtn:{ini:!1,action:function(e){this.getSubNode("CLOSE").css("display",e?"":"none")}},refreshBtn:{ini:!1,action:function(e){this.getSubNode("REFRESH").css("display",e?"":"none")}},popBtn:{ini:!1,action:function(e){this.getSubNode("POP").css("display",e?"":"none")}},tagCmds:{ini:[],action:function(){this.boxing().refresh()}}},LayoutTrigger:function(){var e=this;e.properties.toggle?e.boxing().iniPanelView():e.box._toggle(e,!1,!0)},EventHandlers:{onIniPanelView:function(e){},beforeFold:function(e){},beforeExpand:function(e){},afterFold:function(e){},afterExpand:function(e){},onClickBar:function(e,t){},onClickPanel:function(e,t,i){},beforePop:function(e,t,i,r){},beforeClose:function(e){},onShowInfo:function(e,t,i){},onShowOptions:function(e,t,i){},onRefresh:function(e){},onCmd:function(e,t,i,r){}},_prepareData:function(e){var t=arguments.callee.upper.call(this,e),i="display:none";return t._bordertype="xui-uiborder-"+t.borderType,t._bbarDisplay=t.noFrame?i:"",t._leftp=t.noFrame?"padding-left:0;":"",t._rightp=t.noFrame?"padding-right:0;background-image:none;":"",t.toggleDisplay=t.toggleBtn?"":i,t.panelDisplay=t.toggleBtn&&!t.toggle?i:"",t._fi_toggleCls2=t.toggleIcon+(t.toggleBtn&&t.toggle?" xuifont-checked "+t.toggleIcon+"-checked":""),e._toggle=!!t.toggle,t.infoDisplay=t.infoBtn?"":i,t.optDisplay=t.optBtn?"":i,t.closeDisplay=t.closeBtn?"":i,t.popDisplay=t.popBtn?"":i,t.refreshDisplay=t.refreshBtn?"":i,t._align="text-align:"+t.hAlign+";",xui.isEmpty(t.tagCmds)||this._prepareCmds(e,t),t},_toggle:function(e,t,i){var r=e.properties,o=e.boxing();if(t&&o.iniPanelView(),i||e._toggle!==!!t){if(e._toggle=r.toggle=!!t,!i)if(t){if(o.beforeExpand&&!1===o.beforeExpand(e))return}else if(o.beforeFold&&!1===o.beforeFold(e))return;r.toggleBtn&&e.getSubNode("TOGGLE").tagClass("-checked",!!t),e.adjustSize(!0),i||(t?o.afterExpand&&o.afterExpand(e):o.afterFold&&o.afterFold(e)),r.dock&&"none"!=r.dock&&o.adjustDock(!0)}},_onresize:function(e,t,i){var r,o=e.properties,n=xui.$us(e),a=function(t,i){return e.$forceu(t,n>0?"em":"px",i)},s=e.getRoot(),u={},l=o.noFrame,d=e.getSubNode("BORDER"),c=e.getSubNode("TBAR"),p=e.getSubNode("PANEL"),h=e.getSubNode("BBAR"),f=e.getSubNode("MAIN"),x=e.getSubNode("MAINI"),g=e.getEmSize()/s._getEmSize(),m=p._getEmSize(g),b=d.contentBox(),v=d._borderH(),y=p.contentBox(),A="none"!=e.properties.borderType?p._borderW():0;t&&"auto"!=t&&(t=e.$px(t,null,!0)),i&&"auto"!=i&&(i=e.$px(i,null,!0)),i&&(e._toggle?p.css("display",""):p.css("display","none"),"auto"==i?s.height(u.height="auto"):e._toggle?((r=i-v-c.offsetHeight(!0)-(l?0:h.offsetHeight(!0)))>0&&(u.height=a(r-(y?A:0),m)),d.height(a(i-(b?v:0),d)),s.height(a(i))):(d.height("auto"),s.height("auto"))),t&&(u.width=a(t-(l?0:Math.round(parseFloat(x.css("paddingRight")))||0)-(l?0:Math.round(parseFloat(f.css("paddingLeft")))||0)-v-A-f._borderW()-x._borderW(),m)),e._toggle&&(p.cssSize(u,!0),t&&xui.UI._adjustConW(e,p,u.width))}}}),xui.Class("xui.UI.Group","xui.UI.Panel",{Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",BORDER:{tagName:"fieldset",className:"{_fieldCls} xui-uibar-top2",TBAR:{tagName:"legend",style:"{_align}",BARCMDL:{LTAGCMDS:{tagName:"span",className:"xui-ltag-cmds",style:"{_ltagDisplay}",text:"{ltagCmds}"},TOGGLE:{$order:1,className:"xuifont",$fonticon:"{_fi_toggleCls2}",style:"{toggleDisplay}"},ICON:{$order:2,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{tabindex:"{tabindex}",className:"xui-title-node",text:"{caption}",$order:3}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr xui-uibase",RTAGCMDS:{$order:0,tagName:"span",className:"xui-rtag-cmds",style:"{_rtagDisplay}",text:"{rtagCmds}"},INFO:{className:"xuicon",$fonticon:"xui-uicmd-info",style:"{infoDisplay}",$order:1},OPT:{className:"xuicon",$fonticon:"xui-uicmd-opt",style:"{optDisplay}",$order:2},POP:{className:"xuicon",$fonticon:"xui-uicmd-pop",style:"{popDisplay}",$order:3},REFRESH:{className:"xuicon",$fonticon:"xui-uicmd-refresh",style:"{refreshDisplay}",$order:4},CLOSE:{className:"xuicon",$fonticon:"xui-uicmd-close",style:"{closeDisplay}",$order:5}}},PANEL:{$order:1,tagName:"div",style:"{panelDisplay};{_panelstyle};{_overflow};",className:"xui-uicontainer xui-uiborder-radius-bl xui-uiborder-radius-br",text:"{html}"+xui.UI.$childTag}},$submap:xui.UI.$getTagCmdsTpl()},Appearances:{KEY:{zoom:xui.browser.ie6?"1":null},BORDER:{position:"relative",overflow:"visible",zoom:xui.browser.ie6?"1":null},"LTAGCMDS, RTAGCMDS":{padding:0,margin:0,"vertical-align":"middle"},TBAR:{width:"auto",padding:"0 0 .1666667em 0",margin:"0 0 0 .5em",border:0,"font-size":"inherit"},"BORDER-checked TBAR":{"margin-left":"-.5em"},"BORDER-checked BARCMDL":{"padding-left":"1em"},BARCMDL:{cursor:"default","padding-right":".25em",display:xui.$inlineBlock},PANEL:{position:"relative",overflow:"auto","line-height":"normal",background:xui.browser.ie?"url("+xui.ini.img_bg+") no-repeat left top":null},CAPTION:{display:"inline","vertical-align":xui.browser.ie6?"baseline":"middle"},TOGGLE:{padding:"0 .334em 0 0"}},DataModel:{dock:"none",noFrame:null,borderType:null,toggleBtn:{ini:!0}},_prepareData:function(e){var t=arguments.callee.upper.call(this,e);return e.properties.toggle||(t.height="auto"),t._fieldCls=t.toggleBtn&&!t.toggle?" xui-uiborder-t":" xui-uiborder-flat xui-uiborder-radius",t},_toggle:function(e,t,i){var r=e.properties,o=e.boxing();if(t&&o.iniPanelView(),i||e._toggle!==!!t){if(e._toggle=r.toggle=!!t,!i)if(t){if(o.beforeExpand&&!1===o.beforeExpand(e))return}else if(o.beforeFold&&!1===o.beforeFold(e))return;r.toggleBtn&&e.getSubNode("TOGGLE").tagClass("-checked",!!t);var n=e.getSubNode("BORDER");t?n.removeClass("xui-uiborder-t").addClass("xui-uiborder-flat xui-uiborder-radius"):n.removeClass("xui-uiborder-flat xui-uiborder-radius").addClass("xui-uiborder-t"),e.adjustSize(!0),i||(t?o.afterExpand&&o.afterExpand(e):o.afterFold&&o.afterFold(e)),r.dock&&"none"!=r.dock&&o.adjustDock(!0)}},_onresize:function(e,t,i){e.properties;var r=xui.$us(e),o=function(t,i){return e.$forceu(t,r>0?"em":"px",i)},n=e.getSubNode("BORDER"),a=e.getSubNode("PANEL"),s=e.getRoot(),u=n.contentBox(),l=n._borderH(),d=t?e.$px(t):null,c=i?e.$px(i):null;i&&(e._toggle?a.css("display",""):a.css("display","none"),"auto"==i?(a.height("auto"),n.height("auto"),s.height("auto")):e._toggle?(a.height(o(c-e.getSubNode("TBAR").offsetHeight(!0)-l/2,a)),n.height(o(c-(u?l:0),n)),s.height(o(c))):(n.height("auto"),s.height("auto"))),t&&"auto"!=t&&d>=2&&e._toggle&&(a.width(d=o(d-2)),xui.UI._adjustConW(e,a,d))}}}),xui.Class("xui.UI.PageBar",["xui.UI","xui.absValue"],{Instance:{_setCtrlValue:function(e){return this.each((function(t){if(t.renderId){var i,r=t.properties,o=!r.showMoreBtns,n=t.box._v2a(e),a=n[0],s=n[1],u=n[2],l=(t.keys,function(e,t){return e.getSubNode(t)}),d=l(t,"FIRST"),c=l(t,"PREV"),p=l(t,"PREM"),h=l(t,"CUR"),f=l(t,"NEXT"),x=l(t,"NEXTM"),g=l(t,"LAST"),m=function(e,t,i,o,n){t?(e.attr("href",r.uriTpl.replace("*",t)),e.attr("title",t)):n&&e.attr("title",n),xui.isSet(i)&&e.html(r.textTpl.replace("*",i),!1),xui.isSet(o)&&(e.get(0)._real_page=o)},b=function(e,t){e.css("display",t?"":"none")};m(d,a,a),m(p,"",".."+xui.str.repeat(".",String(s-1-a).length),1,a+1+"~"+(s-2)),m(c,s-1,r.prevMark||s-1),h.get(0).value=s+"",m(f,s+1,r.nextMark||s+1),m(x,"",".."+xui.str.repeat(".",String(u-s-1).length),1,s+2+"~"+(u-1)),m(g,u,u),(i=s-a)<=0?(b(d,0),b(p,0),b(c,0)):1==i?(b(d,1),b(p,0),b(c,0)):2==i?(b(d,1),b(p,0),b(c,1),m(c,s-1,s-1)):(b(d,1),b(p,o?0:1),b(c,1),3==i&&(m(c,s-1,s-1),m(p,s-2,s-2,0))),(i=u-s)<=0?(b(g,0),b(x,0),b(f,0)):1==i?(b(g,1),b(x,0),b(f,0)):2==i?(b(g,1),b(x,0),b(f,1),m(f,s+1,s+1)):(b(g,1),b(x,o?0:1),b(f,1),3==i&&(m(f,s+1,s+1),m(x,s+2,s+2,0)))}}))},setPage:function(e,t,i){return this.each((function(r){if(/^[1-9]\d*$/.test(e+"")){var o=r.properties,n=o.pageCount,a=((o.$UIvalue||o.value||"")+"").split(":"),s=parseInt(a[1],10);parseInt(e,10)>parseInt(a[2],10)||(a[1]=parseInt(e,10)||s,(t||a[1]!==s)&&(r.boxing().setUIValue(a.join(":"),!1,!1,"page"),r.onPageSet&&r.boxing().onPageSet(r,a[1],(a[1]-1)*n,n,i||"code",s,(s-1)*n)))}}))},getPage:function(e){var t=this.get(0).properties;return((t.$UIvalue||t.value||"")+"").split(":")[e?2:1]},getTotalPages:function(){return this.getPage(!0)},setTotalCount:function(e){return e=parseInt(e,10)||0,this.each((function(t){var i=t.properties,r=parseInt(i.pageCount,10),o=parseInt((e+r-1)/r,10),n=((i.$UIvalue||i.value||"")+"").split(":");n[2]=o,parseInt(n[1],10)>o&&(n[1]=1),t.boxing().setUIValue(n.join(":"),!1,!1,"settotal")}))}},Static:{Templates:{style:"{_style}",className:"{_className}",POOL:{style:"position:absolute;display:none;",POP:{tagName:"div",className:"xui-uibase xui-ui-reset xui-ui-ctrl"}},LABEL:{text:"{caption}"},FIRST:{$order:1,tagName:"a",className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",href:"#",tabindex:"{tabindex}"},PREM:{$order:2,className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",style:"{_css2}",tagName:"a",href:"#",tabindex:"{tabindex}"},PREV:{$order:3,className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tagName:"a",href:"#",tabindex:"{tabindex}",text:"{prevMark}"},CUR:{$order:4,className:"xui-ui-input xui-ui-shadow-input xui-uiborder-flat xui-uiborder-radius xui-uibase",tagName:"input",autocorrect:"off",autocomplete:"off",tabindex:"{tabindex}",style:"{_css}"},NEXT:{$order:5,className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tagName:"a",href:"#",tabindex:"{tabindex}",text:"{nextMark}"},NEXTM:{$order:6,className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",style:"{_css2}",tagName:"a",href:"#",tabindex:"{tabindex}"},LAST:{$order:7,className:"xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius",tagName:"a",href:"#",tabindex:"{tabindex}"}},Appearances:{LABEL:{padding:".25em .5em 0 .5em","vertical-align":"top","white-space":"nowrap"},KEY:{display:"inline",overflow:"visible"},"KEY a:focus, POP a:focus":{"outline-offset":"","-moz-outline-offset":xui.browser.gek&&xui.browser.ver<3?"":null},"KEY .xui-ui-btn, KEY .xui-ui-input, POP .xui-ui-btn":{"margin-right":".25em"},CUR:{"font-weight":"bold","text-align":"center",padding:".25em",width:"2em","margin-top":"-1px"},POP:{border:"dotted 1px gray",position:"absolute",padding:".25em","line-height":"2.25em"}},Behaviors:{HoverEffected:{FIRST:"FIRST",PREM:"PREM",PREV:"PREV",NEXT:"NEXT",NEXTM:"NEXTM",LAST:"LAST",POPI:"POPI",CUR:"CUR"},ClickEffected:{FIRST:"FIRST",PREM:"PREM",PREV:"PREV",NEXT:"NEXT",NEXTM:"NEXTM",LAST:"LAST",POPI:"POPI"},POP:{onClick:function(e,t,i){var r=xui(i),o=xui.Event.getSrc(t);if(r.setBlurTrigger(e.key+":"+e.$xid,null),e.getSubNode("POOL").append(r),"a"==o.tagName.toLowerCase()||(o=o.firstChild)&&"a"==o.tagName.toLowerCase()||(o=o.firstChild)&&"a"==o.tagName.toLowerCase()||(o=o.firstChild)&&"a"==o.tagName.toLowerCase())return e.box._click(e,o)}},FIRST:{onClick:function(e,t,i){return e.box._click(e,i)}},PREM:{onClick:function(e,t,i){return xui.use(i).get(0)._real_page?(e.box._show(e,t,i,0),!1):e.box._click(e,i)}},PREV:{onClick:function(e,t,i){return e.box._click(e,i)}},CUR:{onKeypress:function(e,t,i){var r=xui.Event.getKey(t),o=xui.use(i).caret();return!!/^\d$/.test(r.key)&&("0"!==r.key||0!==o[0])&&void 0},onChange:function(e,t,i){var r=e.properties;if(!r.disabled&&!r.readonly){var o=((r.$UIvalue||r.value||"")+"").split(":"),n=parseInt(o[1]||"",10),a=parseInt(o[2]||"",10),s=xui.use(i).get(0).value||"";/^[1-9]\d*$/.test(s)?n!==(s=parseInt(s,10))&&(s=s>a?a:s,xui(i).attr("value",s+""),e.boxing().setPage(s,!1,"input")):xui(i).attr("value",n+"")}},onKeydown:function(e,t,i){var r=e.properties,o=(e.box,xui.Event.getKey(t));r.disabled||r.readonly||"enter"==o.key&&xui.use(i).onChange()}},NEXT:{onClick:function(e,t,i){return e.box._click(e,i)}},NEXTM:{onClick:function(e,t,i){return xui.use(i).get(0)._real_page?(e.box._show(e,t,i,1),!1):e.box._click(e,i)}},LAST:{onClick:function(e,t,i){return e.box._click(e,i)}}},DataModel:{dataField:null,dataBinder:null,autoTips:!1,dirtyMark:!1,showDirtyMark:!1,parentID:"",isFormField:{hidden:!0,ini:!1},caption:{ini:" Page: ",action:function(e){e=(xui.isSet(e)?e:"")+"",this.getSubNode("LABEL").html(xui.adjustRes(e,!0))}},showMoreBtns:{ini:!0,action:function(e){this.getSubNodes(["PREM","NEXTM"]).css("display",e?"":"none")}},pageCount:20,disabled:{ini:!1,action:function(e){var t=this.getSubNode("CUR"),i="xui-ui-disabled";e?this.getRoot().addClass(i):this.getRoot().removeClass(i),!e&&this.properties.readonly&&(e=!0),t.attr("readonly",e)}},readonly:{ini:!1,action:function(e){var t=this.getSubNode("CUR"),i="xui-ui-readonly";e?this.getRoot().addClass(i):this.getRoot().removeClass(i),!e&&this.properties.disabled&&(e=!0),t.attr("readonly",e)}},value:"1:1:1",uriTpl:"#*",textTpl:"*",prevMark:"",nextMark:"",_moreStep:30},EventHandlers:{onClick:function(e,t){},onPageSet:function(e,t,i,r,o,n,a){}},RenderTrigger:function(){var e=this,t=e.properties,i=((t.value||"")+"").split(":");t.readonly&&e.boxing().setReadonly(!0,!0),e.$inDesign||e.boxing().setPage(i[1]||i[0],!0,"inited")},_ensureValue:function(e,t){var i=(t+="").split(":"),r=e.properties,o=[],n=function(e){return parseInt(e,10)||1};return i.length<3&&(o=((r.$UIvalue||r.value||"")+"").split(":"),i[1]=i[0],i[0]=o[0],i[2]=o[2]),o[0]=n(i[0]),o[1]=n(i[1]),o[2]=n(i[2]),o[0]=Math.max(o[0],1),o[0]=Math.min(o[0],o[1]),o[2]=Math.max(o[1],o[2]),o.join(":")},_v2a:function(e){return(e="string"==typeof e?e.split(":"):e)[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10),e[2]=parseInt(e[2],10),e},_click:function(e,t){var i=e.properties;if(i.disabled||i.readonly)return!1;var r=e.boxing(),o=(i.$UIvalue||i.value||"").split(":"),n=parseInt(xui(t).attr("href").split("#")[1],10)||o[1]||o[0],a=r.onClick(n);return o.length&&n+""==o[1]+""||r.setPage(n,!1,"click"),"boolean"==typeof a&&a},_show:function(e,t,i,r){var o=e.properties;if(o.disabled||o.readonly)return!1;var n,a,s,u,l=o.parentID||xui.ini.$rootContainer,d=e.box._v2a(o.value),c=d[0],p=d[1],h=d[2],f=(e.keys,function(e,t){return e.getSubNode(t)}),x=f(e,"POOL"),g=f(e,"POP"),m=function(e){return 10*Math.ceil((e+1)/10)},b=[];if(r){if((n=h-1-p)<=0)return;s=p+1,u=h}else{if((n=p-1-c)<=0)return;s=1,u=p-1}(a=Math.ceil(n/o._moreStep))>10?(s=m(s),u=m(u)-1,a=m(a)):s+=a;for(var v=e.keys.POPI+":"+e.serialId+":";s<u;)b.push('<a style="margin-top:.25em;" id="'+v+s+'" class="xui-node xui-node-span xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius" href="'+o.uriTpl.replace("*",s)+'">'+o.textTpl.replace("*",s)+"</a>"),s+=a;g.width("auto"),g.html(b.join(" ")),xui("body").append(g),g.width()>300&&g.width(300),g.popToTop(i,null,l?xui.get(e,["host",l])?e.host[l].getContainer():xui(l):null),g.setBlurTrigger(e.key+":"+e.$xid,(function(){x.append(g)}))},_prepareData:function(e){var t=arguments.callee.upper.call(this,e);return t._css=xui.browser.kde?"resize:none;":"",t._css2=t.showMoreBtns?"":"display:none;",t}},Initialize:function(){this.addTemplateKeys(["POPI"])}}),xui.Class("xui.UI.Tabs",["xui.UI","xui.absList","xui.absValue"],{Instance:{_setCtrlValue:function(e){this.each((function(t){t.domId;var i=t.boxing(),r=i.getUIValue(),o=t.properties,n=t.box.$DataModel,a=t.getSubNode("MENUCAPTION"),s=t.getSubNode("MENUCLOSE"),u=function(e,r){var a=t.getSubIdByItemId(e),s=t.getItemByItemId(e);if(a&&(r.push(a),!n.hasOwnProperty("noPanel")||!o.noPanel)){var u=i.getPanel(e).get(0);u&&(s._scrollTop=u.scrollTop||0)&&(u.scrollTop=0),i.getPanel(e).css("display","none")}},l=function(r,u){var l=t.getSubIdByItemId(r),d=t.getItemByItemId(r);l&&(u.push(l),a.html(d.caption),s.css("display",d.closeBtn?"":"none"),t._menuId=d.id,n.hasOwnProperty("noPanel")&&o.noPanel||(i.getPanel(r).css("display","block"),d._scrollTop&&(i.getPanel(r).get(0).scrollTop=d._scrollTop),t.adjustSize(!1,!1,e),t.box._forLazyAppend(t,d,e),t.box._forIniPanelView(t,d)))},d=[],c=[];n.hasOwnProperty("selMode")&&n.hasOwnProperty("noPanel")&&o.noPanel&&"multi"==o.selMode?(r=r?r.split(o.valueSeparator):[],xui.arr.each(r,(function(e){u(e,d)})),e=e?e.split(o.valueSeparator):[],xui.arr.each(e,(function(e){l(e,c)}))):(u(r,d),l(e,c)),d.length&&(t.getSubNodes(["ITEM","TOGGLE"],d).tagClass("-checked",!1),t.getSubNodes("ITEM",d).tagClass("-checked",!1)),c.length&&(t.getSubNodes(["ITEM","TOGGLE"],c).tagClass("-checked"),t.getSubNodes("ITEM",c).tagClass("-checked"))}))},append:function(e,t,i,r){var o=this.get(0).properties;return(t=t||o.$UIvalue||o.value)&&arguments.callee.upper.call(this,e,t+"",i,r),this},getCurPanel:function(){var e=this.get(0),t=e.box.$DataModel,i=e.properties,r=i.$UIvalue;return t.hasOwnProperty("noPanel")&&t.hasOwnProperty("selMode")&&"multi"==e.properties.selMode&&(r=(r=r.split(i.valueSeparator))[0]||null),r?this.getPanel(r):null},getPanel:function(e){return this.get(0).getSubNodeByItemId("PANEL",e+"")},addPanel:function(e,t,i){var r=this,o={},n=[],a=i&&i.id,s=r.getItems(),u=e.id||e.tag;return(!s.length||-1==xui.arr.subIndexOf(s,"id",u))&&(xui.merge(o,{caption:e.caption,image:e.image,closeBtn:e.closeBtn||!1,popBtn:e.popBtn||!1,optBtn:e.optBtn||!1,imagePos:e.imagePos,imageBgSize:e.imageBgSize,dragKey:e.dragKey,dropKeys:e.dropKeys,id:e.id||e.tag||xui.id()}),a?r.insertItems([o],a,!0):r.insertItems([o]),xui.arr.each(t,(function(e){n.push(e[0])})),r.append(xui.UI.pack(n,!1),o.id),r)},removePanel:function(e){var t=this.getItemByDom(e);return this.removeItems([t.id])},getPanelPara:function(e){var t=this.get(0),i=t.properties,r=t.getItemByDom(e),o=xui.clone(r,!1);return o.dragKey||(o.dragKey=i.dragKey),o.dropKeys||(o.dropKeys=i.dropKeys),o},getPanelChildren:function(e){var t=this.get(0),i=t.getItemIdByDom(e),r=[];return i&&xui.arr.each(t.children,(function(e){e[1]==i&&r.push(e)})),r},resetPanelView:function(e,t,i){return xui.isSet(t)||(t=!0),xui.isSet(i)||(i=!0),this.each((function(r){r.renderId&&(xui.arr.each(r.properties.items,(function(t){!0!==e&&e+""!==t.id||delete t._$ini})),t&&r.boxing().removeChildren(e,i))}))},iniPanelView:function(e){return this.each((function(t){e?(e=t.getItemByItemId(e+""))&&t.box._forIniPanelView(t,e):xui.arr.each(t.properties.items,(function(e){t.box._forIniPanelView(t,e)}))}))},fireItemClickEvent:function(e){var t=this.getSubNodeByItemId("ITEM",e+"");return xui.Event,t.onClick(!0),this},_afterInsertItems:function(e,t){if(e.renderId){e.box;var i,r,o=e.properties;(i=e.getSubNode(e.keys.BOX||e.keys.KEY))&&(i.append(e._buildItems("panels",t)),e.box.$DataModel.hasOwnProperty("noPanel")||(r=this.getUIValue())||this.fireItemClickEvent((r=o.items[0])&&r.id),e.adjustSize())}},removeItems:function(e,t){var i,r,o=this;return o.each((function(o){var n=o.properties;(e=xui.isSet(e)?xui.isArr(e)?e:(e+"").split(n.valueSeparator):null)||(e=((n.$UIvalue||n.value)+"").split(n.valueSeparator)),o.box.$DataModel.hasOwnProperty("noPanel")&&o.properties.noPanel||xui.arr.each(e,(function(e){(r=o.getSubIdByItemId(e+""))&&!(i=o.getSubNode("PANEL",r)).isEmpty()&&i.remove(!0,t)}))})),arguments.callee.upper.apply(o,arguments),o.each((function(e){e.boxing().getUIValue()||xui.asyRun((function(){var t;e&&e.renderId&&e.properties&&e.properties.items.length&&e.boxing().fireItemClickEvent((t=e.properties.items[0])&&t.id)})),e.adjustSize()})),o},clearItems:function(e){var t=this;return t.each((function(t){t.box.$DataModel.hasOwnProperty("noPanel")&&t.properties.noPanel||t.getSubNode("PANEL",!0).remove(!0,e)})),t.setValue(null,!0,"clear"),arguments.callee.upper.apply(t,arguments),t},markItemCaption:function(e,t,i,r,o){var n=this.get(0);if((e=n.getItemByItemId(e+""))._dirty!=t||i){var a=e.id,s=n.getItemByItemId(a),u=s.caption,l=n.getSubNodeByItemId("CAPTION",a);r?xui.isFun(r)?(s.caption=r(n,s,t),l.html(s.caption)):l.html(s.caption=t?r+u:u.replace(new RegExp("^"+r),"")):l.html(s.caption=t?"*"+u:u.replace(/^\*/,"")),o?t?l.addCalss(o):l.removeCalss(o):l.css({"font-weight":t?"bold":"","font-style":t?"italic":""}),e._dirty=t}return this}},Static:{Templates:{tagName:"div",style:"{_style};",className:"{_className}",LIST:{$order:1,tagName:"div",style:"{_liststyle}",LISTBG:{$order:0,className:"xui-uiborder-t xui-uiborder-b xui-uiborder-dark xui-uibar-checked"},MENU:{className:"xui-ui-unselectable xui-uiborder-hidden xui-uiborder-radius",MENUICON:{className:"xuicon",$fonticon:"xui-icon-menu"},MENUCAPTION:{},MENUCLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",$order:2}},MENU2:{tagName:"div",className:"xui-ui-unselectable",MENUICON2:{className:"xui-uiborder-hidden xui-uiborder-radius xuicon {_iconChecked}",$fonticon:"xui-icon-menu"}},ITEMS:{tagName:"div",className:"xui-ui-unselectable {_specialIconCls}",text:"{items}",style:"{HAlign}"}},PNAELS:{$order:2,tagName:"text",text:"{panels}"},$submap:{items:{ITEM:{className:"xui-uiborder-flat xui-uiborder-nob xui-uiborder-box xui-uiborder-radius-big-tl xui-uiborder-radius-big-tr xui-uibar {itemClass} {disabled} {readonly}",style:"{_itemDisplay};{itemStyle};",ITEMI:{ITEMC:{HANDLE:{tabindex:"{_tabindex}",className:"xui-showfocus",IBWRAP:{tagName:"div",style:"white-space:nowrap;",RULER:{},LTAGCMDS:{$order:1,tagName:"span",className:"xui-ltag-cmds",style:"{_ltagDisplay}",text:"{ltagCmds}"},ICON:{$order:2,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{$order:3,text:"{caption}",className:"xui-title-node",style:"{itemWidth};{itemAlign}"},CMDS:{$order:4,RTAGCMDS:{$order:0,tagName:"span",className:"xui-rtag-cmds",style:"{_rtagDisplay}",text:"{rtagCmds}"},OPT:{$order:1,className:"xuifont",$fonticon:"xui-uicmd-opt",style:"{_opt}"},POP:{className:"xuifont",$fonticon:"xui-uicmd-pop",style:"{popDisplay}",$order:1},CLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",style:"{closeDisplay}",$order:2}}}}}}}},panels:{PANEL:{tagName:"div",className:"xui-uibase xui-uicontainer",style:"{_overflow};{_bginfo}",text:"{html}"+xui.UI.$childTag}},"items.ltagCmds":function(e,t,i,r,o){var n=arguments.callee,a=n._m||(n._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(e,t,i,"items.tagCmds"+(a[i.type]||".button"),o)},"items.rtagCmds":function(e,t,i,r,o){var n=arguments.callee,a=n._m||(n._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(e,t,i,"items.tagCmds"+(a[i.type]||".button"),o)},"items.tagCmds.text":xui.UI.$getTagCmdsTpl("text"),"items.tagCmds.button":xui.UI.$getTagCmdsTpl("button"),"items.tagCmds.image":xui.UI.$getTagCmdsTpl("image")}},Appearances:{KEY:{position:"absolute",overflow:"hidden"},LIST:{position:"relative",overflow:"hidden",left:0,width:"100%",padding:".25em .25em 0 .25em ","white-space":"nowrap"},LISTBG:{position:"absolute",overflow:"hidden",left:0,bottom:0,height:"3px",width:"100%"},MENU:{display:"none",margin:".25em",padding:".16667em",cursor:"pointer"},MENU2:{display:"none"},MENUCAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle",margin:"0 4px","font-size":"1em"},ITEMS:{padding:xui.browser.contentBox?"0 0 4px 0":"0 0 2px 0",position:"relative",left:0,top:0,"white-space":"nowrap"},"ITEMS-icon CAPTION, ITEMS-icon OPT, ITEMS-icon POP, ITEMS-icon2 CAPTION, ITEMS-icon2 OPT, ITEMS-icon2 POP":{display:"none"},"ITEMS-icon ITEM-hover CAPTION, ITEMS-icon ITEM-hover OPT, ITEMS-icon ITEM-hover POP, ITEMS-icon ITEM-checked CAPTION, ITEMS-icon ITEM-checked OPT, ITEMS-icon ITEM-checked POP":{$order:1,display:xui.$inlineBlock},"ITEMS-menu ITEM":{display:"none"},ITEM:{$order:0,cursor:"pointer",padding:"0 .5em 0 0","vertical-align":"top",margin:"0 .25em","border-bottom":0,"border-radius":"6px 6px 0 0","-moz-border-radius":"6px 6px 0 0","-webkit-border-radius":"6px 6px 0 0","-o-border-radius":"6px 6px 0 0","-ms-border-radius":"6px 6px 0 0","-khtml-border-radius":"6px 6px 0 0"},ITEMI:{$order:0,"padding-left":".5em","vertical-align":"top"},ITEMC:{$order:0,padding:".33333333em","vertical-align":"top","text-align":"center"},HANDLE:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,cursor:"pointer","vertical-align":"middle",padding:0},"ITEM-checked HANDLE":{"padding-bottom":"1px"},RULER:{height:"1.5em",width:"0","vertical-align":"middle"},PANEL:{position:"relative",display:"none",width:"100%",overflow:"auto"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle",margin:"0 4px",overflow:"hidden"},CMDS:{"vertical-align":"middle"},"LTAGCMDS, RTAGCMDS":{padding:0,margin:0,"vertical-align":"middle"},CMD:{padding:0,margin:0}},Behaviors:{NOTIPS:["GROUP","HANDLER"],DroppableKeys:["PANEL","LIST","ITEM"],PanelKeys:["PANEL"],DraggableKeys:["ITEM"],HoverEffected:{ITEM:"ITEM",MENU:"MENU",MENU2:"MENU2",MENUICON2:"MENUICON2",OPT:"OPT",CLOSE:"CLOSE",MENUCLOSE:"MENUCLOSE",POP:"POP",ICON:"ICON",CMD:"CMD"},ClickEffected:{ITEM:"ITEM",MENU:"MENU",MENU2:"MENU2",MENUICON2:"MENUICON2",OPT:"OPT",CLOSE:"CLOSE",MENUCLOSE:"MENUCLOSE",POP:"POP",CMD:"CMD"},CAPTION:{onMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t)){var r=e.properties,o=e.getItemByDom(i),n=e.boxing();return!r.disabled&&!o.disabled&&!r.readonly&&!o.readonly&&void(n.getUIValue()==o.id&&e.onCaptionActive&&e.boxing().onCaptionActive(e,e.getItemByDom(i),t,i))}}},ITEM:{onClick:function(e,t,i){if("left"!=xui.Event.getBtn(t))return!1;var r;if((r=xui.Event.getSrc(t).parentNode)&&r.id&&e.getKey(r.id)==e.keys.CMDS)return!1;var o=e.properties,n=e.box.$DataModel,a=(e.getSubId(i),e.getItemByDom(i)),s=e.boxing();if(o.disabled||a.disabled)return!1;if(o.readonly||a.readonly)return!1;if(n.hasOwnProperty("selMode")&&n.hasOwnProperty("noPanel")&&o.noPanel&&"multi"==o.selMode){var u=s.getUIValue(),l=u?u.split(o.valueSeparator):[],d=1,c=!1,p=!1;if(l.length)return-1!=xui.arr.indexOf(l,a.id)?(xui.arr.removeValue(l,a.id),d=-1):l.push(a.id),l.sort(),u=l.join(o.valueSeparator),s.getUIValue()==u?c=!1:(s.setUIValue(u,null,null,"md"),s.get(0)&&s.getUIValue()==u&&(c=s.onItemSelected(e,a,t,i,d)||p)),c}return s.getUIValue()!=a.id&&(s.setUIValue(a.id,null,null,"md"),s.getUIValue()==a.id)?c=s.onItemSelected(e,a,t,i)||p:void 0}},HANDLE:{onKeydown:function(e,t,i){var r=xui.Event.getKey(t),o=r.key,n=r.shiftKey;if(" "==o||"enter"==o)return e.getSubNode("ITEM",e.getSubId(i)).onClick(),!1;var a=xui(i),s=e.getSubNode("ITEMS"),u=s.nextFocus(!0,!0,!1),l=s.nextFocus(!1,!0,!1);switch(o){case"tab":if(n){if(a.get(0)!=u.get(0))return u.focus(!0),!1}else if(a.get(0)!=l.get(0))return l.focus(!0),!1;break;case"left":case"up":return a.nextFocus(!1,!0,!1),a.get(0)==u.get(0)?l.focus(!0):a.nextFocus(!1),!1;case"right":case"down":return a.nextFocus(!0,!1,!1),a.get(0)==l.get(0)?u.focus(!0):a.nextFocus(),!1}}},CMD:{onClick:function(e,t,i){var r=e.properties,o=e.getItemByDom(xui.use(i).parent().get(0));return!!o&&(r.disabled||o.disabled||"split"==o.type||e.onCmd&&e.boxing().onCmd(e,o,xui.use(i).id().split("_")[1],t,i),!1)}},OPT:{onClick:function(e,t,i){return e.boxing().onShowOptions(e,e.getItemByDom(i),t,i),!1}},CLOSE:{onClick:function(e,t,i){var r,o=e.properties,n=e.getItemByDom(i),a=o.$UIvalue;if(!o.disabled&&!n.disabled){if(o.readonly||n.readonly)return!1;var s=e.boxing();if(!1!==s.beforePageClose(e,n,i)){if(r=xui.copy(n),a&&a==n.id){var u,l=o.items,d=xui.arr.subIndexOf(l,"id",n.id),c=(u=l[d+1])||(u=l[d-1])||(u=l[0])?u.id:null;c&&c!=a&&e.boxing().fireItemClickEvent(c)}return s.removeItems(n.id),s.afterPageClose(e,r),e.adjustSize(),!1}}}},MENUCLOSE:{onClick:function(e,t,i){e.getSubNodeByItemId("CLOSE",e._menuId).onClick(!0)}},POP:{onClick:function(e,t,i){var r=e.properties,o=e.getItemByDom(i),n={parent:null,host:null,properties:null,events:null,CS:null,CC:null,CB:null,CF:null,init:null},a=o.id;if(r.disabled||o.disabled)return!1;if(r.readonly||o.readonly)return!1;if(e.beforePagePop&&0==e.boxing().beforePagePop(e,o,n,t,i))return!1;e.boxing().getPanel(a);var s=e.getRoot().offset(),u=e.getRoot().cssSize(),l=xui.copy(xui.UI.Dialog.$DataStruct),d={};xui.merge(l,o,"with"),xui.merge(l,{dragKey:o.dragkey||r.dragKey,dock:"none",tag:o.tag||o.id,width:Math.max(u.width,200),height:Math.max(u.height,100),left:s.left,top:s.top,landBtn:!0},"all"),n.properties&&xui.merge(l,n.properties,"with"),n.events&&xui.merge(d,n.events,"all");var c=new xui.UI.Dialog(l,d,n.host||e.host,n.CS||null,n.CC||null,n.CB||null,n.CF||null);if(xui.isFun(n.init)&&!1===n.init(c,e,n));else{c.show(n.parent||xui("body"));var p=[];xui.arr.each(e.children,(function(e){e[1]==a&&p.push(e[0])})),p.length&&c.append(xui.UI.pack(p,!1)),e.boxing().removeChildren(a).removeItems(a)}return!1}},MENU:{onMouseover:function(e,t,i){var r=e._droppopmenu;if(!r){var o,n=e.boxing(),a=e.properties.items,s=[],u=a.length;if(a.length>15){o=Math.ceil(u/15);for(var l=0;l<o;l++)s.push({caption:15*l+1+" - "+Math.min(u,15*(l+1)+1),sub:[]});xui.arr.each(a,(function(e,t){s[parseInt(t/15)].sub.push(xui.clone(e,!1,1))}))}else s=xui.clone(a,!1,2);(r=e._droppopmenu=new xui.UI.PopMenu({items:s,autoHide:!0},{onMenuSelected:function(e,t){n.fireItemClickEvent(t.id)},beforeHide:function(e,t){if(t){var r=xui(i),o=xui.Event.getPos(t),n=r.cssSize(),a=r.offset();if(o.left>a.left&&o.top>a.top-3&&o.left<a.left+n.width&&o.top<a.top+n.height)return!1}},onHide:function(){e._droppopmenu.destroy(!0),delete e._droppopmenu}})).popUp(i)}},onMouseout:function(e,t,i){var r;if(r=e._droppopmenu){var o=r.get(0).getRoot(),n=xui.Event.getPos(t),a=o.cssSize(),s=o.offset();n.left>s.left&&n.top>s.top-3&&n.left<s.left+a.width&&n.top<s.top+a.height||r.hide()}},onClick:function(e,t,i){xui(i).onMouseover(!0)}},PANEL:{onClick:function(e,t,i){var r=e.properties,o=e.getItemByDom(i);return!r.disabled&&!o.disabled&&(e.onClickPanel?e.boxing().onClickPanel(e,o,t,i):void 0)}}},DataModel:{rotate:null,selectable:!0,dirtyMark:!1,lazyAppend:!0,isFormField:{hidden:!0,ini:!1},dock:"fill",width:{$spaceunit:1,ini:"18em"},height:{$spaceunit:1,ini:"18em"},position:"absolute",itemWidth:{ini:0,action:function(e){this.getSubNode("CAPTION",!0).width(e)}},itemAlign:{ini:"",listbox:["","left","center","right"],action:function(e){this.getSubNode("CAPTION",!0).css("text-align",e)}},HAlign:{ini:"left",listbox:["left","center","right"],action:function(e){this.getSubNode("ITEMS").css("textAlign",e)}},dropKeysPanel:"",value:{ini:""},selMode:{ini:"single",listbox:["single","multi"]},noPanel:{ini:!1,action:function(e){this.getSubNode("PANEL",!0).css("display",e?"none":"block"),this.adjustSize(null,!0)}},noHandler:{ini:!1,action:function(e){this.getSubNode("LIST").css("display",e?"none":"block"),this.adjustSize(null,!0)}},tagCmds:{ini:[],action:function(){this.boxing().refresh()}}},EventHandlers:{onCmd:function(e,t,i,r,o){},onIniPanelView:function(e,t){},beforePagePop:function(e,t,i,r,o){},beforePageClose:function(e,t,i){},afterPageClose:function(e,t){},onShowOptions:function(e,t,i,r){},onItemSelected:function(e,t,i,r,o){},onCaptionActive:function(e,t,i,r){},onClickPanel:function(e,t,i,r){}},RenderTrigger:function(){var e,t,i,r=this;(e=r.properties.value)&&((i=r.boxing()).setUIValue(e,null,null,"render"),(t=r.getItemByItemId(e))&&i.onItemSelected(r,t))},_prepareData:function(e){var t=arguments.callee.upper.call(this,e);return t.panels=t.items,t.HAlign&&(t.HAlign="text-align:"+t.HAlign+";"),t._liststyle=t.noHandler?"display:none":"","fold"==t.sideBarStatus&&(t._specialIconCls=e.getClass("ITEMS")+"-icon2",t._iconChecked=" xui-uiborder-hidden-checked xui-icon-menu-checked "),t},_prepareItem:function(e,t){var i,r="display:none",o=e.properties;t.closeDisplay=t.closeBtn?"":r,t.popDisplay=t.popBtn?"":r,t._opt=t.optBtn?"":r,t._itemDisplay=t.hidden?r:"",(i=t.itemWidth||o.itemWidth)&&(t.itemWidth="width:"+i+(xui.isFinite(i)?"px":"")),(i=t.itemAlign||o.itemAlign)&&(t.itemAlign="text-align:"+i),t._bginfo="",(i=t.panelBgClr||o.panelBgClr)&&(t._bginfo+="background-color:"+i+";"),(i=t.panelBgImg||o.panelBgImg)&&(t._bginfo+="background-image:url("+xui.adjustRes(i)+");"),(i=t.panelBgImgPos||o.panelBgImgPos)&&(t._bginfo+="background-position:"+i+";"),(i=t.panelBgImgRepeat||o.panelBgImgRepeat)&&(t._bginfo+="background-repeat:"+i+";"),(i=t.panelBgImgAttachment||o.panelBgImgAttachment)&&(t._bginfo+="background-attachment:"+i+";"),xui.isStr(t.overflow)?t._overflow=-1!=t.overflow.indexOf(":")?t.overflow:t.overflow?"overflow:"+t.overflow:"":xui.isStr(o.overflow)&&(t._overflow=-1!=o.overflow.indexOf(":")?o.overflow:o.overflow?"overflow:"+o.overflow:""),this._prepareCmds(e,t)},getDropKeys:function(e,t){var i=e.properties,r=e.getItemByDom(t);return e.getKey(xui.use(t).id())==e.keys.PANEL?r&&r.dropKeysPanel||i.dropKeysPanel:r&&r.dropKeys||i.dropKeys},_forLazyAppend:function(e,t,i){var r=e.properties,o=e.boxing(),n={},a=e.moduleClass+"["+e.moduleXid+"]";if(r.lazyAppend){var s=e.children,u=[];if(xui.arr.each(s,(function(t){t[1]!=i||t[0].renderId&&xui.UIProfile.getFromDom(xui(t[0].renderId).parent().id())==e||u.push(t[0])})),u.length&&xui.arr.each(u,(function(e,t,r){e.moduleClass&&e.moduleXid&&(t=xui.SC.get(e.moduleClass))&&(t=t.getInstance(e.moduleXid))&&t["xui.Module"]&&(r=e.moduleClass+"["+e.moduleXid+"]",a==r||n[r]||(n[r]=t)),o.append(xui(e),i)})),e.$attached){for(var l,d=0;l=e.$attached[d++];)l._render&&l._render(!0);delete e.$attached}(s=e.exchildren)&&s.length&&(u=[],xui.filter(s,(function(e){if(e[1]==i)return u.push(e[0]),!1})),u.length&&xui.arr.each(u,(function(e,t,r){e.moduleClass&&e.moduleXid&&(t=xui.SC.get(e.moduleClass))&&(t=t.getInstance(e.moduleXid))&&t["xui.Module"]&&(r=e.moduleClass+"["+e.moduleXid+"]",a==r||n[r]||(n[r]=t)),o.append(xui(e),i)}))),(s=e.excoms)&&s.length&&(u=[],xui.filter(s,(function(e){if(e[1]==i)return u.push(e[0]),!1})),u.length&&xui.arr.each(u,(function(e){e.show(null,o,i,!1)}))),xui.each(n,(function(e){e.render()}))}},_forIniPanelView:function(e,t){if(t){e.properties;var i=e.boxing();if(!t._$ini)if(t._$ini=!0,e.onIniPanelView&&i.onIniPanelView(e,t),t.iframeAutoLoad){i.getPanel(t.id).css("overflow","hidden");var r="string"==typeof t.iframeAutoLoad?{url:t.iframeAutoLoad}:xui.clone(t.iframeAutoLoad,!0),o="diframe_"+xui.rand(),n=xui.browser.ie&&xui.browser.ver<9,a=document.createElement(n?"<iframe name='"+o+"'>":"iframe");r.url=xui.adjustRes(r.url,!1,!0),a.id=a.name=o,xui.isHash(t.iframeAutoLoad)&&(t.iframeAutoLoad.frameName=o),t._frameName=o,r.query||(r.query={}),r.query._rand=xui.rand(),a.frameBorder="0",a.marginWidth="0",a.marginHeight="0",a.vspace="0",a.hspace="0",a.allowTransparency="true",a.width="100%",a.height="100%",i.getPanel(t.id).html("").append(a),"post"==(r.method||"").toLowerCase()?xui.Dom.submit(r.url,r.query,"post",o,r.enctype):a.src=r.url}else if(t.ajaxAutoLoad){var s="string"==typeof t.ajaxAutoLoad?{url:t.ajaxAutoLoad}:xui.clone(t.ajaxAutoLoad,!0),u={rspType:"text"};xui.merge(u,s.options),s.query||(s.query={}),s.query._rand=xui.rand(),i.busy(!1,null,"PANEL",e.getSubIdByItemId(t.id));var l=i.getPanel(t.id);xui.Ajax(xui.adjustRes(s.url,!1,!0),s.query,(function(e){l.html(e,!0,!0),i.free()}),(function(e){l.html("<div>"+e+"</div>",!0,!1),i.free()}),null,u).start()}}},_showTips:function(e,t,i){if(!e.properties.disableTips){if(e.onShowTips)return e.boxing().onShowTips(e,t,i);if(xui.Tips){var r,o,n=t.id,a=e.keys;if(r=xui.get(t,["parentNode","id"])||"",o=xui.get(t,["parentNode","parentNode","id"])||"",0===n.indexOf(a.ITEM)||0===r.indexOf(a.ITEM)||0===o.indexOf(a.ITEM)||0===n.indexOf(a.HANDLE)||0===r.indexOf(a.HANDLE)||0===o.indexOf(a.HANDLE)||0===n.indexOf(a.CMDS)||0===r.indexOf(a.CMDS)||0===o.indexOf(a.CMDS)){var s=arguments.callee.upper,u=s.apply(this,xui.toArr(arguments));return s=null,u}}}},_onDrop:xui.UI.List._onDrop,_onresize:function(e,t,i,r,o){var n=e.properties,a=e.getItemByItemId(o);if(a||(o=n.$UIvalue||n.value,a=e.getItemByItemId(o)),a||(o=(a=n.items[0])&&a.id),a){var s,u=e.boxing().getPanel(o),l=xui.$us(e),d=function(t,i){return e.$forceu(t,l>0?"em":"px",i)},c=e.getRoot(),p=e.getSubNode("LIST"),h=e.getEmSize()/c._getEmSize(),f=u._getEmSize(h),x=p._getEmSize(h),g=null,m=null;t&&"auto"!=t&&(t=e.$px(t,null,!0)),i&&"auto"!=i&&(i=e.$px(i,null,!0)),u&&!u.isEmpty()&&(n.noHandler||(s=p.offsetHeight(!0),e._listH!=s&&(e._listH=s,r=!0)),r&&(a._w=a._h=null),i&&a._h!=i&&(a._h=i),"auto"==i?m="auto":i&&(n.noHandler||(i-=s),i>0&&(m=i)),t&&a._w!=t&&(p.width(g=d(a._w=t,x)),n.noHandler||this._adjustHScroll(e,o)),n.noPanel||!m&&!g||u.height(d(m,f)).onSize(),g&&xui.UI._adjustConW(e,u,g))}},_adjustHScroll:function(e,t){var i,r,o,n=e.getSubNode("ITEMS"),a=xui.CSS.$px("1em"),s=0,u=xui.isSet(t)&&e.getSubNode("CAPTION",e.getSubIdByItemId(t)).id(),l=n.width(),d=(e.getSubNode("LIST"),e.getSubNode("MENU")),c=e.getSubNode("CAPTION",!0),p=function(){var e=0;return n.children().each((function(t){if(0!=t.offsetWidth)return e?void 0:(e=t.offsetLeft+t.offsetWidth,!1)}),!0),e};if(n.tagClass("-icon",!1),n.tagClass("-icon2",!1),n.tagClass("-menu",!1),d.css("display","none"),c.css("width",""),e._mode="normal",(i=p())>l){var h=(o=0,c.each((function(e){0!=e.clientWidth&&(s++,xui.isSet(u)&&e.id===u?e.clientWidth:o+=e.clientWidth)})),o),f=i-h+a;if(l>f+a*(s-1)){var x=(l-f)/h;c.each((function(e){xui(e).width(xui.isSet(u)&&e.id===u?"auto":Math.floor(e.clientWidth*x)+"px")})),e._mode="narrow"}else r=1;(r||p()>l)&&(c.css("width",""),n.tagClass("-icon",!0),e._mode="icon",p()>l&&(n.tagClass("-menu",!0),d.setInlineBlock(),e._mode="menu"))}}}}),xui.Class("xui.UI.Stacks","xui.UI.Tabs",{Initialize:function(){var e=this.getTemplate(),t=this.$Keys;e.BOX={tagName:"div",LIST:e.LIST,PNAELS:e.PNAELS},delete e.LIST.LEFT,delete e.LIST.RIGHT,delete e.LIST.DROP,delete e.LIST,delete e.PNAELS,e.$submap.items.ITEM.className="xui-uibar xui-uiborder-t xui-uiborder-b",e.$submap.items.ITEM.ITEMI.ITEMC.HANDLE.IBWRAP.TOGGLE={$order:1,className:"xuifont {_tlgchecked}",$fonticon:"xui-uicmd-toggle"},this.setTemplate(e),delete t.LEFT,delete t.RIGHT,delete t.DROP},Static:{Behaviors:{DroppableKeys:["PANEL","KEY","ITEM"]},Appearances:{BOX:{position:"absolute",overflow:"hidden",left:0,top:0},LIST:{position:"static"},ITEMS:{position:"static"},ITEM:{$order:0,display:"block",position:"absolute",cursor:"pointer",width:"100%",left:0},ITEMC:{display:"block"},ITEMI:{display:"block"},"ITEM-hover":{$order:1},"ITEM-active ITEMC, ITEM-checked ITEMC":{$order:2},"ITEM-active ITEMI, ITEM-checked ITEMI":{$order:2},"ITEM-active, ITEM-checked":{$order:3},HANDLE:{cursor:"pointer",display:"block",padding:".58333em","white-space":"nowrap"},"ITEM-checked HANDLE":{},PANEL:{position:"absolute",display:"none",overflow:"auto"},CMDS:{position:"absolute",top:".5em",right:".75em","text-align":"right","vertical-align":"middle"}},DataModel:{noPanel:null,noHandler:null,selMode:null,borderType:{ini:"flat",listbox:["none","flat","inset","outset"],action:function(e){var t=this,i=(t.properties,t.getSubNode("BOX"));switch(t.getRoot(),i.removeClass(/^xui-uiborder-/),e){case"flat":i.addClass("xui-uiborder-flat  xui-uiborder-radius");break;case"inset":i.addClass("xui-uiborder-inset  xui-uiborder-radius");break;case"outset":i.addClass("xui-uiborder-outset  xui-uiborder-radius")}t.adjustSize()}}},LayoutTrigger:function(){var e=this.properties.borderType;e&&"none"!=e&&this.boxing().setBorderType(e,!0)},_onresize:function(e,t,i,r,o){var n=e.properties,a=(n.noPanel,xui.browser.contentBox),s=e.getItemByItemId(o);if(s||(o=n.$UIvalue||n.value,s=e.getItemByItemId(o)),s||(s=n.items[0],o=s&&s.id),s){var u,l,d,c,p,h,f=e.boxing().getPanel(o),x=xui.$us(e),g=function(t,i){return e.$forceu(t,x>0?"em":"px",i)},m=e.getRoot(),b=e.getSubNode("BOX"),v=e.getSubNode("LIST"),y=e.getEmSize()/m._getEmSize(),A=f._getEmSize(y),_=v._getEmSize(y),w=n.borderType,C=!a||"flat"!=w&&"inset"!=w&&"outset"!=w?0:b._borderW(),I=null,E=null;f&&!f.isEmpty()&&(t=t?e.$px(t,null,!0):t,(i=i?e.$px(i,null,!0):i)&&(i-=C,c=d=0,xui.arr.each(n.items,(function(t){if((p=e.getSubNodeByItemId("ITEM",t.id)).cssRegion({bottom:"auto",top:g(d,p)}),u=t.hidden?0:p.offsetHeight(!0),d+=u,t.id==o)return!1})),xui.arr.each(n.items,(function(t){if(t.id==o)return!1;(p=e.getSubNodeByItemId("ITEM",t.id)).cssRegion({top:"auto",bottom:g(c,p)}),u=t.hidden?0:p.offsetHeight(!0),c+=u}),null,!0),(l=i-d-c)>0&&(h=d,E=l),b.height(g(i))),t&&(I=t-=C,b.width(g(t))),f.cssRegion({width:I?g(I,A):null,height:E?g(E,A):null,top:g(h,A),left:0+e.$picku()},!0),I&&(v.width(I=g(I,_)),xui.UI._adjustConW(e,f,I)))}},_adjustScroll:null}}),xui.Class("xui.UI.ButtonViews","xui.UI.Tabs",{Initialize:function(){var e=this.getTemplate(),t=this.$Keys;e.LIST.className="xui-uibar",this.setTemplate(e),e.$submap.items.ITEM.className="xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius {itemClass} {disabled} {readonly} {itemPosCls}",delete t.LEFT,delete t.RIGHT,delete t.DROP},Static:{Appearances:{LIST:{"z-index":"2",position:"absolute","white-space":"nowrap",overflow:"hidden"},"LIST-attop, LIST-atbottom":{$order:2,position:"relative"},LISTBG:{display:"none"},MENU:{display:"none",margin:".25em",padding:".25em",cursor:"pointer"},MENU2:{display:"none","text-align":"center"},MENUICON2:{position:"relative",margin:".09375em",padding:".1875em",cursor:"pointer"},ITEMS:{"z-index":"2",position:"relative",left:0,top:0,width:"100%",height:"100%","white-space":"nowrap","overflow-x":"hidden","overflow-y":"scroll"},"ITEMS-left, ITEMS-left ITEMC":{$order:1,height:"auto","text-align":"left"},"ITEMS-center, ITEMS-center ITEMC":{$order:1,height:"auto","text-align":"center"},"ITEMS-right, ITEMS-right ITEMC":{$order:1,height:"auto","text-align":"right"},"ITEMS-left HANDLE, ITEMS-right HANDLE":{$order:2,display:"block"},ITEM:{$order:0,margin:".166667em",position:"relative",cursor:"pointer",padding:"0 .125em 0 0","vertical-align":"top"},ITEMI:{$order:0,"padding-left":".125em","vertical-align":"top"},"ITEMS-block ITEM, ITEMS-block ITEMI, ITEMS-block ITEMC":{$order:2,display:"block"},ITEMC:{$order:0,padding:".15em 0 .125em 0","vertical-align":"top","text-align":"center"},HANDLE:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,cursor:"pointer","vertical-align":"middle",margin:".125em"},"ITEM-checked HANDLE":{}},DataModel:{HAlign:null,barLocation:{ini:"top",listbox:["top","bottom","left","right"],action:function(e){var t=this,i=t.getSubNode("LIST"),r=t.getSubNode("ITEMS"),o=0+t.$picku();switch(e){case"left":i.cssRegion({left:o,top:o,right:"auto",bottom:o});break;case"top":i.cssRegion({left:o,top:o,right:o,bottom:"auto"});break;case"right":i.cssRegion({left:"auto",top:o,right:o,bottom:o});break;case"bottom":i.cssRegion({left:o,top:"auto",right:o,bottom:o})}switch(e){case"left":case"right":r.tagClass("-block",!0);break;case"top":case"bottom":r.tagClass("-block",!1),i.height("auto")}i.tagClass("(-attop|-atbottom|-atleft|-atright)",!1).tagClass("-at"+e,!0),this.adjustSize()}},barHAlign:{ini:"left",listbox:["left","center","right"],action:function(e){this.getSubNode("ITEMS").tagClass("(-left|-right|-center)",!1).tagClass("-"+e,!0)}},barVAlign:{ini:"top",listbox:["top","bottom"],action:function(e){var t=this.getSubNode("ITEMS"),i=0+this.$picku();"top"==e?t.cssRegion({top:i,bottom:"auto"}):t.cssRegion({bottom:i,top:"auto"}),this.adjustSize()}},barSize:{$spaceunit:1,ini:"2em",action:function(e){this.adjustSize()}},borderType:{ini:"none",listbox:["none","flat","inset","outset"],action:function(e){var t=this,i=(t.properties,t.getSubNode("LIST"));switch(t.getRoot(),i.removeClass(/^xui-uiborder-/),e){case"flat":i.addClass("xui-uiborder-flat xui-uiborder-radius");break;case"inset":i.addClass("xui-uiborder-inset xui-uiborder-radius");break;case"outset":i.addClass("xui-uiborder-outset xui-uiborder-radius")}this.adjustSize()}},sideBarStatus:{ini:"expand",listbox:["expand","fold","none"],action:function(e){var t=this,i=t.properties,r=(xui.$us(t),t.getSubNode("ITEMS")),o=t.getSubNode("MENU2"),n=t.getSubNode("MENUICON2");"none"==i.sideBarStatus?o.css("display","none"):"fold"==i.sideBarStatus?(r.tagClass("-icon2",!0),o.css("display","block"),n.tagClass("-checked",!0)):(r.tagClass("-icon2",!1),o.css("display","block"),n.tagClass("-checked",!1)),this.adjustSize()}},sideBarSize:{ini:"3em",action:function(e){this.adjustSize()}}},Behaviors:{MENU2:{onClick:function(e,t,i){e.boxing().setSideBarStatus("fold"==e.properties.sideBarStatus?"expand":"fold",!0)}}},LayoutTrigger:function(){var e=this.properties;this.boxing().setBarLocation(e.barLocation,!0).setBarHAlign(e.barHAlign,!0).setBarVAlign(e.barVAlign,!0),"top"!=e.barLocation&&"bottom"!=e.barLocation||this.getSubNode("ITEMS").addClass("xui-css-noscroll"),e.borderType&&"none"!=e.borderType&&this.boxing().setBorderType(e.borderType,!0)},_onresize:function(e,t,i,r,o){var n=e.properties,a=n.noPanel,s=n.noHandler,u=e.getItemByItemId(o);if(u||(o=n.$UIvalue||n.value,u=e.getItemByItemId(o)),u||(o=(u=n.items[0])&&u.id),u){var l,d,c,p=e.boxing().getPanel(o),h=xui.$us(e),f=function(t,i){return e.$forceu(t,h>0?"em":"px",i)},x=t?e.$px(t,null,!0):t,g=i&&"auto"!=i?e.$px(i,null,!0):i,m=e.getRootNode(),b=e.getSubNode("LIST"),v=e.getSubNode("ITEMS"),y=e.getSubNode("MENU2"),A=e.getEmSize()/e.getRoot()._getEmSize(),_=p._getEmSize(A),w=b._getEmSize(A),C=v._getEmSize(A),I=xui(m).contentBox(),E=n.borderType,S=!I||"flat"!=E&&"inset"!=E&&"outset"!=E?0:b._borderW(),D=null,k=null;if(y.css("display","none"),s)D=x,k=g;else if("top"==n.barLocation||"bottom"==n.barLocation)xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)||v.css("overflow-y","hidden"),d=b.height(n.barSize||"auto").offsetHeight(!0),v.css("position","relative"),t&&(b.width(f(x-S,w)),v.width(f(x-S,C)),a&&"auto"!=i&&(b.height(f(g-S,w)),v.height(f(g-S,w))),s||e.box._adjustHScroll(e),l=0,D=x),"auto"!=g?g-d>0&&(k=g-d-S):k=g,"top"==n.barLocation?(c=m.firstElementChild||m.firstChild)!=b.get(0)&&(c?m.insertBefore(b.get(0),c):m.appendChild(b.get(0))):"bottom"==n.barLocation&&(m.lastElementChild||m.lastChild)!=b.get(0)&&m.appendChild(b.get(0));else if(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)||v.css("overflow-y","scroll"),y.css("display","none"!==n.sideBarStatus&&n.sideBarSize?"block":"none"),s||e.getSubNode("CAPTION",!0).css("width",""),"auto"==g&&(g=300),i&&(a&&(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)||v.css("overflow-y","hidden"),b.width(f(x-S,w)),v.width(f(x-S,w))),b.height(f(g-S,w)),v.height("auto"),v.height()>=b.height()&&v.height(f(g-S-(n.sideBarSize?y.offsetHeight():0),C)),v.css("position","bottom"==n.barVAlign?"absolute":"relative"),k=g),i||t){var $=e.$px("fold"==n.sideBarStatus?n.sideBarSize:n.barSize,C,!0),N=I?v._paddingW()+v._marginW():0;l="left"==n.barLocation?S+e.$px($+N,w,!0):0,D=x-e.$px($+N,w,!0)-S,v.width("auto"),a||(b.width(f($+N,w)),v.width(f($+xui.Dom.getScrollBarSize(),C)))}a||(p.cssRegion({width:D=D?f(D,_):null,height:k?f(k,_):null,left:s?0:f(l,_)},!0),D&&xui.UI._adjustConW(e,p,D))}}}}),xui.Class("xui.UI.RadioBox","xui.UI.List",{Initialize:function(){var e=this.getTemplate();e.className="{_className}",e.ITEMS.className="{_bordertype}",e.$submap={items:{ITEM:{className:"xui-showfocus {_itemRow} {itemClass} {disabled} {readonly}",style:"{itemStyle};{_itemDisplay};",tabindex:"{_tabindex}",MARK:{$order:0,className:"xuifont",$fonticon:"{_fi_markcls}"},ICON:{$order:1,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{text:"{caption}",$order:2}}}},this.setTemplate(e)},Static:{_DIRTYKEY:"MARK",_ITEMMARKED:!0,Appearances:{ITEM:{display:xui.$inlineBlock,border:0,padding:".5em",position:"relative",zoom:xui.browser.ie?1:null,cursor:"pointer",overflow:"hidden","vertical-align":"middle"},"ITEM-checked":{padding:".5em"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"},ITEMS:{overflow:"auto","overflow-x":"hidden",position:"relative","line-height":"1.25em"},MARK:{$order:1,cursor:"pointer",margin:"0 .5em 0 .25em","vertical-align":"middle"}},DataModel:{lite:null,tagCmds:null,borderType:{ini:"none"},checkBox:{ini:!1,action:function(e){this.getSubNode("MARK",!0).replaceClass(e?/(uicmd-radio)|(\s+uicmd-radio)/g:/(^uicmd-check)|(\s+uicmd-check)/g,e?" xui-uicmd-check":" xui-uicmd-radio")}}},Behaviors:{HoverEffected:{ITEM:null,MARK:"MARK"},ClickEffected:{ITEM:null,MARK:"MARK"}},EventHandlers:{onCmd:null},_prepareItem:function(e,t){t._fi_markcls=e.properties.checkBox?"xui-uicmd-check":"xui-uicmd-radio",t._itemRow=e.properties.itemRow?"xui-item-row":""}}}),xui.Class("xui.UI.StatusButtons",["xui.UI.List"],{Initialize:function(){var e=this.getTemplate();e.className="{_className}",e.ITEMS.className="{_bordertype}",e.$submap.items.ITEM={className:"{_itemClass} {itemClass} {disabled} {readonly}",style:"{itemPadding};{itemMargin};{itemWidth};{itemAlign};{itemStyle}",tabindex:"{_tabindex}",LTAGCMDS:{$order:2,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},ICON:{$order:10,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{$order:11,text:"{caption}"},DROP:{$order:12,className:"xuifont",$fonticon:"xui-uicmd-arrowdrop",style:"{_dropDisplay}"},RTAGCMDS:{$order:40,tagName:"span",style:"{_rtagDisplay}",text:"{rtagCmds}"},FLAG:{$order:13,className:"xui-display-none xui-uiflag {flagClass}",style:"{_flagStyle};{flagStyle}",text:"{flagText}"}},this.setTemplate(e)},Static:{Appearances:{ITEMS:{position:"relative",overflow:"visible"},ITEM:{"vertical-align":"middle",position:"relative",padding:".5em",margin:".166667em",cursor:"pointer","white-space":"nowrap"},"ITEM-hover, ITEM-active, ITEM-checked":{},"ITEM-hover":{},"ITEM-active":{},"ITEM-checked":{},CAPTION:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,"vertical-align":"middle","font-size":"1em"},DROP:{"vertical-align":"middle"},FLAG:{top:"-.5em",right:"-.5em",position:"absolute","z-index":10}},DataModel:{lite:null,maxHeight:null,height:"auto",itemMargin:{ini:"",action:function(e){this.getSubNode("ITEM",!0).css("margin",e)}},itemPadding:{ini:"",action:function(e){this.getSubNode("ITEM",!0).css("padding",e)}},itemWidth:{$spaceunit:1,ini:"auto",action:function(e){this.getSubNode("ITEM",!0).width(e||"auto")}},itemAlign:{ini:"",listbox:["","left","center","right"],action:function(e){this.getSubNode("ITEM",!0).css("text-align",e)}},itemType:{ini:"button",listbox:["text","button","dropButton"],action:function(e){this.boxing().refresh()}},connected:{ini:!1,action:function(){this.boxing().refresh()}}},Behaviors:{DroppableKeys:["ITEMS"]},_prepareItem:function(e,t,i,r,o,n){var a,s=e.properties,u=t.type||s.itemType;t._tabindex=s.tabindex,s.connected?t.itemMargin="margin:"+(0===o?"0":"0 0 0 -1px"):(a=t.itemMargin||s.itemMargin)&&(t.itemMargin="margin:"+a),(a=t.itemPadding||s.itemPadding)&&(t.itemPadding="padding:"+a),(a=t.itemWidth||s.itemWidth)&&(t.itemWidth="width:"+e.$forceu(a||"auto")),(a=t.itemAlign||s.itemAlign)&&(t.itemAlign="text-align:"+a),(t.flagText||t.flagClass)&&(t._flagStyle="display:block"),t.flagClass||(t.flagClass="xui-uiflag-1"),t._itemClass="text"==u?"xui-node-a":"xui-ui-btn xui-uibar xui-uigradient "+(s.connected?0==o?"xui-uiborder-radius-tl xui-uiborder-radius-bl xui-uiborder-noradius-r":o===n-1?"xui-uiborder-radius-tr xui-uiborder-radius-br xui-uiborder-noradius-l":"xui-uiborder-noradius":"xui-uiborder-radius"),t._dropDisplay="dropButton"==u?"":"display:none",this._prepareCmds(e,t)}}}),xui.Class("xui.UI.TreeBar",["xui.UI","xui.absList","xui.absValue"],{$Start:function(e){(e=this.Static.RenderTrigger)&&(e.$order=-1)},Instance:{_setCtrlValue:function(e,t){return this.each((function(i){if(i.renderId){var r=i.boxing().getUIValue(),o=i.properties,n=function(e,t,r){i.getSubNodeByItemId(e,t).tagClass("-checked",r)},a=o.selMode;if("single"==a){var s=i.getSubIdByItemId(r);if(r&&s&&n("BAR",r,!1),(s=i.getSubIdByItemId(e))&&(n("BAR",e,!0),!i._noScroll)){var u=i.getSubNode("ITEM",s);if(u){var l=i.getSubNode("BOX"),d=u.offset(null,l),c=d?d.top:0,p=u.offsetHeight(),h=l.scrollHeight(),f=l.scrollTop(),x=l.height();h>x&&(c<f||c+p>f+x)&&l.scrollTop(c)}}}else"multi"!=a&&"multibycheckbox"!=a||(r=r?r.split(o.valueSeparator):[],e=e?e.split(o.valueSeparator):[],t||xui.arr.each(r,(function(e){n("BAR",e,!1),n("MARK",e,!1)})),xui.arr.each(e,(function(e){n("BAR",e),n("MARK",e)})))}}))},insertItems:function(e,t,i,r,o){var n,a,s,u=this._afterInsertItems;return this.each((function(l){var d,c,p,h,f=l.properties;if(a=l.box._adjustItems(e),!0===t&&((s=f.$UIvalue||f.value)&&(s=(s+"").split(f.valueSeparator)),p=l.getItemByItemId(s[0]),t=p?p.id:null),xui.isSet(t)){if(!(p=l.getItemByItemId(t)))return;d=xui.isArr(p.sub)?p.sub:(h=!0,p.sub=[])}else d=(p=f).items||(p.items=[]);if(l.renderId&&(!0===i&&((s=f.$UIvalue||f.value)&&(s=(s+"").split(f.valueSeparator)),p=l.getItemByItemId(s[0]),i=p?p.id:null),i?(n=l.getSubNodeByItemId("ITEM",i))&&(c=l._buildItems("items",l.box._prepareItems(l,a,t)),r?n.addPrev(c):n.addNext(c)):(xui.isSet(t)?(h&&l.getSubNodeByItemId("TOGGLE",t).removeClass("xui-icon-placeholder xui-uicmd-none").addClass("xui-uicmd-toggle"),p._inited&&(n=l.getSubNodeByItemId("SUB",t))):n=l.getSubNode("ITEMS"),n&&(c=l._buildItems("items",l.box._prepareItems(l,a,t)),r?n.prepend(c):n.append(c)))),i){var x=xui.arr.subIndexOf(d,"id",i);xui.arr.insertAny(d,a,r?x:x+1)}else xui.arr.insertAny(d,a,r?0:-1);l.renderId&&!1!==o&&(xui.isSet(t)?l.getItemByItemId(t)._inited&&(("iniFold"in p?p.iniFold:l.properties.iniFold)||l.boxing()._toggleNodes(a,!0,!0,!0)):l.boxing()._toggleNodes(a,!0,!0,!0)),u&&l.renderId&&l.boxing()._afterInsertItems(l,a,t,i,r),l.renderId&&xui.isSet(t)&&l.box._tofold(l,p,t)}))},_toggleNodes:function(e,t,i,r){var o=this,n=o.get(0).properties,a=function(e,t,i,r){xui.isArr(e)&&xui.arr.each(e,(function(e){r&&(xui.isBool(e.iniFold)?e.iniFold:n.iniFold)||(o.toggleNode(e.id,t,!1,i),i&&e.sub&&xui.isArr(e.sub)&&e.sub.length&&a(e.sub,t,!0,r))}))};return a(e,t,i,r),o},toggleNode:function(e,t,i,r,o){var n=this.get(0),a=this,s=arguments.callee;if(xui.isSet(e)){var u=n.getItemByItemId(e);!u||!u.sub||xui.isSet(t)&&!!t==!!u._checked||n.box._setSub(n,u,xui.isSet(t)?!!t:!u._checked,i,r||i,o)}else xui.arr.each(n.properties.items,(function(e){e.sub&&s.call(a,e.id,t,i)}));return this},openToNode:function(e,t){return this.each((function(i){var r=!1,o=[];!function(e,t,i){i=i||0;var n=arguments.callee;xui.arr.each(e,(function(e){return e.id==t?(o.push(e),r=!0,!1):e.sub&&xui.isArr(e.sub)&&(r=n.call(n,e.sub,t,++i))?(o.push(e),!1):void 0}))}(i.properties.items,e),r&&(o.reverse(),xui.arr.each(o,(function(e,r){e.sub?(i.boxing().toggleNode(e.id,!0),!1===t||r!=o.length-1||(e.hasOwnProperty("group")?e.group:i.properties.group)||i.boxing().fireItemClickEvent(e.id)):!1!==t&&i.boxing().fireItemClickEvent(e.id)})))}))},isSubInited:function(e){var t=this.getItemByItemId(e);return t&&t.sub&&xui.isArr(t.sub)}},Static:{_focusNodeKey:"BAR",Templates:{tagName:"div",style:"{_style}",className:"{_className}",BORDER:{tagName:"div",className:"xui-uibase",BOX:{tagName:"div",ITEMS:{tagName:"div",className:"{_cmdsalign}",text:"{items}"}}},$submap:{items:{ITEM:{className:"",style:"{_itemDisplay}",tagName:"div",BAR:{$order:0,tabindex:"{_tabindex}",className:"xui-uitembg  xui-showfocus  {itemClass} {cls_group} {cls_fold} {_split} {disabled} {readonly}",style:"{itemStyle};{_splitstyle}",RULER:{$order:2,style:"{_ruleDisplay};{rulerStyle}",text:"{innerIcons}"},TOGGLE:{$order:3,style:"{_tglDisplay}",className:"xuifont",$fonticon:"{_fi_togglemark}"},LTAGCMDS:{$order:4,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},MARK:{$order:5,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{mark2Display}"},ITEMICON:{$order:6,className:"xuicon {imageClass} {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},ITEMCAPTION:{text:"{caption}",style:"{_capDisplay}",className:"{disabled}  {readonly}",$order:7},EXTRA:{style:"{_extraDisplay}",text:"{ext}",$order:8},RTAGCMDS:{$order:9,tagName:"span",style:"{_rtagDisplay}",text:"{rtagCmds}"},OPT:{$order:10,style:"{_optDisplay}",className:"xuifont",$fonticon:"{_fi_optClass}"}},SUB:{$order:1,tagName:"div",text:xui.UI.$childTag}}},"items.ltagCmds":function(e,t,i,r,o){var n=arguments.callee,a=n._m||(n._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(e,t,i,"items.tagCmds"+(a[i.type]||".button"),o)},"items.rtagCmds":function(e,t,i,r,o){var n=arguments.callee,a=n._m||(n._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(e,t,i,"items.tagCmds"+(a[i.type]||".button"),o)},"items.tagCmds.text":xui.UI.$getTagCmdsTpl("text"),"items.tagCmds.button":xui.UI.$getTagCmdsTpl("button"),"items.tagCmds.image":xui.UI.$getTagCmdsTpl("image")}},Appearances:{KEY:{border:0},EXTRA:{display:"none"},BOX:{left:0,overflow:"auto","overflow-x":"hidden",position:"relative",clear:"both"},ITEMS:{overflow:"hidden"},ITEM:{"white-space":"nowrap",position:"relative",overflow:"hidden"},BAR:{cursor:"pointer",zoom:xui.browser.ie?1:null,position:"relative",display:"block",overflow:"hidden",padding:".25em .5em","border-radius":".3px 0 0 3px","-moz-border-radius":"3px 0 0 3px","-webkit-border-radius":"3px 0 0 3px","-o-border-radius":"3px 0 0 3px","-ms-border-radius":"3px 0 0 3px","-khtml-border-radius":"3px 0 0 3px","outline-offset":"-1px","-moz-outline-offset":xui.browser.gek&&xui.browser.ver<3?"-1px !important":null},SUB:{overflow:"hidden",zoom:xui.browser.ie?1:null,height:0,"font-size":xui.browser.ie68?"1px":null,"line-height":xui.browser.ie68?"1px":null,position:"relative","margin-left":"1.75em"},MARK:{cursor:"pointer","vertical-align":"middle"},"BAR-group":{$order:4,border:"none"},ITEMCAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle",padding:".167em","white-space":"normal"},OPT:{$order:10,position:"absolute",left:"auto",top:"50%","margin-top":"-0.5em",right:".167em",display:"none"},"LTAGCMDS, RTAGCMDS":{padding:0,margin:0,"vertical-align":"middle"},"ITEMS-tagcmdleft RTAGCMDS":{"padding-right":".333em",float:"left"},"ITEMS-tagcmdfloatright RTAGCMDS":{"padding-right":".333em",float:"right"},TOGGLE:{padding:"0 .334em 0 0"}},Behaviors:{HoverEffected:{TOGGLE:"TOGGLE",BAR:"BAR",OPT:"OPT",CMD:"CMD"},ClickEffected:{TOGGLE:"TOGGLE",BAR:"BAR",OPT:"OPT",CMD:"CMD"},DraggableKeys:["BAR"],NoDraggableKeys:["TOGGLE"],DroppableKeys:["BAR","TOGGLE","BOX"],TOGGLE:{onClick:function(e,t,i){var r=e.properties,o=xui.use(i).id(),n=e.getItemByDom(o);return!r.disabled&&!n.disabled&&"sub"in n&&(e.box._setSub(e,n,!n._checked),!1)}},BAR:{onDblclick:function(e,t,i){e.properties;var r=e.getItemByDom(i),o=e.onDblclick&&e.boxing().onDblclick(e,r,t,i);r.sub&&!1!==o&&e.getSubNode("TOGGLE",e.getSubId(i)).onClick()},onClick:function(e,t,i){return e.box._onclickbar(e,t,i)},onKeydown:function(e,t,i){return e.box._onkeydownbar(e,t,i)},onContextmenu:function(e,t,i){if(e.onContextmenu)return!1!==e.boxing().onContextmenu(e,t,i,e.getItemByDom(i))},onMouseover:function(e,t,i){if(!xui.browser.fakeTouch&&"touchOnly"!=xui.browser.deviceType){var r=e.getItemByDom(i);r&&(e.properties.optBtn||r.optBtn)&&e.getSubNode("OPT",e.getSubId(i)).setInlineBlock()}},onMouseout:function(e,t,i){if(!xui.browser.fakeTouch&&"touchOnly"!=xui.browser.deviceType){var r=e.getItemByDom(i);r&&(e.properties.optBtn||r.optBtn)&&e.getSubNode("OPT",e.getSubId(i)).css("display","none")}}},OPT:{onClick:function(e,t,i){if(e.onShowOptions){var r=e.getItemByDom(i);if(!r)return;if(!e.properties.optBtn&&!r.optBtn)return;e.boxing().onShowOptions(e,r,t,i)}return!1},onDblclick:function(e,t,i){return!1}},CMD:{onClick:function(e,t,i){var r=e.properties,o=e.getItemByDom(xui.use(i).parent().get(0));return!!o&&(r.disabled||o.disabled||"split"==o.type||e.onCmd&&e.boxing().onCmd(e,o,xui.use(i).id().split("_")[1],t,i),!1)}},BOX:{onScroll:function(e,t,i){0!==(t=xui.use(i)).scrollLeft()&&t.scrollLeft(0)}}},EventHandlers:{onShowOptions:function(e,t,i,r){},beforeClick:function(e,t,i,r){},onClick:function(e,t,i,r){},afterClick:function(e,t,i,r){},onCmd:function(e,t,i,r,o){},onDblclick:function(e,t,i,r){},onGetContent:function(e,t,i){},onItemSelected:function(e,t,i,r,o){},beforeFold:function(e,t){},beforeExpand:function(e,t){},afterFold:function(e,t){},afterExpand:function(e,t){}},DataModel:{listKey:null,isFormField:{hidden:!0,ini:!1},width:{$spaceunit:1,ini:"18em"},height:{$spaceunit:1,ini:"18em"},iniFold:!0,animCollapse:!0,dock:"fill",group:{ini:!1,action:function(e){var t=this,i=t.properties.items,r=t.queryItems(i,(function(e){return e.sub&&e.group===undefined})),o=xui();xui.arr.each(r,(function(e){o.merge(t.getSubNodeByItemId("BAR",e.id))})),e?o.addClass("xui-uigradient xui-uibar "+t.getClass("BAR","-group")):o.removeClass("xui-uigradient xui-uibar "+t.getClass("BAR","-group"))}},selMode:{ini:"single",listbox:["single","none","multi","multibycheckbox"],action:function(e){var t=this,i=this.properties,r=[];xui.each(this.SubSerialIdMapItem,(function(e){e.sub&&(e.hasOwnProperty("group")?e.group:i.group)||r.push(t.getSubNodeByItemId("MARK",e.id).get(0))})),xui(r).css("display","multi"==e||"multibycheckbox"==e?"":"none")}},noCtrlKey:!0,singleOpen:!1,dynDestory:!1,position:"absolute",optBtn:{ini:"",combobox:xui.toArr("xui-uicmd-opt,xui-icon-singleright"),action:function(){this.boxing().refresh()}},togglePlaceholder:!1,tagCmds:{ini:[],action:function(){this.boxing().refresh()}},tagCmdsAlign:{ini:"right",listbox:["left","right","floatright"],action:function(e){var t=this,i=t.getSubNode("ITEMS"),r=t.getClass("ITEMS","-tagcmd");i.removeClass(new RegExp(r+"[w]*")).addClass(t.getClass("ITEMS","-tagcmd"+e))}}},RenderTrigger:function(){this.boxing()._toggleNodes(this.properties.items,!0,!0,!0)},_onclickbar:function(e,t,i){var r=e.properties,o=xui.use(i).id(),n=e.getItemByDom(o),a=e.getSubId(o),s=e.boxing(),u=xui.Event.getKey(t),l=e.getKey(xui.Event.getSrc(t).id||""),d=l==e.keys.TOGGLE||l==e.keys.MARK;if(!d&&e.beforeClick&&!1===s.beforeClick(e,n,t,i))return!1;if(r.disabled||n.disabled||"split"==n.type)return!1;if(!d&&e.onClick&&s.onClick(e,n,t,i),!n.sub||!(n.hasOwnProperty("group")?n.group:r.group)){switch(e.getSubNode(e.box._focusNodeKey,a).focus(!0),r.selMode){case"none":s.onItemSelected(e,n,t,i,0);break;case"multibycheckbox":if(r.readonly||n.readonly)return!1;if(e.keys.MARK&&l!=e.keys.MARK){s.onItemSelected(e,n,t,i,0);break}case"multi":if(r.readonly||n.readonly)return!1;var c=s.getUIValue(),p=c?c.split(r.valueSeparator):[],h=1;if(p.length&&(u.ctrlKey||u.shiftKey||r.noCtrlKey)){if(u.shiftKey){if(e.$firstV._pid!=n._pid)return;var f=r.items;if(n._pid){var x=e.getItemByItemId(n._pid);x&&(f=x.sub)}var g,m=xui.arr.subIndexOf(f,"id",e.$firstV.id),b=xui.arr.subIndexOf(f,"id",n.id);for(p.length=0,g=Math.min(m,b);g<=Math.max(m,b);g++)p.push(f[g].id)}else-1!=xui.arr.indexOf(p,n.id)?(xui.arr.removeValue(p,n.id),h=-1):p.push(n.id);p.sort(),c=p.join(r.valueSeparator),s.getUIValue()!=c&&(e._noScroll=1,s.setUIValue(c,null,null,"click"),delete e._noScroll,s.get(0)&&s.getUIValue()==c&&s.onItemSelected(e,n,t,i,h));break}case"single":s.getUIValue()!=n.id&&(e.$firstV=n,e._noScroll=1,s.setUIValue(n.id,null,null,"click"),delete e._noScroll,s.get(0)&&s.getUIValue()==n.id&&s.onItemSelected(e,n,t,i,1))}return!d&&e.afterClick&&s.afterClick(e,n,t,i),!d}e.getSubNode("TOGGLE",a).onClick()},_onkeydownbar:function(e,t,i){var r=xui.Event.getKey(t),o=r.key,n=r.shiftKey,a=r.ctrlKey,s=e.getSubNode(e.box._focusNodeKey,e.getSubId(i)),u=e.getRoot(),l=u.nextFocus(!0,!0,!1),d=u.nextFocus(!1,!0,!1);switch(o){case"enter":s.onClick();break;case"tab":if(n){if(s.get(0)!=l.get(0))return l.focus(!0),!1}else if(s.get(0)!=d.get(0))return d.focus(!0),!1;break;case"up":return a?(e.getSubNode("TOGGLE",e.getSubId(i)).onClick(),!1):(s.get(0)==l.get(0)?d.focus(!0):s.nextFocus(!1,!0,!1).focus(!0),!1);case"down":return a?(e.getSubNode("TOGGLE",e.getSubId(i)).onClick(),!1):(s.get(0)==d.get(0)?l.focus(!0):s.nextFocus(!0,!1,!1).focus(!0),!1);case"right":case"left":return e.getSubNode("TOGGLE",e.getSubId(i)).onClick(),!1}},_onStartDrag:function(e,t,i,r){return r=xui.Event.getPos(t),xui.use(i).startDrag(t,{dragSource:e.$xid,dragType:"icon",shadowFrom:i,targetLeft:r.left+12,targetTop:r.top+12,dragCursor:"pointer",dragDefer:2,dragKey:e.box.getDragKey(e,i),dragData:e.box.getDragData(e,t,i)}),!1},_onDropTest:function(e,t,i,r,o,n){var a=o&&o.domId;if(a){if(a==xui.use(i).id())return!1;if(xui.get(xui.use(i).get(0),["parentNode","previousSibling","firstChild","id"])==a)return!1;var s=e.getItemByDom(a);if(s&&n&&s._pid==n.id)return!1;for(var u=xui.use(i).get(0),l=e.getRootNode();u=u.parentNode;){if(e.getSubId(u.id)==e.getSubId(a))return!1;if(u.id==xui.get(l,["parentNode","id"]))break}}},_onDrop:function(e,t,i,r,o,n){var a,s=e.getKey(xui.use(i).id()),u=o.profile,l=o.domId,d=e.keys,c=xui.absObj.$specialChars,p=e.boxing(),h=xui.copy(p.getUIValue(!0));return a=xui.clone(u.getItemByDom(l),(function(e,t){return!c[(t+"").charAt(0)]})),u.boxing().removeItems([a.id]),s==d.BOX?p.insertItems([a],null,null,!1):s==d.BAR?p.insertItems([a],n._pid,n.id,!0):s==d.TOGGLE&&p.insertItems([a],n.id,null,!1),h&&h.length&&-1!=xui.arr.indexOf(h,a.id)&&(e._noScroll=1,p.setUIValue(h,!0,null,"drop"),delete e._noScroll),o._new=a,!1},_prepareData:function(e){var t=arguments.callee.upper.call(this,e);return t._cmdsalign=e.getClass("ITEMS","-tagcmd"+e.properties.tagCmdsAlign),t},_prepareItem:function(e,t,i,r,o,n){var a=e.properties;e.ItemIdMapSubSerialId,e.SubSerialIdMapItem,r&&(i._pid=r),t.isFolder&&(i.sub||(i.sub=!0),t.sub||(t.sub=!0)),t._fi_togglemark=t.sub?"xui-uicmd-toggle"+(t._checked?" xuifont-checked xui-uicmd-toggle-checked":""):a.togglePlaceholder?"xui-icon-placeholder":"xui-uicmd-none",t.disabled=t.disabled?"xui-ui-disabled":"",t.mark2Display="showMark"in t?t.showMark?"":"display:none;":"multi"==a.selMode||"multibycheckbox"==a.selMode?"":"display:none;",t._tabindex=a.tabindex,t._fi_optClass=a.optBtn,t.group&&!t.sub&&(t.sub=i.sub=[]),t.sub&&(t.hasOwnProperty("group")?t.group:a.group)&&(t.cls_group="xui-uigradient xui-uibar "+e.getClass("BAR","-group"),t.mark2Display="display:none"),this._prepareCmds(e,t),(xui.browser.fakeTouch||"mouseOnly"==xui.browser.deviceType)&&(t._optDisplay=a.optBtn?"display:block;":""),"split"==t.type&&(t._split="xui-uitem-split",t._ruleDisplay=t._ltagDisplay=t._tglDisplay=t._rtagDisplay=t.imageDisplay=t.mark2Display=t._capDisplay=t._extraDisplay=t._optDisplay="display:none;")},_setSub:function(e,t,i,r,o,n){var a=e.domId,s=e.boxing(),u=e.properties,l=e.getSubIdByItemId(t.id),d=e.getSubNode("TOGGLE",l),c=e.getSubNode("SUB",l),p=e.getSubNode("BAR",l),h=e.getSubNode("ITEMICON",l);if(!xui.Thread.isAlive(e.key+":"+e.$xid))if(i){if(!t._checked){if(s.beforeExpand&&!1===s.beforeExpand(e,t))return;b=function(i){c.css({display:"",height:"auto"}),xui.browser.ie&&xui.browser.ver<=8?d.css({backgroundImage:"",backgroundRepeat:"",backgroundPositionX:"",backgroundPositionY:"",backgroundColor:"",backgroundAttachment:""}):d.removeClass("xui-icon-loading"),i||(t._checked=!0,s.afterExpand&&s.afterExpand(e,t)),xui.resetRun(a,(function(i){i&&xui.tryF(i,[e,t],s)}),0,[n])};var f,x=t.sub,g=function(i){!function(e,t,i,r,n,a,s,u){var l=e.boxing(),d=e.properties,c=!1===u;if(!c&&!t._inited&&(delete t.sub,t._inited=!0,u)){"string"==typeof u?n.html(t.sub=u,!1):u["xui.Template"]||u["xui.UI"]?n.append(t.sub=u.render(!0)):xui.isArr(u)&&(l.insertItems(u,t.id),t.sub||(t.sub=u));var p=0,h=l.getUIValue(!0);h&&h.length&&(xui.arr.each(u,(function(e){if(-1!=xui.arr.indexOf(h,e.id||e))return p=1,!1})),p&&(e._noScroll=1,l._setCtrlValue(l.getUIValue()),delete e._noScroll))}if(d.singleOpen&&l._toggleNodes(t._pid?e.getItemByItemId(t._pid).sub:d.items,!1),c||(r.tagClass("-checked"),a.tagClass("-expand").tagClass("-fold",!1),s.tagClass("-fold",!1).tagClass("-expand")),o)b(c);else if(n.css("height","0px").css("display",""),d.animCollapse){var f=0;n.children().each((function(e){f+=e.offsetHeight})),n.animate({height:[0,f]},null,(function(){b(c)}),200,null,"expoIn",e.key+":"+e.$xid).start()}else b(c)}(e,t,0,d,c,p,h,i)};if("string"==(f=typeof x)||"object"==f)g(x);else if(e.onGetContent){xui.browser.ie&&xui.browser.ver<=8?d.css("background","url("+xui.ini.img_busy+") no-repeat"):d.addClass("xui-icon-loading");var m=e.boxing().onGetContent(e,t,g);(m||!1===m)&&(!0===m&&(t._inited=!0),g(m))}}r&&t.sub&&xui.arr.each(t.sub,(function(t){t.sub&&t.sub.length&&!t._checked&&e.box._setSub(e,t,i,r,!0,n)}))}else{if(t._checked){if(s.beforeFold&&!1===s.beforeFold(e,t))return;var b=function(){if(c.css({display:"none",height:0}),d.tagClass("-checked",!1),p.tagClass("-expand",!1).tagClass("-fold"),h.tagClass("-expand",!1).tagClass("-fold"),t._checked=!1,u.dynDestory||t.dynDestory){for(var i=t.sub,r=[],o=0,l=i.length;o<l;o++)r.push(i[o].id);e.boxing().removeItems(r),t.sub=!0,delete t._inited}s.afterFold&&s.afterFold(e,t),xui.resetRun(a,(function(i){i&&xui.tryF(i,[e,t],s)}),0,[n])};o?b():u.animCollapse?c.animate({height:[c.height(),0]},null,b,200,null,"expoOut",e.key+":"+e.$xid).start():b()}r&&t.sub&&!u.dynDestory&&!t.dynDestory&&xui.arr.each(t.sub,(function(t){t.sub&&t.sub.length&&e.box._setSub(e,t,i,r,!0,n)}))}},_tofold:function(e,t,i){e.getSubNodeByItemId("BAR",i).addClass(e.getClass("BAR","-fold")),e.getSubNodeByItemId("TOGGLE",i).replaceClass(new RegExp("\\buicmd-(none|empty)\\b"),"xui-uicmd-toggle")},_onresize:function(e,t,i){e.getSubNode("BORDER").cssSize({width:t||null,height:i||null}),e.getSubNode("BOX").cssSize({width:t||null,height:i||null})}}}),xui.Class("xui.UI.TreeView","xui.UI.TreeBar",{Initialize:function(){this.addTemplateKeys(["IMAGE"]);var e=this.getTemplate();e.$submap.items.ITEM.BAR.className="xui-uitembg xui-uiborder-radius xui-showfocus {cls_group} {cls_fold} {_split} {disabled} {readonly}",e.$submap.items.ITEM.BAR.ITEMICON.$fonticon="{_fi_cls_file}",this.setTemplate(e)},Static:{Appearances:{ITEMS:{padding:".25em"},ITEM:{"white-space":"nowrap",position:"relative",overflow:"hidden"},BAR:{zoom:xui.browser.ie?1:null,position:"relative",display:"block","outline-offset":"-1px","-moz-outline-offset":xui.browser.gek&&xui.browser.ver<3?"-1px !important":null},SUB:{zoom:xui.browser.ie?1:null,height:0,"font-size":xui.browser.ie68?"1px":null,"line-height":xui.browser.ie68?"1px":null,position:"relative",overflow:"hidden"},BOX:{left:0,overflow:"auto",position:"relative"}},Behaviors:{MARK:{onClick:function(e,t,i){return e.box._onclickbar(e,t,xui.use(i).parent().xid()),!1}},ITEMICON:{onClick:function(e,t,i){return e.box._onclickbar(e,t,xui.use(i).parent().xid()),!1}}},DataModel:{$subMargin:1.8,group:null,noIcon:{ini:!1,action:function(e){this.getSubNode("ITEMICON",!0).css("display",e?"none":"")}}},_prepareItem:function(e,t,i,r,o,n){var a,s=e.properties,u=e.ItemIdMapSubSerialId,l=e.SubSerialIdMapItem;t.isFolder&&(i.sub||(i.sub=!0),t.sub||(t.sub=!0)),xui.isSet(r)?(i._pid=r,(a=l[u[r]])&&(i._deep=a._deep+1,t.rulerStyle="width:"+i._deep*s.$subMargin+"em;",t._fi_togglemark=t.sub?"xui-uicmd-toggle"+(t._checked?"-checked xui-uicmd-toggle":""):s.togglePlaceholder?"xui-uicmd-empty":"xui-uicmd-none")):(i._deep=0,t.rulerStyle="",t.innerIcons="",t._fi_togglemark=t.sub?"xui-uicmd-toggle"+(t._checked?"-checked xui-uicmd-toggle":""):s.togglePlaceholder?"xui-uicmd-empty":"xui-uicmd-none"),t.imageDisplay=t.noIcon||s.noIcon?"display:none;":"",t.cls_fold=t.sub?e.getClass("BAR","-fold"):"",t.imageClass||t.image||t.iconFontCode||(t._fi_cls_file="xui-icon-file"+(t.sub?" xui-icon-file-fold":"")),t._fi_optClass=s.optBtn,t.disabled=t.disabled?"xui-ui-disabled":"",t._itemDisplay=t.hidden?"display:none;":"",t.mark2Display="showMark"in t?t.showMark?"":"display:none;":"multi"==s.selMode||"multibycheckbox"==s.selMode?"":"display:none;",t._tabindex=s.tabindex,this._prepareCmds(e,t),"split"==t.type&&(t._split="xui-uitem-split",t._splitstyle="margin-left:"+i._deep*s.$subMargin+"em;",t._ruleDisplay=t._ltagDisplay=t._tglDisplay=t._rtagDisplay=t.imageDisplay=t.mark2Display=t._capDisplay=t._extraDisplay=t._optDisplay="display:none;")},_tofold:function(e,t,i){var r=e.getClass("IMAGE");e.getSubNodeByItemId("BAR",i).addClass(e.getClass("BAR","-fold")),e.getSubNodeByItemId("TOGGLE",i).replaceClass(new RegExp("\\b"+r+"-path([-\\w]+)\\b"),r+"-fold$1")}}}),xui.Class("xui.UI.PopMenu",["xui.UI.Widget","xui.absList"],{Instance:{adjustSize:function(){return this.each((function(e){if(e.renderId){var t=e.getRoot(),i=e.getSubNode("BORDER"),r=e.getSubNode("BOX"),o=e.getSubNode("BOXBGBAR"),n=e.getSubNode("ITEMS"),a=e.getSubNode("ITEM",!0),s=e.properties,u=xui.$us(e),l=i.contentBox(),d=function(t,i){return e.$forceu(t,u>0?"em":"px",i)},c=0,p=0;n.cssSize({width:"auto",height:"auto"}),p=n.height()+(l?0:i._borderH()),xui.browser.ie67&&p%2==1&&(p+=1),n.addClass(e.getClass("ITEMS","-inline")),a.each((function(e){c=Math.max(c,e.offsetWidth)})),c%2==1&&(c+=1),n.removeClass(e.getClass("ITEMS","-inline")),n.cssSize({width:d(c),height:d(p)}),o.height(d(p));var h=d(Math.min(s._maxHeight,p)),f=d(Math.min(s._maxWidth,c)),x={width:f,height:h};s.width=f,s.height=h,t.cssSize(x),i.cssSize(x),r.cssSize({width:d(Math.min(s._maxWidth,c)+xui.Dom.getScrollBarSize()),height:x.height})}})),this._setScroll()},_setScroll:function(){return this.each((function(e){if(e.getRootNode()){var t=e.getSubNode("BOX"),i=t.scrollTop(),r=t.scrollHeight(),o=e.getRoot().offsetHeight();e.getSubNode("TOP").css("display",0===i?"none":"block"),e.getSubNode("BOTTOM").css("display",o>=r-i?"none":"block")}}))},_scrollToBottom:function(){var e=this.get(0),t=e.getSubNode("BOX"),i=e.getSubNode("BORDER"),r=t.scrollTop(),o=!1,n=t.scrollHeight(),a=i.height();a<n-r&&(a>=n-(r+=e.$scrollStep=Math.max(5,1.005*(e.$scrollStep||1)))&&(r=n-a,o=!0),t.scrollTop(r),o?(e.getSubNode("BOTTOM").css("display","none"),e.$scrollTobottom=!1,e.$scrollStep=1):(e.getSubNode("TOP").css("display","block"),e.$scrollTobottom&&xui.asyRun(this._scrollToBottom,0,[],this)))},_scrollToTop:function(){var e=this.get(0),t=e.getSubNode("BOX"),i=t.scrollTop(),r=!1;i>0&&((i-=e.$scrollStep=Math.max(5,1.005*(e.$scrollStep||1)))<0&&(i=0,r=!0),t.scrollTop(i),r?(e.getSubNode("TOP").css("display","none"),e.$scrollToTop=!1,e.$scrollStep=1):(e.getSubNode("BOTTOM").css("display","block"),e.$scrollToTop&&xui.asyRun(this._scrollToTop,0,[],this)))},_initGrp:function(){var e,t=this.get(0);t.$popGrp&&t.$popGrp.length||(e=t.getRoot(),t.$popGrp=[e._get(0)],e.setBlurTrigger(t.$xid,null),e.setBlurTrigger(t.$xid,(function(){t.box&&(t.boxing().hide(),t.$popGrp&&(t.$popGrp.length=0))}),t.$popGrp))},pop:function(e,t,i,r){var o=this,n=o.get(0),a=n.properties.parentID||xui.ini.$rootContainer;return n.renderId||xui.Dom.getEmptyDiv().append(o.render(!0)),n.$highLight&&xui([n.$highLight]).tagClass("-hover",!1),n._conainer=a?xui.get(n,["host",a])?n.host[a].getContainer():xui(a):i||null,n.getRoot().popToTop(e,t,n._conainer,null,null,r),o._setScroll(),o.adjustSize(),o._initGrp(),n.$childPopMenu=n.$subPopMenuShowed=n.$highLight=null,o},hide:function(e,t,i){var r,o=this.get(0),n=(o.properties,o.getRoot()),a="$subPopMenuShowed",s="$highLight",u="$childPopMenu";return n.hide((function(){if(!1!==e&&!1===o.boxing().beforeHide(o,t,i))return this;if(n&&"none"!=n.css("display")){xui.get(o,["$hideMenuPool","_nodes",0])?o.$hideMenuPool.append(n):n.css("display","none"),(r=o[s])&&xui([r]).tagClass("-hover",!1);var l,d=o[u];for((r=o[a])&&r.hide(e,t);d;)d.boxing().hide(e,t),d=(l=d)[u],l[u]=l[a]=l[s]=null;o[u]=o[a]=o[s]=null,(r=o.$parentPopMenu)&&(r[a]=null),o.$popGrp&&xui.arr.removeValue(o.$popGrp,n._get(0)),o.$popGrp&&o.$popGrp.length||n.setBlurTrigger(o.$xid,null),!1!==e&&o.boxing().onHide(o)}}),null,t),this},_afterInsertItems:function(e){e.renderId&&e.boxing().adjustSize()},_afterRemoveItems:function(e){e.renderId&&e.boxing().adjustSize()}},Initialize:function(){var e=this.getTemplate();xui.merge(e.FRAME.BORDER,{className:"xui-uiborder-outset xui-uiborder-radius",TOP:{className:"xuifont xui-uibar xui-uiborder-b",$fonticon:"xui-icon-circleup"},BOTTOM:{className:"xuifont xui-uibar xui-uiborder-t",$fonticon:"xui-icon-circledown"},BOX:{tagName:"div",className:"xui-uibase",BOXBGBAR:{tabName:"div",className:"xui-uibar",style:"{_iconDisplay}"},ITEMS:{tagName:"div",text:"{items}"}},POOL:{}},"all"),e.$submap={items:function(e,t,i,r,o){var n;r=r+"."+i.type,(n=i.object)?o[o.length]=n.build(i):t[r]&&xui.UI.$doTemplate(e,t,i,r,o)},"items.split":{ITEMSPLIT:{style:"{_itemDisplay}",className:"xui-uiborder-b"}},"items.button":{ITEM:{tabindex:-1,className:" xui-uimenu {itemClass} {disabled}",style:"{itemStyle};{_itemDisplay};",ICON:{$order:0,className:"xuicon xui-icon-placeholder {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{_iconDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:2},SUB:{className:"xuifont",$fonticon:"xui-icon-singleright",style:"{displaySub}"}}},"items.checkbox":{ITEM:{tabindex:-1,className:"  xui-uimenu {itemClass} {disabled}",style:"{itemStyle};{_itemDisplay};",CHECKBOX:{$order:0,className:"xuifont",$fonticon:"{_fi_checkboxCls1} {_fi_checkboxCls2}  {_iconDisplay}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:2}}},"items.radiobox":{ITEM:{tabindex:-1,className:"  xui-uimenu {itemClass} {disabled}",style:"{itemStyle};{_itemDisplay};",RADIOBOX:{$order:0,className:"xuifont",$fonticon:"{_fi_radioboxCls1} {_fi_radioboxCls2}  {_iconDisplay}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:3}}}},this.setTemplate(e),this.prototype.popUp=this.prototype.pop},Static:{$initRootHidden:!0,Appearances:{KEY:{visibility:"hidden"},POOL:{position:"absolute",display:"none"},BOX:{overflow:"hidden",position:"relative","overflow-y":"auto","z-index":"3"},BORDER:{position:"relative",overflow:"hidden"},ITEMS:{position:"relative",top:0,left:0,overflow:"hidden","white-space":"nowrap"},BOXBGBAR:{"z-index":-1,position:"absolute",left:0,top:0,width:"2em",height:"100%"},"ITEMS-inline ITEM":{$order:5,display:xui.$inlineBlock},ITEM:{display:"block",position:"relative",overflow:"visible","white-space":"nowrap",cursor:"pointer",padding:".25em 1.75em .25em .25em",outline:0},ITEMSPLIT:{display:"block",position:"relative",overflow:"visible","white-space":"nowrap",margin:".25em .25em .25em 2em"},ICON:{margin:0},TOP:{cursor:"pointer",display:"none",position:"absolute","z-index":"10",top:0,"text-align":"center",width:"100%"},BOTTOM:{cursor:"pointer",display:"none",position:"absolute",bottom:0,"z-index":"10","text-align":"center",width:"100%"},"RADIOBOX, CHECKBOX, RADIOBOX-checked, CHECKBOX-checked":{cursor:"pointer","vertical-align":"middle"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","padding-left":".75em","font-size":"1em"},RULER:{width:"8em"},ADD:{position:"absolute",top:".25em",right:0,width:"7em","padding-right":"1.75em","text-align":"right","z-index":"10",zoom:xui.browser.ie?1:null},SUB:{position:"absolute",top:".15em",right:".15em"}},Behaviors:{HoverEffected:{TOP:"TOP",BOTTOM:"BOTTOM"},BOX:{onScroll:function(e,t,i){e.boxing()._setScroll()}},ITEM:{onMouseover:function(e,t,i){var r="$subPopMenuShowed",o="$allPops",n="$highLight",a="$showpops";if(e[n]!=i){e[o]=e[o]||{},e.properties;var s,u,l,d=e.getItemByDom(i),c=d.id,p=!1;if((l=e[r])&&(l==xui.get(e,[o,c])?p=!0:(l.hide(),e[r]=null)),!p){(l=e[n])&&xui([l]).tagClass("-hover",!1),e[n]=i,xui.use(i).tagClass("-hover");try{xui.use(i).get(0).focus()}catch(t){}}if(!p&&d.sub){if((!xui.isArr(d.sub)||!d.sub.length)&&e.onShowSubMenu){var h=e[o][c];if(h&&h["xui.UI"]&&!h.isEmpty()||(h=e.boxing().onShowSubMenu(e,d,i)),h&&h["xui.UI"]&&!h.isEmpty())return e[o][c]=e[r]=h,(h=h.reBoxing()).onMouseout((function(t,i,r){e.box._mouseout(e,i,r)}),null,-1),e.boxing()._initGrp(),e.$popGrp.push(h._get(0)),void h.popToTop(i,2,e._conainer);h&&xui.isArr(h)&&h.length&&(d.sub=h)}if(xui.isArr(d.sub)&&d.sub.length){if(s=e[o][c])u=s.get(0);else{var f=e.properties;(s=new xui.UI.PopMenu({position:"absolute",items:d.sub,autoHide:f.autoHide,showEffects:f.showEffects,hideEffects:f.hideEffects}).render(!0)).onShowSubMenu((function(t,i,r){return e.boxing().onShowSubMenu(e,i,r)})),s.onMenuSelected((function(t,i,r){return e.boxing().onMenuSelected(e,i,r)})),(u=s.get(0)).$hideMenuPool=xui.get(e,["$hideMenuPool","_nodes",0])||e.getSubNode("POOL"),e[o][c]=s,e[a]=e[a]||[e],u[a]=e[a],e[a].push(u)}e.boxing()._initGrp(),e.$popGrp.push(u.getRoot()._get(0)),u.$popGrp=e.$popGrp,u.$parentPopMenu=e,e.$childPopMenu=u,s.popUp(i,2,e._conainer),e[r]=s}}}},onMouseout:function(e,t,i){e.properties,e.getItemByDom(i).id;var r,o="$highLight";if(e[o]!=i){if(r=e.$subPopMenuShowed){var n=t.toElement||t.relatedTarget,a=r.get(0).getRootNode();try{do{if(n==a)return}while(n&&(n=n.parentNode))}catch(e){}}xui.use(i).tagClass("-hover",!1),e[o]=null}},onClick:function(e,t,i){var r=e.properties,o=e.getItemByDom(i);if(o.id,r.disabled||o.disabled)return!1;o.group||("checkbox"==o.type?e.getSubNodeByItemId("CHECKBOX",o.id).tagClass("-checked",o.value=!o.value):"radiobox"==o.type&&(e.getSubNode("RADIOBOX",!0).tagClass("-checked",!1),xui.arr.each(r.items,(function(e){"radiobox"==e.type&&(e.value=!1)})),e.getSubNodeByItemId("RADIOBOX",o.id).tagClass("-checked",o.value=!0)),e.onMenuSelected&&e.boxing().onMenuSelected(e,o,i),r.hideAfterClick&&(xui.use(i).tagClass("-hover",!1),xui.asyRun((function(){var t,i=e;if(i.renderId){for(i.$childPopMenu&&i.$childPopMenu.boxing().hide(),i.$childPopMenu=null;i;)i.boxing().hide(),i=(t=i).$parentPopMenu,t.$parentPopMenu=t.$subPopMenuShowed=null;e.$subPopMenuShowed=null,e.$popGrp&&(e.$popGrp.length=0)}}),100)))},onFocus:function(e,t,i){var r=e.getSubNode("BOX"),o=r.scrollTop(),n=r.scrollHeight(),a=xui.use(i).offsetTop();(a<o||a>o+n)&&xui.use(i).offsetTop(o),xui.use(i).onMouseover()},onKeydown:function(e,t,i){var r,o,n,a,s,u=e.getItemByDom(i),l=e.properties.items,d=xui.Event.getKey(t).key,c=u.id;switch(d){case"enter":xui(i).onClick();break;case"up":o=!0,r=!1,xui.arr.each(l,(function(e,t){if("split"!=e.type)return r?(n=e.id,o=!1):void(e.id==c&&(r=!0))}),null,!0),o&&(n=l[l.length-1].id),a=e.getSubNodeByItemId("ITEM",n).get(0);break;case"down":o=!0,r=!1,xui.arr.each(l,(function(e,t){if("split"!=e.type)return r?(n=e.id,o=!1):void(e.id==c&&(r=!0))})),o&&(n=l[0].id),a=e.getSubNodeByItemId("ITEM",n).get(0);break;case"left":(s=e.$parentPopMenu)&&(s=e.$parentPopMenu.$highLight)&&(a=s);break;case"right":(s=e.$subPopMenuShowed)&&s==e.$allPops[c]&&s.activate()}if(a&&a.tagName)try{a.focus()}catch(t){}}},TOP:{onMouseover:function(e){e.$scrollToTop=!0,e.$scrollStep=1,e.boxing()._scrollToTop()},onMouseout:function(e){e.$scrollToTop=!1,e.$scrollStep=1},onClick:function(e){e.$scrollStep*=2}},BOTTOM:{onMouseover:function(e){e.$scrollTobottom=!0,e.$scrollStep=1,e.boxing()._scrollToBottom()},onMouseout:function(e){e.$scrollTobottom=!1,e.$scrollStep=1},onClick:function(e){e.$scrollStep*=2}},ITEMS:{afterKeydown:function(e,t){var i=xui.Event.getKey(t).key;if("tab"==i||"enter"==i)return!0;if("esc"==i){do{e.boxing().hide()}while(e=e.$parentPopMenu);return!1}return!1}},BORDER:{onMouseout:function(e,t,i){e.box._mouseout(e,t,i)}}},DataModel:{dock:null,tabindex:null,tips:null,border:null,resizer:null,dragSortable:null,showEffects:"Blur",hideEffects:"",autoTips:!1,shadow:!0,_maxHeight:360,_maxWidth:460,left:-1e4,parentID:"",hideAfterClick:!0,autoHide:!1,height:{$spaceunit:1,ini:"auto"},width:{$spaceunit:1,ini:"auto"},position:"absolute",noIcon:{ini:!1,action:function(){this.boxing().refresh()}},$hborder:0,$vborder:0},EventHandlers:{onShowSubMenu:function(e,t,i){},beforeHide:function(e,t){},onHide:function(e){},onMenuSelected:function(e,t,i){}},RenderTrigger:function(){var e=this;e.boxing().adjustSize(),(e.$beforeDestroy=e.$beforeDestroy||{})["sub-pops"]=function(t){xui.each(e.$allPops,(function(e){e&&!e.$noDestroyByParentMenu&&(!e["xui.UI"]||e.isEmpty()||e.isDestroyed()?e["xui.UIProfile"]&&!e.destroyed?e.__gc():e["xui.Dom"]&&!e.isEmpty()&&e.remove():e.destroy())}))}},_beforeSerialized:function(e){var t=arguments.callee.upper.call(this,e),i=t.properties;return delete i.left,delete i.top,delete i.right,delete i.bottom,delete i.width,delete i.height,t},_mouseout:function(e,t){if(e.properties.autoHide){var i,r,o,n=xui.Event.getPos(t);if(xui.arr.each(e.$popGrp,(function(e){if(e=xui([e]),r=e.offset(),i=e.cssSize(),n.left>=r.left&&n.top>=r.top&&n.left<=r.left+i.width&&n.top<=r.top+i.height)return o=1,!1})),!o){for(;o=e.$parentPopMenu;)e=o;e.boxing().hide(!0,null,t),e.$popGrp&&(e.$popGrp.length=0)}}},_prepareData:function(e){var t=arguments.callee.upper.call(this,e),i="display:none",r=e.properties;return r.noIcon&&(t._iconDisplay=i),t},_prepareItem:function(e,t){var i="display:none;",r=e.properties;t.add=t.add||"",t.displayAdd=t.add?"":i,t.displaySub=t.sub?"":i,t._itemDisplay=t.hidden?i:"",t._iconDisplay=r.noIcon?i:"",t.type=t.type||"button","checkbox"==t.type?(t._fi_checkboxCls1="xui-uicmd-check",t._fi_checkboxCls2=t.value?"xuicon-checked xui-uicmd-check-checked":""):"radiobox"==t.type&&(t._fi_radioboxCls1="xui-uicmd-radio",t._fi_radioboxCls2=t.value?"xuicon-checked xui-uicmd-radio-checked":"")},_onresize:null}}),xui.Class("xui.UI.MenuBar",["xui.UI","xui.absList"],{Instance:{updateItem:function(e,t){var i=this,r=i.get(0),o=r.properties.items;if(-1!=xui.arr.subIndexOf(o,"id",e))arguments.callee.upper.call(i,e,t);else{var n=0;xui.each(r.$allPops,(function(i){i.updateItem(e,t),n=1})),n||arguments.callee.upper.call(i,e,t)}return i},_pop:function(e,t){var i=this,r=i.get(0);if(r.$curPop&&i.hide(),e.sub&&(!r.beforePopMenu||0!=r.boxing().beforePopMenu(r,e,t))){xui.use(t).tagClass("-active");var o=e.id,n=r.properties,a=n.parentID||xui.ini.$rootContainer,s="$allPops";if(r.$curPop=o,r.$curElem=t,r.$menuPop=o,r[s]=r[s]||{},!r[s][o]){var u=function(e){var t={position:"absolute",items:e,autoHide:!!n.autoShowTime};n.showEffects&&(t.showEffects=n.showEffects),n.hideEffects&&(t.hideEffects=n.hideEffects);var a=xui.create("PopMenu",t);r.getSubNode("POOL").append(a),a.onHide((function(e){i.hide(!1)})).onMenuSelected((function(e,t,i){return r.boxing().onMenuSelected(r,e,t,i)})).onShowSubMenu((function(e,t,i){return r.boxing().onShowSubMenu(r,e,t,i)})),a.get(0).$hideMenuPool=r.getSubNode("POOL"),a.get(0)[s]=r[s],r[s][o]=a};if(xui.isArr(e.sub)&&e.sub.length)u(e.sub);else if(r.onGetPopMenu){var l=r.boxing().onGetPopMenu(r,e,u);xui.isArr(l)&&l.length&&u(e.sub=l)}}return r[s][o]&&r[s][o].popUp(xui(t),1,a?xui.get(r,["host",a])?r.host[a].getContainer():xui(a):null),!1}},_afterInsertItems:function(){this.clearPopCache()},hide:function(e){var t,i=this.get(0),r=i.$curPop,o=i.$curElem;(t=i.$allPops[r])&&(!1!==arguments[0]&&t.hide(!1,e),i.getSubNode("POOL").append(t.reBoxing()),xui([o]).tagClass("-active",!1)),i.$menuPop=i.$curPop=i.$curElem=null},clearPopCache:function(){var e=this.get(0);e.renderId&&(e.getSubNode("POOL").empty(),e.$allPops=e.$curPop=e.$curElem=null)}},Initialize:function(){xui.SC("xui.UI.PopMenu")},Static:{_nocap2tip:!0,Templates:{tagName:"div",className:"{_className}",style:"{_style}",POOL:{tagName:"div"},BORDER:{className:"xui-uibar xui-uiborder-outset xui-uiborder-radius",tagName:"div",LIST:{tagName:"div",HANDLER:{className:"xuifont",$fonticon:"xui-icon-placeholder",style:"{handler}"},ITEMS:{$order:1,text:"{items}"}}},$submap:{items:{ITEM:{style:"{itemStyle};{_itemDisplay};",className:"xui-uimenu",ITEMI:{ITEMC:{ITEMA:{tabindex:"{_tabindex}",className:" {typeCls} {disabled}",ICON:{$order:1,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{$order:2,text:"{caption}",style:"{captionDisplay}"}}}}}}}},Appearances:{KEY:{position:"absolute",left:0,top:0},POOL:{width:0,height:0,visibility:"hidden",position:"absolute",left:"-10000px",top:"-10000px"},BORDER:{left:0,top:0},HANDLER:{height:"100%",width:"0.5em",background:"url("+xui.ini.img_handler+") repeat-y left top",cursor:"move","vertical-align":"middle"},LIST:{padding:".125em"},ITEMS:{"vertical-align":"middle"},ITEM:{"white-space":"nowrap","vertical-align":"top",overflow:"hidden",margin:"0 .25em 0 .25em","padding-right":".5em"},"ITEM *":{cursor:"pointer"},ITEMI:{padding:"0 .25em","vertical-align":"top"},ITEMC:{padding:".25em 0","vertical-align":"top"},ITEMA:{display:xui.$inlineBlock},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","font-size":"1em"}},Behaviors:{ITEM:{onMouseover:function(e,t,i){var r=e.properties,o=i;if(!r.disabled){var n=e.getItemByDom(i),a=n.id;n.disabled||(xui.use(o).tagClass("-hover"),e.$menuPop?e.$menuPop!=a&&e.boxing()._pop(n,o):r.autoShowTime&&xui.resetRun(e.$xid+":autoShowTime",(function(){e.boxing()._pop(n,o)}),r.autoShowTime))}},onMouseout:function(e,t,i){var r=e.properties;if(!r.disabled&&!e.getItemByDom(i).disabled&&(xui.use(i).tagClass("-hover",!1),r.autoShowTime)){var o=e.$allPops;if(o=o&&o[e.$curPop]){var n=o.get(0).getRoot(),a=xui.Event.getPos(t),s=n.cssSize(),u=n.offset();a.left>u.left&&a.top>u.top-3&&a.left<u.left+s.width&&a.top<u.top+s.height||o.hide()}xui.resetRun(e.$xid+":autoShowTime",null)}},onMousedown:function(e,t,i){if(!e.properties.disabled){var r=e.getItemByDom(i);if(r.id,!r.disabled)return xui.use(i).tagClass("-active"),e.boxing()._pop(r,i)}},onMouseup:function(e,t,i){var r=e.getItemByDom(i);e.$menuPop!=r.id&&xui.use(i).tagClass("-active",!1)},onKeydown:function(e,t,i){var r=xui.Event.getKey(t),o=(r.key,r.shiftKey),n=xui(i),a=e.getRoot().nextFocus(!0,!0,!1),s=e.getRoot().nextFocus(!1,!0,!1);switch(xui.Event.getKey(t).key){case"tab":if(o){if(n.get(0)!=a.get(0))return a.focus(!0),!1}else if(n.get(0)!=s.get(0))return s.focus(!0),!1;break;case"left":case"up":return n.nextFocus(!1,!0,!1),n.get(0)==a.get(0)?s.focus(!0):n.nextFocus(!1),!1;case"right":case"down":return n.nextFocus(!0,!1,!1),n.get(0)==s.get(0)?a.focus(!0):n.nextFocus(),!1;case"enter":n.onMousedown()}},onClick:function(e,t,i){var r=e.getItemByDom(i);e.$menuPop!=r.id&&e.onMenuBtnClick&&e.boxing().onMenuBtnClick(e,r,i)}}},DataModel:{listKey:null,dragSortable:null,autoTips:!1,height:{$spaceunit:1,ini:"auto",readonly:!0},width:{$spaceunit:1,ini:"auto"},parentID:"",$hborder:1,$vborder:1,left:0,top:0,autoShowTime:200,handler:{ini:!0,action:function(e){this.getSubNode("HANDLER").css("display",e?"":"none")}},position:"absolute",dock:{ini:"top",listbox:["top","bottom"]}},LayoutTrigger:function(){var e=this.properties,t=this.getSubNode("BORDER");e.$hborder=e.$vborder=t._borderW("left")},EventHandlers:{onGetPopMenu:function(e,t,i){},onMenuBtnClick:function(e,t,i){},beforePopMenu:function(e,t,i){},onShowSubMenu:function(e,t,i,r){},onMenuSelected:function(e,t,i,r){}},RenderTrigger:function(){this.properties.disabled&&this.boxing().setDisabled(!0,!0)},_prepareData:function(e){var t="display:none;",i=arguments.callee.upper.call(this,e);return i.handler=i.handler?"":t,i._itemDisplay=i.hidden?t:"",i}}}),xui.Class("xui.UI.ToolBar",["xui.UI","xui.absList"],{Instance:{updateItem:function(e,t){if(t.type)return arguments.callee.upper.call(this,e,t);var i,r,o,n,a,s,u,l=this,d=l.get(0),c=(d.box,d.properties.items),p=d.queryItems(c,(function(t){return"object"==typeof t?t.id===e:t==e}),!0,!0,!0);if(xui.isStr(t)&&(t={caption:t}),p.length&&(r=(p=p[0])[0])){if(xui.isSet(t.id)&&(t.id+=""),t.id&&e!==t.id){i=t.id;var h,f=d.ItemIdMapSubSerialId;f[i]||((h=f[e])?(f[i]=h,delete f[e],d.SubSerialIdMapItem[h].id=i):r.id=i)}if(delete t.id,xui.isEmpty(t))return l;if(o=d.getSubNodeByItemId("ICON",i||e),n=d.getSubNodeByItemId("CAPTION",i||e),a=d.getSubNodeByItemId("ITEM",i||e),s=d.getSubNodeByItemId("LABEL",i||e),u=d.getSubNodeByItemId("BTN",i||e),"value"in t&&t.value!==r.value&&d.getSubNodeByItemId("BTN",i||e).tagClass("-checked",!!t.value),"caption"in t&&t.caption!==r.caption&&(n.html(t.caption),t.caption&&!r.caption&&n.css("display",""),!t.caption&&r.caption&&n.css("display","none")),"label"in t&&t.label!==r.label&&(s.html(t.label),t.label&&!r.label&&s.css("display",""),!t.label&&r.label&&s.css("display","none")),"disabled"in t&&t.disabled!==r.disabled&&(t.disabled?a.addClass("xui-ui-itemdisabled"):a.removeClass("xui-ui-itemdisabled"),u.onMouseout(!0,{$force:!0})),"image"in t&&t.image!==r.image&&o.css("background-image",t.image),"imagePos"in t&&t.imagePos!==r.imagePos&&o.css("background-position",t.imagePos),"imageClass"in t&&t.imageClass!==r.imageClass&&(r.imageClass&&o.removeClass(r.imageClass),t.imageClass&&o.addClass(t.imageClass)),"hidden"in t){var x=!!t.hidden;x?!0!==r.hidden&&a.css("display","none"):!0===r.hidden&&a.css("display","")}xui.merge(r,t,"all")}return l},showItem:function(e,t){return this.each((function(i){var r=i.getItemByItemId(e);r&&(r.hidden=!1===t,i.getSubNodeByItemId("ITEM",e).css("display",!1===t?"none":""))}))},showGroup:function(e,t){return this.each((function(i){xui.arr.each(i.properties.items,(function(i){if(i.id==e)return i.hidden=!1===t,!1})),i.getSubNodeByItemId("GROUP",e).css("display",!1===t?"none":""),xui.resetRun(i.$xid+":showgrp",(function(){i.renderId&&i.getRootNode().offsetWidth&&xui.UI.$dock(i,!0,!0)}))}))}},Static:{_focusNodeKey:"BTN",_ITEMKEY:"GROUP",Templates:{tagName:"div",className:"{_className}",style:"{_style}",ITEMS:{className:"xui-uibar xui-uiborder-outset xui-uiborder-radius",tagName:"div",style:"{mode}",text:"{items}"},$submap:{items:{GROUP:{className:"{groupClass}",style:"{grpDisplay} {groupStyle}",HANDLER:{className:"xuifont",$fonticon:"xui-icon-placeholder",style:"{mode2}"},LIST:{$order:1,tagName:"text",text:"{sub}"}}},"items.sub":{ITEM:{style:"{_itemDisplay}",className:" {disabled}",IBWRAP:{tagName:"div",SPLIT:{style:"{splitDisplay}",className:"xui-uiborder-l xui-uiborder-r",text:"&nbsp;"},LABEL:{style:"{labelDisplay}",text:"{label}"},BTN:{tagName:"button",className:"xui-uiborder-hidden xui-uiborder-radius xui-showfocus {itemcls} {itemClass}",style:"{itemStyle};{_boxDisplay};",tabindex:"{_tabindex}",BOXWRAP:{tagName:"div",RULER:{},ICON:{$order:1,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{$order:2,text:"{caption}",style:"{captionDisplay}"},DROP:{$order:3,className:"xuifont",$fonticon:"xui-uicmd-arrowdrop",style:"{_dropDisplay}"}}}}}}}},Appearances:{KEY:{position:"absolute",overflow:"hidden",left:0,top:0},RULER:{padding:"0",margin:"0",width:"0"},ICON:{margin:0,"vertical-align":"middle"},ITEMS:{display:"block",overflow:"hidden","padding-bottom":".125em"},HANDLER:{height:"100%",width:".75em",background:"url("+xui.ini.img_handler+") repeat-y left top",cursor:"move","vertical-align":"middle"},GROUP:{position:"static",display:"inline",padding:".125em .25em 0 .125em","vertical-align":"middle"},ITEM:{"vertical-align":"middle",padding:"0 .125em",margin:"0"},SPLIT:{$order:1,width:"0","vertical-align":"middle",margin:"0 .25em"},BTN:{padding:".25em",cursor:"pointer","*width":"auto","*overflow":"visible"},BOX:{height:"auto"},"LABEL, CAPTION":{"vertical-align":"middle","margin-left":".25em","margin-right":".25em","font-size":"1em"},LABEL:{cursor:"default",padding:".25em"},DROP:{"vertical-align":"middle"}},Behaviors:{NoTips:["GROUP","HANDLER"],HoverEffected:{BTN:["BTN"]},ClickEffected:{BTN:["BTN"]},DraggableKeys:["HANDLER"],DroppableKeys:["GROUP","ITEMS"],BTN:{onClick:function(e,t,i){if(e.properties.disabled)return!1;var r=xui.use(i).parent(3).id(),o=e.getItemByDom(r);if(o.disabled)return!1;var n=e.getItemByDom(i);return n.disabled||(xui.use(i).focus(!0),"statusButton"==n.type&&xui.use(i).tagClass("-checked",n.value=!n.value),e.boxing().onClick(e,n,o,t,i)),!1}}},DataModel:{listKey:null,height:{ini:"auto",readonly:!0},width:{$spaceunit:1,ini:"auto"},left:{$spaceunit:1,ini:0},top:{$spaceunit:1,ini:0},handler:{ini:!0,action:function(e){this.getSubNode("HANDLER",!0).css("display",e?"":"none")}},position:"absolute",hAlign:{ini:"left",listbox:["left","center","right"],action:function(e){this.getSubNode("ITEMS",!0).css("textAlign",e)}},dock:{ini:"top",listbox:["top","bottom"]}},EventHandlers:{onClick:function(e,t,i,r,o){}},_adjustItems:function(e){e||(e=[xui.stamp()+""]),xui.isStr(e)&&(e=[e]);var t=xui.copy(e);return xui.arr.each(t,(function(e,i){xui.isArr(e)&&(e={id:xui.id(),sub:e}),xui.isHash(e)&&(t[i]=xui.copy(e),t[i].sub=[],e.sub&&xui.arr.each(e.sub,(function(e){t[i].sub.push(xui.isHash(e)?xui.copy(e):{id:e+""})})))})),t},_onDrop:function(e,t,i,r,o,n){var a,s=e.getKey(xui.use(i).id()),u=o.profile,l=o.domId,d=xui.absObj.$specialChars;return a=xui.clone(u.getItemByDom(l),(function(e,t){return!d[(t+"").charAt(0)]})),u.boxing().removeItems([a.id],"GROUP",!0),s==e.keys.GROUP?e.boxing().insertItems([a],n.id,!0):e.boxing().insertItems([a]),o._new=a,!1},_prepareData:function(e){var t=arguments.callee.upper.call(this,e),i=e.properties;return t.mode="left"!=i.hAlign?"text-align:"+i.hAlign+";":"",t},_prepareItem:function(e,t,i,r,o,n,a,s){var u=this,l="display:none;",d=e.properties.tabindex,c=function(e,t,i,r,o,n,a,s){var c=t[xui.UI.$tag_subId]="string"==typeof s?s:"a_"+e.pickSubId("aitem");"string"==typeof i&&(i={caption:i}),!1!==a&&(e.ItemIdMapSubSerialId[i.id]=c,e.SubSerialIdMapItem[c]=i),i.object?t.object=u._prepareInlineObj(e,i,d):(i.statusButton?(i.type="statusButton",delete i.statusButton):i.dropButton?(i.type="dropButton",delete i.dropButton):i.split&&(i.type="split",delete i.split),"split"===i.type||i.caption||(i.caption=""),xui.UI.adjustData(e,i,t),"statusButton"==i.type&&i.value&&(t.itemcls=" xui-uiborder-hidden-checked "+e.getClass("BTN","-checked",!!i.value)),t._tabindex=d,t.splitDisplay="split"==t.type?"":l,t.labelDisplay=t.label?"":l,t.captionDisplay=t.caption?"":l,t._dropDisplay="dropButton"==i.type?"":l,t._boxDisplay="split"!==t.type&&(t.caption||t.image||t.imageClass)?"":l),t._itemDisplay=i.hidden?l:"",i._pid=r};if(r)c(e,t,i,r,0,0,a,s);else{var p,h=[],f=i.sub||[];r=i.id,t.mode2="handler"in i?i.handler?"":l:e.properties.handler?"":l,t.grpDisplay=i.hidden?l:"",t.sub=h,xui.arr.each(f,(function(t){p={id:t.id},c(e,p,t,r,0,0,a,s),h.push(p)}))}}}}),xui.Class("xui.UI.Layout",["xui.UI","xui.absList"],{Instance:{getPanel:function(e){return this.get(0).getSubNodeByItemId("PANEL",e)},append:function(e,t,i,r){return this.get(0),arguments.callee.upper.call(this,e,t||"main",i,r)},insertItems:function(e,t,i,r){return this._insertItems(e,t,i,r)},_insertItems:function(e,t,i,r){var o,n,a,s,u,l,d="before",c=this._afterInsertItems;return this.each((function(p){if(l=p.box,n=p.properties.items,r?o=l._adjustItems(e):(a=xui.arr.subIndexOf(n,"id",t),d=-1==a||"main"==n[a].id?i?"before":"after":n[a].pos||"after",o=l._adjustItems2(e,d)),-1==a?xui.arr.insertAny(n,o,i?0:-1):xui.arr.insertAny(n,o,i?a:a+1),p.renderId){if(u=l._prepareItems(p,o,t),s=p._buildItems("items",u),p.$attached){for(var h,f=0;h=p.$attached[f++];)h._render&&h._render(!0);delete p.$attached}p.getRoot().prepend(s),p.adjustSize()}c&&p.boxing()._afterInsertItems(p,u,t,i)}))},_afterRemoveItems:function(e){e.renderId&&e.adjustSize()},updateItem:function(e,t){var i,r,o,n=this,a=n.get(0),s="vertical"==a.properties.type,u=function(e,t){return a.getSubNodeByItemId(e,t)},l=(a.box,a.properties.items),d=a.queryItems(l,(function(t){return"object"==typeof t?t.id===e:t==e}),!0,!0,!0);if("object"==typeof t){if(d.length){if(r="object"!=typeof(d=d[0])[0]?d[2][d[1]]={id:d[0]}:d[0],xui.isSet(t.id)&&(t.id+=""),t.id&&e!==t.id){i=t.id;var c=a.ItemIdMapSubSerialId;c[i]||((h=c[e])?(c[i]=h,delete c[e],a.SubSerialIdMapItem[h].id=i):r.id=i)}if(delete t.id,xui.isEmpty(t))return n;var p=!1;if(!(o=u("ITEM",e)).isEmpty()){t.hasOwnProperty("size")&&(t.size=Math.round(parseFloat(""+t.size)),t.size!=r._size&&(r._size=t.size,s?o.height(t.size):o.width(t.size),p=!0)),t.hasOwnProperty("hidden")&&(t.hidden=!!t.hidden,t.hidden!==r.hidden&&(u("ITEM",e).css("display",t.hidden?"none":""),p=!0)),t.hasOwnProperty("locked")&&(t.locked=!!t.locked,t.locked!==r.locked&&(u("MOVE",e).css({display:t.locked?"none":"",cursor:t.locked?"default":s?"n-resize":"w-resize"}),u("CMD",e).css("display",("cmd"in t?t.cmd:r.cmd)&&!t.locked?"":"none"),p=!0)),t.hasOwnProperty("folded")&&(t.folded=!!t.folded,t.folded!==r.folded&&a.boxing().fireCmdClickEvent(e)),t.hasOwnProperty("cmd")&&(t.cmd=!!t.cmd,t.cmd!==r.cmd&&u("CMD",e).css("display",t.cmd&&!("locked"in t?t.locked:r.locked)?"":"none"));var h,f={};t.hasOwnProperty("panelBgClr")&&(f["background-color"]=t.panelBgClr),t.hasOwnProperty("panelBgImg")&&(f["background-image"]=t.panelBgImg?"url("+xui.adjustRes(t.panelBgImg)+")":""),t.hasOwnProperty("panelBgImgPos")&&(f["position-color"]=t.panelBgImgPos),t.hasOwnProperty("panelBgImgRepeat")&&(f["background-repeat"]=t.panelBgImgRepeat),t.hasOwnProperty("panelBgImgAttachment")&&(f["background-attachment"]=t.panelBgImgAttachment),t.hasOwnProperty("overflow")&&((h=t.overflow)&&-1!=h.indexOf(":")&&xui.arr.each(h.split(/\s*;\s*/g),(function(e){var t=e.split(/\s*:\s*/g);t.length>1&&(f[xui.str.trim(t[0])]=xui.str.trim(t[1]||""))})),f.overflow=h||""),xui.isEmpty(f)||u("PANEL",e).css(f)}xui.merge(r,t,"all"),p&&a.adjustSize()}return n}},disableItem:null,enableItem:null,fireCmdClickEvent:function(e){return this.getSubNodeByItemId("CMD",e).onMousedown(),this}},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className} {_trans}",text:"{items}",$submap:{items:{ITEM:{tagName:"div",className:"{cls1} {itemClass}",style:"{itemStyle};{display}",MOVE:{$order:0,tagName:"div",className:"xui-ui-unselectable xui-uibar {clsmovebg} {cls2} ",style:"{moveDisplay};cursor:{_cursor}"},CMD:{$order:1,tagName:"span",style:"{cmdDisplay}",className:"xui-node xui-ui-unselectable xuifont {cls3}",$fonticon:"{_fi_cls3} "},PANEL:{tagName:"div",className:"xui-uibase xui-uicontainer",style:"position:absolute;{_bginfo};{_overflow};",text:xui.UI.$childTag}}}}},Appearances:{KEY:{position:"absolute",overflow:"hidden",left:0,top:0},"KEY-trans, KEY-trans > ITEM, KEY-trans > ITEM > PANEL, KEY-trans > ITEM > MOVE, KEY-trans > ITEM > CMD":{$order:100,"background-color":"transparent",border:"none"},MOVE:{$order:0,position:"absolute",cursor:"pointer","z-index":"10"},CMD:{position:"absolute",cursor:"pointer","z-index":"20"},ITEM:{position:"absolute","z-index":1,overflow:"hidden","border-width":xui.browser.opr?"0":null},PANEL:{position:"absolute",overflow:"auto",left:0,top:0,"border-width":xui.browser.opr?"0":null},"ITEM-MAIN":{left:0,right:0,top:0,bottom:0},"ITEM-TOP, ITEM-BOTTOM":{left:0,right:0},"ITEM-LEFT, ITEM-RIGHT":{top:0,bottom:0},"MOVE-TOP, MOVE-BOTTOM":{width:"100%",height:xui.browser.contentBox?".75em":".83333em",cursor:"n-resize"},"MOVE-LEFT, MOVE-RIGHT":{height:"100%",width:xui.browser.contentBox?".75em":".83333em",cursor:"w-resize"},"MOVE-TOP":{bottom:0},"MOVE-BOTTOM":{top:0},"MOVE-LEFT":{right:"0"},"MOVE-RIGHT":{left:0},"CMD-TOP, CMD-BOTTOM, CMD-LEFT, CMD-RIGHT":{padding:0,"border-radius":"0","-moz-border-radius":"0","-webkit-border-radius":"0","-o-border-radius":"0","-ms-border-radius":"0","-khtml-border-radius":"0"},"CMD-TOP":{$order:1,left:"50%","margin-left":"-1em",bottom:0,width:"2em",height:xui.browser.contentBox?".66667em":".75em","text-align":"center"},"CMD-BOTTOM":{$order:1,left:"50%","margin-left":"-1em",top:0,width:"2em",height:xui.browser.contentBox?".66667em":".75em","text-align":"center"},"CMD-LEFT":{$order:1,top:"50%","margin-top":"-1em",right:0,height:"2em",width:xui.browser.contentBox?".66667em":".75em","line-height":"2em"},"CMD-RIGHT":{$order:1,top:"50%","margin-top":"-1em",left:0,height:"2em",width:xui.browser.contentBox?".66667em":".75em","line-height":"2em"},"MOVE-MAIN":{$order:5,display:"none"},"CMD-MAIN":{$order:5,display:"none"}},Behaviors:{DroppableKeys:["PANEL"],PanelKeys:["PANEL"],HoverEffected:{MOVE:"MOVE",CMD:["MOVE","CMD"]},ClickEffected:{CMD:"CMD"},MOVE:{beforeMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t)){var r=e.getSubId(i),o=e.getItemByDom(i);if(!o.folded&&!o.locked){var n,a,s,u,l,d,c=e.getItemByItemId("main"),p=e.getSubNode("ITEM",r),h=e.getSubNodeByItemId("ITEM","main"),f=xui.use(i).css("cursor"),x=e.properties;e.pos=o.pos,"vertical"==x.type?(n=e._cur=p.height(),s=h.height(),"before"==o.pos?(l=n-o.min,d=Math.round(o.max?Math.min(parseFloat(o.max)-n,s-c.min):s-c.min)):(l=Math.round(o.max?Math.min(parseFloat(o.max)-n,s-c.min):s-c.min),d=n-o.min),xui.use(i).startDrag(t,{dragType:"copy",targetReposition:!1,verticalOnly:!0,maxTopOffset:l,maxBottomOffset:d,dragCursor:f,targetWidth:xui.browser.ie?xui.use(i).offsetWidth():null,targetHeight:xui.browser.ie?xui.use(i).offsetHeight():null,targetCallback:xui.browser.ie?function(e){e.tagClass("-(top|bottom)",!1)}:null})):(a=e._cur=p.width(),u=h.width(),"before"==o.pos?(l=a-o.min,d=Math.round(o.max?Math.min(parseFloat(o.max)-a,u-c.min):u-c.min)):(l=Math.round(o.max?Math.min(parseFloat(o.max)-a,u-c.min):u-c.min),d=a-o.min),xui.use(i).startDrag(t,{dragType:"copy",targetReposition:!1,horizontalOnly:!0,maxLeftOffset:l,maxRightOffset:d,dragCursor:f,targetWidth:xui.browser.ie?xui.use(i).offsetWidth():null,targetHeight:xui.browser.ie?xui.use(i).offsetHeight():null,targetCallback:xui.browser.ie?function(e){e.tagClass("-(left|right)",!1)}:null})),e._limited=0}}},onDrag:function(e,t,i){var r=e.properties,o=(xui.DragDrop,xui.DragDrop._profile),n=0;"vertical"==r.type?(o.y<=o.restrictedTop||o.y>=o.restrictedBottom)&&(n=!0):(o.x<=o.restrictedLeft||o.x>=o.restrictedRight)&&(n=!0),n?e._limited||(o.proxyNode.addClass("xui-alert"),e._limited=!0):e._limited&&(o.proxyNode.removeClass("xui-alert"),e._limited=0)},onDragstop:function(e,t,i){for(var r,o,n=e.properties,a=n.height,s=n.width,u=xui.use(i).parent(),l=e.getRoot(),d=e.getItemByDom(i),c=0,p=null,h=null,f=0,x=n.items.length;f<x;f++)n.items[f].hidden||(c+=n.items[f].size||80),"main"==n.items[f].id&&(o=n.items[f]);"vertical"==n.type?(h=l.height(),d._size=e._cur+("before"==e.pos?1:-1)*xui.DragDrop.getProfile().offset.y,u.height(e.$isEm(a)?e.$px2em(d._size,u)+"em":d._size),r=c*d._size/h):(p=l.width(),d._size=e._cur+("before"==e.pos?1:-1)*xui.DragDrop.getProfile().offset.x,u.width(e.$isEm(s)?e.$px2em(d._size,u)+"em":d._size),r=c*d._size/p),o.size-=r-d.size,d.size=r,xui.UI.$tryResize(e,p,h,!0),e._limited=0},onMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t)){e.properties;var r=e.getSubId(i);e.getItemByDom(i).folded&&e.getSubNode("CMD",r).onMousedown(!0)}}},CMD:{onMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t)){var r=e.properties,o=e.getSubId(i),n=e.getItemByDom(i),a=e.getRoot(),s=(e.getItemByItemId("main"),e.getSubNodeByItemId("ITEM","main"),e.getSubNode("ITEM",o)),u=e.getSubNode("PANEL",o),l=e.getSubNode("MOVE",o),d=n.locked?0:"vertical"==r.type?l.offsetHeight():l.offsetWidth();return"vertical"==r.type?(n.folded?(s.height(n._size),u.show(),n.folded=!1,"before"==n.pos?xui.use(i).replaceClass(/bottom/g,"top"):xui.use(i).replaceClass(/top/g,"bottom"),n.locked||l.css("cursor","n-resize"),e.getSubNode("MOVE").tagClass("-checked",!1)):(s.height(d),u.hide(),n.folded=!0,"before"==n.pos?xui.use(i).replaceClass(/top/g,"bottom"):xui.use(i).replaceClass(/bottom/g,"top"),n.locked||l.css("cursor","pointer"),e.getSubNode("MOVE").tagClass("-checked")),xui.UI.$tryResize(e,null,a.height(),!0)):(n.folded?(s.width(n._size),u.show(),n.folded=!1,"before"==n.pos?xui.use(i).replaceClass(/right/g,"left"):xui.use(i).replaceClass(/left/g,"right"),n.locked||l.css("cursor","w-resize"),e.getSubNode("MOVE").tagClass("-checked",!1)):(s.width(d),u.hide(),n.folded=!0,"before"==n.pos?xui.use(i).replaceClass(/left/g,"right"):xui.use(i).replaceClass(/right/g,"left"),n.locked||l.css("cursor","pointer"),e.getSubNode("MOVE").tagClass("-checked")),xui.UI.$tryResize(e,a.width(),null,!0)),!1}}},PANEL:{onClick:function(e,t,i){var r=e.properties,o=e.getItemByDom(i);return!r.disabled&&!o.disabled&&(e.onClickPanel?e.boxing().onClickPanel(e,o,t,i):void 0)}}},DataModel:{rotate:null,selectable:!0,disabled:null,position:"absolute",type:{listbox:["vertical","horizontal"],ini:"vertical",action:function(e,t){if(e!=t){var i=this,r="auto",o=i.getSubNode("ITEM",!0),n=i.getSubNode("MOVE",!0),a=i.getSubNode("CMD",!0);n.merge(o).merge(a),"vertical"==e?(n.replaceClass(/(-left)(\b)/gi,"-top$2"),n.replaceClass(/(-right)(\b)/gi,"-bottom$2"),o.each((function(e){xui(e).height(xui(e).width())})).css({left:0,top:r,right:r,bottom:r})):(n.replaceClass(/(-top)(\b)/gi,"-left$2"),n.replaceClass(/(-bottom)(\b)/gi,"-right$2"),o.each((function(e){xui(e).width(xui(e).height())})).css({left:r,top:0,right:r,bottom:r})),i.adjustSize()}}},dock:"fill",listKey:null,width:{$spaceunit:1,ini:"18em"},height:{$spaceunit:1,ini:"18em"},dragSortable:null,flexSize:{ini:!1,action:function(){this.adjustSize()}},transparent:{ini:!1,action:function(e){this.getRoot().tagClass("-trans",!!e)}},items:{ini:[]}},EventHandlers:{onClickPanel:function(e,t,i,r){}},_adjustItems2:function(e,t){var i=[];return xui.arr.each(e,(function(e){"main"!=e.id&&(i.push(e=xui.isHash(e)?e:{id:""+e}),e.pos=t)})),xui.arr.each(i,(function(e){e.id=xui.isStr(e.id)?e.id:xui.id(),e.min=e.min||10,e._size=e.size=Math.round(parseFloat(e.size))||80,e.locked="boolean"==typeof e.locked&&e.locked,e.folded="boolean"==typeof e.folded&&e.folded,e.hidden="boolean"==typeof e.hidden&&e.hidden,e.cmd="boolean"!=typeof e.cmd||e.cmd})),i},_adjustItems:function(e){var t,i=[],r=[],o=0;return xui.arr.each(e,(function(e,n){"main"==(e=xui.copy(e)).id?(t=e,o=n):"before"==e.pos?i.push(e):"after"==e.pos?r.push(e):o?(e.pos="after",r.push(e)):(e.pos="after",i.push(e))})),(t=t||{}).id="main",t.min=t.min||10,t.size=Math.round(parseFloat(t.size))||80,e.length=0,xui.arr.insertAny(e,this._adjustItems2(i,"before")),xui.arr.insertAny(e,t),xui.arr.insertAny(e,this._adjustItems2(r,"after")),e},_prepareData:function(e){var t=e.properties;t.items&&xui.isArr(t.items)||(t.items=xui.clone([{id:"before",pos:"before",locked:!1,size:60,min:50,max:200},{id:"after",pos:"after",locked:!1,size:60,min:50,max:200}])),t.items=this._adjustItems(t.items);var i=arguments.callee.upper.call(this,e);return i._trans=i.transparent?e.getClass("KEY","-trans"):"",i},_prepareItems:function(e,t){var i=arguments.callee.upper.apply(this,arguments);return xui.arr.each(t,(function(e){delete e.caption})),i},_prepareItem:function(e,t,i){var r,o,n=e.properties;n.width,n.height,"main"==t.id?(t.cls1=e.getClass("ITEM","-main"),t.cls2=e.getClass("MOVE","-main"),t.cls3=e.getClass("CMD","-main")):("vertical"==n.type?(t.clsmovebg="xui-uiborder-t xui-uiborder-b",o="before"==t.pos?"top":"bottom"):(t.clsmovebg="xui-uiborder-l xui-uiborder-r",o="before"==t.pos?"left":"right"),t.cls1=e.getClass("ITEM","-"+o),t.cls2=e.getClass("MOVE","-"+o),t.cls3=e.getClass("CMD","-"+o),t._fi_cls3="xui-icon-arrow"+o,t.display=t.hidden?"display:none":"",t._cursor=t.locked?"default":"vertical"==n.type?"n-resize":"w-resize",t.cmdDisplay=t.cmd&&!t.locked?"":"display:none",t.moveDisplay=t.locked?"display:none":""),t._bginfo="",(r=t.panelBgClr||n.panelBgClr)&&(t._bginfo+="background-color:"+r+";"),(r=t.panelBgImg||n.panelBgImg)&&(t._bginfo+="background-image:url("+xui.adjustRes(r)+");"),(r=t.panelBgImgPos||n.panelBgImgPos)&&(t._bginfo+="background-position:"+r+";"),(r=t.panelBgImgRepeat||n.panelBgImgRepeat)&&(t._bginfo+="background-repeat:"+r+";"),(r=t.panelBgImgAttachment||n.panelBgImgAttachment)&&(t._bginfo+="background-attachment:"+r+";"),xui.isStr(t.overflow)?t._overflow=-1!=t.overflow.indexOf(":")?t.overflow:t.overflow?"overflow:"+t.overflow:"":xui.isStr(n.overflow)&&(t._overflow=-1!=n.overflow.indexOf(":")?n.overflow:n.overflow?"overflow:"+n.overflow:"")},RenderTrigger:function(){var e,t=this;xui.arr.each(t.properties.items,(function(i){"main"!=i.id&&i.folded&&(e=t.getSubIdByItemId(i.id))&&(i.folded=!1,t.getSubNode("CMD",e).onMousedown())}))},_onresize:function(e,t,i){var r,o,n,a=e.properties,s=(e.keys.ITEM,e.keys.PANEL,e.getItemByItemId("main").min||10),u=a.flexSize,l=0,d=xui.$us(e),c=e.getEmSize()/e.getRoot()._getEmSize();t&&(t=e.$px(t)),i&&(i=e.$px(i));var p={},h={};xui.arr.each(a.items,(function(t){r=e.getSubIdByItemId(t.id),p[r]={},h[r]={},u&&!t.hidden&&(l+=t.size||80)}));var f=function(t,i,r,d,c,x,g){var m,b,v,y=0,A=0,_=0,w=0,C=x;if(xui.arr.each(t.items,(function(t){"main"!=t.id&&"before"==t.pos&&(v=e.getSubIdByItemId(t.id),o=e.getSubNode("MOVE",v),n=t.locked?0:"vertical"==a.type?o.offsetHeight():o.offsetWidth(),t.hidden?(b=0,h[v][r]=Math.round(u?parseFloat(i*Math.min(1,t.size/l)):t._size)):t.folded?b=h[v][r]=n:(w++,(b=Math.round(u?parseFloat(i*Math.min(1,t.size/l)):t._size))>x+t.min?b-=x:(x=b-t.min,b=t.min),b-=g,b=Math.max(b,n)),h[v][d]=y,y+=b,p[v][d]=0,p[v][r]=b-n,h[v][c]=p[v][c]="auto",h[v][r]=b,s+=n)})),xui.arr.each(t.items,(function(t){"main"!=t.id&&"after"==t.pos&&(v=e.getSubIdByItemId(t.id),o=e.getSubNode("MOVE",v),n=t.locked?0:"vertical"==a.type?o.offsetHeight():o.offsetWidth(),t.hidden?(b=0,h[v][r]=Math.round(u?parseFloat(i*Math.min(1,t.size/l)):t._size)):t.folded?b=h[v][r]=n:(w++,(b=Math.round(u?parseFloat(i*Math.min(1,t.size/l)):t._size))>x+t.min?b-=x:(x=b-t.min,b=t.min),b-=g,b=Math.max(b,n)),h[v][c]=A,A+=b,p[v][c]=0,p[v][r]=b-n,h[v][d]=p[v][d]="auto",h[v][r]=b,s+=n)}),null,!0),i-(_=y+A)>=s||g)m=e.getSubIdByItemId("main"),h[m][r]=p[m][r]=i-_,h[m][d]=y;else{var I=xui.toArr(arguments);C?(I[I.length-2]=C,I[I.length-1]=(s-(i-_))/w):I[I.length-2]=(s-(i-_))/w,f.apply(null,I)}};"vertical"!=a.type?(xui.isNull(t)||f(a,t,"width","left","right",0,0),xui.isNull(i)||xui.each(p,(function(e,t){h[t].height=e.height=i}))):(xui.isNull(i)||f(a,i,"height","top","bottom",0,0),xui.isNull(t)||xui.each(p,(function(e,i){h[i].width=e.width=t})));var x=function(t,i){xui.arr.each("left,width,right".split(","),(function(r){r in t&&(t[r]=e.$forceu(t[r],"em",i))}))},g=function(t,i){xui.arr.each("top,height,bottom".split(","),(function(r){r in t&&(t[r]=e.$forceu(t[r],"em",i))}))};xui.each(h,(function(t,i){var r=e.getSubNode("PANEL",i),o=e.getSubNode("ITEM",i);if(d>0){var n=d>0?r._getEmSize(c):null,a=d>0?o._getEmSize(c):null;x(p[i],a),x(h[i],a),g(p[i],n),g(h[i],n)}r.cssRegion(p[i],!0),p[i].width&&xui.UI._adjustConW(e,r,p[i].width),o.cssRegion(h[i])}))}}}),xui.Class("xui.UI.TreeGrid",["xui.UI","xui.absValue"],{Instance:{activate:function(){var e=this.get(0);if(e.renderId)return e.getSubNode("ROWS22").nextFocus(!0,!0,!0),this},_setCtrlValue:function(e){return this.each((function(t){if(t.renderId&&"none"!=t.properties.activeMode){var i=t.boxing().getUIValue(),r=t.properties,o=t.rowMap,n="row"==r.activeMode?["CELLS1","CELLS2","MARK"]:"CELLA",a=function(e,i){return t.getSubNodes(e,i)},s=function(e){var i=t.rowMap2;if("row"==r.activeMode)return i[e];if(e){var o=(""+e).split("|");return xui.get(t.rowMap,[i[o[0]],"_cells",o[1]])}};if("single"==r.selMode){var u=s(i);i&&u&&a(n,u).tagClass("-checked",!1),(u=s(e))&&a(n,u).tagClass("-checked")}else"multi"!=r.selMode&&"multibycheckbox"!=r.selMode||(i=i?(""+i).split(r.valueSeparator):[],e=e?(""+e).split(r.valueSeparator):[],xui.arr.each(i,(function(e,t){(e=s(e))&&((t=o[e])&&delete t._selected,a(n,e).tagClass("-checked",!1))})),xui.arr.each(e,(function(e,t){(e=s(e))&&((t=o[e])&&(t._selected=1),a(n,e).tagClass("-checked"))})),0===e.length&&(a("HFMARK").tagClass("-checked",!1),delete t._$checkAll))}}))},calculateGridValue:function(){var e,t,i,r,o,n,a,s=this.get(0),u=s.properties,l=u.gridValueFormula,d=null,c=xui.ExcelFormula;return s.beforeGridValueCalculated&&!1!==(i=s.boxing().beforeGridValueCalculated(s))?d=i:l&&(n=u.header.length,a=u.rows.length,c.validate(l)&&(r={},(e=c.getRefCells(l,n,a))&&xui.each(e,(function(e,i){t=c.toCoordinate(i),o=u.rows[t.row].cells[t.col],r[i]=o.value})),d=c.calculate(l,r,n,a))),s.afterGridValueCalculated&&s.boxing().afterGridValueCalculated(s,d),s._$gridvalue=d,u.excelCellId&&s._$oldgridvalue!==s._$gridvalue&&s.boxing().notifyExcel(!1),s._$oldgridvalue=d},notifyExcel:xui.UI.Input.prototype.notifyExcel,getExcelCellValue:function(){var e,t,i=this.get(0),r=i.properties;return xui.ExcelFormula,r.excelCellId?(e="_$gridvalue"in i?i._$gridvalue:this.caculateGridValue(),xui.isSet(t=i.onGetExcelCellValue&&i.boxing().onGetExcelCellValue(i,r.excelCellId,e))&&(e=t),e):null},applyCellFormula:function(e,t,i){return this.each((function(r){var o,n,a,s,u,l=r.box,d={},c=r.properties,p=c.rows,h=xui.arr.indexOf(c.header,e._col),f=xui.arr.indexOf(p,e._row),x=xui.ExcelFormula;if(o=l._getCellFormula(r,e,x.toColumnChr(h+1),f+1)){var g=x.getRefCells(o,h,f);if(!g)return;xui.each(g,(function(e,t){s=x.toCoordinate(t),u=p[s.row].cells[s.col],d[t]=u.value})),(a=x.calculate(o,d,h,f))!==e.value&&(n=[e._serialId,a,e,o],r.beforeApplyFormula&&!1===r.boxing().beforeApplyFormula(r,e,a,o,e._row,e._col)||l._updCell(r,n[0],{value:n[1]},t,i,!0),r.afterApplyFormulas&&r.boxing().afterApplyFormulas(r,[n]))}}))},triggerFormulas:function(e,t,i){return this.each((function(r){var o,n,a,s=r.box,u=r.properties,l=u.rows,d=l.length,c=u.header.length,p=xui.ExcelFormula,h={};if(xui.arr.each(u.rows,(function(t,i){xui.arr.each(t.cells,(function(t,a){t===e&&(o=p.toCellId(a,i)),(n=s._getCellFormula(r,t,p.toColumnChr(a+1),i+1))&&(h[p.toCellId(a,i)]=[t,n])}))})),o&&delete h[o],!xui.isEmpty(h)){var f={};xui.each(h,(function(e,t){(e=p.getRefCells(e[1],c,d))&&(f[t]=e)}));var x,g,m,b,v,y,A={},_=[],w={};o&&(w[o]=1);do{x=0,xui.filter(f,(function(e,t){if(y=0,o){for(var i in e)if(i in w){y=1;break}}else y=1;if(!y)return!1;for(var i in g=!0,e)!o&&i in h?g=!1:i in A||(m=p.toCoordinate(i),a=l[m.row].cells[m.col],A[i]=a.value);return g?(b=h[t],(v=p.calculate(b[1],A,c,d))!==b[0].value&&(_.push([b[0],v,b[1],b[0]._serialId]),o&&(w[t]=1)),delete h[t],x++,!1):void 0}))}while(!xui.isEmpty(h)&&x>0);for(var C=0,I=_.length;C<I;C++)r.beforeApplyFormula&&!1===r.boxing().beforeApplyFormula(r,_[C][0],_[C][1],_[C][2],_[C][0]._row,_[C][0]._col)||s._updCell(r,_[C][3],{value:_[C][1]},t,i,!1);r.afterApplyFormulas&&r.boxing().afterApplyFormulas(r,_),u.gridValueFormula&&r.boxing().calculateGridValue(!1)}}))},_insertRowsToDom:function(e,t,i,r,o,n){if(i){var a=e.rowMap[i];if(a&&!a._inited)return}t||(t=[]);var s,u,l,d=e.box;e.properties,(l=e.getSubNode("FHCELL").width())&&(l=e.$forceu(l)),xui.arr.each(t,(function(e){e._row0DfW=l?"width:"+l:"",xui.arr.each(e.cells,(function(e,t){e.width=e._col._colWidth}))})),e.properties.freezedRow&&!(x=e.getSubNode("ROWS12")).isEmpty()&&x.query("div","id",/-ROWS12\:/).isEmpty()&&delete e._passFreezedRow;var c=e._buildItems("rows21",t),p=e._buildItems("rows22",t);if(r?(s=e.getSubNode("ROW1",r),u=e.getSubNode("ROW2",r),o?(s.addPrev(c),u.addPrev(p)):(s.addNext(c),u.addNext(p))):(i?(s=e.getSubNode("SUB1",i),u=e.getSubNode("SUB2",i)):(s=e.getSubNode("ROWS21"),u=e.getSubNode("ROWS22")),o?(s.prepend(c),u.prepend(p)):(s.append(c),u.append(p))),xui.arr.each(t,(function(t){t.sub&&(t.open=!1,!1===d.getCellOption(e,t,"iniFold")&&e.boxing()._toggleRows([t],!0,!1,!0))})),n&&n.length){var h=[],f=[];if(xui.arr.each(n,(function(t){!d.getCellOption(e,t,"editable")||"inline"!=d.getCellOption(e,t,"editMode")&&"dropbutton"!=d.getCellOption(e,t,"type")||h.push(t)})),n.length=0,h.length){for(var x,g=0,m=h.length;g<m;g++)x=parseInt(g/25,10),f[x]||(f[x]=[]),f[x].push(h[g]);h.length=0;var b=function(){if(f.length){var t=f.shift();if(t&&t.length){for(var i=0,r=t.length;i<r;i++)e&&e.box&&!e.destroyed&&t[i]&&t[i]._row&&e.box._editCell(e,t[i],null,!0);xui.asyRun(b)}}else f=null};xui.asyRun(b)}}delete e.$allrowscache1,delete e.$allrowscache2,e.box._adjustBody(e,"addrow")},_refreshHeader:function(e){var t,i,r,o,n=this.get(0),a=n.properties,s=n.box,u=xui.clone(a.grpCols,!1,2),l=this.getRows("data");xui.breakO(n.colMap,2),e=s._adjustHeader(e||[]),t=s._prepareHeader(n,e),a.header=e,this.removeAllRows(),n.getSubNodes(["HCELL","HSCELL"],!0).remove(),t.length&&(r=n._buildItems("header1",t),n.getSubNode("HCELLS1").append(r),o=n._buildItems("header2",t),n.getSubNode("LHCELL").addPrev(o)),u&&xui.isArr(u)&&u.length>0&&(u=s._adjustGrpColsData(n,u),a.grpCols=u,(i=s._prepareGrpCols(n,u,t))&&i.length&&(r=n._buildItems("grpCols1",i),n.getSubNode("GRPCELLBOX1").append(r),o=n._buildItems("grpCols2",i),n.getSubNode("GRPCELLBOX2").append(o)),s._adjustColsWidth(n),s._adjustColsHeight(n),n.adjustSize()),l&&l.length&&this.setRows(l),s._adjustBody(n,"refreshheader");var d=n.properties.colOptions;xui.arr.each(t,(function(e){xui.isFun(e.colRenderer||d.colRenderer)&&(e.colRenderer||d.colRenderer).call(null,n,e)})),"infirstcell"==a.treeMode&&n.getSubNode("HCELLA",t[0]._serialId).prepend(n.getSubNode("LTAGCMDS")).prepend(n.getSubNode("HFMARK")),n.$col_pop&&(n.$col_pop.destroy(!0),delete n.$col_pop),xui.each(n.$cache_editor,(function(e){e.destroyed||e.destroy(!0)})),n.$cache_editor={}},_toggleRows:function(e,t){var i=this;e&&e.length&&xui.arr.each(e,(function(e){e.id&&i.toggleRow(e.id,t)}))},isSubInited:function(e){var t=this.getRowbyRowId(e);return t&&t.sub&&xui.isArr(t.sub)},autoRowHeight:function(e){return this.each((function(t){if(t.renderId){var i=xui.Event;i.__realtouch&&(i.__simulatedMousedown=1),e&&t.rowMap2[e]?t.getSubNode("FHANDLER",t.rowMap2[e]).onDblclick(!0):xui.each(t.rowMap,(function(e,i){t.getSubNode("FHANDLER",i).onDblclick(!0)})),i.__realtouch&&(i.__simulatedMousedown=0)}}))},autoColWidth:function(e){return this.each((function(t){if(t.renderId){var i=xui.Event;i.__realtouch&&(i.__simulatedMousedown=1),e&&t.colMap2[e]?t.getSubNode("HHANDLER",t.colMap2[e]).onDblclick(!0):xui.each(t.colMap,(function(e,i){t.getSubNode("HHANDLER",i).onDblclick(!0)})),i.__realtouch&&(i.__simulatedMousedown=0)}}))},autoColHeight:function(){return this.each((function(e){if(e.renderId){var t=xui.Event;t.__realtouch&&(t.__simulatedMousedown=1),e.getSubNode("FHANDLER").onDblclick(!0),t.__realtouch&&(t.__simulatedMousedown=0)}}))},addHotRow:function(e,t,i){var r=this.get(0);return r.renderId&&r.box._addTempRow(r,e||null,t,i),this},focusHotRow:function(e){var t=this.get(0);return t.renderId&&t.__hastmpRow&&this.focusCellbyRowCol(t.box._temprowid,e||0),this},getHotRow:function(e){return this.getRowbyRowId(this.Class._temprowid,e)},updateHotRow:function(e,t,i){return this.updateRow(this.Class._temprowid,{cells:e},t,i)},removeHotRow:function(){var e=this.get(0);return e.box._sethotrowoutterblur(e,!0),delete e.__hastmpRow,this.removeRows([e.box._temprowid],!1),this},isDirtied:function(){var e=!1,t=this.get(0);return!!t._dirty||(xui.each(t.rowMap,(function(t){if(t._dirty||t._oValue!==t.value||"unit"in t&&t._oUnit!==t.unit)return e=!0,!1})),xui.each(t.cellMap,(function(t){if(t._dirty||t._oValue!==t.value||"unit"in t&&t._oUnit!==t.unit)return e=!0,!1})),e)},isCellDirtied:function(e){return e._dirty||e._oValue!==e.value||"unit"in e&&e._oUnit!==e.unit},isRowDirtied:function(e){var t=this.get(0);if(e._dirty||(e._oValue,e.value),t._dirty)return!0;for(var i=0,r=e.cells.length;i<r;i++)if(this.isCellDirtied(e.cells[i]))return!0;return!1},_getObjByDom:function(e,t){var i=this.get(0),r=i.getSubId("string"==typeof e?"!"==e.charAt(0)?(e=xui.use(e).get(0))&&e.id:e:e.id);return i["row"==t?"rowMap":"col"==t?"colMap":"cellMap"][r]},getRowByDom:function(e,t,i){return this.get(0).box._getRow(this.get(0),this._getObjByDom(e,"row"),t,i)},getHeaderByDom:function(e){return this._getObjByDom(e,"col")},getCellByDom:function(e){return this._getObjByDom(e,"cell")},getRows:function(e,t){var i,r,o=this.get(0).properties.rows;return xui.isArr(o)?"data"==e||"min"==e||"value"==e||"map"==e?((i=xui.clone(o,!0))&&i.length&&i[i.length-1]&&i[i.length-1].id==this.constructor._temprowid&&i.pop(),"min"==e||"value"==e?xui.arr.each(i,(function(e,t){i[t].cells&&xui.each(r=i[t]=i[t].cells,(function(e,t){r[t]="value"in e?e.value:e}))})):"map"==e&&(i=this.getRawData(null,t)),i):o:[]},getRowbyRowId:function(e,t,i){var r=this.get(0),o=r.rowMap2,n=r.properties.rows;return xui.isNumb(e)&&(e=xui.get(n,[-1==e?n.length-1:e,"id"])),o&&o[e]?r.box._getRow(r,r.rowMap[o[e]],t,i):(o=r.queryItems(n,(function(t,i){return t.id==e}),1,1))&&o.length?r.box._getRow(r,o[0],t,i):void 0},getRowbyCell:function(e,t,i){return this.constructor._getRow(this.get(0),e._row,t,i)},toggleRow:function(e,t,i,r,o){var n=this,a=this.get(0),s=arguments.callee,u=a.rowMap2,l=a.properties.rows;if(xui.isNumb(e)&&(e=xui.get(l,[-1==e?l.length-1:e,"id"])),u&&u[e]){var d=a.rowMap[u[e]];!d||!d.sub||xui.isSet(t)&&!!t==!!d._checked||a.box._setSub(a,d,xui.isSet(t)?!!t:!d._checked,i,r||i,o)}else xui.arr.each(l,(function(e){e.sub&&s.call(n,e.id,t,i,!0,o)}));return this},showRows:function(e,t){var i=this,r=i.get(0),o=xui(),n=xui(),a=r.properties;return(e=xui.isHash(e)?e.id:xui.isArr(e)?e:0===e?[0]:e?(e+"").split(a.valueSeparator):null)||(e=(e=xui.get(i.getActiveRow(),"id")||(a.$UIvalue||a.value)+"").split(a.valueSeparator)),e&&e.length&&xui.arr.each(e,(function(e,r){(r=i.getRowbyRowId(e))&&(!1===t?r.hidden||n.merge(i.getSubNodes(["ROW1","ROW2"],r._serialId)):r.hidden&&o.merge(i.getSubNodes(["ROW1","ROW2"],r._serialId)),r.hidden=!1===t)})),o.isEmpty()||o.css("display",""),n.isEmpty()||n.css("display","none"),this},updateRow:function(e,t,i,r){var o,n=this,a=n.get(0),s=a.box,u=a.properties;if(e||0===e||(e=xui.get(n.getActiveRow(),"id")||((u.$UIvalue||u.value)+"").split(u.valueSeparator)[0]),!(o=n.getRowbyRowId(e)))return n;var l,d=u.dirtyMark,c=d&&u.showDirtyMark,p=o.id==s._temprowid,h=xui.absObj.$specialChars;if(xui.isHash(t)||(t=xui.isArr(t)?{cells:t}:{value:t}),t=xui.filter(t,(function(e,t,i){return(i=!h[t.charAt(0)])||((l=l||{})[t]=e),i})),!r||!a.beforeRowUpdated||!1!==a.boxing().beforeRowUpdated(a,o,t,p,l)){if(!xui.isEmpty(t)){if(o){var f,x,g,m=o._serialId;if(xui.isSet(t.id)&&(t.id+=""),t.id&&t.id!==e){g=t.id;var b,v=a.rowMap2;v[g]||(b=v[e])&&(v[g]=b,delete v[e],a.rowMap[b].id=g,xui.each(a.colMap,(function(t){(t=t._cells)&&(t[g]=t[e],delete t[e])})))}else t.id=e;if(xui.isEmpty(t))return n;if("group"in t&&t.group!=o.group||"cells"in t||"sub"in t&&(!0!==t.sub||o.sub)&&(t.sub||!0!==o.sub)){var y="__special",A=o._pid?a.rowMap[o._pid].id:null;if(o.id=y,a.rowMap2[y]=a.rowMap2[g||e],delete a.rowMap2[g||e],xui.each(a.colMap,(function(t){(t=t._cells)&&delete t[g||e]})),o=xui.clone(o,!0),xui.merge(o,t,"all"),"sub"in t&&!t.sub&&delete o.sub,n.insertRows([o],A,y,!0),n.removeRows([y]),"row"==a.properties.activeMode){var _=(""+(a.properties.$UIvalue||"")).split(a.properties.valueSeparator);_.length&&-1!=xui.arr.indexOf(_,e)&&(g&&xui.arr.removeValue(_,e),n.setUIValue(_.join(a.properties.valueSeparator),!0,null,"sub"))}}else{if("sub"in t&&(f=s._getToggleNode(a,m),t.sub?(f.addClass("xui-uicmd-toggle"),o._layer&&f.removeClass("xui-uicmd-empty")):(f.removeClass("xui-uicmd-toggle"),o._layer&&f.addClass("xui-uicmd-empty"))),x=n.getSubNodes(["CELLS1","CELLS2"],m),(f=a.$px(t.height))&&a.box._adjusteditorH(a,x.height(o._rowHeight=a.$forceu(f)),f),(f=t.rowStyle)&&x.attr("style",x.attr("style")+";"+f),(f=t.rowClass)&&x.addClass(f),t.hasOwnProperty("disabled")){var w="xui-uicell-disabled";t.disabled?x.addClass(w):x.removeClass(w)}if(t.hasOwnProperty("readonly")&&(w="xui-ui-readonly",t.readonly?x.addClass(w):x.removeClass(w)),(f=t.firstCellStyle)&&(x=n.getSubNode("FCELL",m)).first().attr("style",x.attr("style")+";"+f),(f=t.firstCellClass)&&n.getSubNode("FCELL",m).first().addClass(f),t.hasOwnProperty("value")&&!xui.isSet(t.caption)&&(t.caption=t.value+""),t.hasOwnProperty("caption")&&(n.getSubNode("FCELLCAPTION",m).get(0).innerHTML=t.caption||""),t.hasOwnProperty("rowResizer")&&(f=!!t.rowResizer,n.getSubNode("FHANDLER",m).css("display",(t.rowResizer=f)?"block":"none")),t.hasOwnProperty("hidden")&&(t.hidden?!0!==o.hidden&&n.getSubNodes(["ROW1","ROW2"],m).css("display","none"):!0===o.hidden&&n.getSubNodes(["ROW1","ROW2"],m).css("display","")),xui.merge(o,t,"all"),t.hasOwnProperty("value")){var C=a.getSubNode("CELLA",m);d&&!1!==i?o.value===o._oValue?c&&C.removeClass("xui-ui-dirty"):c&&C.addClass("xui-ui-dirty"):o._oValue=o.value,o._editor&&o._editor.setValue(t.value,!0,"editorini")}}}else{var I=n.get(0).queryItems(n.getRows(),(function(t){return"object"==typeof t?t.id===e:t==e}),!0,!0,!0);I.length&&xui.merge(o=I[0][0],t,"all")}o._dirty=!0}return r&&a.afterRowUpdated&&a.boxing().afterRowUpdated(a,o,t,p,l),n}},insertMapRows:function(e,t,i,r,o,n){var a=this,s=xui.toArr(arguments);xui.isHash(e)&&(e=[e]);var u,l,d,c={},p=[],h=[],f=e.length;for(u=0;u<f;u++)if(xui.isHash(d=e[u]))for(var x in d)"__row__id"==x?(p[u]=p[u]||{},p[u].id=d[x]):0==x.indexOf("__row__")?(p[u]=p[u]||{},p[u][x]=d[x]):(x in c||(c[x]=[]),c[x][u]=d[x]);var g={};for(var x in xui.arr.each(a.getHeader(),(function(e,t){g[e.id]=t})),c)if(x in g)for(l=g[x],u=0;u<f;u++)h[u]||(h[u]=[]),h[u][l]=c[x][u];return p.length&&xui.each(h,(function(e,t){p[t]&&(h[t]=p[t],h[t].cells=e)})),s[0]=h,a.insertRows.apply(this,s)},insertRows:function(e,t,i,r,o,n){var a,s,u=this,l=u.constructor,d=u.get(0);if(xui.isHash(e)&&(e=[e]),e&&xui.isArr(e)&&e.length>0){var c,p,h,f,x=d.properties,g=d.rowMap2,m=x.rowOptions,b=d.rowMap;if(!0===t&&((s=x.$UIvalue||x.value)&&(s=(s+"").split(x.valueSeparator)),t=s[0]),t=g&&g[t],!0===i&&((s=x.$UIvalue||x.value)&&(s=(s+"").split(x.valueSeparator)),i=s[0]),(i=g&&g[i])&&(h=d.rowMap[i])&&(t=h._pid),e=l._adjustRows(d,e,o),t){if(!(f=b&&b[t]))return;p=xui.isArr(f.sub)?f.sub:f.sub=[]}else p=xui.isArr(x.rows)?x.rows:x.rows=[];if(d.renderId&&(!xui.isSet(t)||f._inited?(c=[],a=l._prepareItems(d,e,t,c),u._insertRowsToDom(d,a,t,i,r,c),xui.arr.each(e,(function(e){xui.isFun(e.rowRenderer||m.rowRenderer)&&(e.rowRenderer||m.rowRenderer).call(null,d,e)}))):xui.isSet(t)&&!f.inited&&d.box._getToggleNode(d,t).removeClass("xui-icon-placeholder xui-uicmd-none").addClass("xui-uicmd-toggle")),i){var v=xui.arr.subIndexOf(p,"_serialId",i);xui.arr.insertAny(p,e,r?v:v+1)}else xui.arr.insertAny(p,e,r?0:-1);d.renderId&&d.box._asy(d)}if(!1!==n&&d.renderId&&d.box.__ensurehotrow(d,n),d.$itemFilter){var y=[];xui.arr.each(e,(function(e){if(e.sub&&!e.hidden)if(!0!==d.$itemFilter(e,"checkSub",d)){for(var t,i=0,r=e.sub.length;i<r;i++)if(!e.sub[i].hidden){t=1;break}t||y.push(e.id)}else y.push(e.id)})),y.length&&u.showRows(y,!1)}return a},doFilter:xui.absList.prototype.doFilter,removeRows:function(e,t){var i=this,r=i.get(0);if(r.rowMap2){var o,n=r.properties,a=r.cellMap,s=[],u=0;return(e=xui.isHash(e)?[e.id]:xui.isArr(e)?e:0===e?[0]:e?(e+"").split(n.valueSeparator):null)||(e=(e=xui.get(i.getActiveRow(),"id")||(n.$UIvalue||n.value)+"").split(n.valueSeparator)),e&&e.length?(xui.arr.each(e,(function(t,i){xui.isNumb(t)&&(t=n.rows[t]&&n.rows[t].id),e[i]=""+t})),xui.arr.each(e,(function(e){if(e=r.rowMap2[e]){var t;if(u++,t=r.rowMap[e]){var o,l=t._cells,d=t.id;if(t.sub&&xui.isArr(t.sub)){var c=[];xui.arr.each(t.sub,(function(e){c.push(e.id)})),i.removeRows(c)}xui.each(l,(function(e,t){delete a[e]._col._cells[d],xui.breakO(a[e]),delete a[e],r.reclaimSubId(e.slice(3),"cell")})),(o=t._pid?(o=r.rowMap[t._pid])?o.sub:null:r.properties.rows)&&xui.isArr(o)&&xui.filter(o,(function(t){return t._serialId!=e})),delete r.rowMap2[d],xui.breakO(r.rowMap[e]),delete r.rowMap[e],s.push(r.getSubNode("ROW1",e).get(0)),s.push(r.getSubNode("ROW2",e).get(0))}r.reclaimSubId(e.slice(3),"row")}else{var p=function(t){var i=xui.arr.subIndexOf(t,"id",e);-1!==i&&(u++,xui.arr.removeFrom(t,i)),xui.arr.each(t,(function(e){e.sub&&p(e.sub)}))};p(n.rows)}})),u>0&&((o=n.$UIvalue)&&((o=(""+o).split(n.valueSeparator)).length>1?(xui.filter(o,(function(t){return-1==xui.arr.indexOf(e,t)})),n.$UIvalue=o.join(n.valueSeparator)):-1!=xui.arr.indexOf(e,n.$UIvalue)&&(n.$UIvalue=null)),xui(s).remove(),r.$activeCell&&!xui.Dom.byId(r.$activeCell)&&delete r.$activeCell,r.$activeRow&&!xui.Dom.byId(r.$activeRow)&&delete r.$activeRow,delete r.$allrowscache1,delete r.$allrowscache2,r.box._asy(r),r.box._adjustBody(r,"delrow")),!1!==t&&r.renderId&&r.box.__ensurehotrow(r,t),r._dirty=1,i):i}},insertCol:function(e,t,i){var r,o,n,a,s=this.get(0),u=s.properties,l=s.box,d=u.rows;if((-1===(i=xui.isNumb(i)?i:-1)||u.header.length<i)&&(i=u.header.length),i<0&&(i=0),"infirstcell"==u.treeMode&&0===i)return!1;var c=i<=u.freezedColumn-1,p=u.grpCols;if(p&&xui.isArr(p)&&p.length)for(var h,f=0,x=p.length;f<x;f++)(h=p[f]).from>i?(h.from++,h.to++):i>=h.from&&i<=h.to&&h.to++;if(s.renderId){n=l._parepareCol(s,e,u.header),e=n[0],xui.arr.insertAny(u.header,e,i),(o=s.getSubNode(c?"HCELLS1":"HCELLS2").children().get(i-1))&&xui(o).addNext(s._buildItems(c?"header1":"header2",[n[1]]));var g=s.properties.colOptions;xui.isFun(e.colRenderer||g.colRenderer)&&(e.colRenderer||g.colRenderer).call(null,s,e),u.grpCols=l._adjustGrpColsData(s,p),l._adjustColsWidth(s),l._adjustColsHeight(s),l._adjustBody(s,"addcol")}else xui.arr.insertAny(u.header,e,i);t=xui.isArr(t)?t:[];var m=0,b=function(n){var u=[];xui.arr.each(n,(function(n,d){n.group?b(n.sub):(r=t[m],(o=s.getSubNode(c?"CELLS1":"CELLS2",n._serialId).children().get(i-1))?(a=l._prepareCell(s,r,n,e,u),xui.arr.insertAny(n.cells,a[0],i),xui(o).addNext(s._buildItems(c?"rows1.cells":"rows2.cells",[a[1]]))):xui.arr.insertAny(n.cells,r||{},i)),m++})),u.length&&(xui.arr.each(u,(function(e){!l.getCellOption(s,e,"editable")||"inline"!=l.getCellOption(s,e,"editMode")&&"dropbutton"!=l.getCellOption(s,e,"type")||l._editCell(s,e)})),u.length=0)};d&&xui.isArr(d)&&b(d),s._dirty=1},removeCols:function(e){var t=this.get(0),i=t.box,r=t.properties,o=t.cellMap,n=xui.UI.$tag_subId,a=[],s=0;e=xui.isArr(e)?e:(e+"").split(r.valueSeparator),xui.arr.each(e,(function(t,i){e[i]=""+t})),e&&e.length>1&&e.sort((function(e,t){var i=xui.arr.indexOf(r.header,e);-1==i&&(i=xui.arr.subIndexOf(r.header,"id",e));var o=xui.arr.indexOf(r.header,t);return-1==o&&(o=xui.arr.subIndexOf(r.header,"id",t)),i>o?1:i===o?0:-1}));var u=r.grpCols;return u&&xui.isArr(u)&&u.length&&(xui.arr.each(e,(function(e){var t=xui.arr.indexOf(r.header,e);if(-1==t&&(t=xui.arr.subIndexOf(r.header,"id",e)),-1!=t)for(var i,o=0,n=u.length;o<n;o++)(i=u[o]).from>t?(i.from--,i.to--):t>=i.from&&t<=i.to&&i.to--}),null,!0),xui.filter(u,(function(e){var i=e.to>=e.from;return!i&&t.renderId&&(t.getSubNode(["HCELL","HSCELL"],e[n]).remove(),delete t.colMap[e[n]],delete t.colMap2[e.id]),i}))),xui.arr.each(e,(function(e){var i=xui.arr.indexOf(r.header,e);if(-1==i&&(i=xui.arr.subIndexOf(r.header,"id",e)),-1!=i){if(t.colMap2&&(e=t.colMap2[e])){var n;if(s++,n=t.colMap[e]){var u,l=n._cells,d=n.id;xui.each(l,(function(e,i){a.push(t.getSubNode("CELL",e).get(0)),delete o[e]._row._cells[d],xui.breakO(o[e]),delete o[e],t.reclaimSubId(e.slice(3),"cell")})),delete t.colMap2[d],xui.breakO(t.colMap[e]),delete t.colMap[e],(u=t.getSubNode("HCELL",e).get(0))&&a.push(u),(u=t.getSubNode("HSCELL",e).get(0))&&a.push(u)}t.reclaimSubId(e.slice(3),"header")}var c=function(e){xui.arr.each(e,(function(e){e.cells&&xui.arr.removeFrom(e.cells,i),e.sub&&c(e.sub)}))};c(r.rows),xui.arr.removeFrom(r.header,i)}}),null,!0),s>0&&(xui(a).remove(),t.$activeCell&&!xui.Dom.byId(t.$activeCell)&&delete t.$activeCell,r.grpCols=i._adjustGrpColsData(t,u),i._adjustColsWidth(t),i._adjustColsHeight(t),i._adjustBody(t,"delcol")),t._dirty=1,this},removeAllRows:function(e){var t=this.get(0),i=t.box,r=t.properties;if(!r.rows||r.rows.length<=0)return this;for(var o in t.cellMap)t.reclaimSubId(o.slice(3),"cell");for(var o in t.rowMap)t.reclaimSubId(o.slice(3),"row");return xui.each(t.colMap,(function(e){e._cells={}})),xui.breakO([t.rowMap,t.cellMap],3),t.rowMap={},t.cellMap={},t.rowMap2={},delete t.$activeCell,delete t.$activeRow,t.properties.rows.length=0,t.renderId&&(0!=t.$sl&&(t.getSubNode("HEADER2").get(0).scrollLeft=t.$sl=0),t.getSubNodes(["SCROLL21","SCROLL22"]).scrollTop(0).scrollLeft(0),t.getSubNodes(["ROWS21","ROWS22"]).empty()),delete t.$allrowscache1,delete t.$allrowscache2,t.properties.$UIvalue=null,!1!==e&&t.renderId&&t.__hastmpRow&&i.__ensurehotrow(t,e),i._adjustBody(t,"delrow"),this},updateGridValue:function(){return this.each((function(e){var t=e.properties;delete e._dirty,xui.each(e.rowMap,(function(e){e._oValue=e.value,"unit"in e&&(e._oUnit=e.unit),delete e._dirty})),xui.each(e.cellMap,(function(e){e._oValue=e.value,"unit"in e&&(e._oUnit=e.unit),delete e._dirty})),t.dirtyMark&&t.showDirtyMark&&e.getSubNode("CELLA",!0).removeClass("xui-ui-dirty")}))},updateRowValue:function(e){var t=this.get(0),i=this.getRowbyRowId(e),r=[],o=t.properties;xui.arr.each(i.cells,(function(e){(e._oValue!==e.value||"unit"in e&&e._oUnit!==e.unit)&&(e._oValue=e.value,"unit"in e&&(e._oUnit=e.unit),delete e._dirty,o.dirtyMark&&r.push(t.getSubNode("CELLA",e._serialId).get(0)))})),i._oValue=i.value,delete i._dirty,o.dirtyMark&&r.push(t.getSubNode("CELLA",i._serialId).get(0)),o.dirtyMark&&o.showDirtyMark&&xui(r).removeClass("xui-ui-dirty")},updateColValue:function(e){var t=this.get(0),i=this.getHeaderByColId(e),r=[],o=t.properties;xui.arr.each(i.cells,(function(e){(e._oValue!==e.value||"unit"in e&&e._oUnit!==e.unit)&&(e._oValue=e.value,"unit"in e&&(e._oUnit=e.unit),delete e._dirty,o.dirtyMark&&r.push(t.getSubNode("CELLA",e._serialId).get(0)))})),o.dirtyMark&&o.showDirtyMark&&xui(r).removeClass("xui-ui-dirty")},updateCellValue:function(e){var t=this,i=t.get(0),r=i.properties;return"string"==typeof e&&(e=t.getCell(e)),(e._oValue!==e.value||"unit"in e&&e._oUnit!==e.unit)&&(e._oValue=e.value,"unit"in e&&(e._oUnit=e.unit),delete e._dirty,r.dirtyMark&&i.getSubNode("CELLA",e._serialId).removeClass("xui-ui-dirty")),t},resetCellValue:function(e,t){var i=this,r=i.get(0);return r.properties,"string"==typeof e&&(e=i.getCell(e)),(t||e._oValue!==e.value||"unit"in e&&e._oUnit!==e.unit)&&(e.value=e._oValue,"unit"in e&&(e.unit=e._oUnit),delete e._dirty,r.box._renderCell(r,e,{},r.getSubNode("CELLA",e._serialId))),i},getActiveRow:function(e,t){var i,r=this.get(0);if("row"==r.properties.activeMode&&(i=r.$activeRow))return i=r.rowMap[r.getSubId(i)],r.box._getRow(r,i,e,t)},setActiveRow:function(e){var t,i,r=this.get(0);if("row"==r.properties.activeMode&&(r.box._activeRow(r,!1),i=this.getRowbyRowId(e)))return(t=r.getSubNodes(["CELLS1","CELLS2"],i._serialId)).isEmpty()||(r.box._activeRow(r,t.get(0).id),t.scrollIntoView()),this},getRowMap:function(e,t){var i,r=this.get(0),o=r.boxing(),n=r.properties;xui.isHash(e)&&(e=e.id),xui.isSet(e)||!r.renderId||r.destroyed||("row"===n.activeMode?(i=o.getActiveRow())&&(e=i.id):"cell"===n.activeMode&&(i=o.getActiveCell())&&(e=i._row.id));var a=o.getRowbyRowId(e,"map");return!1===t&&(a=xui.filter(a,(function(e,t){return 0!==t.indexOf("__row__")}))),a},setRowMap:function(e,t,i,r){return xui.isHash(e)&&(e=e.id),this.each((function(o){var n,a=o.boxing(),s=o.properties;if(e||!o.renderId||o.destroyed||((s.activeMode="row")?(n=a.getActiveRow())&&(e=n.id):(s.activeMode="cell")&&(n=a.getActiveCell())&&(e=n._row.id)),e){var u=a.getRowbyRowId(e),l=a.getHeader("min");e=u.id;var d=o.box._adjustRows(o,[t])[0].cells;xui.arr.each(u.cells,(function(t,o){xui.isDefined(d[o]&&d[o].value)&&a.updateCellByRowCol(e,l[o],d[o],i,r)}))}s.rowMap=t}))},getHeader:function(e){var t=this.get(0).properties.header;if(!xui.isArr(t))return[];if("data"==e)return xui.clone(t,!0);if("min"==e||"value"==e){var i=xui.clone(t,!0);return xui.arr.each(i,(function(e,t){i[t]="id"in e?e.id:e})),i}return t},getHeaderByColId:function(e,t){var i,r=this.get(0),o=r.properties.header;return xui.isNumb(e)&&(e=xui.get(r.properties.header,[e,"id"])),-1==(i=xui.arr.subIndexOf(o,"id",e))?null:"data"==t?xui.clone(o[i],!0):"min"!=t&&"value"!=t||!("id"in o[i])?o[i]:o[i].id},clearGrid:function(){return this.setHeader()},getHeaderByCell:function(e,t){var i=e._col;return i?"data"==t?xui.clone(i,!0):"min"!=t&&"value"!=t||!("id"in i)?i:i.id:null},updateHeader:function(e,t){var i,r=this,o=r.get(0),n=o.properties,a=r.getHeaderByColId(e);if(!a){var s=n.grpCols;a=s[xui.arr.subIndexOf(s,"id",e)],i=!0}if(a){if("object"!=typeof t?t={caption:t+""}:xui.filter(t,!0),delete t.id,o.renderId){var u,l,d,c=a._serialId;if(!i){if(u=t.width){u=o.$px(u);var p=[];(d=r.getSubNode("HCELL",c).get(0))&&p.push(d),(d=r.getSubNode("HSCELL",c).get(0))&&p.push(d),xui.each(a._cells,(function(e){p.push(r.getSubNode("CELL",e).get(0))})),o.box._adjusteditorW(o,xui(p).width(a._colWidth=o.$forceu(u)),u),r.getSubNode("SCROLL22").onScroll(),r.constructor._adjustColsWidth(r.get(0)),r.constructor._adjustBody(r.get(0),"setcol")}t.hasOwnProperty("visibility")&&!t.hasOwnProperty("hidden")&&(t.hidden=!t.visibility),t.hasOwnProperty("hidden")&&(t.hidden?!0!==a.hidden&&r.showColumn(e,!1):!0===a.hidden&&r.showColumn(e,!0)),"type"in t&&delete a.editorCacheKey}(u=t.headerStyle||t.colStyle)&&(l=r.getSubNodes(["HCELLA","HSCELLA"],c)).attr("style",l.attr("style")+";"+u),(u=t.headerClass)&&r.getSubNodes(["HCELLA","HSCELLA"],c).addClass(u),t.hasOwnProperty("caption")&&(r.getSubNodes(["HCELLCAPTION","HSCELLCAPTION"],c).get(0).innerHTML=t.caption),"colResizer"in t&&(u=!!t.colResizer,r.getSubNode("HHANDLER",c).css("display",(t.colResizer=u)?"block":"none"))}xui.merge(a,t,"all"),"flexSize"in t&&o.adjustSize()}},showColumn:function(e,t){var i,r,o,n=this.get(0),a=n.colMap2,s=n.colMap,u=[];if(i=s[r=a[e]]){if(n.beforeColShowHide&&!1===n.boxing().beforeColShowHide(n,e,t))return!1;(o=n.getSubNode("HCELL",r).get(0))&&u.push(o),(o=n.getSubNode("HSCELL",r).get(0))&&u.push(o),xui.each(i._cells,(function(e){u.push(n.getSubNode("CELL",e).get(0))})),xui(u).css("display",(i.hidden=!1===t)?"none":""),n.afterColShowHide&&n.boxing().afterColShowHide(n,e,t)}return n.box._adjustColsWidth(n),n.box._adjustBody(n,"setcol"),!0},sortColumn:function(e,t,i){var r=this.get(0),o=r.colMap2[e],n=r.colMap[o];return o&&n&&(xui.isBool(t)&&(n._order=!t),xui.isFun(i)&&(n.sortby=i),r.getSubNode("HCELLA",o).onClick()),this},getCell:function(e,t){var i,r,o=this.get(0);return xui.each(o.cellMap,(function(t){if(t.id&&t.id===(e.id||e))return e=t._serialId,!1})),(i=o.cellMap[e])?"data"==t?xui.merge({rowId:i._row.id,colId:i._col.id},xui.clone(i,!0)):"min"==t||"value"==t?i.value:"map"==t?(r={})&&((r[i._col.id]=i.value)||1)&&r:i:null},getCellbyRowCol:function(e,t,i){var r,o,n=this,a=n.get(0);if(xui.isNumb(e)&&(e=xui.get(a.properties.rows,[e,"id"])),xui.isNumb(t)&&(t=xui.get(a.properties.header,[t,"id"])),!(r=(r=xui.get(a.rowMap,[a.rowMap2[e],"_cells",t]))&&a.cellMap[r])){var s,u=n.getRowbyRowId(e),l=n.getHeader("min");u&&u.cells&&-1!=(s=xui.arr.indexOf(l,t))&&(r=u.cells[s])}return r?"data"==i?xui.merge({rowId:e,colId:t},xui.clone(r,!0)):"min"==i||"value"==i?"value"in r?r.value:r:"map"==i?(o={})&&((o[t]=r.value)||1)&&o:r:null},getCells:function(e,t,i){var r={};return xui.each(this.get(0).cellMap,(function(o){e&&e!=o._row.id||t&&t!=o._col.id||(r[o.id]="data"==i?xui.merge({rowId:o._row.id,colId:o._col.id},xui.clone(o,!0)):"min"!=i&&"value"!=i||!("value"in o)?o:o.value)})),r},getCells2:function(e,t,i){var r,o,n=this.get(0),a=n.properties,s=a.header,u=n.box._temprowid,l=xui.isSet(e)?this.getRowbyRowId(e):null,d=xui.isSet(t)?this.getHeaderByColId(t):null,c=l&&l.cells&&xui.isArr(l.cells),p=xui.isSet(t)&&d,h=c?[l]:xui.isArr(l)&&l[0]&&l[0].cells&&xui.isArr(l[0].cells)?l:a.rows,f=s.length,x=h.length,g=[],m=p?xui.arr.indexOf(s,d):-1,b=[];if(x){if(p)g.push(d);else for(var v=0;v<f;v++)g.push(s[v].id);for(var y=0;y<x;y++)if(c||h[y].id!=u)if(p)o=null,!h[y].group&&h[y].cells&&(r=h[y].cells[m],o="data"==i?xui.merge({rowId:r._row.id,colId:r._col.id},xui.clone(r,!0)):"min"!=i&&"value"!=i||!("value"in r)?r:r.value),b.push(o);else{var A=[];if(!h[y].group&&h[y].cells)for(v=0;v<f;v++)r=h[y].cells[v],o="data"==i?xui.merge({rowId:r._row.id,colId:r._col.id},xui.clone(r,!0)):"min"!=i&&"value"!=i||!("value"in r)?r:r.value,A.push(o);b.push(A)}}return c?b[0]:b},updateCellByRowCol:function(e,t,i,r,o,n){var a,s=this,u=s.constructor;if(a=u._getCellId(s.get(0),e,t))u._updCell(s.get(0),a,i,r,o,n);else{var l,d=s.getRowbyRowId(e),c=s.getHeader("min");d&&d.cells&&-1!=(l=xui.arr.indexOf(c,t))&&(xui.isHash(d.cells[l])||(d.cells[l]={value:d.cells[l]}),xui.merge(d.cells[l],i,"all"))}return s},getCellPos:function(e,t){if(!e||!e._row||!e._col)return null;var i=this.get(0),r=xui.arr.indexOf(e._row.cells,e),o=xui.arr.indexOf(i.properties.rows,e._row);return-1==r||-1==o?null:t?xui.ExcelFormula.toCellId(r,o):{row:o,col:r}},updateCellByRowCol2:function(e,t,i,r){var o=-1!=e.indexOf(":")?e.split(":"):xui.ExcelFormula.toCoordinate(e,-1,!0),n=parseInt(o[0],10),a=parseInt(o[1],10);return this.updateCellByRowCol(n,a,t,i,r)},updateCell:function(e,t,i,r,o){var n=this.get(0);return xui.each(n.cellMap,(function(t){if(t.id&&t.id===e)return e=t._serialId,!1})),this.constructor._updCell(n,e,t,i,r,o),this},editCellbyRowCol:function(e,t){var i=this.get(0),r=i.box;return r._editCell(i,r._getCellId(i,e,t)),this},editCell:function(e){return(e=e||this.get(0).getSubId(this.get(0).$activeCell+""))&&this.constructor._editCell(this.get(0),e),this},editFirstCell:function(e){var t,i=this.get(0),r=function(e){return i.box.getCellOption(i,o,e)},o="string"==typeof e?i.rowMap[i.rowMap2[e]]:e;if(i.properties.firstCellEditable&&o&&!r(i)&&!r(i)&&i&&i.renderId&&!i.destroyed){var n=i.getSubNode("FCELLCAPTION",o._serialId);if(!n.isEmpty()){var a=n.parent();if(i.beforeIniEditor&&!1===(t=i.boxing().beforeIniEditor(i,o,n,a,"row",o,null)))return;var s=a.cssSize(),u=i.getSubNode("BORDER"),l=u.contentBox()?2:0,d=n.offset(null,a),c=a.offset(null,u);if(c.left>s.width-8)return;(t=i.$cache_editor.firstCellEditor)&&t["xui.UI"]&&!t.isDestroyed()||(t=new xui.UI.ComboInput({type:"input",zIndex:100}),i.$cache_editor.firstCellEditor=t),t.setWidth(s.width-d.left+l).setHeight(s.height+l).setValue(o.value||o.value||""),i.onBeginEdit&&i.boxing().onBeginEdit(i,o,t,"row",o,null),t.undo=function(){var e=this,t=e.get(0)&&e.get(0).$row;e.undo=null,a.removeClass("editing"),i.box&&t&&t._oValue!==t.value&&t.id!=i.box._temprowid&&i.onRowDirtied&&i.boxing().onRowDirtied(i,t),e.get(0)&&e.get(0).box&&(e.getSubNode("INPUT").onBlur(!0),e.getRoot().setBlurTrigger("tg_editor_blur:"+i.$xid),i.properties&&(e.beforeUnitUpdated(null).afterUIValueSet(null).beforeNextFocus(null).onCancel(null).onFileDlgOpen(null),e.setValue("",!0,"editorreset")),delete e.get(0).$row,delete e.get(0)._smartnav,delete e.get(0).$editMode,e.hide()),t&&delete t._editor,i.$curEditor=null,i.onEndEdit&&i.boxing().onEndEdit(i,t,e,"row",t,null),e.get(0)&&e.destroy(!0),e=null},t.afterUIValueSet((function(e,r,n,a,s){var u,l={value:n};e.properties.hasOwnProperty("tagVar")&&!xui.isEmpty(u=e.properties.tagVar)&&(l.tagVar=u),!1!==(i.beforeEditApply&&i.boxing().beforeEditApply(i,o,l,t,s,"row",o,null))&&(i.boxing().updateRow(o.id,{value:n,caption:n+""}),xui.tryF(t.undo,[],t))})).beforeNextFocus((function(e,r){xui.tryF(t.undo,[!0],t);var n=xui.Event.getEventPara(r);return"enter"==n.key&&(n.$key="right"),i.getSubNode("CELLA",o._serialId).onKeydown(!0,n),!1})).onCancel((function(){xui.tryF(t.undo,[],t)})),u.append(t),t.reBoxing().show(d.left+c.left-1+"px",c.top-1+"px"),a.addClass("editing"),t.getRoot().setBlurTrigger("tg_editor_blur:"+i.$xid,(function(){return xui.tryF(t.undo,[],t),!1})),t.get(0).$row=o,t.get(0)._smartnav=!0,o._editor=t,i.$curEditor=t,t.activate()}return this}},focusCellbyRowCol:function(e,t){var i=this.get(0),r=i.box._getCellId(i,e,t),o=i.getSubNode("CELLA",r);return o&&o.get(0)&&o.focus(!0),this},focusCell:function(e){var t=e._serialId;return this.get(0).getSubNode("CELLA",t).focus(!0),this},getActiveCell:function(e){var t,i,r,o=this.get(0);if("cell"==o.properties.activeMode&&(t=o.$activeCell))return(r=o.cellMap[o.getSubId(t)])?"data"==e?xui.merge({rowId:r._row.id,colId:r._col.id},xui.clone(r,!0)):"min"==e||"value"==e?"value"in r?r.value:r:"map"==e?(i={})&&((i[r._col.id]=r.value)||1)&&i:r:null},setActiveCell:function(e,t){var i,r,o=this.get(0);if("cell"==o.properties.activeMode&&(o.box._activeCell(o,!1),r="object"==typeof e?e:this.getCellbyRowCol(e,t)))return(i=o.getSubNode("CELLA",r._serialId)).isEmpty()||o.box._activeCell(o,i.get(0).id),this},getDirtied:function(e,t){var i={};return xui.each(this.get(0).cellMap,(function(r){!(r._oValue!==r.value||"unit"in r&&r._oUnit!==r.unit)||e&&e!=r._row.id||t&&t!=r._col.id||(i[r.id]={rowId:r._row.id,colId:r._col.id,value:r.value,_oValue:r._oValue},"unit"in r&&(i[r.id]._oUnit=r._oUnit))})),i},getSubNodeInGrid:function(e,t,i){var r=this,o=xui.isSet(t)&&xui.isSet(i)?r.getCellbyRowCol(t,i):i?r.getHeaderByColId(i):t?r.getRowbyRowId(t):null;return r.getSubNode(e,o&&o._serialId||!0)},getInlineEditors:function(e,t){var i={};return xui.each(this.getCells(e,t),(function(e,t){i[t]=e._editor})),i},getEditor:function(){return xui.get(this.get(0),["$curEditor"])},updateEditor:function(e,t,i){var r=this.getEditor();return r&&(xui.isHash(i)&&r.setProperties(i,!0),xui.isDefined(t)&&r.setCaption(t,!0),xui.isDefined(e)&&r.setUIValue(e,!0)),this},getEditCell:function(){return xui.get(this.get(0),["$cellInEditor"])},offEditor:function(e,t){var i,r=this.get(0);if(r&&((i=r.$curEditor)&&xui.tryF(i.undo,[],i),t||xui.each(r.cellMap,(function(e){(i=e._editor)&&(i.destroy(),delete e._editor)})),e)){var o=r.box.getCellOption;xui.each(r.cellMap,(function(e){!o(r,e,"editable")||"inline"!=o(r,e,"editMode")&&"dropbutton"!=o(r,e,"type")||r.box._editCell(r,e,null,!0)}))}},adjustEditor:function(e){var t=this.get(0),i=this.getRoot().contentBox();if(t&&t.$curEditor){var r=t.$curEditor,o=t.$cellInEditor;if("function"==typeof e)e.apply(this,[r,o]);else if("xui.UI.ComboInput"==r.KEY){var n=t.getSubNode("CELL",o.id),a=n.offset(null,t.getSubNode("SCROLL22")),s=n.cssSize();r.setLeft(a.left-1).setTop(a.top-1).setWidth(s.width+i+1).setHeight(s.height+i).reLayout(!0)}}return this}},Before:function(e,t,i){return"xui.UI.TreeGrid"==e&&(this.Behaviors.CELLS1=this.Behaviors.CELLS2,this.Behaviors.GCELLA=this.Behaviors.CELLA),arguments.callee.upper.apply(this,arguments)},Initialize:function(){this.addTemplateKeys(["ALT","PROGRESS"]),this.getCellPro=this.getCellOption;var e=this.prototype;e.getColumn=e.getHeader,e.updateColumn=e.updateHeader,e.getColByDom=e.getHeaderByDom,e.getColByColId=e.getHeaderByColId,e.getColByCell=e.getHeaderByCell},Static:{HasHtmlTableNode:1,DIRYMARKICON:"DIRTYMARK",Templates:{tagName:"div",style:"{_style}",className:"{_className}",BORDER:{tagName:"div",BOX:{tagName:"table",cellspacing:"0",cellpadding:"0",className:"xui-uibase",TBODY:{tagName:"tbody",TRHEADER:{tagName:"tr",className:"xuitgtr",TDHEADER1:{tagName:"td",className:"xuitgtd",HEADER1:{tagName:"div",className:"xuitgtd",style:"{showHeader}",HI1:{tagName:"div",HCELLS1:{tagName:"div",style:"{headerHeight}",FHCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};height:{_hcellheight};",className:"xui-uiborder-noradius xui-uibar xui-uiborder-outset {cellCls}",tabindex:"{_tabindex}",HCELLA:{style:"{firstCellStyle};",className:"xui-v-wrapper xui-showfocus {firstCellClass}",HHANDLER:{tagName:"div",style:"{colDDDisplay}"},FHANDLER:{tagName:"div",style:"{rowDDDisplay}"},HFMARK:{$order:1,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{_rowMarkDisplay}"},LTAGCMDS:{$order:2,tagName:"span",className:"xui-ltag-cmds",style:"{_ltagDisplay}",text:"{ltagCmds}"},GRIDCAPTION:{$order:5,text:"{gridHandlerCaption}"},SORT:{className:"xuifont",$fonticon:"xui-icon-sort",style:"{sortDisplay}"}}},OTHERHCELLS:{$order:1,tagName:"text",text:"{header1}"}},GRPCELLBOX1:{tagName:"div",style:"{headerHeight};",GRPCELLS:{$order:3,tagName:"text",text:"{grpCols1}"}}}}},TDHEADER2:{tagName:"td",className:"xuitgtd",HEADER2:{$order:0,tagName:"div",style:"{showHeader}",HI2:{tagName:"div",HCELLS2:{tagName:"div",style:"{headerHeight};",OTHERHCELLS:{$order:1,tagName:"text",text:"{header2}"},LHCELL:{$order:2,className:"xui-v-wrapper",LHCELLINNER:{$order:1,text:"{headerTail}"},RTAGCMDS:{$order:1,tagName:"span",className:"xui-rtag-cmds",style:"{_rtagDisplay}",text:"{rtagCmds}"}}},GRPCELLBOX2:{tagName:"div",style:"{headerHeight};",GRPCELLS:{$order:3,tagName:"text",text:"{grpCols2}"}}}}}},TRLOCKED1:{tagName:"tr",className:"xuitgtr",TDBODY11:{tagName:"td",className:"xuitgtd",SCROLL11:{$order:1,tagName:"div",className:"",BODY11:{tagName:"div",ROWS11:{$order:1,tagName:"div",text:"{rows11}"}}}},TDBODY12:{tagName:"td",className:"xuitgtd",SCROLL12:{$order:1,tagName:"div",className:"{_rowfreezed}",BODY12:{tagName:"div",ROWS12:{$order:1,tagName:"div",text:"{rows12}"}}}}},TRBODY:{tagName:"tr",className:"xuitgtr",TDBODY21:{tagName:"td",className:"xuitgtd",SCROLL21:{$order:1,tagName:"div",className:"{_columnfreezed}",BODY21:{tagName:"div",ROWS21:{$order:1,tagName:"div",text:"{rows21}"}}}},TDBODY22:{tagName:"td",className:"xuitgtd",SCROLL22:{$order:1,tagName:"div",BODY22:{tagName:"div",ROWS22:{$order:1,tagName:"div",text:"{rows22}"}}}}},TRTAIL:{tagName:"tr",className:"xuitgtr",TDTAIL1:{tagName:"td",className:"xuitgtd"},TDTAIL2:{tagName:"td",className:"xuitgtd"}}}},COLLIST:{tagName:"div",COLLISTDROP:{className:"xuifont xui-special-icon",$fonticon:"xui-icon-triangle-down"}},ARROW:{className:"xuifont xui-special-icon",$fonticon:"xui-icon-bigup",text:"&nbsp;"}},DIRTYMARK:{},$submap:{header1:function(e,t,i,r,o,n){if(!(n>e.properties.freezedColumn))return e.colMap[i._serialId]._region=1,r="header",xui.UI.$doTemplate(e,t,i,r,o),r},header2:function(e,t,i,r,o,n){if(n>e.properties.freezedColumn)return e.colMap[i._serialId]._region=2,r="header",xui.UI.$doTemplate(e,t,i,r,o),r},header:{HCELL:{style:"width:{_cellWidth};height:{_hcellheight};{colDisplay};",className:"xui-uiborder-noradius xui-uibar xui-uiborder-outset {cellCls}",HCELLA:{className:"xui-v-wrapper xui-showfocus {headerClass}",style:"{headerStyle};{colStyle}",tabindex:"{_tabindex}",HCELLCAPTION:{$order:5,className:"xui-v-node",text:"{caption}"},SORT:{className:"xuifont",$fonticon:"xui-icon-sort",style:"{sortDisplay}"},HHANDLER:{$order:2,tagName:"div",style:"{colDDDisplay}"}}}},grpCols1:function(e,t,i,r,o,n){n=e.properties.freezedColumn-1;var a=e.colMap;if(!(i.from>n))return i.to>n?(a[i._serialId]._region=2,a[i._serialId]._shadow=1,r="grpColsShadow",xui.UI.$doTemplate(e,t,i,r,o)):(a[i._serialId]._region=1,r="grpCols",xui.UI.$doTemplate(e,t,i,r,o)),r},grpCols2:function(e,t,i,r,o,n){if(n=e.properties.freezedColumn-1,i.to>n)return e.colMap[i._serialId]._region=2,r="grpCols",xui.UI.$doTemplate(e,t,i,r,o),r},grpColsShadow:{HSCELL:{style:"position:absolute;width:{_cellWidth};height:{_hcellheight};top:{_hcelltop};left:{_hcellleft};",className:"xui-uiborder-noradius xui-uibar xui-uiborder-outset {cellCls}",HSCELLA:{className:"xui-v-wrapper xui-showfocus {headerClass}",style:"{headerStyle};{colStyle}",tabindex:"{_tabindex}",HSCELLCAPTION:{className:"xui-v-node",text:"{caption}"}}}},grpCols:{HCELL:{style:"position:absolute;width:{_cellWidth};height:{_hcellheight};top:{_hcelltop};left:{_hcellleft};",className:"xui-uiborder-noradius xui-uibar xui-uiborder-outset {cellCls}",HCELLA:{className:"xui-v-wrapper xui-showfocus {headerClass}",style:"{headerStyle};{colStyle}",tabindex:"{_tabindex}",HCELLCAPTION:{$order:5,className:"xui-v-node",text:"{caption}"},HHANDLER:{$order:2,tagName:"div",style:"{colDDDisplay}"}}}},rows11:function(e,t,i,r,o,n){return!e._passFreezedRow&&!(n>e.properties.freezedRow)&&(e.rowMap[i._serialId]._region=1,void xui.UI.$doTemplate(e,t,i,"row1",o,n,"rows1"))},rows12:function(e,t,i,r,o,n){return!e._passFreezedRow&&!(n>e.properties.freezedRow)&&(e.rowMap[i._serialId]._region=1,void xui.UI.$doTemplate(e,t,i,"row2",o,n,"rows2"))},rows21:function(e,t,i,r,o,n){!e._passFreezedRow&&n<=e.properties.freezedRow||(e.rowMap[i._serialId]._region=2,xui.UI.$doTemplate(e,t,i,"row1",o,n,"rows1"))},rows22:function(e,t,i,r,o,n){!e._passFreezedRow&&n<=e.properties.freezedRow||(e._passFreezedRow=1,e.rowMap[i._serialId]._region=2,xui.UI.$doTemplate(e,t,i,"row2",o,n,"rows2"))},row1:{ROW1:{tagName:"div",style:"{rowDisplay}",CELLS1:{$order:2,tagName:"div",className:"xui-uirowbg xui-uiborder-b xui-uiborder-light {rowCls} {rowClass}",style:"{_rowHeight};{rowStyle}",CELLHANDLER:{tagName:"text",text:"{_handler_cell}"},GRPCELL2:{tagName:"text",text:"{_firstcell_grp}"},OTHERCELLS:{tagName:"text",$order:2,text:"{cells}"}},SUB1:{$order:3,tagName:"div"}}},row2:{ROW2:{tagName:"div",style:"{rowDisplay}",CELLS2:{$order:2,tagName:"div",className:"xui-uirowbg xui-uiborder-b xui-uiborder-light {rowCls} {rowClass}",style:"{_rowHeight};{rowStyle}",GRPCELL2:{tagName:"text",text:"{_firstcell_grp}"},OTHERCELLS:{tagName:"text",$order:2,text:"{cells}"},LCELL:{$order:3,className:"xui-v-wrapper",LCELLINNER:{$order:1,text:"{rowTail}"},RTAGCMDS:{$order:2,tagName:"span",className:"xui-rtag-cmds",text:"{rtagCmds}"}}},SUB2:{$order:3,tagName:"div"}}},"rows1._handler_cell":function(e,t,i,r,o,n){xui.UI.$doTemplate(e,t,i,"infirstcell"==e.properties.treeMode?"rows1._handler_cell2":"rows1._handler_cell1",o)},"rows1._handler_cell1":{FCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{tabindex:"{_tabindex}",style:"{cellStyle}{firstCellStyle}",className:"xui-v-wrapper xui-showfocus {cellClass}{firstCellClass}",ROWLRULER:{$order:1,style:"{_treeMode};{_rulerW}"},MARK:{$order:2,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{_rowMarkDisplay}"},ROWNUM:{$order:3,className:"xui-ui-readonly",style:"{_rowNumbDisplay}"},ROWTOGGLE:{$order:4,style:"{_treeMode};",className:"xuifont",$fonticon:"{_fi_togglemark}"},LTAGCMDS:{$order:5,tagName:"span",className:"xui-ltag-cmds",style:"{_ltagDisplay}",text:"{ltagCmds}"},FCELLCAPTION:{$order:6,className:"xui-v-node",text:"{caption}"},FHANDLER:{$order:0,tagName:"div",style:"{rowDDDisplay}"}}}},"rows1._handler_cell2":{FCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{tabindex:"{_tabindex}",style:"{cellStyle}{firstCellStyle}",className:"xui-v-wrapper xui-showfocus {cellClass}{firstCellClass}",FHANDLER:{$order:6,tagName:"div",style:"{rowDDDisplay}"}}}},"rows1._firstcell_grp":function(e,t,i,r,o,n){"infirstcell"==e.properties.treeMode&&e.properties.freezedColumn&&xui.UI.$doTemplate(e,t,i,"rows._firstcell_grp",o)},"rows2._firstcell_grp":function(e,t,i,r,o,n){"infirstcell"==e.properties.treeMode&&(e.properties.freezedColumn||xui.UI.$doTemplate(e,t,i,"rows._firstcell_grp",o))},"rows._firstcell_grp":{GCELL:{$order:0,className:"{cellCls}",GCELLA:{tabindex:"{_tabindex}",style:"{cellStyle}{firstCellStyle}",className:"xui-v-wrapper xui-showfocus {cellClass}{firstCellClass}",ROWLRULER:{$order:1,$customId:1,style:"{_treeMode};{_rulerW}"},MARK:{$order:2,$customId:1,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{_rowMarkDisplay}"},ROWNUM:{$order:3,$customId:1,className:"xui-ui-readonly",style:"{_rowNumbDisplay}"},ROWTOGGLE:{$order:4,$customId:1,style:"{_treeMode};",className:"xuifont",$fonticon:"{_fi_togglemark}"},LTAGCMDS:{$order:5,$customId:1,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},FCELLCAPTION:{$order:6,$customId:1,className:"xui-v-node",text:"{caption}"}}}},"rows1.cells":function(e,t,i,r,o,n){if(!(n>e.properties.freezedColumn)){r="rows.cells";var a=e.box._tplMap2[i.type]||".input";return"infirstcell"==e.properties.treeMode&&1==n&&".input"==a&&(a="._first_cell"),xui.UI.$doTemplate(e,t,i,r+a,o),r}},"rows2.cells":function(e,t,i,r,o,n){if(!(n<=e.properties.freezedColumn)){r="rows.cells";var a=e.box._tplMap2[i.type]||".input";return"infirstcell"==e.properties.treeMode&&1==n&&".input"==a&&(a="._first_cell"),xui.UI.$doTemplate(e,t,i,r+a,o),r}},"rows.cells._first_cell":{CELL:{style:"width:{_cellWidth};{cellDisplay};",className:"xui-uiborder-r xui-uiborder-light xui-treegrid-fcell {cellCls}",CELLA:{className:"xui-v-wrapper xui-showfocus {cellClass}",style:"{bgcolor};{cellStyle}",tabindex:"{_tabindex}",ROWLRULER:{$order:1,$customId:1,style:"{_treeMode};{_rulerW}"},MARK:{$order:2,$customId:1,className:"xuifont",$fonticon:"xui-uicmd-check",style:"{_rowMarkDisplay}"},ROWNUM:{$order:3,$customId:1,className:"xui-ui-readonly",style:"{_rowNumbDisplay}"},ROWTOGGLE:{$order:4,$customId:1,style:"{_treeMode};",className:"xuifont",$fonticon:"{_fi_togglemark}"},LTAGCMDS:{$order:5,$customId:1,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},CELLCAPTION:{$order:6,style:"{color}",className:"xui-v-node xui-treegrid-fcellcaption",text:"{_caption}"}}}},"rows.cells.input":{CELL:{style:"width:{_cellWidth};{cellDisplay};",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{className:"xui-v-wrapper xui-showfocus {cellClass}",style:"{bgcolor};{cellStyle}",tabindex:"{_tabindex}",CELLCAPTION:{className:"xui-v-node",style:"{color}",text:"{_caption}"}}}},"rows.cells.textarea":{CELL:{style:"width:{_cellWidth};{cellDisplay};",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{className:"xui-v-wrapper xui-showfocus xui-cls-wordwrap {cellClass}",style:"{bgcolor};{cellStyle}",tabindex:"{_tabindex}",CELLCAPTION:{className:"xui-v-node",style:"{color}",text:"{_caption}"}}}},"rows.cells.button":{CELL:{style:"width:{_cellWidth};{cellDisplay};",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{tagName:"button",className:"xui-node xui-showfocus xui-wrapper xui-ui-btn xui-uibar xui-uigradient xui-uiborder-radius xui-treegrid-tgbtn {cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",CELLCAPTION:{className:"xui-v-node",text:"{_caption}"}}}},"rows.cells.checkbox":{CELL:{style:"width:{_cellWidth};{cellDisplay}",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{className:"xui-v-wrapper xui-showfocus {cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",CHECKBOX:{className:"xuifont xui-uicmd-check",$fonticon:"{_fi_checkboxCls}"},CELLCAPTION:{className:"xui-v-node",text:"{_caption}"}}}},"rows.cells.progress":{CELL:{style:"width:{_cellWidth};{cellDisplay}",className:"xui-uiborder-r xui-uiborder-light {cellCls}",CELLA:{className:"xui-showfocus {cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",PROGRESS:{$order:2,tagName:"div",className:"xui-v-wrapper xui-uibar",style:"width:{progress};",CELLCAPTION:{className:"xui-v-node",text:"{_caption}"}}}}},"rows1._handler_cell1.ltagCmds":function(e,t,i,r,o){i.id!=e.box._temprowid&&xui.UI.$doTemplate(e,t,i,"rows.tagCmds"+(e.box._tplMap[i.type]||".button"),o)},"rows._firstcell_grp.ltagCmds":function(e,t,i,r,o){xui.UI.$doTemplate(e,t,i,"rows.tagCmds"+(e.box._tplMap[i.type]||".button"),o)},"rows.cells._first_cell.ltagCmds":function(e,t,i,r,o){xui.UI.$doTemplate(e,t,i,"rows.tagCmds"+(e.box._tplMap[i.type]||".button"),o)},"rows2.rtagCmds":function(e,t,i,r,o){xui.UI.$doTemplate(e,t,i,"rows.tagCmds"+(e.box._tplMap[i.type]||".button"),o)},ltagCmds:function(e,t,i,r,o){xui.UI.$doTemplate(e,t,i,"rows.tagCmds"+(e.box._tplMap[i.type]||".button"),o)},rtagCmds:function(e,t,i,r,o){xui.UI.$doTemplate(e,t,i,"rows.tagCmds"+(e.box._tplMap[i.type]||".button"),o)},"rows.tagCmds.text":xui.UI.$getTagCmdsTpl("text"),"rows.tagCmds.button":xui.UI.$getTagCmdsTpl("button"),"rows.tagCmds.image":xui.UI.$getTagCmdsTpl("image")}},Appearances:{KEY:{display:"block",position:"absolute",overflow:"hidden"},"KEY .xuitgtd, KEY .xuitgth, KEY .xuitgtr":{border:"0!important",padding:"0!important",margin:"0!important",height:"auto!important",width:"auto!important"},"LTAGCMDS, RTAGCMDS":{padding:0,margin:0,"vertical-align":"middle"},"HFMARK, MARK":{"margin-right":".5em"},DIRTYMARK:{position:"absolute",width:"1em",height:"1em",left:"1px",top:"1px","z-index":10},BOX:{"border-collapse":"collapse",height:"100%",width:"100%"},"HEADER1, HEADER2":{"background-color":"#EDEDED",position:"relative",overflow:"hidden","text-align":"left"},"HI1, HI2":{position:"relative"},"GRPCELLBOX1, GRPCELLBOX2":{position:"absolute",overflow:"visible",left:0,top:0,width:0,height:0},"SCROLL11, SCROLL12, SCROLL21, SCROLL22":{position:"relative","text-align":"left"},"SCROLL11, SCROLL12, SCROLL21":{overflow:"hidden"},SCROLL22:{overflow:"auto"},ARROW:{position:"absolute","z-index":"20",left:0,top:0,display:"none",width:"auto",height:"auto","font-weight":"bold","text-align":"center","font-size":"2em"},"ARROW:before":{"margin-left":"-50%"},COLLIST:{position:"absolute","z-index":"10",left:0,top:0,cursor:"pointer",visibility:"hidden"},COLLISTDROP:{position:"absolute",left:0,bottom:0,cursor:"pointer"},"BODY11, BODY12, BODY21, BODY22":{overflow:"visible",position:"absolute",left:0,top:0},SORT:{position:"absolute",right:".25em",bottom:".25em"},HHANDLER:{position:"absolute",background:xui.browser.ie?"url("+xui.ini.img_bg+")":null,width:".5em",top:"0",right:"0",height:"100%",cursor:"e-resize"},"HCELLS1, HCELLS2, CELLS1, CELLS2":{"overflow-y":xui.browser.ie?"hidden":"",position:"relative",background:"transparent","white-space":"nowrap"},"HCELLS1, HCELLS2, GRPCELLBOX1, GRPCELLBOX2":{overflow:"visible"},"CELLS1, CELLS2":{overflow:"visible"},"CELLS1-group FCELL, CELLS2-group FCELL":{"border-right":0,"padding-right":"1px",overflow:"visible"},"CELLS1-group FCELLCAPTION, CELLS2-group FCELLCAPTION":{"font-weight":"bold"},"CELLS1-group FCELLCAPTION, CELLS1-group CELLA,  CELLS1-group GCELLA, CELLS1-group ROWNUM, CELLS2-group FCELLCAPTION, CELLS2-group CELLA, CELLS2-group GCELLA":{overflow:"visible"},"CELLS1-active, CELLS2-active, CELLA-active":{$order:5,"background-color":"#DDDDDD"},"CELLS1-hot, CELLS2-hot":{$order:6,"background-color":"#FFE97F"},"CELLS2-hot LTAGCMDS, CELLS2-hot RTAGCMDS":{$order:6,display:"none"},"CELLS1-checked, CELLS2-checked, CELLS1-checked .xui-node, CELLS2-checked .xui-node, CELLA-checked, CELLA-checked .xui-node":{$order:6,"background-color":"#ABABAB",color:"#fff"},"FCELL CELLA, GCELL GCELLA":{"text-align":"left"},"FHCELL HCELLA, HSCELLA":{"text-align":"center"},"CELLCAPTION,HCELLCAPTION,HSCELLCAPTION,SORT,HHANDLER":{"vertical-align":"middle"},"CELLCAPTION,HCELLCAPTION,HSCELLCAPTION,FCELLCAPTION,GRIDCAPTION":{"max-width":"100%","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden","font-size":"1em"},"FCELL FCELLCAPTION, FHCELL GRIDCAPTION":{display:"inline"},"CELL-textarea CELLCAPTION":{$order:10,"white-space":"normal"},FHANDLER:{position:"absolute",height:".5em",left:"0",width:"100%",bottom:"0",cursor:"n-resize","z-index":10},"FCELLCAPTION, ROWNUM":{"vertical-align":"middle",overflow:"hidden"},"FHCELL, HCELL, HSCELL":{padding:0,"vertical-align":"bottom"},"ROW1, ROW2":{position:"relative",zoom:xui.browser.ie?1:null,width:xui.browser.ie?"100%":null},ROWNUM:{"padding-right":".5em"},"FCELL, CELL":{height:"100%","padding-left":"1px",position:"relative",overflow:xui.browser.ie6?"hidden":"","vertical-align":"top",display:xui.$inlineBlock},GCELL:{height:"100%",width:"100%","padding-left":"1px",position:"relative",overflow:xui.browser.ie6?"hidden":"","vertical-align":"top",display:xui.$inlineBlock},"LHCELL, LCELL":{height:"100%",position:"relative","vertical-align":"top"},"CELLS1-alt, CELLS2-alt":{$order:1,"background-color":"#EFF8FF"},"CELL-input":{},"CELL-number, CELL-spin, CELL-currency":{"text-align":"right"},"CELL-counter":{"text-align":"center"},"CELL-checkbox":{"text-align":"center"},"KEY-tgbtn":{$order:100,width:"100%",padding:0,"vertical-align":"text-bottom","line-height":"100%",height:"100%"},"CELLS1-hover, CELLS2-hover":{$order:4,"background-color":"#F6F6F6"},'CELLA-hover, CELLA-hover .xui-node[class*="xui-treegrid-"]':{$order:5,"background-color":"#C5C5C5 !important"},"FCELL CELLA, GCELL GCELLA, HCELLA, HSCELLA":{position:"relative","text-overflow":"ellipsis"},"HCELLA, HSCELLA":{$order:3,"text-align":"center","vertical-align":"middle","line-height":"inherit"},"HCELLA, HSCELLA, CELLA, GCELLA":{display:"block",overflow:"hidden","-moz-box-flex":"1","outline-offset":"-1px","-moz-outline-offset":xui.browser.gek&&xui.browser.ver<3?"-1px !important":null,height:"100%",width:xui.browser.ie?"100%":"","line-height":"inherit"},"FCELL.editing CELLA, CELL.editing CELLA":{"text-overflow":"unset!important"},"FCELL.editing CELLCAPTION, CELL.editing CELLCAPTION":{visibility:"hidden!important"},"CELLA-inline":{$order:5,display:xui.$inlineBlock,width:"auto","-moz-box-flex":0},PROGRESS:{border:"none",height:"100%","line-height":"1.83333em",overflow:"visible",opacity:.7,"*filter":"alpha(opacity=70)"},"PROGRESS CELLCAPTION":{overflow:"visible"},"CHECKBOX, MARK":{cursor:"pointer","vertical-align":"middle"},"SUB1, SUM22":{zoom:xui.browser.ie?1:null,height:0,position:"relative",overflow:"visible"},ROWTOGGLE:{padding:"0 .334em 0 0"}},_objectProp:{rowOptions:1,colOptions:1},Behaviors:{HoverEffected:{ROWTOGGLE:"ROWTOGGLE",GCELL:"GCELLA",CELL:"CELLA",HCELL:["HCELLA","HSCELLA"],HSCELL:["HCELLA","HSCELLA"],FHCELL:"HCELLA",FCELL:"CELLA",CMD:"CMD",SCROLL22:"SCROLL22",BODY11:"BODY11",BODY12:"BODY12",BODY21:"BODY22",BODY22:"BODY22",HEADER1:"HEADER1",HEADER2:"HEADER2"},ClickEffected:{ROWTOGGLE:"ROWTOGGLE",GCELL:"GCELLA",CELL:"CELLA",HCELL:["HCELLA","HSCELLA"],HSCELL:["HCELLA","HSCELLA"],CMD:"CMD"},DraggableKeys:["FCELL"],DroppableKeys:["SCROLL21","SCROLL22","CELLS1","CELLS2","FCELL"],HFMARK:{onClick:function(e,t,i){if("multi"==e.properties.selMode||"multibycheckbox"==e.properties.selMode){var r=[];return xui.each(e.rowMap,(function(e){r.push(e.id)})),e._$checkAll?(delete e._$checkAll,e.boxing().setUIValue("",null,null,"checkbox"),xui.use(i).tagClass("-checked",!1),e.boxing().onRowSelected(e,"allrows",t,i,-1)):(e._$checkAll=!0,xui.use(i).tagClass("-checked"),e.boxing().setUIValue(r.join(e.properties.valueSeparator),null,null,"click"),e.boxing().onRowSelected(e,"allrows",t,i,1)),!1}}},TRLOCKED1:{onMouseover:function(e,t,i){e.box.$cancelHoverEditor(e)}},TRTAIL:{onMouseover:function(e,t,i){e.box.$cancelHoverEditor(e)}},TDBODY21:{onMouseover:function(e,t,i){e.box.$cancelHoverEditor(e)}},TRHEADER:{onMouseover:function(e,t,i){e.box.$cancelHoverEditor(e)}},SCROLL22:{onScroll:function(e,t,i){var r=xui.use(i).get(0),o=r.scrollLeft||0,n=r.scrollTop||0;e.$sl!=o&&e.getSubNodes(["HEADER2","SCROLL12"]).scrollLeft(e.$sl=o),e.$st!=n&&(e.getSubNode("SCROLL21").get(0).scrollTop=e.$st=n,(n=e.getSubNode("SCROLL21").get(0).scrollTop)&&n!=e.$st&&(r.scrollTop=e.$st=n))},onMousedown:function(e,t,i){xui.Event.getSrc(t)==xui(i).get(0)&&e.__hastmpRow&&e.__needchecktmprow&&e.box._checkNewLine(e,"oninner")}},SCROLL21:{onScroll:function(e,t,i){var r=xui.use(i).get(0).scrollTop||0;e.$st!=r&&(e.getSubNode("SCROLL22").get(0).scrollTop=e.$st=r)},onMousedown:function(e,t,i){xui.Event.getSrc(t)==xui(i).get(0)&&e.__hastmpRow&&e.__needchecktmprow&&e.box._checkNewLine(e,"oninner")}},HEADER2:{onScroll:function(e,t,i){var r=xui.use(i).get(0).scrollLeft||0;e.$sl!=r&&e.getSubNodes(["SCROLL12","SCROLL22"]).scrollLeft(e.$sl=r)}},SCROLL12:{onScroll:function(e,t,i){var r=xui.use(i).get(0).scrollLeft||0;e.$sl!=r&&e.getSubNodes(["HEADER2","SCROLL22"]).scrollLeft(e.$sl=r)}},HHANDLER:{beforeMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t)){var r,o=e.properties,n=e.getSubId(i),a=e.colMap[n],s=(r=a&&a._isgroup?e.getSubNode("HHANDLER",e.properties.header[a.to]._serialId):xui(i)).parent(2).width()-e.$px(o._minColW),u=e.getSubNode("SCROLL22"),l=u.offset().left+u.width()-xui.Event.getPos(t).left-4;if(o.disabled)return!1;if(a&&a.disabled)return!1;r.startDrag(t,{horizontalOnly:!0,dragType:"blank",dragDefer:2,maxLeftOffset:s,maxRightOffset:l,targetReposition:!1}),xui.use(i).parent(2).onMouseout(!0,{$force:!0}).onMouseup(!0)}},onDragbegin:function(e,t,i){xui.DragDrop.getProfile().proxyNode.css({height:e.getRoot().height()+"px",width:"4px",backgroundColor:"#DDDDDD",cursor:"e-resize"})},onDrag:function(e,t,i){var r=xui.DragDrop.getProfile(),o=0;(r.x<=r.restrictedLeft||r.x>=r.restrictedRight)&&(o=!0),o?e._limited||(r.proxyNode.css("backgroundColor","#ff6600"),e._limited=!0):e._limited&&(r.proxyNode.css("backgroundColor","#DDDDDD"),e._limited=0)},onDragstop:function(e,t,i){e.properties;var r=xui(i).parent(2),o=e.keys,n=e.colMap[e.getSubId(i)],a=r.width(),s=a+xui.DragDrop.getProfile().offset.x;if(n&&(n&&n._isgroup&&(n=e.properties.header[n.to],r=e.getSubNode("HCELL",n._serialId)),n.hasOwnProperty("maxWidth")&&(s=Math.min(e.$px(n.maxWidth),s)),n.hasOwnProperty("minWidth")&&(s=Math.max(e.$px(n.minWidth),s))),e.beforeColResized&&!1===e.boxing().beforeColResized(e,n?n.id:null,s))e._limited=0;else{if(u=e.$forceu(s),r.width(u),n){if(n.flexSize){var u=parseFloat(n.width),l=s/e._relAvailable,d=a/e._relAvailable;n.width=(u/d-u)*l/(1-l)+e.$picku(n.width)}else n.width=u;n._colWidth=u}var c=[];if(e.getKey(xui.use(i).parent(2).id())==o.FHCELL)e.box._setRowHanderW(e,s);else{var p,h=n._cells;xui.each(h,(function(t){(p=e.getSubNode(o.CELL,t)).isEmpty()||c.push(p.id())})),e.box._adjusteditorW(e,xui(c).width(u),s)}e.afterColResized&&e.boxing().afterColResized(e,n?n.id:null,s),e.getSubNode("SCROLL22").onScroll(),e.box._adjustColsWidth(e),e.box._adjustBody(e,"setcol"),e._limited=0}},onClick:function(){return!1},onDblclick:function(e,t,i){var r=e.properties,o=xui.use(i).parent(2),n=e.getSubId(i),a=e.colMap[n];if(a&&a._isgroup&&(a=e.properties.header[a.to],o=e.getSubNode("HCELL",a._serialId)),!(a&&a.flexSize||e.getRootNode().clientHeight<=0))if(e.getKey(xui.use(i).parent(2).id())!=e.keys.FHCELL){var s,u,l,d=a._cells,c=e.getClass("CELLA","-inline"),p=[],h=[];if(xui.each(d,(function(t){(s=e.getSubNode("CELLA",t))._nodes.length&&(p.push(s.get(0)),h.push(s.addClass(c).width()))})),"infirstcell"==r.treeMode&&r.header[0]==a&&e.getSubNode("GCELLA",!0).each((function(e){h.push(xui(e).addClass(c).width()),xui(e).removeClass(c)})),h.push(e.$px(r._minColW)),(u=parseFloat(Math.max.apply(null,h)))>e.$px(r._maxColW)&&(u=e.$px(r._maxColW)),!e.beforeColResized||!1!==e.boxing().beforeColResized(e,a?a.id:null,u))return a&&(a.hasOwnProperty("maxWidth")&&(u=Math.min(e.$px(a.maxWidth),u)),a.hasOwnProperty("minWidth")&&(u=Math.max(e.$px(a.minWidth),u))),u+=2,l=e.$forceu(u),e.box._adjusteditorW(e,xui(p).parent().width(l),u),o.width(a.width=a._colWidth=l),xui(p).removeClass(c),e.afterColResized&&e.boxing().afterColResized(e,a.id,u),e.box._adjustColsWidth(e),e.box._adjustBody(e,"setcol"),!1}else e.box._setRowHanderW(e,!0)}},FHANDLER:{beforeMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t)){var r=e.properties,o=e.rowMap[e.getSubId(i)],n=xui(i),a=n.parent(3).height()-e.$px(r._minRowH),s=e.getSubNode("SCROLL21"),u=s.offset().top+s.height()-xui.Event.getPos(t).top-4;if(r.disabled||o&&o.disabled)return!1;n.startDrag(t,{verticalOnly:!0,dragType:"blank",dragDefer:2,maxTopOffset:a,maxBottomOffset:u,targetReposition:!1}),xui.use(i).parent(2).onMouseout(!0,{$force:!0}).onMouseup(!0),o||e.getSubNode("COLLIST").css("visibility","hidden")}},onDragbegin:function(e,t,i){xui.DragDrop.getProfile().proxyNode.css({width:e.getRoot().width()+"px",height:"4px",backgroundColor:"#DDDDDD",cursor:"n-resize"})},onDrag:function(e,t,i){var r=xui.DragDrop.getProfile(),o=0;(r.y<=r.restrictedTop||r.y>=r.restrictedBottom)&&(o=!0),o?e._limited||(r.proxyNode.css("backgroundColor","#ff6600"),e._limited=!0):e._limited&&(r.proxyNode.css("backgroundColor","#DDDDDD"),e._limited=0)},onDragstop:function(e,t,i){var r=e.getSubId(i),o=xui(i).parent(3),n=o.height()+xui.DragDrop.getProfile().offset.y,a=e.rowMap[e.getSubId(i)],s=e.properties;s.header,s.headerHeight,xui.browser.ie&&xui.browser.ver<=8&&n%2==1&&(n+=1),e.beforeRowResized&&!1===e.boxing().beforeRowResized(e,a?a.id:null,n)||(e.getKey(xui.use(i).parent(2).id())==e.keys.FHCELL?(s.headerHeight=e.$forceu(n),e.box._adjustColsHeight(e),e.adjustSize()):(a.height=e.$forceu(n),e.getSubNode("CELLS2",r).height(a.height),o.height(a._rowHeight=a.height),e.box._adjusteditorH(e,o,a._rowHeight)),e.afterRowResized&&e.boxing().afterRowResized(e,a?a.id:null,n),e.box._adjustBody(e,"setrow")),e._limited=0},onDblclick:function(e,t,i){var r,o,n=e.properties,a=e.getSubId(i);if(!(e.getRootNode().clientHeight<=0)){if(a){r=e.rowMap[a];var s=(o=e.getSubNodes(["CELLS2","CELLS1"],a)).height("auto").height();if(e.beforeRowResized&&!1===e.boxing().beforeRowResized(e,r.id,s))return;o.height(r.height=r._rowHeight=e.$forceu(s)),e.box._adjusteditorH(e,o,s)}else{if(s=(e._headerLayers||1)*e.$px(e.box.$DataStruct.headerHeight),e.beforeRowResized&&!1===e.boxing().beforeRowResized(e,null,s))return;e.box._adjustColsHeight(e,!0),n.headerHeight=e.$forceu(s,e.$picku(n.headerHeight)),e.adjustSize()}return e.afterRowResized&&e.boxing().afterRowResized(e,r?r.id:null,s),e.box._adjustBody(e,"setrow"),!1}},onClick:function(){return!1}},ROWTOGGLE:{onClick:function(e,t,i){var r,o=e.properties,n=e.rowMap[e.getSubId(i)];if(n||(r=e.cellMap[e.getSubId(i)])&&(n=r._row),n){if(o.disabled||n.disabled)return!1;if(n.sub)return e.box._setSub(e,n,!n._checked),!1}},beforeMousedown:function(){return!1}},HSCELLA:{onClick:function(e,t,i){e.getSubNode("HCELLA",e.getSubId(i)).onClick(!0)}},HCELLA:{onClick:function(e,t,i){var r=e.properties,o=e.getSubId(i),n=e.colMap[o];if(n){if(e.onClickHeader&&e.boxing().onClickHeader(e,n,t,i),r.disabled||n.disabled)return!1;if(!(n.hasOwnProperty("colSortable")?n.colSortable:r.colSortable))return}else{if(e.onClickGridHandler&&e.boxing().onClickGridHandler(e,t,i),r.disabled)return!1;if(!r.colSortable)return}if(n&&n._isgroup&&(n=e.properties.header[n.from]),e.beforeColSorted&&!1===e.boxing().beforeColSorted(e,n))return!1;var a,s,u,l=(n?n._order:e._order)||!1,d=(n?n.type:null)||"input",c=n?n.sortby:null,p=n?xui.arr.indexOf(r.header,n):-1,h=arguments.callee,f=h.fun||(h.fun=function(e,t,i,r,o,n,a,s){var u,l,d,c=arguments.callee;t?(u=t.sub,l=e.getSubNode("SUB1",t._serialId).get(0),d=e.getSubNode("SUB2",t._serialId).get(0)):(t={_inited:!0},u=e.properties.rows,l=e.getSubNode("ROWS21").get(0),d=e.getSubNode("ROWS22").get(0));var p,h,f,x=[],g=[],m=[],b=[],v=[],y=[],A=[];if(xui.arr.each(u,(function(t){1!=t._region&&(t.sub&&t.sub.length>1&&c(e,t,i,r,o,n,null),x[x.length]=-1==i?t.caption:(p=t.cells)?(p=p[i])?p.value:"":t[i],m[m.length]=-1==i?t:(p=t.cells)?p[i]:t[i],g[g.length]=g.length)})),"function"!=typeof o){switch(r){case"number":case"spin":case"counter":case"currency":h=function(e){return parseFloat(e)||0};break;case"datetime":case"date":h=function(e){return xui.isDate(e)?e.getTime():xui.isFinite(e)?parseInt(e,10):0};break;default:h=function(e){return e||""}}f=function(e,t){var i=h(x[e]),r=h(x[t]);return i>r?n?1:-1:i===r?e>t?-1:1:n?-1:1}}else f=function(t,r){return o.apply(e,[t,r,x,n,i,m])};g.sort(f);var _=t._inited,w=xui.copy(u);if(_&&(b=l.childNodes,v=d.childNodes),xui.arr.each(g,(function(e,t){u[t]=w[e],_&&(y[t]=b[e],A[t]=v[e])})),_){for(var C=document.createDocumentFragment(),I=document.createDocumentFragment(),E=0;p=y[E];E++)C.appendChild(p);for(E=0;p=A[E];E++)I.appendChild(p);a?(l.insertBefore(C,a),d.insertBefore(I,s)):(l.appendChild(C),d.appendChild(I))}});e.__hastmpRow&&(a=e.properties.rows.pop(),s=e.getSubNode("ROWS21").get(0).lastChild,u=e.getSubNode("ROWS22").get(0).lastChild),f(e,null,p,d,c,l,s,u),e.__hastmpRow&&e.properties.rows.push(a),e.getSubNode("SORT",!0).css("display","none");var x=(n?e.getSubNode("SORT",n._serialId):e.getSubNode("SORT")).css("display","");x.tagClass("-checked",n?!(n._order=!n._order):!(e._order=!e._order)),e.box._asy(e),delete e.$allrowscache1,delete e.$allrowscache2,e.afterColSorted&&e.boxing().afterColSorted(e,n)},beforeMousedown:function(e,t,i){if("left"==xui.Event.getBtn(t)){var r=e.properties;if(!r.disabled){var o=e.colMap[e.getSubId(i)];if(o&&!o._isgroup){if(r.disabled||o.disabled)return!1;if("infirstcell"==r.treeMode&&r.header[0]==o)return!1;if((o.hasOwnProperty("colMovable")?o.colMovable:r.colMovable)&&!1!==e.boxing().beforeColDrag(e,o.id)){var n=xui.Event.getPos(t),a=xui(i);e.getSubId(i),a.startDrag(t,{dragType:"icon",shadowFrom:a.parent(),dragCursor:"pointer",targetLeft:n.left+12,targetTop:n.top+12,targetReposition:!1,dragDefer:2,dragKey:e.$xid+":col",dragData:a.parent().id(),tagVar:o._region})}}}}},onDragbegin:function(e,t,i){xui(i).parent().onMouseout(!0,{$force:!0}),xui(i).onMouseup(!0)},beforeMouseover:function(e,t,i){var r=e.properties,o=e.getSubId(i),n=e.colMap[o];if(n&&!n._isgroup){if(r.disabled||n.disabled)return!1;var a=xui.DragDrop.getProfile();if(a.dragData&&a.dragKey==e.$xid+":col"&&a.tagVar==n._region){var s=xui.use(i).parent().xid();if(!1!==e.box._colDragCheck(e,s)){xui.DragDrop.setDropElement(i).setDropFace(i,"move");var u=xui.use(s).get(0),l=u.offsetLeft+(2==n._region?e._leftregionw:0),d=u.offsetTop+u.offsetHeight;e.getSubNode("ARROW").left(l).top(d).css("display","block")}}}},beforeMouseout:function(e,t,i){var r=e.properties,o=e.getSubId(i),n=e.colMap[o];if(n){if(r.disabled||n.disabled)return!1;var a=xui.DragDrop.getProfile();if(a.dragData&&a.dragKey==e.$xid+":col"){var s=xui.use(i).parent().xid();xui.DragDrop.setDropElement(null).setDropFace(null,"none"),!1!==e.box._colDragCheck(e,s)&&e.getSubNode("ARROW").css("display","none")}}},onDrop:function(e,t,i){var r=e.properties,o=e.box,n=e.getSubId(i),a=xui.UI.$tag_subId,s=e.colMap[n];if(s){if(r.disabled||s.disabled)return!1;var u=xui.use(i).parent().xid();if(e.getSubNode("ARROW").css("display","none"),!1!==o._colDragCheck(e,u)){var l=xui.DragDrop.getProfile().dragData,d=l&&e.getSubId(l),c=e.getSubId(u),p=e.colMap,h=p[d],f=p[c];if(!1!==e.boxing().beforeColMoved(e,h.id,f.id)){xui.DragDrop.setDropFace(u,"none");var x=xui.arr.subIndexOf(r.header,"_serialId",d),g=xui.arr.subIndexOf(r.header,"_serialId",c);if(x!==g&&x!==g-1){e.getSubNode("HCELL",c).addPrev(xui(xui.DragDrop.getProfile().dragData)),xui.each(f._cells,(function(t,i){e.getSubNode("CELL",t).addPrev(e.getSubNode("CELL",h._cells[i]))}));var m=r.header[x];xui.arr.insertAny(r.header,m,g),xui.arr.removeFrom(r.header,x+(x>g?1:0));var b=e.queryItems(r.rows,!0,!0);xui.arr.each(b,(function(e){(e=e.cells?e.cells:e)&&xui.isArr(e)&&(m=e[x],xui.arr.removeFrom(e,x),xui.arr.insertAny(e,m,g))}));var v=r.grpCols;if(v&&xui.isArr(v)&&v.length){for(var y=0,A=v.length;y<A;y++)(_=v[y]).from>g?(_.from++,_.to++):g>=_.from&&g<=_.to&&_.to++;var _;for(y=0,A=v.length;y<A;y++)(_=v[y]).from>x?(_.from--,_.to--):x>=_.from&&x<=_.to&&_.to--;xui.filter(v,(function(t){var i=t.to>=t.from;return!i&&e.renderId&&(e.getSubNodes(["HCELL","HSCELL"],t[a]).remove(),delete e.colMap[t[a]],delete e.colMap2[t.id]),i})),r.grpCols=o._adjustGrpColsData(e,v),o._adjustColsWidth(e),o._adjustColsHeight(e)}e.boxing().afterColMoved(e,h.id,f.id),delete e.$allrowscache1,delete e.$allrowscache2}}}}},onMouseover:function(e,t,i){var r=e.properties,o=e.getSubId(i),n=e.colMap[o];if(n){if(r.disabled||n.disabled)return!1;if(!(n.hasOwnProperty("colHidable")?n.colHidable:r.colHidable))return;if(!(n.hasOwnProperty("colDroppable")?n.colDroppable:r.colDroppable))return}else{if(r.disabled)return!1;if(!r.colHidable)return}xui.resetRun(e.$xid+":collist",null);var a={},s=xui.use(i).parent().offset(null,e.getSubNode("BOX")),u=xui.use(i).parent().cssSize();u.width<16||(a.height=e.$forceu(u.height),a.left=e.$forceu(s.left),a.top=e.$forceu(s.top),e.getSubNode("COLLIST").cssRegion(a).css("visibility","visible"))},onMouseout:function(e,t,i){var r=e.properties,o=e.getSubId(i),n=e.colMap[o];if(n){if(r.disabled||n.disabled)return!1;if(!(n.hasOwnProperty("colHidable")?n.colHidable:r.colHidable))return}else{if(r.disabled)return!1;if(!r.colHidable)return}xui.resetRun(e.$xid+":collist",(function(){e.box&&e.getSubNode("COLLIST").css({visibility:"hidden",left:0+e.$picku(),top:0+e.$picku()})}))},onContextmenu:function(e,t,i){if(e.onContextmenu){var r=e.getSubId(i);return!1!==e.boxing().onContextmenu(e,t,i,r?e.colMap[r]:null)}}},COLLIST:{onMouseover:function(e,t,i){xui.resetRun(e.$xid+":collist",null)},onMouseout:function(e,t,i){xui.resetRun(e.$xid+":collist",(function(){e.box&&xui.use(i).css("visibility","hidden")}))},onClick:function(e,t,i){var r=e.properties;if(!e.$col_pop){var o=[];xui.arr.each(e.properties.header,(function(e){(e.hasOwnProperty("colHidable")?e.colHidable:r.colHidable)&&o.push({id:e.id,caption:e.caption,type:"checkbox",value:!0!==e.hidden})})),o.length&&(e.$col_pop=new xui.UI.PopMenu({hideAfterClick:!1,items:o}).render(!0)).onMenuSelected((function(t,i,r){var o=1;xui.arr.each(t.properties.items,(function(e){if(!1!==e.value)return o=!1})),o?(t.getSubNodeByItemId("CHECKBOX",i.id).tagClass("-checked"),i.value=!0):e.boxing().showColumn(i.id,i.value)}))}e.$col_pop&&e.$col_pop.popUp(i)}},CELLS2:{afterMouseover:function(e,t,i){var r=e.properties;if(!r.disabled&&!(!0===r.disableHoverEffect||r.disableHoverEffect&&/\bCELLS2\b/.test(r.disableHoverEffect||""))){var o=e.getSubId(i);if(e.getSubNodes(["CELLS1","CELLS2"],o).tagClass("-hover"),e.onRowHover){var n=e.rowMap[o];e.boxing().onRowHover(e,n,!0,t,i)}}},afterMouseout:function(e,t,i){var r=e.properties;if(!r.disabled&&!(!0===r.disableHoverEffect||r.disableHoverEffect&&/\bCELLS2\b/.test(r.disableHoverEffect||""))){var o=e.getSubId(i);if(e.getSubNodes(["CELLS1","CELLS2"],o).tagClass("-hover",!1),e.onRowHover){var n=e.rowMap[o];e.boxing().onRowHover(e,n,!1,t,i)}}},onDblclick:function(e,t,i){for(var r=e.properties,o=e.rowMap[e.getSubId(i)],n=xui.Event.getSrc(t),a=n&&(n.id||""),s=e.keys,u=e.getKey(a);!u;)n=n.offsetParent,u=e.getKey(a=n.id);return!o||r.disabled||o.disabled||a&&xui.UIProfile.getFromDom(a)!=e||u==s.ROWTOGGLE||u==s.MARK||e.onDblclickRow&&e.boxing().onDblclickRow(e,o,t,i),!1},onClick:function(e,t,i){var r=e.properties,o=e.getSubId(i),n=(e.keys,e.rowMap[o]),a=xui.Event.getSrc(t).id||"";return!r.disabled&&!n.disabled&&(!a||xui.UIProfile.getFromDom(a)==e)&&void(e.onClickRow&&e.boxing().onClickRow(e,n,t,i))}},CELL:{onMouseover:function(e,t,i){if(0!=e.box.$cancelHoverEditor(e)){var r=e.box,o=e.properties,n=xui.use(i).id();if(!0!==o.disableHoverEffect&&(!o.disableHoverEffect||!/\bCELL\b/.test(o.disableHoverEffect||""))&&(n=n.split(":")[2])&&(n=e.cellMap[n])&&!r.getCellOption(e,n,"disabled")){var a=r.getCellOption(e,n,"editMode");return r.getCellOption(e,n,"editable")&&xui.str.startWith(a,"hover")&&("hoversharp"!=a||"file"!=r.getCellOption(e,n,"type"))?(xui.resetRun(e.key+":"+e.$xid+":hovereditor",(function(t){e.destroyed||(t=e.getSubId(i))&&e.box._editCell(e,t,!0)})),!1):void 0}}}},GCELL:{onMouseover:function(e,t,i){e.box.$cancelHoverEditor(e)}},CELLA:{onDblclick:function(e,t,i){var r=e.cellMap[e.getSubId(i)];if(r&&!e.properties.disabled){var o=e.box.getCellOption,n=o(e,r,"type"),a=o(e,r,"disabled"),s=o(e,r,"editable");return!!(a||s&&"button"!=n&&"label"!=n||(e.boxing().onDblclickCell(e,r,t,i,r._row,r._col),"button"!=n))&&void 0}},afterMousedown:function(e,t,i){xui.setNodeData(i,"_tmp_forcefocus")},onClick:function(e,t,i){var r,o=e.properties,n=e.box,a=n.getCellOption,s=e.cellMap[e.getSubId(i)];if(s){if(e.properties.disabled)return!1;var u=a(e,s,"type"),l=a(e,s,"disabled"),d=a(e,s,"readonly"),c=a(e,s,"onClickCell")||a(e,s,"event"),p=o.activeMode,h=a(e,s,"editable");if(!(l||h&&"button"!=u&&"label"!=u)&&("function"==typeof c&&!1===c.call(e._host||e,e,s,t,i,s._row,s._col)||e.onClickCell&&e.boxing().onClickCell(e,s,t,i,s._row,s._col),"button"==u))return!1;if(!l&&!d&&"checkbox"==u&&h){var f=s.value;n._updCell(e,s,!f,o.dirtyMark,!0,!0),(t=xui.get(s,["editorEvents","onChange"]))&&t(null,f,!f),e.box._trycheckrowdirty(e,s),s._row.id==e.box._temprowid&&(e.__needchecktmprow=!0,e.box._sethotrowoutterblur(e))}if(o.editable)"row"==o.activeMode&&(r=xui(i).parent(3).id(),n._sel(e,"row",i,r,t));else if("cell"==p){if(a(e,s,"disabled"))return!1;r=xui(i).parent().id(),n._sel(e,"cell",i,r,t)}else if("row"==p){if(o.disabled||s._row.disabled)return!1;r=xui(i).parent(3).id(),n._sel(e,"row",i,r,t)}}else{var x=e.rowMap[e.getSubId(i)];if(c=a(e,x,"onClickCell")||a(e,x,"event"),o.disabled||x.disabled)return!1;if(e.keys.MARK)var g=e.getKey(xui.Event.getSrc(t).id||"")==e.keys.MARK;g||("function"==typeof c&&!1===c.call(e._host||e,e,x,null,null,t,i)||e.onClickRowHandler&&e.boxing().onClickRowHandler(e,x,t,i),x.group&&e.box._getToggleNode(e,x._serialId).onClick()),"row"==o.activeMode&&(r=xui(i).parent(3).id(),n._sel(e,"row",i,r,t))}e.box&&xui.use(i).get(0)&&(xui.getNodeData(i,"_tmp_forcefocus")||e.box._focusEvent(e,t,i))},onFocus:function(e,t,i){xui.setNodeData(i,"_tmp_forcefocus",1),e.box._focusEvent(e,t,i)},onKeydown:function(e,t,i){var r=xui.Event.getKey(t),o=r.key,n=e.cellMap[e.getSubId(i)],a=e.box.getCellOption(e,n,"type");if("enter"==o){if("button"==a||"label"==a||"checkbox"==a)return void xui(i).onClick();o="tab"}else if(" "==o&&("button"==a||"label"==a||"checkbox"==a))return void xui(i).onClick();if({tab:1,left:1,right:1,up:1,down:1}[o]){if(e.beforeCellKeydown&&!1===e.boxing().beforeCellKeydown(e,n,r))return!1;var s,u=e.properties,l=r.shiftKey,d=r.ctrlKey,c=xui(i),p=n?n._row:e.rowMap[e.getSubId(i)],h=p&&p.id==e.box._temprowid,f=e.getSubNode("SCROLL11"),x=e.getSubNode("SCROLL12"),g=e.getSubNode("SCROLL21"),m=e.getSubNode("SCROLL22"),b=new RegExp("^"+e.box.$Keys.CELLA+":"+e.serialId+":"),v=!!x.offsetWidth(),y=!!g.offsetWidth(),A=!!m.offsetHeight(),_=f.nextFocus(!0,!0,!1,b),w=x.nextFocus(!0,!0,!1,b),C=g.nextFocus(!0,!0,!1,b),I=m.nextFocus(!0,!0,!1,b),E=f.nextFocus(!1,!0,!1,b),S=x.nextFocus(!1,!0,!1,b),D=g.nextFocus(!1,!0,!1,b),k=m.nextFocus(!1,!0,!1,b),$=v?y?_:w:y?C:I,N=m?k:x?S:g?D:E,M=c.parent(),T=M.parent().id(),R=e.getSubId(T),B=n?n._row._region+""+n._col._region:p._region+"1",L=function(t){if(i!=$.xid()){var r;if(!M.get(0).previousSibling||!M.get(0).previousSibling.clientWidth)switch(B){case"11":case"21":if(A)if(i==C.xid())S.focus(!0),r=1;else{var o=e.getSubNode("ROW2",R).prev();o&&(o.nextFocus(!1,!0,!0,b),r=1)}break;case"12":case"22":y&&(e.getSubNode("CELLS1",R).last(2).focus(!0),r=1)}return r||c.nextFocus(!1,!1,!0,b),!1}t&&N.focus(!0)},F=function(t){if(i!=N.xid()){var r;if("11"==B||"21"==B?!M.get(0).nextSibling:!(s=M.get(0).nextSibling)||!s.clientWidth)switch(B){case"11":case"21":A&&(e.getSubNode("CELLS2",R).first(2).focus(!0),r=1);break;case"12":case"22":if(y)if(i==S.xid())C.focus(!0),r=1;else{var o=e.getSubNode("ROW1",R).next();o&&(o.nextFocus(!0,!0,!0,b),r=1)}}return r||c.nextFocus(!0,!1,!0,b),!1}t&&P()},O=function(t){for(var i=1,r=c.parent().get(0),n=r.parentNode.childNodes.length;r=r.previousSibling;)i++;r=c.parent(2).get(0),e.$allrowscache2||e.box._cacheRows(e);var a=xui.arr.indexOf("12"==B||"22"==B?e.$allrowscache2:e.$allrowscache1,r),s=e.$allrowscache2.length,u=0;"up"==o?-1==--a&&(a=s-1,0==--i&&(i=n)):++a==s&&(u=1,a=0,++i==n+1&&(i=1));var l=xui(("12"==B||"22"==B?e.$allrowscache2:e.$allrowscache1)[a]).first(),d=l;return i>1&&(d=d.next(i-1)),d.isEmpty()&&(d=l),d&&!d.isEmpty()&&(d=d.first()),d.isEmpty()?null:[d,u]},P=function(){var t;if(i!=N.xid()?(c.get(0)!=E.get(0)&&c.get(0)!=D.get(0)||(t=v?w:I),t||(t=(t=O())[0])):t=$,h){if(!n&&!e.rowMap[e.getSubId(i)])return!1;var r=xui.get(n,["_col","id"]);if(e.box._checkNewLine(e,"keydown",r)&&e.__hastmpRow)return!1}t&&t.focus(!0)};switch(o){case"tab":if(l){if(!1===L(h))return!1}else if(!1===F(h))return!1;break;case"left":if(!1===L(!0))return!1;break;case"right":if(!1===F(!0))return!1;break;case"up":return d&&p&&!u.disabled&&!p.disabled&&(p.group||p.sub)?(e.box._getToggleNode(e,p._serialId).onClick(),!1):(function(){var t;if(i!=$.xid()?(c.get(0)!=w.get(0)&&c.get(0)!=I.get(0)||(t=y?D:E),t||(t=O()[0])):t=N,h){if(!n&&!e.rowMap[e.getSubId(i)])return!1;var r=xui.get(n,["_col","id"]);if(e.box._checkNewLine(e,"keydown",r)&&e.__hastmpRow)return!1}t&&t.focus(!0)}(),!1);case"down":return d&&p&&!u.disabled&&!p.disabled&&(p.group||p.sub)?(e.box._getToggleNode(e,p._serialId).onClick(),!1):(P(),!1)}}},onContextmenu:function(e,t,i){if(e.onContextmenu){var r=e.getSubId(i);return!1!==e.boxing().onContextmenu(e,t,i,r?e.cellMap[r]||e.rowMap[r]:null)}}},CMD:{onFocus:function(e,t,i){return!1},onClick:function(e,t,i){var r=e.properties,o=xui.use(i).id().split("_"),n=o[o.length-1];o.pop();var a=e.rowMap[e.getSubId(o.join("_"))];return r.disabled||a&&a.disabled||e.onCmd&&e.boxing().onCmd(e,a,n,t,i),!1}}},DataModel:{directInput:!0,listKey:null,currencyTpl:"$ *",numberTpl:"",valueSeparator:";",activeRow:{hidden:!0,ini:null},activeCell:{hidden:!0,ini:null},rowMap:{hidden:!0,ini:null},selMode:{ini:"none",listbox:["single","none","multi","multibycheckbox"],action:function(e){this.getSubNodes(["HFMARK","MARK"],!0).css("display","multi"==e||"multibycheckbox"==e?"":"none")}},editMode:{ini:"focus",listbox:["focus","sharp","hover","hoversharp","inline"]},dock:"fill",togglePlaceholder:!1,isFormField:{hidden:!0,ini:!1},altRowsBg:{ini:!1,action:function(e){var t,i,r=this,o=r.getClass("CELLS1","-alt"),n=r.getSubNode("CELLS1",!0),a=r.getSubNode("CELLS2",!0);n.removeClass(o),a.removeClass(o),e&&(t=0,a.each((function(e,r){e.clientHeight&&(e=xui([e]),i=xui([n.get(r)]),t++%2==1?(i.hasClass(o)||i.addClass(o),e.hasClass(o)||e.addClass(o)):(i.hasClass(o)&&i.removeClass(o),e.hasClass(o)&&e.removeClass(o)))})))}},rowNumbered:{ini:!1,action:function(e){var t,i,r,o=this,n=o.CF.getNumberedStr||function(e){return e},a=o.getSubNode("ROWNUM",!0),s=0,u=o.rowMap,l=0,d=0,c=[],p=[],h="";a.css("display",e?"":"none"),e?a.each((function(e){if((t=u[o.getSubId(e.id)])&&t.id!=o.box._temprowid){if((d=t._layer)>l)c.push(s),p.push(h),h=h+s+".",s=0;else if(d<l)for(;d<l--;)s=c.pop(),h=p.pop();s++,l=d,t._autoNumber=n(h+s),i=t.rowNumber||t._autoNumber,(r=e.firstChild)?r.nodeValue!=i&&(r.nodeValue=i):e.appendChild(document.createTextNode(i))}})):a.text("")}},editable:!1,firstCellEditable:!1,$subMargin:"1.375em",iniFold:!0,animCollapse:!1,position:"absolute",width:"25em",height:"18em",_minColW:".5em",_maxColW:"25em",_minRowH:"1.83333em",gridHandlerCaption:{ini:"",action:function(e){e=(xui.isSet(e)?e:"")+"",this.getSubNode("GRIDCAPTION").html(xui.adjustRes(e,!0))}},rowHandlerWidth:{$spaceunit:1,ini:"5em",set:function(e){var t=this;t.renderId?t.box._setRowHanderW(t,e):t.properties.rowHandlerWidth=e}},showHeader:{ini:!0,action:function(e){this.getSubNodes(["HEADER1","HEADER2"]).css("display",e?"":"none")}},headerHeight:{$spaceunit:1,ini:"2em",action:function(e){var t=this;t.properties,t.box._adjustColsHeight(t),t.adjustSize()}},rowHeight:{$spaceunit:1,ini:"2em",action:function(e){this.box._adjusteditorH(this,this.getSubNodes(["CELLS1","CELLS2"],!0).height(e),e)}},_colDfWidth:"8em",rowHandler:{ini:!0,action:function(e){this.getSubNode("FHCELL").css("display",e?"":"none"),this.getSubNode("FCELL",!0).css("display",e?"":"none"),this.box._adjustColsWidth(this),this.box._adjustBody(this,"rowhandler")}},rowResizer:{ini:!1,action:function(e){this.getSubNode("FHANDLER",!0).css("display",e?"":"none")}},colHidable:!1,colResizer:{ini:!0,action:function(e){this.getSubNode("HHANDLER",!0).css("display",e?"":"none")}},colSortable:{ini:!0,action:function(e){e||this.getSubNode("SORT",!0).css("display","none")}},colMovable:!1,header:{ini:{},set:function(e){var t=this;t.renderId?t.boxing()._refreshHeader(e):t.properties.header=xui.copy(e)}},uidColumn:"",grpCols:{ini:{},set:function(e){var t=this;t.properties.grpCols=xui.copy(e),t.renderId&&t.boxing()._refreshHeader(xui.clone(t.properties.header,!1,2))}},rows:{ini:{},set:function(e){var t=this;t.renderId?t.boxing().removeAllRows(!1).insertRows(e):t.properties.rows=xui.copy(e)}},rawData:{ini:[],set:function(e){if(e&&xui.isArr(e)&&e.length){var t,i,r,o={},n=[],a=[],s=[],u=e.length,l=this.boxing(),d=l.getHeader("min");for(t=0;t<u;t++)if(xui.isHash(r=e[t]))for(var c in r)"__row__id"==c?(a[t]=a[t]||{},a[t].id=r[c]):0==c.indexOf("__row__")?(a[t]=a[t]||{},a[t][c]=r[c]):(c in o||(o[c]=[]),o[c][t]=r[c]);if(null==d||0==d.length){for(var c in o)n.push(c);l.setHeader(n)}else{var p;for(var c in n=l.getHeader("data"),o)-1==xui.arr.indexOf(d,c)&&(n.push({id:c,caption:"["+c+"]"}),p=1);p&&l.setHeader(n,!0)}n=l.getHeader();var h={};for(var c in xui.arr.each(n,(function(e,t){h[e.id]=t})),o)if(c in h)for(i=h[c],t=0;t<u;t++)s[t]||(s[t]=[]),s[t][i]=o[c][t];a.length&&xui.each(s,(function(e,t){a[t]&&(s[t]=a[t],s[t].cells=e)})),l.setRows(s)}else this.boxing().removeAllRows()},get:function(e,t){var i,r,o,n=this.properties,a=n.header,s=this.box._temprowid,u=e&&e.cells&&xui.isArr(e.cells),l=u?[e]:xui.isArr(e)&&e[0]&&e[0].cells&&xui.isArr(e[0].cells)?e:n.rows,d=a.length,c=l.length,p=[],h=[];if(c){for(var f=0;f<d;f++)p.push(a[f].id);for(var x=0;x<c;x++)if((u||l[x].id!=s)&&!l[x].group&&l[x].cells){var g={};for(f=0;f<d;f++)r=p[f],i=l[x].cells[f],t&&-1!=r.indexOf(":")?(g[(o=r.split(":"))[0]]="value"in i?i.value:i,g[o[1]]="caption"in i?i.caption:null):g[r.split(":")[0]]="value"in i?i.value:i;for(var f in g.__row__id=l[x].id,l[x])0===f.indexOf("__row__")&&(g[f]=l[x][f]);h.push(g)}}return u?h[0]:h}},dataset:{ini:{},get:function(){var e=this.boxing();return{name:this.properties.gridHandlerCaption,dimensions:e.getHeader("min"),source:e.getRows("min")}},set:function(e){var t=this,i=t.boxing(),r=t.properties,o=xui.isFun(e.getDataset)?e.getDataset():e;(e=r.tagVar.datasetAdapter)&&xui.isFun(e)&&(o=e.call(i,o,t)),(e=i.datasetAdapter)&&xui.isFun(e)&&(o=e.call(i,o,t)),i.beforeApplyDataset&&!1===i.beforeApplyDataset(t,o)||("name"in o&&i.setGridHandlerCaption(o.name),"dimensions"in o&&i.setHeader(o.dimensions),"source"in o&&i.setRows(o.source))}},tagCmds:{ini:[],action:function(){this.boxing().refresh()}},activeMode:{ini:"row",listbox:["row","cell","none"],action:function(e){var t=this;"cell"!=e&&t.$activeCell&&(xui(t.$activeCell).tagClass("-active",!1),delete t.$activeCell),"row"!=e&&t.$activeRow&&(xui(t.$activeRow).tagClass("-active",!1),delete t.$activeRow)}},rowOptions:{ini:{},action:function(e){var t=this.boxing(),i=t.getRows("data");t.removeAllRows(),t.insertRows(i)}},colOptions:{ini:{},action:function(e){var t=this.boxing(),i=t.getRows("data");t.removeAllRows(),t.insertRows(i)}},treeMode:{ini:"inhandler",listbox:["none","inhandler","infirstcell"],action:function(e,t){"inhandler"==t&&"infirstcell"==e||"infirstcell"==t&&"inhandler"==e?this.boxing().refresh():this.getSubNodes(["ROWLRULER","ROWTOGGLE"],!0).css("display",e?"":"none")}},freezedColumn:{ini:0,action:function(){this.boxing().refresh(),this.box._adjustColsWidth(this)}},freezedRow:{ini:0,action:function(){this.boxing().refresh()}},hotRowMode:{ini:"hidden",listbox:["hidden","before","after"],action:function(e){this.renderId&&("hidden"==e?this.boxing().removeHotRow():this.box.__ensurehotrow(this,null))}},excelCellId:{ini:"",action:function(){this.boxing().notifyExcel(!1)}},gridValueFormula:"",hotRowNumber:"[*]",hotRowCellCap:"(*)",hotRowRequired:"",noCtrlKey:!0},EventHandlers:{onBodyLayout:function(e,t){},beforeApplyDataset:function(e,t){},beforeCellKeydown:function(e,t,i){},afterCellFocused:function(e,t,i){},beforeInitHotRow:function(e){},onInitHotRow:function(e,t){},beforeHotRowAdded:function(e,t,i,r){},afterHotRowAdded:function(e,t){},onGetContent:function(e,t,i){},onRowSelected:function(e,t,i,r,o){},onCmd:function(e,t,i,r,o){},beforeFold:function(e,t){},beforeExpand:function(e,t){},afterFold:function(e,t){},afterExpand:function(e,t){},beforeColDrag:function(e,t){},beforeColMoved:function(e,t,i){},afterColMoved:function(e,t,i){},beforeColSorted:function(e,t){},afterColSorted:function(e,t){},beforeColShowHide:function(e,t,i){},afterColShowHide:function(e,t,i){},beforeColResized:function(e,t,i){},afterColResized:function(e,t,i){},beforeRowResized:function(e,t,i){},afterRowResized:function(e,t,i){},beforePrepareRow:function(e,t,i){},beforePrepareCol:function(e,t){},beforeRowActive:function(e,t){},afterRowActive:function(e,t){},beforeCellActive:function(e,t,i,r){},afterCellActive:function(e,t,i,r){},beforeCellUpdated:function(e,t,i,r,o,n,a){},afterCellUpdated:function(e,t,i,r,o,n,a){},beforeRowUpdated:function(e,t,i,r){},afterRowUpdated:function(e,t,i,r){},onRowDirtied:function(e,t){},onRowHover:function(e,t,i,r,o){},onClickHeader:function(e,t,i,r){},onClickRow:function(e,t,i,r){},onClickRowHandler:function(e,t,i,r){},onDblclickRow:function(e,t,i,r){},onClickCell:function(e,t,i,r,o,n){},onDblclickCell:function(e,t,i,r,o,n){},onClickGridHandler:function(e,t,i){},beforeIniEditor:function(e,t,i,r,o,n,a){},onBeginEdit:function(e,t,i,r,o,n){},beforeEditApply:function(e,t,i,r,o,n,a,s){},onEndEdit:function(e,t,i,r,o,n){},onFileDlgOpen:function(e,t,i,r,o,n){},beforeComboPop:function(e,t,i,r,o,n,a,s){},beforePopShow:function(e,t,i,r,o,n,a){},afterPopShow:function(e,t,i,r,o,n){},onCommand:function(e,t,i,r,o,n,a){},onEditorClick:function(e,t,i,r,o,n,a){},beforeUnitUpdated:function(e,t,i,r,o,n){},beforeApplyFormula:function(e,t,i,r,o,n){},afterApplyFormulas:function(e,t){},beforeGridValueCalculated:function(e){},afterGridValueCalculated:function(e,t){},onGetExcelCellValue:function(e,t,i){}},RenderTrigger:function(){var e=this,t=e.box,i=e.properties,r=e.boxing(),o=t.getCellOption;e.destroyTrigger=function(){var e=this,t=e.properties;xui.each(e.cellMap,(function(e){e._editor&&e._editor.destroy()})),xui.breakO([e.colMap,e.rowMap,e.cellMap],3),t.header.length=0,t.rows.length=0,t.grpCols.length=0},e.$cache_editor={},i.iniFold||r._toggleRows(i.rows,!0),xui.arr.each(i.header,(function(t){xui.isFun(t.colRenderer||i.colOptions.colRenderer)&&(t.colRenderer||i.colOptions.colRenderer).call(null,e,t)})),"infirstcell"==i.treeMode&&e.getSubNode("HCELLA",i.header[0]._serialId).prepend(e.getSubNode("LTAGCMDS")).prepend(e.getSubNode("HFMARK")),xui.arr.each(i.rows,(function(t){xui.isFun(t.rowRenderer||i.rowOptions.rowRenderer)&&(t.rowRenderer||i.rowOptions.rowRenderer).call(null,e,t),!1===o(e,t,"iniFold")&&r._toggleRows([t],!0)})),e.box.__ensurehotrow(e,null),xui.each(e.cellMap,(function(i){!o(e,i,"editable")||"inline"!=o(e,i,"editMode")&&"dropbutton"!=o(e,i,"type")||t._editCell(e,i)})),i.excelCellId&&e.boxing().calculateGridValue()},LayoutTrigger:function(){var e=this,t=e.box,i=e.properties;e.boxing(),xui.isArr(i.grpCols)&&(xui.arr.each(i.grpCols,(function(t){xui.isFun(t.colRenderer||i.colOptions.colRenderer)&&(t.colRenderer||i.colOptions.colRenderer).call(null,e,t)})),t._adjustColsHeight(e)),e.box._asy(e),e.box._adjustBody(e,"render")},_tplMap:{text:".text",button:".button",image:".image"},_tplMap2:{textarea:".textarea",checkbox:".checkbox",button:".button",progress:".progress"},_focusEvent:function(e,t,i){var r,o=e.boxing(),n=e.properties,a=e.cellMap[e.getSubId(i)];e.box._focuscell(e,t,i),e.afterCellFocused&&(r=a?a._row:e.rowMap[e.getSubId(i)],o.afterCellFocused(e,a,r)),n.editable&&"hidden"!=(n.hotRowMode||"hidden")&&(r=(a=e.cellMap[e.getSubId(i)])?a._row:e.rowMap[e.getSubId(i)],e.__hastmpRow&&e.__needchecktmprow&&r.id!==e.box._temprowid&&e.box._checkNewLine(e,"focuscell"))},__ensurehotrow:function(e,t){var i=e.properties;e.box&&e.renderId&&i.editable&&"hidden"!=(i.hotRowMode||"hidden")&&e.box._addTempRow(e,t)},_temprowid:"_ r _temp_",isHotRow:function(e){return e&&(e.id||e)===this._temprowid},_addTempRow:function(e,t,i,r){var o=e.properties;if(o.readonly||o.disabled||!o.editable||!o.header||o.header.length<=0)return!1;if(delete e.__hastmpRow,e.boxing().removeRows([this._temprowid],!1),e.beforeInitHotRow&&!1===e.boxing().beforeInitHotRow(e))return!1;e.__needchecktmprow=!0;var n,a=e.box._getRequiredCols(e),s=[],u={cells:s},l={caption:o.hotRowCellCap},d=e.boxing();xui.arr.each(o.header,(function(e,t){n=xui.isSet(e.defaultValue)?{value:e.defaultValue}:xui.isSet(e.tagVar&&e.tagVar.defaultValue)?{value:e.tagVar.defaultValue}:a.length&&-1!=xui.arr.indexOf(a,e.id)?l:{},s.push(n)})),e.onInitHotRow&&(u=d.onInitHotRow(e,u)||u,xui.isArr(u)?u={cells:u}:xui.isHash(u)||(u={cells:[u]})),u.id=this._temprowid,u.rowNumber=o.hotRowNumber,u.rowClass=e.getClass("CELLS2","-hot"),d.insertRows([u],i||null,r||null,"before"==o.hotRowMode,!0,!1),e.__hastmpRow=!0,t&&d.focusCellbyRowCol(u.id,t)},_getRequiredCols:function(e){var t=e.properties,i=(t.hotRowRequired||"").split(t.valueSeparator);return xui.each(e.colMap,(function(e){e.required&&i.push(e.id)})),xui.filter(i,(function(e){return!!xui.str.trim(e)})),i.length||xui.arr.each(t.header,(function(e){if(!e.hidden)return i.push(e.id),!1})),i},_checkNewLine:function(e,t,i){var r=e.properties;if(r.editable&&(e.box._sethotrowoutterblur(e,!0),e.__hastmpRow)){delete e.__needchecktmprow;var o,n=e.boxing(),a=this._temprowid,s=n.getRowbyRowId(a,"map",!0),u=n.getRowbyRowId(a)._pid,l="hidden"==(r.hotRowMode||"hidden");if(s){delete s.__row__id;var d=e.box._getRequiredCols(e);if(d.length){for(var c,p=0,h=d.length;p<h;p++)if(-1!=xui.arr.subIndexOf(r.header,"id",d[p])&&!(o=xui.isHash(c=s[d[p].split(":")[0]])?c.value:c)&&0!==o)return}else{var f;for(var p in s)if(s[p]||0!==s[p]){f=1;break}if(!f)return}var x=!!t,g=n.getRowbyRowId(a,"data",!0);if(delete g.id,delete g.rowClass,delete g.rowNumber,xui.arr.each(g.cells,(function(e){0==e.id.indexOf("-c_")&&delete e.id,e.caption===r.hotRowCellCap&&delete e.caption})),e.beforeHotRowAdded){var m=n.beforeHotRowAdded(e,s,g,!t);xui.isDefined(m)&&(x=!0===m||!1===m?m:null)}if(null===x)return l&&e.box._sethotrowoutterblur(e),!1;if(!1===x)return l&&(delete e.__hastmpRow,n.removeRows([a],!1)),!1;if(!0===x){var b=n.insertRows(g,u,a,!0,!0,!0);return delete e.__hastmpRow,n.removeRows([a],!1),(s=b[0])._dirty=1,e.afterHotRowAdded&&n.afterHotRowAdded(e,s),l||e.__hastmpRow||this._addTempRow(e,i,u,s.id),s}return e.__needchecktmprow=!0,xui.isHash(x)?n.focusCell(x):n.focusCell(n.getCell(x)),e.box._sethotrowoutterblur(e),!1}}},_sethotrowoutterblur:function(e,t){var i=function(t){return e.getSubNode(t).get(0)},r="__tmpRowBlurTrigger";e.getSubNode("ROWS22").setBlurTrigger(e.$domId+":ROWS22"),e[r]&&(xui.clearTimeout(e[r]),delete e[r]),t||e.getSubNode("ROWS22").setBlurTrigger(e.$domId+":ROWS22",(function(t,i){e[r]=xui.asyRun((function(){e.box&&e.box._checkNewLine(e,"blur"),xui.clearTimeout(e[r]),delete e[r]}))}),xui([i("SCROLL11"),i("SCROLL12"),i("SCROLL21"),i("SCROLL22")]),null,!0)},_cacheRows:function(e){var t=e.getSubNodes("CELLS1",!0).get(),i=e.getSubNodes("CELLS2",!0).get();xui.filter(t,(function(e){return!!e.clientHeight})),xui.filter(i,(function(e){return!!e.clientHeight})),e.$allrowscache1=t,e.$allrowscache2=i},_asy:function(e){var t=e.properties,i=e.boxing(),r=e.$xid;t.altRowsBg&&xui.resetRun(r+"1",(function(){e.rowMap&&i.setAltRowsBg(!0,!0)})),t.rowNumbered&&xui.resetRun(r+"2",(function(){e.rowMap&&i.setRowNumbered(!0,!0)}))},_setRowHanderW:function(e,t){var i,r,o=e.properties,n=e._$subMargin||(e._$subMargin=e.$px(o.$subMargin)),a=e.rowMap,s=e.getSubNode("FHCELL");if(xui.isFinite(t)||e.$isEm(t)||e.$isPx(t))r=e.$forceu(t);else if(!0===t){var u,l=[];e.getSubNode("FCELLCAPTION",!0).each((function(t){(u=t.parentNode).parentNode.offsetHeight>0&&"visible"!=xui.Dom.getStyle(u,"overflow")&&(i=a[e.getSubId(t.id)])&&l.push(xui([t]).width()+i._layer*n)})),l.push(e.$px(o._minColW)),r=e.$forceu(Math.max.apply(null,l)+2*n)}else r=e.$forceu(s.width());if(r){if(e.$px(r)<e.$px(o._minColW)&&(r=e.$em(o._minColW)+"em"),e.$px(r)<=0)return;o.rowHandlerWidth!=r&&(s.width(o.rowHandlerWidth=r),e.getSubNode("FCELL",!0).width(r),e.getSubNode("GCELL",!0).width(r),e.box._adjustColsWidth(e),e.box._adjustBody(e,"rowhandler"))}},_onStartDrag:function(e,t,i){var r=e.rowMap[e.getSubId(i)];if(r&&r.id==e.box._temprowid)return!1;var o=xui.Event.getPos(t);return e.$_ond=i,xui.use(i).startDrag(t,{dragSource:e.$xid,dragType:"icon",shadowFrom:xui.use(i).parent()._get(0),targetLeft:o.left+12,targetTop:o.top+12,dragCursor:"pointer",dragDefer:2,dragKey:e.box.getDragKey(e,i),dragData:e.box.getDragData(e,t,i)}),!1},_onDropTest:function(e,t,i,r,o,n){var a,s=o&&o.domId,u=i,l=o&&o.profile;if(u){var d=e.getKey(u),c=e.keys,p=e.rowMap[e.getSubId(u)];if(d==c.FCELL&&!p.sub)return!1;if(e.properties.rowHandler){if(d==c.CELLS2||d==c.SCROLL22)return!1}else if(d==c.CELLS1||d==c.SCROLL21)return!1}if(l&&l.$xid==e.$xid){if(s&&e.getSubId(s)==e.getSubId(u))return!1;if(a=e.$_ond,i=xui(i).get(0),xui.get(i,["parentNode","previousSibling"])==a)return!1;do{if(i==a)return i=a=null,!1}while(i&&(i=i.parentNode)&&i!==document&&i!==window);i=a=null}},_onDragstop:function(e,t,i,r,o,n){delete e.$_ond},_onDrop:function(e,t,i,r,o,n){if(o.profile&&o.profile[e.KEY]){var a=e.getKey(i),s=o.profile,u=o.domId,l=e.keys,d=xui.absObj.$specialChars,c=e.boxing(),p=xui.copy(c.getUIValue(!0)),h=s.rowMap[s.getSubId(u)],f=e.rowMap[e.getSubId(i)];return h=xui.clone(h,(function(e,t){return!d[(t+"").charAt(0)]})),s.boxing().removeRows([h.id]),a==l.SCROLL21||a==l.SCROLL22?c.insertRows([h],null,null,!1):a==l.FCELL&&f.sub?c.insertRows([h],f.id,null,!1):a!=l.CELLS1&&a!=l.CELLS2||c.insertRows([h],f._pid,f.id,!0),p&&p.length&&-1!=xui.arr.indexOf(p,h.id)&&c.setUIValue(p,!0,null,"drop"),o._new=h,!1}},_beforeSerialized:function(e){var t=arguments.callee.upper.call(this,e),i=e.properties,r=xui.absObj.$specialChars,o=t.properties,n=xui.$us(e),a=2==n?"em":-2==n?"px":null;return o.header=xui.clone(i.header,(function(t,i,o,n){return 2===o&&"width"===i&&t&&"auto"!=t?(n[i]=e.$forceu(t,a),!1):!r[(i+"").charAt(0)]&&t!=undefined})),o.grpCols=xui.clone(i.grpCols,(function(t,i,o,n){return 2===o&&"width"===i&&t&&"auto"!=t?(n[i]=e.$forceu(t,a),!1):!r[(i+"").charAt(0)]&&t!=undefined})),o.rows=xui.clone(i.rows,(function(t,i,o,n){return 2===o&&"height"===i&&t&&"auto"!=t?(n[i]=e.$forceu(t,a),!1):!r[((1===o?t.id:i)+"").charAt(0)]&&t!=undefined&&("id"!=i||"string"!=typeof t||"-"!=t.charAt(0))})),xui.isEmpty(o.header)&&delete o.header,xui.isEmpty(o.grpCols)&&delete o.grpCols,xui.isEmpty(o.rows)&&delete o.rows,delete o.activeRow,delete o.activeCell,delete o.rawData,delete o.dataset,t},_clsCache:{},_colDragCheck:function(e,t){var i=e.properties,r=xui.DragDrop.getProfile(),o=r.dragKey,n=r.dragData,a=e.colMap[e.getSubId(t)];return!(!a||a._isgroup)&&("infirstcell"!=i.treeMode||i.header[0]!=a)&&!!(a.hasOwnProperty("colMovable")?a.colMovable:e.properties.colMovable)&&!(!o||!n||o!=e.$xid+":col")&&n!=xui.use(t).id()&&n!=xui.use(t).prev().id()&&void 0},_prepareData:function(e){var t=arguments.callee.upper.call(this,e),i="display:none",r=e.properties;return e.rowMap2={},e.rowMap={},e.cellMap={},t.showHeader=r.showHeader?"":i,t.colDDDisplay=r.colResizer?"":i,t.rowDDDisplay=r.rowResizer?"":i,t.rowHandlerDisplay=r.rowHandler?"":i,t.sortDisplay=i,t._rowMarkDisplay="multi"==r.selMode||"multibycheckbox"==r.selMode?"":"display:none;",r.header&&xui.isArr(r.header)||(r.header=[]),r.grpCols&&xui.isArr(r.grpCols)||(r.grpCols=[]),r.rows&&xui.isArr(r.rows)||(r.rows=[]),"none"==r.hotRowMode&&(r.hotRowMode="hidden"),"hidden"!=r.hotRowMode&&"before"!=r.hotRowMode&&(r.hotRowMode="after"),r.header=this._adjustHeader(r.header),t.header=this._prepareHeader(e,r.header),t.header1=t.header2=t.header,r.grpCols=this._adjustGrpColsData(e,r.grpCols),t.grpCols=this._prepareGrpCols(e,r.grpCols,t.header),t.grpCols1=t.grpCols2=t.grpCols,t._row0DfW=t.rowHandlerWidth?"width:"+e.$forceu(t.rowHandlerWidth):"",e.$isEm(r.headerHeight)&&(t.headerHeight=e.$forceu(e.$px(r.headerHeight,0,!0),"em")),e.$isEm(r.rowHeight)&&(t.rowHeight=e.$forceu(e.$px(r.rowHeight,0,!0),"em")),e.$isEm(r.rowHandlerWidth)&&(t.headerHeight=e.$forceu(e.$px(r.rowHandlerWidth,0,!0),"em")),arguments.callee.upper.call(this,e),r.rows=this._adjustRows(e,r.rows),t.rows11=t.rows12=t.rows21=t.rows22=this._prepareItems(e,r.rows),t.tagCmds=xui.clone(r.colOptions.tagCmds||t.tagCmds),t.tagCmds&&this._prepareCmds(e,t,(function(e){return!e.tag||!!e.tag.match(/\bheader\b/)||!e.tag.match(/\brow\b/)})),t._columnfreezed=r.freezedColumn?"xui-ui-shadow-r xui-uiborder-r xui-uiborder-dark":"",t._rowfreezed=r.freezedRow?"xui-ui-shadow-b xui-uiborder-b xui-uiborder-dark":"",t},_parepareCol:function(e,t,i,r){var o,n,a,s,u=xui.UI.$tag_subId,l=e.properties,d=e.$px(l.headerHeight),c=e.getRoot().contentBox()?2:0,p="display:none",h=1;for(xui.isHash(t)?a=t.id+"":t={id:a=t+""},t._cells={},o=e.pickSubId("header"),t[u]="-h_"+o,t.id=t.id||o,"_"==t.id.charAt(0)&&!1!==t.hidden&&(t.hidden=!0);-1!=(n=xui.arr.subIndexOf(i,"id",t.id))&&n!==r;)t.id=o+h++;e.colMap[t[u]]=t;var f=e.$px(t.width)||e.$px(l._colDfWidth);return"relWidth"in t&&(t.flexSize=t.relWidth,delete t.relWidth),t.flexSize||(t.hasOwnProperty("minWidth")&&(f=Math.max(f,e.$px(t.minWidth))),t.hasOwnProperty("maxWidth")&&(f=Math.min(f,e.$px(t.minWidth)))),t.width=t._cellWidth=t._colWidth=e.$forceu(f),t._hcellheight=e.$forceu(d-c),(s={sortDisplay:p,rowHandlerDisplay:l.rowHandler?"":p})[u]=t[u],s._tabindex=l.tabindex,s.colDDDisplay=("colResizer"in t?t.colResizer:l.colResizer)?"":p,t.hasOwnProperty("visibility")&&!t.hasOwnProperty("hidden")&&(t.hidden=!t.visibility),s.colDisplay=!0===t.hidden?p:"",s.firstCellStyle=l.colOptions.firstCellStyle||"",s.firstCellClass=l.colOptions.firstCellClass||"",t.type||(t.type=l.colOptions.type||"input"),"caption"in t&&xui.isDefined(t.caption)||(t.caption=a),t._for="col",xui.UI.adjustData(e,t,s,"sub"),e.colMap2[t.id]=t[u],[t,s]},_prepareCell:function(e,t,i,r,o,n,a){var s=xui.UI.$tag_subId,u=e.properties,l={};return(t=xui.isSet(t)?xui.isHash(t)?t:{value:t}:{})._row=i,t._col=r,t[s]="-c_"+e.pickSubId("cell"),t.id=t.id||t[s],t._for="cell",this._adjustCell(e,t,l),e.cellMap[l[s]]=t,o&&o.push(t),i._cells[r.id]=l[s],r._cells[i.id]=l[s],"infirstcell"==u.treeMode&&0===a&&n&&(l._treeMode=n._treeMode,l._rulerW=n._rulerW,l._fi_togglemark=n._fi_togglemark,l._rowMarkDisplay=n._rowMarkDisplay,l._rowNumbDisplay=n._rowNumbDisplay,l._ltagDisplay=n._ltagDisplay,l.ltagCmds=n.ltagCmds,l[xui.UI.$tag_subId_c]=n[xui.UI.$tag_subId]),[t,l]},_prepareGrpCols:function(e,t,i){var r=e.properties;if(r.showHeader&&t&&xui.isArr(t)&&t.length){for(var o,n,a,s,u,l=r.header,d=e.$px(r.headerHeight),c=e.getRoot().contentBox()?2:0,p=(xui.UI.$tag_subId,[]),h=d/(e._headerLayers+1),f=!1,x=0,g=t.length;x<g;x++){o={},n=0,f=!1,a=0,u=t[x],xui.UI.adjustData(e,u,o,"sub");for(var m=0;m<=u.to;m++)b=l[m],v=i[m],s=e.$px(v._colWidth),m===u.from&&(f=!0,o._hcellleft=e.$forceu(a)),a+=s+c,f&&!b.hidden&&(n+=s+c);o._colWidth=o._cellWidth=e.$forceu(n-c),o._hcellheight=e.$forceu(h-c),o._hcelltop=e.$forceu(h*(u._layer-1)),o._tabindex=r.tabindex,o.colDDDisplay=("colResizer"in u?u.colResizer:r.colResizer)?"":"display:none",p.push(o)}m=0;for(var b,v,y=l.length;m<y;m++)b=l[m],v=i[m],b._grp&&b._grp.length&&(v._hcellheight=e.$forceu(d-b._grp.length*h-c));return p}},_prepareHeader:function(e,t){var i,r=[];return e.colMap2={},e.colMap={},xui.arr.each(t,(function(o,n){e.beforePrepareCol&&!1===e.boxing().beforePrepareCol(e,o)||(i=e.box._parepareCol(e,o,t,n),t[n]=i[0],r.push(i[1]))})),r},_renderCell:function(e,t,i,r,o){var n,a=e.box.getCellOption,s=a(e,t,"type"),u="",l="",d=r,c=i&&xui.isStr(i._caption)?i._caption:i&&xui.isStr(t.caption)?i.caption:xui.isStr(t.caption)?t.caption:null,p=/</g,h="xui-uicell-disabled",f="xui-ui-readonly",x=function(e,t,i,r,o){return((o=t.renderer||t._renderer)?xui.UI._applyRenderer(e,o,t,i):i&&"string"==typeof i.caption?i.caption:"function"==typeof r?r(t.value,e,t):xui.isSet(t.value)?""+t.value:"")||""},g=function(e,t,i){if(e){var r=(e+="").indexOf("=");if(-1!=r)return i.value=e.substr(0,r),e.substr(r+1)}return e},m=function(e,t){return e+(t.unit?" "+t.unit:"")};switch(r&&r.get(0)&&(r=r.last()),s){case"number":case"spin":case"counter":var b=parseFloat(t.value);t.value=b||0===b?b:null,n=m(xui.isSet(c)?c:x(e,t,i,(function(e,t,i){return e||0===e?xui.formatNumeric(parseFloat(e),a(t,i,"precision"),a(t,i,"groupingSeparator"),a(t,i,"decimalSeparator"),a(t,i,"forceFillZero"),a(t,i,"trimTailZero")):""})),t),(v=a(e,t,"numberTpl"))&&n&&(n=v.replace("*",n)),r&&r.html(n,!1);break;case"currency":var v;b=parseFloat((t.value+"").replace(/[^\d.-]/g,"")),t.value=b||0===b?b:null,n=m(xui.isSet(c)?c:x(e,t,i,(function(e,t,i){if(e||0===e){var r=a(t,i,"precision");return xui.formatNumeric(parseFloat(e),xui.isSet(r)?r:2,a(t,i,"groupingSeparator"),a(t,i,"decimalSeparator"),a(t,i,"forceFillZero"),a(t,i,"trimTailZero"))}return""})),t),(v=a(e,t,"currencyTpl"))&&""!==n&&(n=v.replace("*",n)),r&&r.html(n,!1);break;case"date":t.value=xui.isDate(t.value)?t.value:xui.isFinite(t.value)?new Date(parseInt(t.value,10)):xui.Date.parse(t.value),n=m(xui.isSet(c)?c:x(e,t,i,(function(e,t,i){return e?xui.Date.getText(e,a(t,i,"dateEditorTpl")||"ymd"):""})),t),r&&r.html(n,!1);break;case"datetime":t.value=xui.isDate(t.value)?t.value:xui.isFinite(t.value)?new Date(parseInt(t.value,10)):xui.Date.parse(t.value),n=m(xui.isSet(c)?c:x(e,t,i,(function(e,t,i){return e?xui.Date.getText(e,a(t,i,"dateEditorTpl")||"ymdhn"):""})),t),r&&r.html(n,!1);break;case"input":t.value=t.value||"",n=m(xui.isSet(c)?c:x(e,t,i),t),r&&r.html(n,!1);break;case"textarea":t.value=t.value||"",n=m(xui.isSet(c)?c:x(e,t,i,(function(e){return e?(e+"").replace(p,"&lt;").replace(/\t/g,"    ").replace(/ /g,"&nbsp;").replace(/(\r\n|\n|\r)/g,"<br />"):""})),t),r&&r.html(n,!1);break;case"color":var y=xui.UI.ColorPicker._ensureValue(0,t.value);t.value=t.value?("transparent"!==y?"#":"")+y:"",n=m(xui.isSet(c)?c:x(e,t,i),t),t.value?(u=xui.UI.ColorPicker.getTextColor(t.value),r?(r.html(n,!1),r.css("color",u),r.parent().css("backgroundColor",t.value)):(i.color="color:"+u+";",i.bgcolor="background-color:"+t.value+";")):r&&(r.html(n,!1),r.css("color",""),r.parent().css("backgroundColor",""));break;case"checkbox":t.value="0"!==t.value&&!!t.value,n=xui.isSet(c)?c:x(e,t,i,(function(e){return""})),r?e.getSubNode("CHECKBOX",e.getSubId(xui(r).id())).tagClass("-checked",t.value):i._fi_checkboxCls=t.value?"xuifont-checked xui-uicmd-check-checked":"";break;case"progress":t.value=parseFloat(t.value)||0,t.value=Math.min(Math.max(t.value,0),1),n=m(xui.isSet(c)?c:x(e,t,i,(function(e){return e||0===e?(100*e).toFixed(2)+"%":""})),t),r?(r.first().html(n,!1),r.width(n)):i.progress=n;break;case"listbox":t.value=t.hasOwnProperty("value")?t.value:"",n=xui.adjustRes(m(x(e,t,i,(function(e,t,i){var r=a(t,i,"editorListItems");if(r||(r=a(t,i,"editorListKey"))&&(r=xui.UI.getCachedData("function"==typeof r?r():r)),("function"==typeof r?r=r():r)&&r.length)for(var o=0,n=r.length;o<n;o++)if(r[o].id===e)return r[o].caption||e;return g(e,t,i)})),t)),r&&r.html(null===n||n===undefined?t.value:n,!1);break;case"dropbox":case"cmdbox":t.value=t.hasOwnProperty("value")?t.value:"",n=xui.adjustRes(m(xui.isSet(c)?c:x(e,t,i,g),t)),r&&r.html(null===n||n===undefined?t.value:n,!1);break;default:t.value=t.hasOwnProperty("value")?t.value:"",n=xui.adjustRes(m(xui.isSet(c)?c:x(e,t,i),t)),r&&r.html(null===n||n===undefined?t.value:n,!1)}"_renderer"in t&&delete t._renderer,t._caption=t._$tips=t._$tmpcap=n,l=a(e,t,"disabled");var A=a(e,t,"readonly");return i?(i.cellCls=e.getClass("CELL","-"+s)+(l?" "+h:"")+(A?" "+f:""),i.type=s,i.value=t.value,i._caption=n,i.cellStyle=a(e,t,"cellStyle"),i.cellClass=a(e,t,"cellClass")):(l?d.parent().addClass(h):d.parent().removeClass(h),A?d.parent().addClass(f):d.parent().removeClass(f),(l=o.cellStyle)&&d.attr("style",d.attr("style")+";"+l),(l=o.cellUnclass)&&d.removeClass(l),(l=o.cellClass)&&d.addClass(l)),t},_applyRendererEx:function(e,t,i,r,o,n){r&&((n=r._col)&&(o(n,t,i),o(n.tagVar,t,i)),(n=r._row)&&(o(n,t,i),o(n.tagVar,t,i)))},_prepareItems:function(e,t,i,r){var o,n,a,s,u,l,d=e.properties,c=d.treeMode,p=e._$subMargin||(e._$subMargin=e.$px(d.$subMargin)),h=e.rowMap2,f=e.rowMap,x=i&&f[i]?f[i]._layer+1:0,g=xui.UI.$tag_subId,m=e._id||(e._id=new xui.id),b=[],v=d.rowOptions,y=e.$itemFilter,A="display:none";c=!(!c||"none"==c),y&&y("begin","prepareItem",e);for(var _=0,w=t.length;_<w;_++){if(!(s=t[_]).id||h[s.id]){for(;h[a=m.next()];);s.id="-"+a}else s.id+="";if(!e.beforePrepareRow||!1!==e.boxing().beforePrepareRow(e,s,i,r)){o="-r_"+e.pickSubId("row"),s[g]=o,f[o]=s,s._for="row",s._pid=i,s._cells={},s._layer=x,s._tabindex=d.tabindex,s._rowMarkDisplay="multi"==d.selMode||"multibycheckbox"==d.selMode?"":A,s._treeMode=c?"":A,s._rowNumbDisplay=d.rowNumbered?"":A,(a={id:s.id}).rowCls="",s.disabled&&(a.rowCls+=" xui-uicell-disabled"),s.readonly&&(a.rowCls+=" xui-ui-readonly"),s.group&&(a.group=1,a.rowCls+=" "+e.getClass("CELLS1","-group")+" xui-uiborder-r xui-uiborder-light"),y&&(s.hidden=!!y(s,"prepareItem",e)),s.hidden&&(a.rowDisplay=A),a._row0DfW=d.rowHandlerWidth?"width:"+e.$forceu(d.rowHandlerWidth):"",a._rulerW="width:"+(s.rulerWidth||e.$forceu(4+x*p)),a._rowHeight=e.$forceu(s._rowHeight||s.height||d.rowHeight,"em"),s._rowHeight=a._rowHeight,a._rowHeight="height:"+a._rowHeight,a.rowHandlerDisplay=d.rowHandler?"":A,a.rowDDDisplay=("rowResizer"in s?s.rowResizer:d.rowResizer)?"":A,a.firstCellStyle=s.firstCellStyle||v.firstCellStyle||"",a.firstCellClass=s.firstCellClass||v.firstCellClass||"",n=a.cells=[],a[g]=o,a._fi_togglemark=s.sub?"xui-uicmd-toggle"+(s._checked?" xuifont-checked xui-uicmd-toggle-checked":""):d.togglePlaceholder?"xui-icon-placeholder":"xui-uicmd-none",h[s.id]=o,!s.hasOwnProperty("caption")&&s.hasOwnProperty("value")&&(s.caption=""+s.value),s._oValue=s.value,s.caption&&!s.tips&&(s._$tips=s.caption),xui.UI.adjustData(e,s,a,"sub"),a.tagCmds=xui.clone(a.tagCmds||v.tagCmds||d.tagCmds),a.tagCmds&&this._prepareCmds(e,a,(function(e){return!e.tag||!!e.tag.match(/\brow\b/)||!e.tag.match(/\bheader\b/)})),s.group&&(s.cells=null),(u=s.cells)&&xui.arr.each(d.header,(function(t,i){l=e.box._prepareCell(e,u[i],s,t,r,a,i),u[i]=l[0],n.push(l[1])}));var C={};xui.merge(C,a,(function(e,t){return xui.isNumb(e)||xui.isStr(e)||"ltagCmds"==t})),C[xui.UI.$tag_subId_c]=a[xui.UI.$tag_subId],a._handler_cell=xui.clone(C),"infirstcell"==d.treeMode&&(s.group&&(a._firstcell_grp=xui.clone(C)),a._rulerW=a._fi_togglemark="",a._treeMode=a.tMarkDisplay=a.tNumbDisplay=a._ltagDisplay=A,a.ltagCmds=null),b.push(a)}}return y&&y("end","prepareItem",e),b},_adjustCell:function(e,t,i){var r=this,o=e.properties,n=t._col,a=r.getCellOption(e,t,"cellRenderer")||o.renderer,s=r.getCellOption(e,t,"cellCapTpl");s&&(t._caption=s),xui.UI.adjustData(e,t,i,"sub"),a&&(t._renderer=a),i._cellWidth||(i._cellWidth=n._colWidth),i._tabindex=o.tabindex,i.cellDisplay=!0===n.hidden?"display:none;":"",r._renderCell(e,t,i),t._oValue=t.value,"unit"in t&&(t._oUnit=t.unit)},_setSub:function(e,t,i,r,o,n){var a=e.domId,s=e.boxing(),u=e.properties,l=e.rowMap2[t.id],d=e.box._getToggleNode(e,l),c=e.getSubNodes(["SUB1","SUB2"],l),p=xui(c.get(0)),h=xui(c.get(1));if(!xui.Thread.isAlive(e.key+":"+e.$xid))if(i){if(!t._checked){if(s.beforeExpand&&!1===s.beforeExpand(e,t))return;b=function(i,r){xui.browser.ie&&xui.browser.ver<=8?d.css({backgroundImage:"",backgroundRepeat:"",backgroundPositionX:"",backgroundPositionY:"",backgroundColor:"",backgroundAttachment:""}):d.removeClass("xui-icon-loading"),i||(t._checked=!0,s.afterExpand&&s.afterExpand(e,t)),c.css({display:"",height:"auto",overflow:""}),(u.freezedRow||u.rowHandler)&&!p.height()&&(r=h.height())&&p.height(r),xui.resetRun(a,(function(i){e.box._asy(e),delete e.$allrowscache1,delete e.$allrowscache2,e.box._adjustBody(e,"expandrow"),i&&xui.tryF(i,[e,t],s)}),0,[n])};var f,x=t.sub,g=function(i){!function(e,t,i,r,n,a,s,u){var l=e.boxing(),d=e.properties,c=!1===u;if(!c&&!t._inited&&(delete t.sub,t._inited=!0,u)){"string"==typeof u?(a.html(t.sub=u,!1),s.addClass("xui-uiborder-r xui-uiborder-b xui-uiborder-light")):u["xui.Template"]||u["xui.UI"]?(a.append(t.sub=u.render(!0)),s.addClass("xui-uiborder-r xui-uiborder-b xui-uiborder-light")):xui.isArr(u)&&(l.insertRows(u,t.id),t.sub||(t.sub=u));var p=0,h=l.getUIValue(!0);h&&h.length&&(xui.arr.each(u,(function(e){if(-1!=xui.arr.indexOf(h,e.id||e))return p=1,!1})),p&&l._setCtrlValue(l.getUIValue()))}if(c||r.tagClass("-checked"),o)b(c);else if(s.css("height","0px").css("display",""),d.animCollapse){var f=0;a.children().each((function(e){f+=e.offsetHeight})),s.css("overflow","hidden"),s.animate({height:[0,f]},null,(function(){b(c)}),200,null,"expoIn",e.key+":"+e.$xid).start()}else b(c)}(e,t,0,d,0,h,c,i)};if("string"==(f=typeof x)||"object"==f)g(x);else if(e.onGetContent){xui.browser.ie&&xui.browser.ver<=8?d.css("background","url("+xui.ini.img_busy+") no-repeat"):d.addClass("xui-icon-loading");var m=e.boxing().onGetContent(e,t,g);(m||!1===m)&&(!0===m&&(t._inited=!0),g(m))}}r&&t.sub&&xui.arr.each(t.sub,(function(t){t.sub&&t.sub.length&&!t._checked&&e.box._setSub(e,t,i,r,!0,n)}))}else{if(t._checked){if(s.beforeFold&&!1===s.beforeFold(e,t))return;var b=function(){if(c.css({display:"none",height:0,overflow:""}),d.tagClass("-checked",!1),t._checked=!1,u.dynDestory||t.dynDestory){for(var i=t.sub,r=[],o=0,l=i.length;o<l;o++)r.push(i[o].id);e.boxing().removeRows(r),t.sub=!0,delete t._inited}s.afterFold&&s.afterFold(e,t),xui.resetRun(a,(function(i){e.box._asy(e),delete e.$allrowscache1,delete e.$allrowscache2,e.box._adjustBody(e,"foldrow"),i&&xui.tryF(i,[e,t],s)}),0,[n])};o?b():u.animCollapse?(c.css("overflow","hidden"),c.animate({height:[h.height(),0]},null,b,200,null,"expoOut",e.key+":"+e.$xid).start()):b()}r&&t.sub&&!u.dynDestory&&!t.dynDestory&&xui.arr.each(t.sub,(function(t){t.sub&&t.sub.length&&e.box._setSub(e,t,i,r,!0,n)}))}},_getCellId:function(e,t,i){return xui.isNumb(t)&&(t=xui.get(e.properties.rows,[t,"id"])),xui.isNumb(i)&&(i=xui.get(e.properties.header,[i,"id"])),xui.get(e.rowMap,[e.rowMap2[t],"_cells",i])},_updCell:function(e,t,i,r,o,n){var a,s,u,l,d=e.box,c=e.properties,p=c.dirtyMark,h=p&&c.showDirtyMark,f=xui.absObj.$specialChars;if("string"==typeof t?a=e.cellMap[t]:t=(a=t)._serialId,a&&a._row&&((u=a._row.id==d._temprowid)&&a.caption==c.hotRowCellCap&&delete a.caption,xui.isHash(i)||(i={value:i}),i=xui.filter(i,(function(e,t,i){return(i=!f[t.charAt(0)])||((l=l||{})[t]=e),i})),!o||!e.beforeCellUpdated||!1!==e.boxing().beforeCellUpdated(e,a,i,u,l,a._row,a._col))){if(!xui.isEmpty(i)){if(delete a._$tips,delete a._$tmpcap,xui.merge(a,i,"all"),s=e.getSubNode("CELLA",t),"type"in i){var x={};d._adjustCell(e,a,x),s.parent().replace(e._buildItems("rows2.cells",[x])),s=e.getSubNode("CELLA",t)}else{var g=d.getCellOption(e,a,"cellCapTpl");g&&(a.caption=xui.adjustRes(g,!0,!1,null,null,a)),a=d._renderCell(e,a,null,s,i)}var m=a._editor;"value"in i&&(p&&!1!==r||(a._oValue=a.value),"unit"in a?a._oUnit=a.unit:a.value!==a._oValue||"unit"in a&&a._oUnit!==a.unit?h&&s.addClass("xui-ui-dirty"):h&&s.removeClass("xui-ui-dirty"),m&&o&&!i.ignoreEditor&&!e._setFromEditor&&m.setValue(a.value,!0,"editorini"),!1!==n&&xui.resetRun(e.key+":"+e.$xid+":"+a.id,(function(){e&&e.box&&e.boxing().triggerFormulas(a,"updatecell")}))),"caption"in i&&m&&m.setCaption&&m.setCaption(xui.isSet(i.caption)?i.caption:null,!0),a._dirty=1}o&&e.afterCellUpdated&&e.boxing().afterCellUpdated(e,a,i,u,l,a._row,a._col)}},_ensureValue:function(e,t){if("multi"==e.properties.selMode||"multibycheckbox"==e.properties.selMode){var i=xui.isArr(t)?t:(t?""+t:"").split(e.properties.valueSeparator);return xui.arr.removeValue(i,this._temprowid),i.sort(),i.join(e.properties.valueSeparator)}return t==this._temprowid?null:t},_sel:function(e,t,i,r,o){var n=e.properties;if(n.activeMode==t){var a=e.getSubId(r),s="cell"==t?e.cellMap:e.rowMap,u=e.boxing(),l=s[a],d=xui.Event.getKey(o),c="cell"==t?l._row.id+"|"+l._col.id:l.id;switch(n.selMode){case"none":u.onRowSelected(e,l,o,i,0);break;case"multibycheckbox":if(e.keys.MARK&&e.getKey(xui.Event.getSrc(o).id||"")!=e.keys.MARK){u.onRowSelected(e,l,o,i,0);break}case"multi":var p=u.getUIValue(),h=p?(""+p).split(n.valueSeparator):[],f=1;if(h.length&&(d.ctrlKey||d.shiftKey||n.noCtrlKey)){if(d.shiftKey&&"row"==t){if(e.$firstV._pid!=l._pid)return!1;var x=n.rows;if(l._pid){var g=s[l._pid];g&&(x=g.sub)}var m,b=xui.arr.subIndexOf(x,"id",e.$firstV.id),v=xui.arr.subIndexOf(x,"id",l.id);for(h.length=0,m=Math.min(b,v);m<=Math.max(b,v);m++)h.push(x[m].id)}else-1!=xui.arr.indexOf(h,c)?(xui.arr.removeValue(h,c),f=-1):h.push(c);h.sort(),p=h.join(n.valueSeparator),u.getUIValue()!=p&&(u.setUIValue(p,null,null,"click"),u.get(0)&&u.getUIValue()==p&&u.onRowSelected(e,l,o,i,f));break}case"single":u.getUIValue()!=c&&(e.$firstV=l,u.setUIValue(c,null,null,"click"),u.get(0)&&u.getUIValue()==c&&u.onRowSelected(e,l,o,i,1))}}},_activeCell:function(e,t){if("cell"==e.properties.activeMode&&e.$activeCell!=t){var i=null;if(e.$activeCell&&(xui(e.$activeCell).tagClass("-active",!1),delete e.$activeCell),!1!==t){var r=e.getSubId(t);if(i=e.cellMap[r],e.beforeCellActive&&!1===e.boxing().beforeCellActive(e,i,i._row,i._col))return;xui(e.$activeCell=t).tagClass("-active")}e.afterCellActive&&e.boxing().afterCellActive(e,i,i._row,i._col)}},_activeRow:function(e,t){if("row"==e.properties.activeMode&&e.$activeRow!=t){var i,r=null;if(e.$activeRow&&(i=e.getSubId(e.$activeRow),e.getSubNodes(["CELLS1","CELLS2"],i).tagClass("-active",!1),delete e.$activeRow),!1!==t){var o=e.getSubId(t);if(r=e.rowMap[o],e.beforeRowActive&&!1===e.boxing().beforeRowActive(e,r))return;i=e.getSubId(e.$activeRow=t),e.getSubNodes(["CELLS1","CELLS2"],i).tagClass("-active")}e.afterRowActive&&e.boxing().afterRowActive(e,r)}},_getCellFormula:function(e,t,i,r){var o,n=e.properties,a=function(e,t){return(e=xui.isStr(e)?e:"="+e).replace(/(\B)(\?)([0-9]+\b)/g,"$1"+t+"$3").replace(/(\b)(_)([0-9]+\b)/g,"$1"+t+"$3")},s=function(e,t){return(e=xui.isStr(e)?e:"="+e).replace(/(\b[A-Z]+)(\?)(\B)/g,"$1"+t+"$3").replace(/(\b[A-Z]+)(_)(\b)/g,"$1"+t+"$3")};return t&&(o=t.formula)?o:t&&(o=t._row)&&(o=o.formula)||(o=n.rowOptions)&&(o=o.formula)?a(o,i):t&&(o=t._col)&&(o=o.formula)||(o=n.colOptions)&&(o=o.formula)?s(o,r):null},getCellOption:function(e,t,i){var r=t,o=e.properties;return r&&r.hasOwnProperty(i)&&xui.isSet(r=r[i])||t&&(r=t._row)&&r.hasOwnProperty(i)&&xui.isSet(r=r[i])||(r=o.rowOptions)&&r.hasOwnProperty(i)&&xui.isSet(r=r[i])||t&&(r=t._col)&&r.hasOwnProperty(i)&&xui.isSet(r=r[i])||(r=o.colOptions)&&r.hasOwnProperty(i)&&xui.isSet(r=r[i])||(r=o)&&r.hasOwnProperty(i)&&xui.isSet(r=r[i])?r:null},_trycheckrowdirty:function(e,t){t&&t._row&&xui.resetRun(e.key+":"+e.$xid+":"+t._row.id,(function(){if(e.box){var i=e.$cellInEditor;if(t._row&&(!i||i._row&&i._row!=t._row)){var r=!1;xui.arr.each(t._row.cells,(function(e){if(e._oValue!==e.value||"unit"in e&&e._oUnit!==e.unit)return r=!0,!1})),r&&t._row.id!=e.box._temprowid&&e.onRowDirtied&&e.boxing().onRowDirtied(e,t._row)}}}),100)},_adjusteditorW:function(e,t,i){t&&t.each((function(t,r){(r=t.id)&&(r=r.split(":")[2],(r=e.cellMap[r])&&r._editor&&r._editor!==e.$curEditor&&r._editor.setWidth(i-r._editor.getRoot().offsetLeft()))}))},_adjusteditorH:function(e,t,i){t.each((function(t,r){if((r=t.id)&&(r=r.split(":")[2],r=e.rowMap[r]))for(var o in r=r.cells)(o=r[o])._editor&&o._editor!==e.$curEditor&&o._editor.setHeight(e.$addpx(i,1,o._editor.getRootNode()))}))},_editCell:function(e,t,i,r){var o="string"==typeof t?e.cellMap[t]:t;if(o){t=o._serialId;var n=e.box,a=function(t,i){return n.getCellOption(e,i||o,t)};if(!a("disabled")&&!a("readonly")&&a("editable")){var s,u,l=this,d=e.properties,c=e.getRoot().contentBox(),p=a("type")||"input",h=o._col,f=(h.id,o._row),x=f.id==e.box._temprowid,g=a("editMode"),m=a("adjustEditorInput"),b="inline"==g||"dropbutton"==a("type"),v=e.getSubNode("SCROLL"+f._region+h._region),y=e.getSubNode("CELL",t),A=0;if("infirstcell"==d.treeMode&&0===e.properties.header.indexOf(h)&&(u=e.getSubNode("CELLCAPTION",t))&&!u.isEmpty()&&(A=u.offsetLeft()-(c?1:0)),b||((s=e.$curEditor)&&xui.tryF(s.undo,[],s),s=null),b&&o._editor)r||o._editor.activate();else if("checkbox"!=p&&"button"!=p){if((s=a("customEditor"))&&"function"==typeof s.iniEditor)s.iniEditor(e,o,y),r||xui.tryF(s.activate,[],s),e.onBeginEdit&&e.boxing().onBeginEdit(e,o,s,"cell",o._row,o._col);else{if(e.beforeIniEditor&&!1===(s=e.boxing().beforeIniEditor(e,o,y,v,"cell",o._row,o._col)))return;if("label"==p)return void(r||e.getSubNode("CELLA",t).focus(!0));if(!s||!s["xui.UI"]){var _,w=a("editorAutoPop"),C=a("editorCacheKey"),I=a("editorProperties"),E=a("editorCC"),S=a("editorCS"),D=a("editorEvents"),k=a("editorFormat"),$=a("editorMask"),N=a("editorReadonly"),M=a("editorHAlign"),T=a("editorDropListWidth"),R=a("editorDropListHeight"),B=a("editorCommandBtn"),L=a("beforeEditApply");if(b||(C&&e.$cache_editor[C]&&(s=e.$cache_editor[C]),!s||s.get(0)&&!s.isDestroyed()||(s=null)),!s){var F={dirtyMark:!1,cachePopWnd:!1,left:-1e3,top:-1e3,position:"absolute",visibility:"hidden",zIndex:100};b&&xui.merge(F,{left:A,top:0,cachePopWnd:!0,width:Math.max(0,e.$px(o._col._colWidth)-A+(c?2:1)),height:e.$px(o._row._rowHeight)+(c?1:0),visibility:"visible",zIndex:100},"all"),s=new xui.UI.ComboInput(F)}switch(p){case"number":case"spin":case"counter":case"currency":s.setType(p),xui.each(xui.toArr("precision,increment,min,max,maxlength,currencyTpl,numberTpl,groupingSeparator,decimalSeparator,forceFillZero,trimTailZero,unit,units"),(function(e,t){var i=a(e);"currency"==p?"precision"!=e||i||(i=2):("precision"!=e||i||(i=0),"increment"!=e||i||(i=1)),xui.isSet(i)&&s["set"+xui.str.initial(e)](i)}));break;case"progress":s.setType("spin").setMax(1).setMin(0).setPrecision(4).setIncrement(.01);break;case"input":s.setType("none");break;case"textarea":s.setType("none").setMultiLines(!0).setCommandBtn("save").onCommand((function(e){e.boxing().hide()})),b||xui.tryF(s.setResizer,[!0],s);break;case"date":case"datetime":var O=a("dateEditorTpl");O&&s.setDateEditorTpl(O);case"listbox":case"combobox":case"helpinput":case"time":case"color":case"getter":case"popbox":case"dropbutton":case"cmdbox":s.setType(p),e.box.getCellOption(e,o,"disabled")||(s.beforeComboPop((function(t,i,r,o){var n=t.$cell,a=e.box.getCellOption(e,n,"onClickCell");return"function"==typeof a?a.call(e._host||e,e,n,t,i,r,o):e.boxing().beforeComboPop(e,n,t,i,r,o,n._row,n._col)})),e.beforePopShow&&s.beforePopShow((function(t,i,r){return D&&D.beforePopShow&&D.beforePopShow(t,i,r),e.boxing().beforePopShow(e,t.$cell,t,i,r,t.$cell._row,t.$cell._col)})),e.afterPopShow&&s.afterPopShow((function(t,i){return e.boxing().afterPopShow(e,t.$cell,t,i,t.$cell._row,t.$cell._col)})),"popbox"!=p&&"cmdbox"!=p&&"getter"!=p&&"dropbutton"!=p||e.onEditorClick&&s.onClick((function(t,i,r,o){return e.boxing().onEditorClick(e,t.$cell,t,o,r,t.$cell._row,t.$cell._col)})));break;case"file":s.setType(p)}if(e.onCommand&&s.onCommand((function(t,i,r){return e.boxing().onCommand(e,t.$cell,t,i,r,t.$cell._row,t.$cell._col)})),o._editor=s,b?y.append(s):v.append(s),y.addClass("editing"),!b&&C&&(e.$cache_editor[C]=s),s.setInputReadonly&&s.setInputReadonly(!!N),s.setDropListWidth&&T&&s.setDropListWidth(T),s.setDropListHeight&&R&&s.setDropListHeight(R),s.setHAlign&&M&&s.setHAlign(M),s.setCommandBtn&&B&&s.setCommandBtn(B),k&&("function"==typeof k&&s.beforeFormatCheck?s.beforeFormatCheck(k):"string"==typeof k&&s.setValueFormat&&s.setValueFormat(k)),$&&s.setMask&&s.setMask($),I){_={};var P=e.getProperties();xui.each(I,(function(e,t){_=P[t]})),s.setProperties(I)}switch(E&&s.setCustomClass(xui.clone(E,2)),S&&s.setCustomStyle(xui.clone(S,2)),D&&s.setEvents(D),b||s.resetValue(),p){case"listbox":case"combobox":case"helpinput":(j=a("editorListItems"))?(s.setListKey(null),s.setItems("function"==typeof j?j():j)):(j=a("editorListKey"))&&(s.setItems(null),s.setListKey("function"==typeof j?j():j))}s.setValue(xui.isSet(o.$editorValue)?o.$editorValue:o.value,!0,"editorini"),delete o.$editorValue,s.setCaption&&(I&&"caption"in I&&xui.isDefined(I.caption)?s.setCaption(I.caption,!0):"cmdbox"!=p&&"popbox"!=p&&"button"!=p&&"dropbutton"!=p||s.setCaption(o._caption||o._$tmpcap||o.caption||"",!0)),o.$tag&&(s.setCaption?s.setCaption(o.$tag):s.setValue&&s.setValue(o.$tag,null,"editortag")),s.get(0).$cell=o,s.get(0)._smartnav=!0;var H,U,z=e.boxing(),K=z.getCellPos(o),V=function(e){return K?z.getCellbyRowCol(K.row,K.col):e.$cell};if(s[b?"remove":"undo"]=function(t,i){var r=this;if(r.undo=null,e.getSubNode("CELL",V(r.get(0))._serialId).removeClass("editing"),e.box&&e.box._trycheckrowdirty(e,e.$cellInEditor),i||(r.get(0)&&r.get(0).box&&(r.getSubNode("INPUT").onBlur(!0),t&&xui.str.endWith(g,"sharp")&&(o._ignorefocus=1,e.boxing().focusCell(e.$cellInEditor),xui.asyRun((function(){delete o._ignorefocus})))),r.getRoot().setBlurTrigger(e.$xid+":editor"),e.properties&&!e.properties.directInput&&(r.beforeUnitUpdated(null).afterUIValueSet(null).beforeNextFocus(null).onCancel(null).afterPopHide(null),r.setValue("",!0,"editorreset")),k&&(r.beforeFormatCheck&&r.beforeFormatCheck(null),r.setValueFormat&&r.setValueFormat("")),$&&r.setMask&&r.setMask(""),r.setInputReadonly&&r.setInputReadonly(!N),T&&r.setDropListWidth&&r.setDropListWidth(0),R&&r.setDropListHeight&&r.setDropListHeight(0),_&&(r.setProperties(_),_=null),delete r.get(0).$cell,delete r.get(0)._smartnav,r.hide(),xui.isFun(r.collapse)&&r.collapse()),D){var n={};xui.each(D,(function(e,t){n[t]=null})),r.setEvents(n)}e.$curEditor=null,e.$cellInEditor=null,e.onEndEdit&&e.boxing().onEndEdit(e,o,r,"cell",o._row,o._col),!C&&r.get(0)&&r.destroy(!0),o._editor=r=null},s.beforeUnitUpdated((function(t,i){if(H=V(t),e.beforeUnitUpdated&&!1===z.beforeUnitUpdated(e,H,t,i,H._row,H._col))return!1;l._updCell(e,H,{value:H.value,unit:i},e.properties.dirtyMark,!0,!0),(U=V(t))&&U!==H&&(t.$cell=U,U._editor=s,b||(e.$cellInEditor=U))})).afterUIValueSet((function(t,i,r,o,n){if(H=V(t)){var u,d=a("type",H);switch(d){case"number":case"spin":case"counter":case"progress":r=(r=parseFloat(r))||0===r?r:null;break;case"currency":r=(r=parseFloat((""+r).replace(/[^\d.-]/g,"")))||0===r?r:null;break;case"cmdbox":case"button":case"dropbutton":case"popbox":case"combobox":case"listbox":case"helpinput":u=t.boxing().getShowValue()}var c={value:r};xui.isDefined(u)&&(c.caption=u),t.properties.hasOwnProperty("tagVar")&&!xui.isEmpty(t.properties.tagVar)&&(c.tagVar=t.properties.tagVar),!1!==(e.beforeEditApply&&e.boxing().beforeEditApply(e,H,c,s,n,"cell",H._row,H._col))&&(!1!==(L&&L(c,H,e,s))&&(e._setFromEditor=1,l._updCell(e,H,c,e.properties.dirtyMark,!0,!0),delete e._setFromEditor),(U=V(t))&&U!==H&&(t.$cell=U,U._editor=s,b||(e.$cellInEditor=U)),xui.str.endWith(g,"sharp")&&"spin"!=d&&"counter"!=d&&xui.tryF(s.undo,[!0],s))}})).beforeNextFocus((function(t,i){s.undo&&xui.tryF(s.undo,[!0],s);var r=xui.Event.getEventPara(i);return"enter"==r.key&&(r.$key="right"),e.getSubNode("CELLA",o._serialId).onKeydown(!0,r),!1})).onFileDlgOpen((function(t,i){e.onFileDlgOpen&&e.boxing().onFileDlgOpen(e,o,t,i,o._row,o._col)})),!b){s.onCancel((function(){s&&xui.tryF(s.undo,[],s)})).afterPopHide((function(e,t,i){xui.str.endWith(g,"sharp")&&xui.tryF(s.undo,["blur"!=i&&"call"!=i],s)})).getRoot().setBlurTrigger(e.$xid+":editor",(function(){return s&&xui.tryF(s.undo,[],s),!1}));var j,Y=y.offset(null,v),G=y.cssSize(),W=-1,X=-1,Q=-1,q=-1;if(A&&A>G.width-8)return;"textarea"==p&&(X=200,Q=100),(j=I&&I.width)&&(W=xui.CSS.$px(j)||0),"fill"==j&&(X=Math.max(X,v.get(0).clientWidth)),(j=I&&I.height)&&(q=xui.CSS.$px(j)||0),s.setWidth(Math.max(X,W,G.width-A+(c?3:0))).setHeight(Math.max(Q,q,G.height+(c?2:0))).reLayout(!0,!0),-1!=X||-1!=Q?s.reBoxing().popToTop(y,4,v):s.reBoxing().show(Y.left+A-(c?1:0)+"px",Y.top-(c?1:0)+"px");var Z,J="cmdbox"==p||"cmdbox"==p||"listbox"==p||"file"==p,ee=J||"date"==p||"time"==p||"datetime"==p||"color"==p,te=s.getInputReadonly&&s.getInputReadonly(),ie=xui.str.endWith(g,"sharp")&&(w||te||ee);if(r||xui.isFun(s.expand)&&!1!==w&&(ie||(xui.str.endWith(g,"sharp")||"focus"==g)&&(w||J))&&(Z=1,s.expand(y,!1,null)),b||s.setVisibility(ie?"hidden":"visible"),xui.str.startWith(g,"hover")&&i){var re=function(){s&&s.getRoot().onMouseout(null,"tg-hover-edit")},oe=function(){};s.onFocus(re).beforePopShow((function(t,i,r){var o;return re(),s.onBlur(null),D&&D.beforePopShow&&(o=D.beforePopShow(t,i,r)),e.beforePopShow&&(o=e.boxing().beforePopShow(e,t.$cell,t,i,r,t.$cell._row,t.$cell_col)),o})).afterPopHide((function(){s&&s.getRoot().onMouseout((function(){s&&xui.tryF(s.undo,[],s)}),"tg-hover-edit"),s.onBlur(oe)})).onBlur(oe),r||Z||xui.tryF(s&&s.activate,[],s)}else r||xui.asyRun((function(){if(e.box){var t=s;t.get(0)&&t.get(0).box&&(Z&&s.getPopWnd&&(t=s.getPopWnd()),t&&(xui.tryF(t&&t.activate,[],t),t.get(0)._stopmouseupcaret=1))}}))}m&&m(o,s,e),e.onBeginEdit&&e.boxing().onBeginEdit(e,o,s,"cell",o._row,o._col)}}b||(e.$curEditor=s,e.$cellInEditor=o),s.get(0).$editMode=g,x&&(e.__needchecktmprow=!0,e.box._sethotrowoutterblur(e))}else r||e.getSubNode("CELLA",t).focus(!0)}}},_adjustBody:function(e,t,i){e.renderId&&!e.destroyed&&(xui.resetRun(e.$xid+"4",(function(){if(e.renderId&&!e.destroyed){var r,o=e.properties,n=xui.$us(e),a=function(t,i){return e.$forceu(t,n>0?"em":"px",i)},s=e.getSubNode("BORDER").cssSize(),u=e.getRoot().contentBox()?2:0,l=e.$px(s.width),d=e.$px(s.height),c=o.rowHandler?e.$px(o.rowHandlerWidth)+u:0,p=(e.getSubNode("HEADER1"),e.getSubNode("HEADER2")),h=e.getSubNode("BODY12"),f=e.getSubNode("BODY21"),x=e.getSubNode("SCROLL11"),g=e.getSubNode("SCROLL12"),m=e.getSubNode("SCROLL21"),b=e.getSubNode("SCROLL22"),v=p.height(),y=h.height();o.freezedColumn&&xui.arr.each(o.header,(function(t,i){if(i==o.freezedColumn)return!1;t.hidden||(c+=e.$px(t.width)+u)})),y&&o.freezedRow&&(y-=1),c&&o.freezedColumn&&(c-=1),r=l-c,e._leftregionw=c,p.width(a(r)),b.width(a(r)),xui.asyRun((function(){var e=f.isEmpty(),t=m.isEmpty(),i=h.isEmpty(),r=g.isEmpty(),n=o.freezedRow,a=t?"":(b.isScrollBarShowed("x")?xui.Dom.getScrollBarSize():0)+"px",s=t?0:b.scrollTop(),u=n&&!r?b.scrollLeft():0,l=n&&!i?(b.isScrollBarShowed("y")?xui.Dom.getScrollBarSize():0)+"px":"";e||f.css("padding-bottom",a),n&&!i&&h.css("padding-right",l),t||m.scrollTop(s),n&&!r&&g.scrollLeft(u)}),100),x.height(y?a(y):0),g.height(y?a(y):0),m.height(a(d-v-y)),b.height(a(d-v-y)),x.css("display",y&&e._leftregionw?"":"none"),g.css("display",y?"":"none"),m.css("display",e._leftregionw?"":"none"),b.css("overflow","hidden");var A,_,w,C,I,E,S,D=e.box._adjustRelWith(e),k=e.getSubNode("ROWS22"),$=e.getSubNode("HCELLS2"),N=(e.properties.header,e.getSubNode("SCROLL22"));if(e.keys,k.get(0).clientHeight)if($.get(0).clientHeight){if(A=$.get(0).childNodes)for(_=A.length;_;){if(A[_-1].clientHeight){w=A[_-1];break}--_}E=a(C=w?w.offsetWidth+w.offsetLeft+100:0),S=a(I=C)}else if(A=k.get(0).childNodes){for(_=A.length;_;){if(A[_-1].clientHeight){w=A[_-1];break}--_}if(w){var M=e.getSubId(w.id);if(A=(A=e.getSubNode("CELLS2",M)).get(0).childNodes)for(_=A.length;_;){if(A[_-1].clientHeight){w=A[_-1];break}--_}}}if(w)S=a(I=w.offsetLeft);else{var T=(o=e.properties).header,R=(o.rows,0);xui.arr.each(T,(function(t){!0!==t.hidden&&(R+="_colWidth"in t?e.$px(t._colWidth):e.$px(t.width)+u)})),S=a(I=R)}A=w=null,E&&$.parent().width(E),S&&k.width(S),N.css("overflow","auto"),I>N.width()+u&&(D="auto"),N.css("overflowX",D),N.onScroll(),e.onBodyLayout&&e.boxing().onBodyLayout(e,t),i&&i()}})),"render"!=t&&"rowhandler"!=t&&"foldrow"!=t&&"expandrow"!=t&&"setcol"!=t&&"resize"!=t&&xui.resetRun(e.key+":"+e.$xid,(function(){e&&e.box&&e.boxing().triggerFormulas(null,t)})))},_adjustHeader:function(e){var t=xui.copy(e);return xui.arr.each(t,(function(e,i){t[i]=xui.copy(e)})),t},_adjustGrpColsData:function(e,t){if(!xui.isArr(t))return xui.copy(t);var i=e.properties.header,r=i.length,o=xui.UI.$tag_subId,n=xui.copy(t,(function(e){return e.from=parseInt(e.from,10)||0,e.to=parseInt(e.to,10)||0,e.from<=r&&e.to<=r&&e.to>=e.from}));xui.arr.each(n,(function(e,t){n[t]=xui.isHash?xui.copy(e):{}})),xui.arr.stableSort(n,(function(e,t){return e.from>t.from?1:e.from==t.from?e.to>t.to?-1:e.to==t.to?0:1:-1}));for(var a=0,s=n.length;a<s;a++)(u=n[a])[o]=u[o]||"-g_"+e.pickSubId("grpCol"),u.id=u.id||u[o],u.caption||(u.caption=u.id),u._isgroup=1,delete u._grp,e.colMap[u[o]]=u,e.colMap2[u.id]=u[o];xui.arr.each(n,(function(e,t){for(var i=0;i<t;i++)n[t].to>n[i].from&&n[t].from<n[i].to&&(n[t].to>n[i].to&&(n[t].to=n[i].to),(n[t]._grp||(n[t]._grp=[])).push(n[i].id))})),xui.arr.each(i,(function(e){delete e._grp}));var u,l,d=0;for(a=0,s=n.length;a<s;a++)for(var c=(u=n[a]).from;c<=u.to;c++)((l=i[c])._grp||(l._grp=[])).push(u.id),u._layer||(u._layer=l._grp.length),d=Math.max(d,u._layer);return e._headerLayers=d,n},_adjustRows:function(e,t,i){var r,o,n,a,s,u={},l={},d={},c=e.properties,p=c.uidColumn,h=[];return p=p?xui.arr.subIndexOf(c.header,"id",p):-1,xui.arr.each(c.header,(function(e,t){n=e.id||e,a=null,i||-1==n.indexOf(":")||(a=n.split(":")),a&&a[0]&&a[1]?(l[a[0]]=d[a[1]]=t,h.push(a[0],a[1]),s=1):(u[n]=t,h.push(n))})),r=xui.isArr(t)&&t.length&&"object"!=typeof t[0]?[t]:xui.copy(t),xui.arr.each(r,(function(e,t){if(xui.isArr(e)?r[t]={cells:xui.copy(e)}:r[t]=xui.copy(e),s&&xui.isArr(r[t].cells)){for(var i,n=r[t].cells,a=[],c=0,f=h.length;c<f;c++)(i=h[c])in u?a.push(n[c]):i in l&&a.push({value:n[c],caption:n[++c]});r[t].cells=a}var x=!xui.isHash(r[t])||r[t].cells&&xui.isObj(r[t].cells)?r[t].cells&&xui.isHash(r[t].cells)?2:0:1;if(!e.group&&x){var g,m=[];xui.each(1==x?r[t]:r[t].cells,(function(e,t){t in u?m[u[t]]=xui.isHash(e)?e:{value:e}:(t in l&&((g=m[l[t]]||{}).value=e,m[l[t]]=g),t in d&&((g=m[d[t]]||{}).caption=e,m[d[t]]=g))})),r[t].cells=m}xui.arr.each(o=r[t].cells,(function(e,t){xui.isDefined(e)&&(e&&xui.isHash(e)?o[t]=xui.copy(e):o[t]={value:e})})),!("id"in r[t])&&-1!=p&&o[p]&&o[p].value&&(r[t].id=o[p].value)})),r},_adjustColsWidth:function(e){var t=e.properties,i=t.header,r=t.grpCols,o=e.getRoot().contentBox()?2:0;if(t.showHeader&&r&&xui.isArr(r)&&r.length)for(var n,a,s,u,l,d,c=!1,p=0,h=0,f=r.length;h<f;h++){a=s=0,c=!1,l=r[h],n=0;for(var x,g=0;g<=l.to;g++)x=i[g],u=e.$px(x._colWidth,null,!0),t.freezedColumn&&t.freezedColumn==g&&!p&&(p=n),g===l.from&&(c=!0,a=n),n+=u+o,c&&!x.hidden&&(s+=u+o);d=e.getSubNode("HCELL",l._serialId),s>o?d.css({display:"",left:e.$forceu(a-(t.freezedColumn?l.to>t.freezedColumn-1?p:t.rowHandler?-(e.$px(t.rowHandlerWidth)+o):0:0)),width:e.$forceu(s-o)}):d.css({display:"none"}),t.freezedColumn&&t.rowHandler&&l._shadow&&(d=e.getSubNode("HSCELL",l._serialId),s>o?d.css({display:"",left:e.$forceu(a+(e.$px(t.rowHandlerWidth)+o)),width:e.$forceu(s-o)}):d.css({display:"none"}))}},_adjustColsHeight:function(e,t){var i,r,o,n,a,s,u,l,d=e.colMap,c=e.colMap2,p=e._headerLayers,h=e.properties.headerHeight,f=e.$px(h,0,!0),x=e.$px(e.box.$DataModel.headerHeight.ini,0,!0)*(p+1),g=e.getRoot().contentBox()?2:0;(t||f<x)&&(f=x),e.getSubNodes(["HCELLS1","HCELLS2","GRPCELLBOX1","GRPCELLBOX2"]).height(e.$px2em(f)+"em"),l=e.$px2em(f-g)+"em",e.getSubNode("FHCELL").css({height:l}),p?(o=f/(p+1),e.getSubNode("HCELL",!0).each((function(t){if(n=e.getSubId(t.id),n=d[n]){if(n&&n._isgroup){for(var l in s=0,d)(i=d[l])._isgroup&&i._layer<n._layer&&i.from<=n.to&&i.to>=n.from&&(s+=e.$px(i.height||o));xui(t).top(e.$px2em(s)+"em"),a=e.$px(n.height||o)}else if(n._grp&&(r=n._grp.length)){for(u=0,l=0;l<r;l++)(i=c[n._grp[l]])&&(u+=e.$px(d[i].height||o));a=f-u}else a=f;xui(t).height(e.$px2em(a-g)+"em"),n&&n._isgroup&&n._shadow&&(t=e.getSubNode("HSCELL",n._serialId),xui(t).top(e.$px2em(s)+"em"),xui(t).height(e.$px2em(a-g)+"em"))}}))):e.getSubNode("HCELL",!0).css({height:l})},_focuscell:function(e,t,i){if(!e.properties.disabled&&!e.properties.readonly&&xui.use(i).get(0)&&!e.$_ensureOnce){e.$_ensureOnce=1,xui.asyRun((function(){e.$_ensureOnce=0}));var r,o=e.properties,n=e.box,a=n.getCellOption,s=e.cellMap[e.getSubId(i)],u=o.activeMode;if(!s||!s._ignorefocus){if(s){var l=!1,d=a(e,s,"type");a(e,s,"editable")&&(a(e,s,"disabled")||a(e,s,"readonly")?l=!1:(l=!0,"inline"==a(e,s,"editMode")&&"label"!==d||"dropbutton"==d?s._editor&&s._editor.activate():(n._editCell(e,s._serialId),xui(i).tagClass("-active",!1),xui.asyRun((function(){e.box&&xui.use(i).parent().onMouseout(!0,{$force:!0}).parent().onMouseout(!0,{$force:!0})}))))),l?s&&"cell"==u&&n._activeCell(e,!1):s&&"cell"==u&&(r=xui.use(i).id(),n._activeCell(e,r))}else{var c=e.rowMap[e.getSubId(i)];a(e,c,"editable")&&(a(e,c,"disabled")||a(e,c,"readonly")||e.boxing().editFirstCell(c))}"row"==u&&(r=xui.use(i).parent(2).id(),n._activeRow(e,r))}}},_getToggleNode:function(e,t){return e.getSubNode("ROWTOGGLE",t)},_showTips:function(e,t,i){if(!e.properties.disableTips){if(e.onShowTips)return e.boxing().onShowTips(e,t,i);if(xui.Tips){var r,o,n,a,s,u=e.keys;if(!e.properties.disabled)return n=t.id,a=xui.get(t,["parentNode","id"])||"",s=xui.get(t,["parentNode","parentNode","id"])||"",o=e.getSubId(n),0==n.indexOf(u.FHCELL)||0==a.indexOf(u.FHCELL)||0==s.indexOf(u.FHCELL)?r={tips:e.properties.tips}:0==n.indexOf(u.FCELL)||0==a.indexOf(u.FCELL)?r=e.rowMap[o]:0==n.indexOf(u.HCELL)||0==n.indexOf(u.HSCELL)||0==a.indexOf(u.HCELLA)?r=e.colMap[o]:0!=n.indexOf(u.CELL)&&0!=a.indexOf(u.CELLA)||(r=e.cellMap[o]),!r||(xui.Tips.show(i,xui.isSet(r.tips)?r.tips:r._$tips||r._caption||r.caption),!1)}}},_adjustRelWith:function(e){e.properties,e.colMap;var t,i=e.getSubNode("SCROLL22"),r=e.getSubNode("BODY22").contentBox()?2:0,o=i.width(),n=0,a=0;e.getSubNodes("HCELL",!0).each((function(t){if(t.clientHeight)return n=t.offsetWidth-e.$px(t.style.width),!1}));var s,u=0,l=0,d=[],c=[];xui.each(e.colMap,(function(t){t.hidden||t._isgroup||1!=t._region&&(t.flexSize?(l+=e.$px(t.width),d.push(t),c.push(t)):u+=e.$px(t.width),a++)}));var p=e.getSubNode("LHCELL").get(0).clientWidth||0;if(e.getSubNodes("LCELL",!0).each((function(e){e.children.length&&(p=Math.max(p,e.clientWidth))})),e.__lcellW=p,!d.length)return s="auto",void e.box._adjustColsWidth(e);for(s="hidden",i.scrollable("y")&&(o-=xui.Dom.getScrollBarSize()),o-=e.__lcellW,e._relWTotal=l,e._relAvailable=o-(u+a*n);d.length&&o!=u+a*n;){for(var h,f=e._relAvailable,x=0,g=d.length,m=0,b=g-1;b>=0;b--){var v=d[b],y=0===b?f-x:Math.round(f*(e.$px(v.width)/l));y<0&&(y=0),t=y,v.hasOwnProperty("minWidth")&&(h=e.$px(v.minWidth))>y&&(u+=h,t=h,xui.arr.removeFrom(d,b),m++),v.hasOwnProperty("maxWidth")&&(h=e.$px(v.maxWidth))<y&&(u+=h,t=h,xui.arr.removeFrom(d,b),m++),v._colWidth=e.$forceu(t),x+=t}if(0===m||m===g)break}return e.box._adjustColsWidth(e),c.length&&xui.arr.each(c,(function(t){var i,o=[];xui.each(t._cells,(function(t){(i=e.getSubNode("CELL",t))._nodes.length&&o.push(i.get(0))})),(i=e.getSubNode("HCELL",t._serialId))._nodes.length&&o.push(i.get(0)),e.box._adjusteditorW(e,xui(o).width(t._colWidth),e.$px(t._colWidth)+r)})),s},_getRow:function(e,t,i,r){if(t){if("data"==i)return xui.clone(t,!0);if("min"==i||"value"==i){var o=[];return xui.each(t.cells||t,(function(e,t){o[t]="value"in e?e.value:e})),o}return"map"==i?e.boxing().getRawData(t,r):t}},$cancelHoverEditor:function(e){if(!e.destroyed){var t,i=xui.get(e,["$curEditor","_nodes",0,"$editMode"])||"";if(xui.str.startWith(i,"hover")){var r=e.$curEditor;if("hover"==i&&(t=r.get(0))&&t.$poplink)return!1;xui.tryF(r.undo,[],r)}}},_onresize:function(e,t,i){var r,o=e.properties,n=function(t){return e.getSubNode(t)},a=xui.$us(e),s=function(t,i){return e.$forceu(t,a>0?"em":"px",i)},u=e.getRoot().contentBox()?2:0,l=o.rowHandler?e.$px(o.rowHandlerWidth)+u:0,d=n("BORDER"),c=(n("HEADER1"),n("HEADER2")),p=n("BODY12"),h=(n("BODY21"),n("SCROLL11")),f=n("SCROLL12"),x=n("SCROLL21"),g=n("SCROLL22"),m=c.height(),b=p.height();t=t?e.$px(t,null,!0):t,i=i?e.$px(i,null,!0):i,d.cssSize({width:t?s(t):null,height:i?s(i):null}),t&&(o.freezedColumn&&xui.arr.each(o.header,(function(t,i){if(i==o.freezedColumn)return!1;t.hidden||(l+=e.$px(t.width)+u)})),b&&o.freezedRow&&(b-=1),l&&o.freezedColumn&&(l-=1),r=t-l,e._leftregionw=l,c.width(s(r))),i&&(h.height(b?s(b):0),f.height(b?s(b):0),x.height(s(i-m-b)),g.height(s(i-m-b)),h.css("display",b?"":"none"),f.css("display",b?"":"none")),t&&(h.css("display",e._leftregionw?"":"none"),x.css("display",e._leftregionw?"":"none")),e.$forceRelayout&&(this._adjustColsWidth(e),this._adjustColsHeight(e)),this._adjustBody(e,"resize")}}}),xui.Class("xui.UI.Dialog","xui.UI.Widget",{Instance:{showModal:function(e,t,i,r,o){this.show(e,!0,t,i,r,o)},show:function(e,t,i,r,o,n){return e=e||xui("body"),this.each((function(a){if(!a.inShowing){var s,u=a.properties,l=xui.$us(a),d=a.boxing();switch(u.initPos){case"auto":xui.isHash(i)?(r=i.top,i=i.left):(r=r||0===r?r:a.$px(u.top),i=i||0===i?i:a.$px(u.left));break;case"center":if(xui.isHash(i))r=i.top+(i.height-a.$px(u.height))/2,i=i.left+(i.width-a.$px(u.width))/2;else{var c=e.get(0)==xui("body").get(0)?xui.win:e["xui.UI"]?e.getRoot():e,p=c==xui.win&&xui.ini.$zoomScale||1;r=r||0===r?r:Math.max(0,(c.height()/p-a.$px(u.height))/2+c.scrollTop()/p),i=i||0===i?i:Math.max(0,(c.width()/p-a.$px(u.width))/2+c.scrollLeft()/p)}}i<0&&(i=0),r<0&&(r=0),"max"==u.status&&(i=r=0);var h=function(){e.append(d);var s=a.box,c=a.getRoot(),p=function(e,t){return a.$forceu(e,l>0?"em":"px",t)};(u.iframeAutoLoad||u.ajaxAutoLoad)&&xui.UI.Div._applyAutoLoad(a),!t&&!u.modal||a.$inModal||s._modal(a),d.activate();var h=a._$rs_args,f=function(){a.onShow&&a.boxing().onShow(a),delete a.inShowing,delete a.$inThread,xui.tryF(o),u&&u.activeAnim&&xui.asyRun((function(){a&&!a.destroyed&&d.setActiveAnim(u.activeAnim,!0)}))};"min"==u.status?s._min(a,"min",f,!0):"max"==u.status?s._max(a,"max",f,n):(xui.UI.$doResize(a,h&&h[1]||u.width,h&&h[2]||u.height),c.show(i||0===i?p(i):null,r||0===r?p(r):null,f,null,n),s._refreshRegion(a))};a.inShowing=1,(s=u.fromRegion)?a.$inThread=xui.Dom.animate({border:"solid 1px #555",background:"#888",opacity:.1},{left:[s.left,i],top:[s.top,r],width:[s.width,a.$px(u.width)],height:[s.height,a.$px(u.height)]},null,h,300,0,"expoIn").start():h()}}))},hide:function(e){return this.each((function(t){var i=t.properties,r=t.box;xui.$us(t),t.getRoot().hide((function(){if(!t.inHiding){if(t.inHiding=1,t.$inModal&&r._unModal(t),"max"==i.status||"min"==i.status){var e=i.status;r._restore(t),i.status=e}var o=i.fromRegion,n=function(){delete t.inHiding,delete t.$inThread};o?t.$inThread=xui.Dom.animate({border:"solid 1px #555",background:"#888",opacity:.1},{left:[t.$px(i.left),o.left],top:[t.$px(i.top),o.top],width:[t.$px(i.width),o.width],height:[t.$px(i.height),o.height]},null,n,300,0,"expoOut").start():n()}}),null,e)})),this},close:function(e,t){return this.each((function(i){if(!(!1!==e&&i.beforeClose&&!1===i.boxing().beforeClose(i)||i.inClosing)){i.inClosing=1;var r=i.properties,o=r.fromRegion,n=function(){i.boxing().destroy(t),delete i.inClosing,delete i.$inThread};o?i.$inThread=xui.Dom.animate({border:"solid 1px #555",background:"#888",opacity:.1},{left:[r.left,o.left],top:[r.top,o.top],width:[r.width,o.width],height:[r.height,o.height]},null,n,300,0,"expoOut").start():n()}}))},activate:function(e){var t,i=this,r=this.get(0);r.box._active(r,e),this.getChildren(null,!0).each((function(e){if(xui.get(e,["properties","defaultFocus"])){try{xui.asyRun((function(){e.boxing().activate()}))}catch(e){}return t=1,!1}})),xui.asyRun((function(){if(!1!==e&&!t)try{r.getSubNode("CAPTION").focus(!0)}catch(e){}i.onActivated&&i.onActivated(r)}))},isPinned:function(){return!!xui.get(this.get(0),["properties","pinned"])}},Initialize:function(){var e=this,t=e.getTemplate();xui.merge(t.FRAME.BORDER,{tabindex:"{tabindex}",className:"xui-uiborder-outset xui-uiborder-box xui-uiborder-radius-big xui-uibar",TABSTOP1:{$order:-1},TBAR:{tagName:"div",className:"xui-uibar-top",TBARTDL:{className:"xui-uibar-tdl xui-uiborder-radius-big-tl",TBARTDLT:{className:"xui-uibar-tdlt"}},TBARTDM:{$order:1,className:"xui-uibar-tdm",TBARTDMT:{className:"xui-uibar-tdmt"}},TBARTDR:{$order:2,className:"xui-uibar-tdr xui-uiborder-radius-big-tr",TBARTDRT:{className:"xui-uibar-tdrt"}},BARCMDL:{$order:3,tagName:"div",className:"xui-uibar-cmdl",style:"{_align}",RULER:{className:"xui-ui-ruler"},LTAGCMDS:{tagName:"span",className:"xui-ltag-cmds",style:"{_ltagDisplay}",text:"{ltagCmds}"},ICON:{$order:2,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{tabindex:"{tabindex}",className:"xui-title-node",text:"{caption}",$order:3}},BARCMDR:{$order:4,tagName:"div",className:"xui-uibar-cmdr",RTAGCMDS:{$order:0,tagName:"span",className:"xui-rtag-cmds",style:"{_rtagDisplay}",text:"{rtagCmds}"},INFO:{className:"xuicon",$fonticon:"xui-uicmd-info",style:"{infoDisplay}",$order:2},OPT:{className:"xuicon",$fonticon:"xui-uicmd-opt",style:"{optDisplay}",$order:3},PIN:{$order:4,className:"xuicon",$fonticon:"xui-uicmd-pin",style:"{pinDisplay}"},LAND:{$order:5,className:"xuicon",$fonticon:"xui-uicmd-land",style:"{landDisplay}"},REFRESH:{className:"xuicon",$fonticon:"xui-uicmd-refresh",style:"{refreshDisplay}",$order:6},MIN:{$order:7,className:"xuicon",$fonticon:"xui-uicmd-min",style:"{minDisplay}"},RESTORE:{$order:8,className:"xuicon",$fonticon:"xui-uicmd-restore",style:"display:none;"},MAX:{$order:9,className:"xuicon",$fonticon:"xui-uicmd-max",style:"{maxDisplay}"},CLOSE:{$order:10,className:"xuicon",$fonticon:"xui-uicmd-close",style:"{closeDisplay}"}},TBARTDB:{$order:5,tagName:"div",className:"xui-uibar-tdb xui-uiborder-inset xui-uiborder-radius"}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main",MAINI:{tagName:"div",className:"xui-uicon-maini",PANEL:{tagName:"div",style:"{_panelstyle};{_overflow};",className:"xui-uicontainer",text:"{html}"+xui.UI.$childTag}}},BBAR:{$order:3,tagName:"div",className:"xui-uibar-bottom xui-uibar",BBARTDL:{$order:1,className:"xui-uibar-tdl xui-uiborder-radius-big-bl"},BBARTDM:{$order:2,className:"xui-uibar-tdm"},BBARTDR:{$order:3,className:"xui-uibar-tdr xui-uiborder-radius-big-br"}},TABSTOP2:{$order:9}},"all"),t.$submap=xui.UI.$getTagCmdsTpl(),e.setTemplate(t),xui.alert=e.alert,xui.confirm=e.confirm,xui.pop=e.pop,xui.prompt=e.prompt},Static:{Appearances:{KEY:{overflow:"visible"},"LTAGCMDS, RTAGCMDS":{padding:0,margin:0,"vertical-align":"middle"},"TABSTOP1,TABSTOP2":{height:0,width:"16px",display:"inline",position:"absolute"},"TBART, BBART":{"border-spacing":0,"border-collapse":"separate"},MAINI:{"padding-top":".16667em"},PANEL:{position:"relative",overflow:"auto"},CAPTION:{display:"inline","vertical-align":xui.browser.ie6?"baseline":"middle"},BORDER:{position:"relative",outline:0}},Behaviors:{DroppableKeys:["PANEL"],PanelKeys:["PANEL"],DraggableKeys:["LAND"],NoDraggableKeys:["LAND","MIN","MAX","RESTORE","PIN","INFO","OPT","CLOSE","REFRESH","CMD"],HoverEffected:{LAND:"LAND",MIN:"MIN",MAX:"MAX",RESTORE:"RESTORE",PIN:"PIN",INFO:"INFO",OPT:"OPT",CLOSE:"CLOSE",REFRESH:"REFRESH",CMD:"CMD",ICON:"ICON"},ClickEffected:{LAND:"LAND",MIN:"MIN",MAX:"MAX",RESTORE:"RESTORE",PIN:"PIN",INFO:"INFO",OPT:"OPT",CLOSE:"CLOSE",REFRESH:"REFRESH",CMD:"CMD",ICON:"ICON"},onMousedown:function(e,t){e.$inModal||e.box._active(e)},afterKeydown:function(e,t){var i=xui.Event.getKey(t);if(9==(t.$key||t.keyCode||t.charCode)){if(xui.browser.ie){var r="xui::_specialforietab";xui.Dom.byId(r)||xui("body").append("<div style='display:none;position:absolute;' id="+r+"></div>"),xui.Dom.byId(r).innerHTML=xui.stamp()+""}var o=e.getSubNode("TABSTOP1").get(0),n=e.getSubNode("TABSTOP2").get(0),a=xui.Event.getSrc(t);i.shiftKey?(a!==o&&(o.tabIndex=a.tabIndex),n.removeAttribute("tabIndex")):(a!==n&&(n.tabIndex=a.tabIndex),o.removeAttribute("tabIndex")),o=n=a=null}},onDragstop:function(e){var t=e.properties,i=(xui.$us(e),e.getRoot()),r=i.cssPos(),o=null,n=null;e.$px(t.left)!==r.left&&(t.left=o=e.$forceu(r.left,null)),e.$px(t.top)!==r.top&&(t.top=n=e.$forceu(r.top,null)),i.cssPos({left:o,top:n}),!e.onMove||null===o&&null===n||e.boxing().onMove(e,o,n,null,null)},TABSTOP1:{onFocus:function(e,t,i){var r,o,n=parseInt(xui.use(i).get(0).tabIndex||"1",10)-1,a=e.getRoot().get(0).getElementsByTagName("*"),s=0;for(a.length;(o=a[s])&&!(1==o.nodeType&&o.tabIndex&&o.tabIndex<=n&&(r||(r=o.tabIndex),o.tabIndex>r&&(r=o.tabIndex),r===n));s++);o?(xui(o).focus(!0),xui.use(i).get(0).tabIndex=o.tabIndex):(o=e.getRoot().nextFocus(!1,!0,!1),xui(o).focus(!0),xui.use(i).get(0).tabIndex=o.get(0).tabIndex),a=o=null}},TABSTOP2:{onFocus:function(e,t,i){var r,o,n=parseInt(xui.use(i).get(0).tabIndex||"1")+1,a=e.getRoot().get(0).getElementsByTagName("*"),s=0;for(a.length;(o=a[s])&&!(1==o.nodeType&&o.tabIndex&&o.tabIndex>=n&&(r||(r=o.tabIndex),o.tabIndex<r&&(r=o.tabIndex),r===n));s++);o?(xui(o).focus(!0),xui.use(i).get(0).tabIndex=o.tabIndex):(o=e.getRoot().nextFocus(!0,!0,!1),xui(o).focus(!0),xui.use(i).get(0).tabIndex=o.get(0).tabIndex),a=o=null}},TBAR:{beforeMousedown:function(e,t,i){if(!e.$inDesign&&"left"==xui.Event.getBtn(t)&&e.getKey(xui.Event.getSrc(t).parentNode.id)!=e.keys.BARCMDR){if("max"==e.properties.status)return!1;if(e.properties.movable&&!e._locked){e.box._active(e);var r=e.getRoot(),o=r.cssRegion(),n=r.parent().cssRegion(),a=e.getEmSize(),s=e.properties.movingRegion?{dragDefer:2,maxLeftOffset:o.left,maxRightOffset:n.width-o.left-a,maxTopOffset:o.top,maxBottomOffset:n.height-o.top-a,magneticDistance:a,xMagneticLines:[0,n.width-o.width],yMagneticLines:[0,n.height-o.height],targetOffsetParent:r.parent()}:{dragDefer:2};r.startDrag(t,s)}}},onDblclick:function(e,t,i){e.getKey(xui.Event.getSrc(t).parentNode.id)!=e.keys.BARCMDR&&e.properties.maxBtn&&("max"==e.properties.status?e.box._restore(e):e.box._max(e))}},PIN:{onClick:function(e,t,i){e.keys.PIN;var r=e.properties,o=e.boxing();e.beforePin&&!1===e.boxing().beforePin(e,r.pinned)||(r.pinned=!r.pinned,e.getSubNode("PIN").tagClass("-checked",r.pinned),e._locked=r.pinned,r.resizer&&(r.pinned?e.$resizer&&o._unResizer():"min"!=r.status&&o._resizer()))}},MIN:{onClick:function(e,t,i){e.box._min(e,null,null,!0)}},MAX:{onClick:function(e,t,i){e.box._max(e,null,null,!0)}},RESTORE:{onClick:function(e,t,i){e.box._restore(e)}},LAND:{onClick:function(e,t,i){e.boxing().onLand(e,t,i)}},PANEL:{onClick:function(e,t,i){return!e.properties.disabled&&(e.onClickPanel?e.boxing().onClickPanel(e,t,i):void 0)}},INFO:{onClick:function(e,t,i){e.boxing().onShowInfo(e,t,i)}},OPT:{onClick:function(e,t,i){e.boxing().onShowOptions(e,t,i)}},REFRESH:{onClick:function(e,t,i){e.boxing().onRefresh(e)}},CLOSE:{onClick:function(e,t,i){e.boxing().close()}},CMD:{onClick:function(e,t,i){return e.properties.disabled||e.onCmd&&e.boxing().onCmd(e,xui.use(i).id().split("_")[1],t,i),!1}}},DataModel:{rotate:null,selectable:!0,tips:null,border:null,disabled:null,dock:"none",showEffects:"Classic",hideEffects:"",initPos:{ini:"center",listbox:["auto","center"]},iframeAutoLoad:{ini:"",action:function(){xui.UI.Div._applyAutoLoad(this)}},ajaxAutoLoad:{ini:"",action:function(){xui.UI.Div._applyAutoLoad(this)}},html:{html:1,action:function(e,t,i){this.getSubNode("PANEL").html(xui.adjustRes(e,0,1),null,null,i)}},caption:{ini:undefined,action:function(e){e=(xui.isSet(e)?e:"")+"",this.getSubNode("CAPTION").html(xui.adjustRes(e,!0))}},image:{format:"image",action:function(e){xui.UI.$iconAction(this)}},imagePos:{action:function(e){this.getSubNode("ICON").css("backgroundPosition",e||"center")}},imageBgSize:{action:function(e){this.getSubNode("ICON").css("backgroundSize",e||"")}},imageClass:{ini:"",action:function(e,t){xui.UI.$iconAction(this,"ICON",t)}},iconFontCode:{action:function(e){xui.UI.$iconAction(this)}},shadow:!0,resizer:!0,movable:!0,movingRegion:!0,minBtn:{ini:!0,action:function(e){var t=this.getSubNode("MIN");e?t.setInlineBlock():t.css("display","none")}},maxBtn:{ini:!0,action:function(e){var t=this.getSubNode("MAX");e?t.setInlineBlock():t.css("display","none")}},restoreBtn:{ini:!0,action:function(e){var t=this.getSubNode("RESTORE");e?t.setInlineBlock():t.css("display","none")}},infoBtn:{ini:!1,action:function(e){this.getSubNode("INFO").css("display",e?"":"none")}},optBtn:{ini:!1,action:function(e){this.getSubNode("OPT").css("display",e?"":"none")}},closeBtn:{ini:!0,action:function(e){var t=this.getSubNode("CLOSE");e?t.setInlineBlock():t.css("display","none")}},refreshBtn:{ini:!1,action:function(e){this.getSubNode("REFRESH").css("display",e?"":"none")}},pinBtn:{ini:!1,action:function(e){var t=this.getSubNode("PIN");e?t.setInlineBlock():t.css("display","none")}},landBtn:{ini:!1,action:function(e){var t=this.getSubNode("LAND");e?t.setInlineBlock():t.css("display","none")}},width:{$spaceunit:1,ini:"25em"},height:{$spaceunit:1,ini:"25em"},minWidth:200,minHeight:100,position:"absolute",fromRegion:{hidden:!0,ini:null},modal:{ini:!1,action:function(e){this.box&&(e?this.box._modal(this):this.box._unModal(this))}},status:{ini:"normal",listbox:["normal","min","max"],action:function(e,t){var i=this,r=i.box;"min"==e?r._min(i,t,null,!0):"max"==e?r._max(i,t,null,!0):r._restore(i,t)}},hAlign:{ini:"left",listbox:["left","center","right"],action:function(e){this.getSubNode("BARCMDL").css("textAlign",e)}},tagCmds:{ini:[],action:function(){this.boxing().refresh()}},$hborder:1,$vborder:1},EventHandlers:{onIniPanelView:function(e){},onShow:function(e){},onActivated:function(e){},beforePin:function(e,t){},beforeStatusChanged:function(e,t,i){},afterStatusChanged:function(e,t,i){},onClickPanel:function(e,t,i){},onLand:function(e,t,i){},beforeClose:function(e){},onShowInfo:function(e,t,i){},onShowOptions:function(e,t,i){},onRefresh:function(e){},onCmd:function(e,t,i,r){}},RenderTrigger:function(){this.destroyTrigger=function(){var e=this;e.$inModal&&e.box._unModal(e)}},LayoutTrigger:function(){var e=this;if(e.properties.modal){var t=e.$modalDiv&&e.$modalDiv.parent(),i=e.box;t&&t.get(0)&&t.get(0)!==e.getRootNode()&&i._unModal(e),i._modal(e)}},_prepareData:function(e){var t=arguments.callee.upper.call(this,e),i="display:none";t.minDisplay=t.minBtn?"":i,t.maxDisplay=t.maxBtn?"":i,t.infoDisplay=t.infoBtn?"":i,t.optDisplay=t.optBtn?"":i,t.closeDisplay=t.closeBtn?"":i,t.pinDisplay=t.pinBtn?"":i,t.landDisplay=t.landBtn?"":i,t.refreshDisplay=t.refreshBtn?"":i,t._align="text-align:"+t.hAlign+";";var r=e.properties.status;return"min"!=r&&"max"!=r||(e.$noR=1),xui.isStr(t.overflow)&&(t._overflow=-1!=t.overflow.indexOf(":")?t.overflow:t.overflow?"overflow:"+t.overflow:""),xui.isEmpty(t.tagCmds)||this._prepareCmds(e,t),t},_min:function(e,t,i,r){var o=e.getRoot(),n=e.box,a=(o.parent(),e.boxing()),s=e.properties,u=xui.Dom._getEffects(s.showEffects,1);if(e.$inThread&&e.$inThread.abort(),t||(t=s.status),!e.beforeStatusChanged||!1!==e.boxing().beforeStatusChanged(e,"min",t)){"max"==t?n._unMax(e):"normal"==t&&n._refreshRegion(e),e.getSubNodes(["PANEL","BBAR"]).css("display","none"),s.minBtn&&(s.restoreBtn&&e.getSubNode("RESTORE").setInlineBlock(),e.getSubNode("MIN").css("display","none")),s.resizer&&e.$resizer&&a._unResizer(),s.status="min";var l=o.height(),d=e.getSubNode("BORDER").height(),c=e.getSubNode("TBAR").height();o.cssSize({width:s.minWidth,height:c+l-d},!0),e.afterStatusChanged&&e.boxing().afterStatusChanged(e,"min",t),u&&xui.browser.ie678&&xui.filter(u.params,(function(e,t){return!!xui.Dom._cssfake[t]})),o.show(null,null,i,null,r)}},_max:function(e,t,i,r){var o=e.getRoot(),n=e.box,a=e.boxing(),s=(o.parent(),e.properties),u=xui.Dom._getEffects(s.showEffects,1);t||(t=s.status),e.$inThread&&e.$inThread.abort(),e.beforeStatusChanged&&!1===e.boxing().beforeStatusChanged(e,"max",t)||("min"==t?n._unMin(e):"normal"==t&&n._refreshRegion(e),s.pinBtn&&e.getSubNode("PIN").css("display","none"),s.maxBtn&&(e.getSubNode("MAX").css("display","none"),s.restoreBtn&&e.getSubNode("RESTORE").setInlineBlock()),s.resizer&&e.$resizer&&a._unResizer(),s.status="max",a.setDock("cover",!0),e.afterStatusChanged&&e.boxing().afterStatusChanged(e,"max",t),u&&xui.browser.ie678&&xui.filter(u.params,(function(e,t){return!!xui.Dom._cssfake[t]})),o.show(null,null,i,null,r))},_restore:function(e,t){e.getRoot();var i=e.box,r=e.properties;t||(t=r.status),r.status="normal",e.beforeStatusChanged&&!1===e.boxing().beforeStatusChanged(e,"normal",t)||("max"==t&&i._unMax(e),"min"==t&&i._unMin(e),e.getSubNode("BORDER").ieRemedy(),e.getSubNode("RESTORE").css("display","none"))},_unMax:function(e){var t=e.properties,i=e.boxing();e.getSubNode("MAX").setInlineBlock(),t.pinBtn&&e.getSubNode("PIN").setInlineBlock(),t.resizer&&!t.pinned&&i._resizer(),i.setDock("none"),e.getRoot().cssSize({width:t.width,height:t.height}),e.adjustSize(!0),e.afterStatusChanged&&e.boxing().afterStatusChanged(e,"normal","max")},_unMin:function(e){var t=e.properties,i=e.boxing();e.getSubNodes(["PANEL","BBAR"]).css("display","block"),e.getSubNode("MIN").setInlineBlock(),t.resizer&&!t.pinned&&i._resizer(),e.getRoot().cssSize({width:t.width,height:t.height}),e.adjustSize(!0),e.afterStatusChanged&&e.boxing().afterStatusChanged(e,"normal","min")},_active:function(e,t){if(!e.$inDesign&&(!1===t||xui.$cache.unique.activeWndId!=e.$xid)&&(this._deActive(),!1!==t)){var i=xui(e.domId),r=i.topZindex(),o=parseInt(i.css("zIndex"),0);i.css("zIndex",r>o?r:o),e.getSubNode("TBAR").tagClass("-focus"),xui.$cache.unique.activeWndId=e.$xid}},_deActive:function(){var e;(e=xui.UI._cache["$"+xui.$cache.unique.activeWndId])&&e.getSubNode("TBAR").tagClass("-focus",!1),delete xui.$cache.unique.activeWndId},_modal:function(e){var t,i=e.getRoot(),r=i.parent();if(!r.isEmpty()&&!e.$inModal){(t=e.$modalDiv)&&t.get(0)&&t.get(0).parentNode||(t=e.$modalDiv=xui.create("<div class='xui-cover xui-custom xui-cover-modal' style='left:0;top:0;position:absolute;overflow:hidden;display:block;z-index:0;'></div>")).setSelectable(!1),r.append(t),r.get(0)!==document.body&&r.get(0)!==document&&r.get(0)!==window||(r=xui.win),t.css({display:"block",width:Math.max(r.width(),r.scrollWidth())+"px",height:Math.max(r.height(),r.scrollHeight())+"px"}).onMousedown((function(){return!!e.$inDesign&&null})).topZindex(!0),e.$inDesign&&t.onClick((function(){i.onClick(!0)})),r.onSize((function(e){var i=(e=xui(e)).width()+"px",r=e.height()+"px";t.css({width:i,height:r}),xui.asyRun((function(){var i=Math.max(e.width(),e.scrollWidth())+"px",r=Math.max(e.height(),e.scrollHeight())+"px";t.css({width:i,height:r})}))}),"dialog:"+e.serialId);var o=(parseInt(t.css("zIndex"),10)||0)+1;i.css("zIndex",o),o>=xui.Dom.TOP_ZINDEX&&(xui.Dom.TOP_ZINDEX=o+1),e.$inModal=!0,r.setBlurTrigger(e.$xid+"_anti",!0,xui([t.get(0),e.getRootNode()]))}},_unModal:function(e){if(e.$inModal){var t=e.$modalDiv.parent();t.get(0)!==document.body&&t.get(0)!==document&&t.get(0)!==window||(t=xui.win),t.onSize(null,"dialog:"+e.serialId),e.getRoot().css("zIndex",0),e.$modalDiv.css("display","none");var i=e.getSubNode("BORDER");i.isEmpty()||i.append(e.$modalDiv),e.$inModal=!1,t.setBlurTrigger(e.$xid+"_anti")}},_refreshRegion:function(e){if(e.renderId){var t=e.properties,i=e.getRoot(),r=xui.$us(e),o=function(t,i){return e.$forceu(t,r>0?"em":"px",i)},n=i.cssRegion();return n.left=o(n.left),n.top=o(n.top),n.width=o(n.width),n.height=o(n.height),xui.merge(t,n,(function(e,i){return"auto"!=t[i]}))}},_adjust:function(e,t,i,r,o,n){t=xui.adjustRes(t||""),xui.isSet(i)&&""!==i||(i=t,t=r||"");var a,s,u,l=e.$div.reBoxing(),d="xui:temp:dialog",c=arguments.callee;xui.Dom.byId(d)||(u=c._cache=l.clone(!1),xui("body").append(u),u.css({overflow:"visible",position:"absolute",visibility:"visible",left:xui.Dom.HIDE_VALUE,top:xui.Dom.HIDE_VALUE}).id(d,!0),u.removeClass("xui-ui-hidden")),(u=c._cache).width("auto").height("auto"),u.html(i,!1);var p=u.cssSize();p.width+=10,p.height+=10,l.html(i),p.width>500&&(p.width=500,u.width(500),p.height=u.offsetHeight()+10,u.width("auto")),u.html("",!1),p.height+=10,p.height>400&&(p.height=400),p.width<150&&(p.width=150),p.height<30&&(p.height=30),l.cssSize(p).css("overflow","auto").show();var h=e.getRoot()._getEmSize();return a=p.width+2*h,s=p.height+7.5*h,e.setCaption(t).setWidth(a).setHeight(s),{width:a,height:s}},alert:function(e,t,i,r,o,n,a,s,u){var l,d=arguments.callee;if(u||!(l=d.dialog)||!l.get(0)||!l.get(0).renderId){var c=(l=new xui.UI.Dialog({overflow:"hidden",minBtn:!1,maxBtn:!1,pinBtn:!1,resizer:!1},{beforeClose:function(){if(xui.tryF(l._$onClose),l._$onClose=null,!u)return l.hide(),!1},onHotKeydown:function(e,t){"esc"==t.key&&l.close()}})).$cmd=new xui.UI.Div({height:"2.5em",dock:"bottom",zIndex:10},null,null,null,{KEY:"text-align:center;padding-top:.5em"}),p=l.$btn=new xui.UI.SButton({position:"relative",tabindex:1},{onClick:function(){l.close()},onHotKeydown:function(e,t){"enter"==t.key&&l.close()}},null,null,{KEY:"margin:0 .5em"});c.append(p);var h=l.$div=new xui.UI.Div({left:10,top:10});l.append(c).append(h).render(),u||(d.dialog=l)}return l._$onClose=i,l.$btn.setCaption("&nbsp;&nbsp;"+(r||xui.wrapRes("$inline.ok"))+"&nbsp;&nbsp;"),xui.UI.Dialog._adjust(l,e,t,"Alert"),a&&a["xui.UI"]&&(a=a.getContainer(s)),xui.isSet(a)||(a=xui("body")),l.show(a,!0,o,n),xui.resetRun("dlg_focus:"+l.get(0).$xid,(function(){l.$btn.activate()})),l},confirm:function(e,t,i,r,o,n,a,s,u,l,d){var c,p=arguments.callee;if(d||!(c=p.dialog)||!c.get(0)||!c.get(0).renderId){var h=(c=new xui.UI.Dialog({overflow:"hidden",minBtn:!1,maxBtn:!1,pinBtn:!1,resizer:!1},{beforeClose:function(){if(c._$_clicked?delete c._$_clicked:xui.tryF(c._$onNo,["close"]),c._$onYes=c._$onNo=null,!d)return c.hide(),!1},onHotKeydown:function(e,t){"esc"==t.key&&c.close()}})).$cmd=new xui.UI.Div({height:"2.5em",dock:"bottom",zIndex:10},null,null,null,{KEY:"text-align:center;padding-top:.5em"}),f=c.$btn1=new xui.UI.SButton({tabindex:1,position:"relative"},{onClick:function(){xui.tryF(c._$onYes,["yes"]),c._$_clicked=1,c.close()}},null,null,{KEY:"margin:0 .5em"});h.append(f),f=c.$btn2=new xui.UI.SButton({tabindex:1,position:"relative"},{onClick:function(){xui.tryF(c._$onNo,["no"]),c._$_clicked=1,c.close()}},null,null,{KEY:"margin:0 .5em"}),h.append(f);var x=c.$div=new xui.UI.Div({left:10,top:10});c.append(h).append(x).render(),d||(p.dialog=c)}return c._$onYes=i,c._$onNo=r,delete c._$_clicked,c.$btn1.setCaption("&nbsp;&nbsp;"+(o||xui.wrapRes("$inline.yes"))+"&nbsp;&nbsp;"),c.$btn2.setCaption("&nbsp;&nbsp;"+(n||xui.wrapRes("$inline.no"))+"&nbsp;&nbsp;"),xui.UI.Dialog._adjust(c,e,t,"Confirm"),u&&u["xui.UI"]&&(u=u.getContainer(l)),xui.isSet(u)||(u=xui("body")),c.show(u,!0,a,s),xui.resetRun("dlg_focus:"+c.get(0).$xid,(function(){c.$btn2.activate()})),c},pop:function(e,t,i,r,o,n,a){var s=new xui.UI.Dialog({overflow:"hidden",minBtn:!1,maxBtn:!1,pinBtn:!1,resizer:!1},{onHotKeydown:function(e,t){"esc"==t.key&&s.close()}}),u=s.$cmd=new xui.UI.Div({height:"2.5em",dock:"bottom",zIndex:10},null,null,null,{KEY:"text-align:center;padding-top:.5em"}).append(s.$btn=new xui.UI.SButton({caption:"&nbsp;&nbsp;"+(i||"$inline.ok")+"&nbsp;&nbsp;",tabindex:1,position:"relative"},{onClick:function(){s.destroy()},onHotKeydown:function(e,t){"enter"==t.key&&s.close()}},null,null,{KEY:"margin:0 .5em"})),l=s.$div=new xui.UI.Div({left:10,top:10,width:"7em"}).setCustomStyle({KEY:"overflow:visible"});return s.append(u).append(l).render(),xui.UI.Dialog._adjust(s,e,t,"Message"),n&&n["xui.UI"]&&(n=n.getContainer(a)),xui.isSet(n)||(n=xui("body")),s.show(n,!1,r,o),xui.resetRun("dlg_focus:"+s.get(0).$xid,(function(){s.$btn.activate()})),s},prompt:function(e,t,i,r,o,n,a,s,u,l,d,c){var p,h=arguments.callee;if(c||!(p=h.dialog)||!p.get(0)||!p.get(0).renderId){var f=(p=new xui.UI.Dialog({overflow:"hidden",minBtn:!1,maxBtn:!1,pinBtn:!1,left:s||200,top:u||200,width:"25em",height:"11em",conDockPadding:{left:".5em",right:".5em",top:0,bottom:0}},{beforeClose:function(){if(p._$_clickYes?delete p._$_clickYes:xui.tryF(p._$onNo,["no"]),p._$input.setValue("",!1,"prompt"),p._$onYes=p._$onNo=null,!c)return p.hide(),!1}}))._$caption=new xui.UI.Div({height:"1.5em",dock:"top"}),x=new xui.UI.Div({height:"2.5em",dock:"bottom",zIndex:10},null,null,null,{KEY:"text-align:center;padding-top:.5em"}).append(p.$btn1=new xui.UI.SButton({position:"relative",tabindex:1},{onClick:function(){!1!==xui.tryF(p._$onYes,[p._$input.getUIValue()])&&(p._$_clickYes=1,p.close())}},null,null,{KEY:"margin:0 .5em"}));x.append(p.$btn2=new xui.UI.SButton({tabindex:1,position:"relative"},{onClick:function(){p.close()}},null,null,{KEY:"margin:0 .5em"}));var g=p._$input=new xui.UI.Input({dock:"fill",multiLines:!0});p.append(f).append(x).append(g).render(),c||(h.dialog=p)}return p.setCaption(e||"Prompt"),p._$caption.setHtml(t||""),p._$input.setValue(i||"",!0,"prompt"),p._$onYes=r,p._$onNo=o,delete p._$_clickYes,p.$btn1.setCaption("&nbsp;&nbsp;"+(n||xui.wrapRes("$inline.ok"))+"&nbsp;&nbsp;"),p.$btn2.setCaption("&nbsp;&nbsp;"+(a||xui.wrapRes("$inline.cancel"))+"&nbsp;&nbsp;"),l&&l["xui.UI"]&&(l=l.getContainer(d)),xui.isSet(l)||(l=xui("body")),p.show(l,!0,s,u),xui.resetRun("dlg_focus:"+p.get(0).$xid,(function(){p._$input.activate()})),p},_onresize:function(e,t,i,r){t&&"min"==e.properties.status&&(t=e.properties.minWidth),e.properties;var o,n,a,s=xui.$us(e),u=function(t,i){return e.$forceu(t,s>0?"em":"px",i)},l=arguments.callee.upper.apply(this,arguments),d={},c=e.getSubNode("BORDER"),p=e.getSubNode("TBAR"),h=e.getSubNode("PANEL"),f=e.getSubNode("BBAR"),x=e.getSubNode("MAIN"),g=e.getSubNode("MAINI"),m=c.contentBox(),b=h.contentBox();t&&(t=e.$px(t)),i&&(i=e.$px(i)),l.left&&(l.left=e.$px(l.left)),l.top&&(l.top=e.$px(l.top)),l.width&&(l.width=e.$px(l.width)),l.height&&(l.height=e.$px(l.height)),i&&("auto"==i?d.height=i:(o=p.offsetHeight(!0),n=f.offsetHeight(!0),(a=l.height-o-n)>0&&(d.height=a))),i&&(d.height=d.height-xui.toFixedNumber(g._paddingH(),2)-(m?0:c._borderH())-(b?0:h._borderH())),t&&(d.width=l.width-(parseFloat(g.css("paddingRight"))||0)-(parseFloat(g.css("borderRightWidth"))||0)-(parseFloat(x.css("paddingLeft"))||0)-(parseFloat(x.css("borderLeftWidth"))||0)-(m?0:c._borderW())-(b?0:h._borderW())),t&&s>0&&(d.width=u(d.width)),i&&s>0&&(d.height=u(d.height)),h.cssSize(d,!0),t&&xui.UI._adjustConW(e,h,d.width)}}}),xui.Class("xui.UI.FoldingList",["xui.UI.List"],{Instance:{fillContent:function(e,t){var i,r,o=this.get(0);return o.renderId&&(r=o.getItemByItemId(e))&&(i=o.getSubNodeByItemId("BODYI",e).html(""),t?(r._obj=t,r._fill=!0,"string"==typeof t?i.html(t):i.append(t.render(!0))):r._obj=r._fill=null),this},toggle:function(e){var t=this.get(0);if(t.renderId){var i=t.properties,r=i.items,o=t.getItemByItemId(e),n=t.getSubIdByItemId(e),a=t.getSubNode("ITEM",n),s=t.getSubNode("TOGGLE",n),u=a.next();if(o._show){if(i.activeLast&&r.length&&r[r.length-1].id==o.id)return!1;a.tagClass("-checked",!1),s.tagClass("-checked",!1),u&&u.tagClass("-prechecked",!1)}else if(a.tagClass("-checked"),s.tagClass("-checked"),u&&u.tagClass("-prechecked"),!o._fill){var l=function(e){t.boxing().fillContent(o.id,o._body=e)};if(t.onGetContent){var d=t.boxing().onGetContent(t,o,l);d&&l(d)}else l(t.box._buildBody(t,o))}o._show=!o._show}return this}},Initialize:function(){var e=this.getTemplate();e.ITEMS.className="{_bordertype}",e.$submap.items={ITEM:{tagName:"div",className:"xui-uiborder-flat xui-uiborder-radius {_checked} {_precheked} {itemClass} {disabled} {readonly}",style:"{itemStyle}",HEAD:{tagName:"div",className:"xui-uibar",HL:{tagName:"div"},HR:{tagName:"div"},TITLE:{tabindex:"{_tabindex}",TLEFT:{$order:0,tagName:"div",TOGGLE:{$order:0,className:"xuifont",$fonticon:"{_fi_tlg}"},LTAGCMDS:{$order:2,tagName:"span",style:"{_rtagDisplay}",text:"{ltagCmds}"},CAP1:{$order:1,className:"xui-title-node",text:"{title}"}},TRIGHT:{$order:1,tagName:"div",style:"{_capDisplay}",CAP2:{$order:0,text:"{caption}"},TAGCMDS:{$order:60,tagName:"span",style:"{_ltagDisplay}",text:"{rtagCmds}"}}}},BODY:{$order:1,tagName:"div",className:"xui-uibase",BODYI:{$order:0,tagName:"div",text:"{_body}"}},TAIL:{$order:4,tagName:"div",className:"xui-uibar",TL:{tagName:"div"},TR:{tagName:"div"}}}},this.setTemplate(e)},Static:{Appearances:{KEY:{padding:".25em"},ITEMS:{border:0,position:"relative",zoom:xui.browser.ie?1:null,"padding-top":".75em"},ITEM:{zoom:xui.browser.ie?1:null,"margin-top":"-7px",padding:0,position:"relative",overflow:"hidden","border-radius":"6px","box-shadow":"-1px -1px 2px #EDEDED"},"HEAD, BODY, BODYI, TAIL":{position:"relative"},BODY:{display:"none",zoom:xui.browser.ie?1:null,position:"relative",overflow:"auto"},BODYI:{padding:".25em .75em 0 .75em",position:"relative"},"BODY, BODYI":{},"ITEM-hover, ITEM-active, ITEM-checked":null,"ITEM-checked":{$order:2,"margin-bottom":"1em"},"ITEM-checked BODY":{$order:2,display:"block"},"HL, HR, TL, TR":{position:"absolute",width:".75em"},"HL, HR":{height:"2.5em"},"ITEM-prechecked HL":{$order:1},"ITEM-prechecked HR":{$order:1},"TL, TR":{height:"1.75em"},HL:{$order:1,top:0,left:0},HR:{$order:1,top:0,right:0},TL:{$order:1,bottom:0,left:0},TR:{$order:1,bottom:0,right:0},HEAD:{position:"relative",zoom:xui.browser.ie?1:null,overflow:"hidden"},TITLE:{$order:1,display:"block",position:"relative","white-space":"nowrap",overflow:"hidden",padding:".25em .5em"},TAIL:{position:"relative",height:".25em"},"CAP1, CAP2":{padding:".25em","vertical-align":"middle"},CAP1:{cursor:"pointer","white-space":"nowrap"},"ITEM-checked CAP1":{$order:2,"font-weight":"normal"},TLEFT:{position:"relative",left:".5em","white-space":"nowrap",overflow:"hidden"},TRIGHT:{position:"absolute",right:".5em",top:".25em","white-space":"nowrap",overflow:"hidden"}},Behaviors:{HoverEffected:{ITEM:"ITEM",HEAD:"HEAD",OPT:"OPT"},ClickEffected:{ITEM:null,HEAD:"HEAD"},ITEM:{onClick:null,onKeydown:null},HEAD:{onClick:function(e,t,i){return e.boxing().toggle(e.getItemIdByDom(i)),!1}},OPT:{onMousedown:function(){return!1},onClick:function(e,t,i){return e.boxing().onShowOptions(e,e.getItemByDom(i),t,i),!1}}},DataModel:{lite:null,value:null,borderType:null,activeLast:!0},EventHandlers:{onGetContent:function(e,t,i){},onShowOptions:function(e,t,i,r){}},RenderTrigger:function(){var e,t=this.properties,i=t.items;t.activeLast&&i.length>0&&(e=i[i.length-1],this.boxing().fillContent(e.id,e._body))},_prepareItems:function(e,t,i){if(t.length&&(t[0]._precheked=e.getClass("ITEM","-prechecked"),e.properties.activeLast)){var r=t[t.length-1];r._show=!0,r._fill=!0,r._body=e.onGetContent?e.boxing().onGetContent(e,r,(function(t){e.boxing().fillContent(r.id,r._body=t)})):e.box._buildBody(e,r)}return arguments.callee.upper.apply(this,arguments)},_prepareItem:function(e,t){var i=e.properties;t._tabindex=i.tabindex,t.caption?t.caption=t.caption.replace(/</g,"&lt;"):t._capDisplay="display:none",t._body=t._body||"Loading...",t._show?(t._checked=e.getClass("ITEM","-checked"),t._fi_tlg="xuifont-checked xui-uicmd-toggle xui-uicmd-toggle-checked"):t._fi_tlg="xui-uicmd-toggle",this._prepareCmds(e,t)},_buildBody:function(e,t){return t.text?'<pre class="xui-node xui-node-div">'+t.text.replace(/</g,"&lt;")+"</pre>":""},_onresize:function(){}}}),xui.Class("xui.UI.FoldingTabs","xui.UI.Tabs",{Instance:{_setCtrlValue:function(e,t){this.each((function(i){i.domId;var r=i.boxing(),o=t?"":r.getUIValue(),n=i.properties,a=function(e,t){var r=i.getSubIdByItemId(e),o=i.getItemByItemId(e);if(r){t.push(r);var n=i.getSubNode("BODY",r);"none"!=n.css("display")&&(o._scrollTop=n.get(0).scrollTop||0,o._scrollTop&&(n.get(0).scrollTop=0),n.css("display","none"))}},s=function(e,t){var r=i.getSubIdByItemId(e),o=i.getItemByItemId(e);if(r){t.push(r);var n=i.getSubNode("BODY",r);"none"==n.css("display")&&(n.css("display","block"),o._scrollTop&&(n.get(0).scrollTop=o._scrollTop),i.box._forLazyAppend(i,o,e),i.box._forIniPanelView(i,o,e))}},u=[],l=[];"multi"==n.selMode?(o=o?o.split(n.valueSeparator):[],e=e?e.split(n.valueSeparator):[],xui.arr.each(o,(function(t){-1==xui.arr.indexOf(e,t)&&a(t,u)})),xui.arr.each(e,(function(e){-1==xui.arr.indexOf(o,e)&&s(e,l)}))):(a(o,u),s(e,l)),u.length&&(i.getSubNodes(["ITEM","TOGGLE"],u).tagClass("-checked",!1),i.getSubNodes("ITEM",u).next().tagClass("-prechecked",!1)),l.length&&(i.getSubNodes(["ITEM","TOGGLE"],l).tagClass("-checked"),i.getSubNodes("ITEM",l).next().tagClass("-prechecked")),i.adjustSize()}))},_afterInsertItems:null},Static:{Templates:{tagName:"div",style:"{_style};",BOX:{$order:0,tagName:"div",ITEMS:{tagName:"div",text:"{items}"}},$submap:{items:{ITEM:{tagName:"div",className:"xui-uiborder-flat xui-uiborder-radius {_checked} {_precheked} {itemClass} {disabled} {readonly}",style:"{_itemDisplay};{itemStyle};",HEAD:{tagName:"div",className:"xui-uibar  {_checked} {_precheked} ",HL:{tagName:"div"},HR:{tagName:"div"},TITLE:{tabindex:"{_tabindex}",TLEFT:{$order:0,tagName:"div",LTAGCMDS:{$order:0,tagName:"span",style:"{_ltagDisplay}",text:"{ltagCmds}"},TOGGLE:{$order:1,className:"xuifont {_tlgchecked}",$fonticon:"xui-uicmd-toggle"},ICON:{$order:2,className:"xuicon {imageClass}  {picClass}",style:"{backgroundImage}{backgroundPosition}{backgroundSize}{backgroundRepeat}{iconFontSize}{imageDisplay}{iconStyle}",text:"{iconFontCode}"},CAPTION:{$order:3,className:"xui-title-node",text:"{caption}"}},TRIGHT:{$order:1,tagName:"div",style:"{_capDisplay}",MESSAGE:{$order:0,text:"{message}"},CMDS:{$order:2,RTAGCMDS:{$order:0,tagName:"span",style:"{_rtagDisplay}",text:"{rtagCmds}"},OPT:{$order:1,className:"xuifont",$fonticon:"xui-uicmd-opt",style:"{_opt}"},POP:{className:"xuifont",$fonticon:"xui-uicmd-pop",style:"{popDisplay}",$order:1},CLOSE:{className:"xuifont",$fonticon:"xui-uicmd-close",style:"{closeDisplay}",$order:2}}}}},BODY:{$order:1,tagName:"div",className:"xui-uibase",BODYI:{tagName:"div",PANEL:{tagName:"div",style:"{_itemHeight};{_overflow};{_bginfo}",className:"xui-uibase xui-uicontainer",text:xui.UI.$childTag}}},TAIL:{$order:4,tagName:"div",className:"xui-uibar",TL:{tagName:"div"},TR:{tagName:"div"}}}},"items.ltagCmds":function(e,t,i,r,o){var n=arguments.callee,a=n._m||(n._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(e,t,i,"items.tagCmds"+(a[i.type]||".button"),o)},"items.rtagCmds":function(e,t,i,r,o){var n=arguments.callee,a=n._m||(n._m={text:".text",button:".button",image:".image"});xui.UI.$doTemplate(e,t,i,"items.tagCmds"+(a[i.type]||".button"),o)},"items.tagCmds.text":xui.UI.$getTagCmdsTpl("text"),"items.tagCmds.button":xui.UI.$getTagCmdsTpl("button"),"items.tagCmds.image":xui.UI.$getTagCmdsTpl("image")}},Appearances:{KEY:{},BOX:{},"LTAGCMDS, RTAGCMDS":{padding:0,margin:0,"vertical-align":"middle"},ITEMS:{border:0,position:"relative",zoom:xui.browser.ie?1:null,padding:"11px 4px 4px 4px"},ITEM:{zoom:xui.browser.ie?1:null,"margin-top":"-7px",padding:0,position:"relative",overflow:"hidden","border-radius":"6px","box-shadow":"-1px -1px 2px #EDEDED"},"HEAD, BODY, BODYI, PANEL, TAIL":{position:"relative"},CMDS:{padding:".25em 0 0 .25em","vertical-align":"middle",position:"relative"},BODY:{display:"none",zoom:xui.browser.ie?1:null,position:"relative"},BODYI:{padding:"0 .25em"},PANEL:{overflow:"auto",padding:".25em"},"ITEM-hover":{},"ITEM-active, ITEM-checked":{},"ITEM-checked":{$order:2,"margin-bottom":"1em"},"ITEM-checked BODY":{$order:2,display:"block"},"HL, HR, TL, TR":{position:"absolute",width:".75em"},"HL, HR":{height:"2.5em"},"ITEM-prechecked HL":{$order:1},"ITEM-prechecked HR":{$order:1},"TL, TR":{height:"1.75em"},HL:{$order:1,top:0,left:0},HR:{$order:1,top:0,right:0},TL:{$order:1,bottom:0,left:0},TR:{$order:1,bottom:0,right:0},HEAD:{cursor:"pointer",position:"relative",zoom:xui.browser.ie?1:null,overflow:"hidden"},TITLE:{$order:1,display:"block",position:"relative","white-space":"nowrap",overflow:"hidden",padding:".25em .5em"},"BODY, BODYI":{overflow:"hidden"},TAIL:{height:".25em"},"CAPTION, MESSAGE":{padding:".25em","vertical-align":"middle"},MESSAGE:{"font-size":"1em"},CAPTION:{"white-space":"nowrap"},"ITEM-checked CAPTION":{$order:2,"font-weight":"bold"},TLEFT:{position:"relative",left:".5em",padding:"0 0 0 .5em","white-space":"nowrap",overflow:"hidden"},TRIGHT:{position:"absolute",right:".5em",top:".25em","white-space":"nowrap",overflow:"hidden"}},Behaviors:{DraggableKeys:["HEAD"],HoverEffected:{OPT:"OPT",CLOSE:"CLOSE",POP:"POP",ITEM:"HEAD"},ClickEffected:{OPT:"OPT",CLOSE:"CLOSE",POP:"POP",ITEM:"HEAD"},ITEM:{onClick:null},ITEMS:{onMousedown:null,onDrag:null,onDragstop:null},HEAD:{onClick:function(e,t,i){if("left"==xui.Event.getBtn(t)){var r=e.properties,o=e.getItemByDom(i),n=(e.getSubId(i),e.boxing());if(o){if(r.disabled||o.disabled)return!1;if(r.readonly||o.readonly)return!1;switch(e.getSubNode("TITLE").focus(!0),r.selMode){case"multi":var a=n.getUIValue(),s=a?a.split(r.valueSeparator):[],u=1;if(s.length){-1!=xui.arr.indexOf(s,o.id)?(xui.arr.removeValue(s,o.id),u=-1):s.push(o.id),s.sort(),a=s.join(r.valueSeparator),n.getUIValue()!==a&&(n.setUIValue(a,null,null,"click"),n.get(0)&&n.getUIValue()==a&&n.onItemSelected(e,o,t,i,u));break}case"single":n.getUIValue()!==o.id&&(n.setUIValue(o.id,null,null,"click"),n.get(0)&&n.getUIValue()==o.id&&n.onItemSelected(e,o,t,i,1))}}}},onKeydown:function(e,t,i){var r=xui.Event.getKey(t),o=r.key;if(r.shiftKey," "==o||"enter"==o)return e.getSubNode("HEAD",e.getSubId(i)).onClick(),!1}}},DataModel:{$hborder:0,$vborder:0,noPanel:null,noHandler:null,HAlign:null,selMode:{ini:"single",listbox:["single","multi"]}},_prepareItems:function(e,t,i){return t.length&&(t[0]._precheked=e.getClass("ITEM","-prechecked")),arguments.callee.upper.apply(this,arguments)},_prepareItem:function(e,t){var i,r="display:none",o=e.properties;t.closeDisplay=t.closeBtn?"":r,t.popDisplay=t.popBtn?"":r,t._opt=t.optBtn?"":r,t._itemDisplay=t.hidden?r:"",t.height&&(t._itemHeight="height:"+e.$forceu(t.height));var n=e.properties;t._tabindex=n.tabindex,t.caption||(t._capDisplay=r),t._bginfo="",(i=t.panelBgClr||o.panelBgClr)&&(t._bginfo+="background-color:"+i+";"),(i=t.panelBgImg||o.panelBgImg)&&(t._bginfo+="background-image:url("+xui.adjustRes(i)+");"),(i=t.panelBgImgPos||o.panelBgImgPos)&&(t._bginfo+="background-position:"+i+";"),(i=t.panelBgImgRepeat||o.panelBgImgRepeat)&&(t._bginfo+="background-repeat:"+i+";"),(i=t.panelBgImgAttachment||o.panelBgImgAttachment)&&(t._bginfo+="background-attachment:"+i+";"),xui.isStr(t.overflow)?t._overflow=-1!=t.overflow.indexOf(":")?t.overflow:t.overflow?"overflow:"+t.overflow:"":xui.isStr(o.overflow)&&(t._overflow=-1!=o.overflow.indexOf(":")?o.overflow:o.overflow?"overflow:"+o.overflow:""),t._show&&(t._checked=e.getClass("ITEM","-checked"),t._tlgchecked=e.getClass("TOGGLE","-checked")),this._prepareCmds(e,t)},_onresize:function(e,t,i,r,o){r&&(e._w=e._h=null),t&&e._w!=t&&(e._w=t,e.getSubNode("PANEL",!0).each((function(t){if(t.offsetWidth){xui(t).width("auto");var i=xui(t).width();e.properties,xui.$us(e)>0&&(i=e.$px2em(i,t)+"em"),xui(t).width(i),xui.UI._adjustConW(e,xui(t),i)}})))},_adjustScroll:null}}),root=this,factory=function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}return i.m=e,i.c=t,i.p="",i(0)}([function(e,t,i){var r,o;r=[i(1),i(3),i(4)],(o=function(e){return e._in_xui=1,e}.apply(t,r))===undefined||(e.exports=o)},function(e,t,i){var r,o;r=[i(2)],(o=function(e){function t(r){if(t.is(r,"function"))return i?r():e.on("raphael.DOMload",r);if(t.is(r,k))return t._engine.create[h](t,r.splice(0,3+t.is(r[0],S))).add(r);var o=Array.prototype.slice.call(arguments,0);if(t.is(o[o.length-1],"function")){var n=o.pop();return i?n.call(t._engine.create[h](t,o)):e.on("raphael.DOMload",(function(){n.call(t._engine.create[h](t,o))}))}return t._engine.create[h](t,arguments)}t.version="2.2.0",t.eve=e;var i,r,o,n,a=/[, ]+/,s={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},u=/\{(\d+)\}/g,l="hasOwnProperty",d={doc:document,win:window},c={was:Object.prototype[l].call(d.win,"Raphael"),is:d.win.Raphael},p=function(){this.ca=this.customAttributes={}},h="apply",f="ontouchstart"in d.win||d.win.DocumentTouch&&d.doc instanceof d.win.DocumentTouch,x="",g=" ",m=String,b="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel contextmenu".split(g),v={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},y=m.prototype.toLowerCase,A=Math,_=A.max,w=A.min,C=A.abs,I=A.pow,E=A.PI,S="number",D="string",k="array",$=Object.prototype.toString,N=(t._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),M={NaN:1,Infinity:1,"-Infinity":1},T=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,R=A.round,B=parseFloat,L=parseInt,F=m.prototype.toUpperCase,O=t._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-dashoffset":0,"stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},P=t._availableAnimAttrs={blur:S,"clip-rect":"csv",cx:S,cy:S,fill:"colour","fill-opacity":S,"font-size":S,height:S,opacity:S,path:"path",r:S,rx:S,ry:S,stroke:"colour","stroke-opacity":S,"stroke-width":S,transform:"transform",width:S,x:S,y:S},H=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,U={hs:1,rg:1},z=/,?([achlmqrstvxz]),?/gi,K=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,V=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,j=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,Y=(t._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),G=function(e,t){return B(e)-B(t)},W=function(e){return e},X=t._rectPath=function(e,t,i,r,o){return o?[["M",e+o,t],["l",i-2*o,0],["a",o,o,0,0,1,o,o],["l",0,r-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-i,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-r],["a",o,o,0,0,1,o,-o],["z"]]:[["M",e,t],["l",i,0],["l",0,r],["l",-i,0],["z"]]},Q=function(e,t,i,r){return null==r&&(r=i),[["M",e,t],["m",0,-r],["a",i,r,0,1,1,0,2*r],["a",i,r,0,1,1,0,-2*r],["z"]]},q=t._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return Q(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return Q(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return X(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return X(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return X(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return X(t.x,t.y,t.width,t.height)}},Z=t.mapPath=function(e,t){if(!t)return e;var i,r,o,n,a,s,u;for(o=0,a=(e=Se(e)).length;o<a;o++)for(n=1,s=(u=e[o]).length;n<s;n+=2)i=t.x(u[n],u[n+1]),r=t.y(u[n],u[n+1]),u[n]=i,u[n+1]=r;return e};if(t._g=d,t.type=d.win.SVGAngle||d.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var J,ee=d.doc.createElement("div");if(ee.innerHTML='<v:shape adj="1"/>',(J=ee.firstChild).style.behavior="url(#default#VML)",!J||"object"!=typeof J.adj)return t.type=x;ee=null}function te(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var i in e)e[l](i)&&(t[i]=te(e[i]));return t}t.svg=!(t.vml="VML"==t.type),t._Paper=p,t.fn=r=p.prototype=t.prototype,t._id=0,t.is=function(e,t){return"finite"==(t=y.call(t))?!M[l](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||$.call(e).slice(8,-1).toLowerCase()==t},t.angle=function(e,i,r,o,n,a){if(null==n){var s=e-r,u=i-o;return s||u?(180+180*A.atan2(-u,-s)/E+360)%360:0}return t.angle(e,i,n,a)-t.angle(r,o,n,a)},t.rad=function(e){return e%360*E/180},t.deg=function(e){return Math.round(180*e/E%360*1e3)/1e3},t.snapTo=function(e,i,r){if(r=t.is(r,"finite")?r:10,t.is(e,k)){for(var o=e.length;o--;)if(C(e[o]-i)<=r)return e[o]}else{var n=i%(e=+e);if(n<r)return i-n;if(n>e-r)return i-n+e}return i},t.createUUID=(o=/[xy]/g,n=function(e){var t=16*A.random()|0;return("x"==e?t:3&t|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(o,n).toUpperCase()}),t.setWindow=function(i){e("raphael.setWindow",t,d.win,i),d.win=i,d.doc=d.win.document,t._engine.initWin&&t._engine.initWin(d.win)};var ie=function(e){if(t.vml){var i,r=/^\s+|\s+$/g;try{var o=new ActiveXObject("htmlfile");o.write("<body>"),o.close(),i=o.body}catch(e){i=window.createPopup().document.body}var n=i.createTextRange();ie=le((function(e){try{i.style.color=m(e).replace(r,x);var t=n.queryCommandValue("ForeColor");return"#"+("000000"+(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16)).slice(-6)}catch(e){return"none"}}))}else{var a=d.doc.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",d.doc.body.appendChild(a),ie=le((function(e){return a.style.color=e,d.doc.defaultView.getComputedStyle(a,x).getPropertyValue("color")}))}return ie(e)},re=function(){return"hsb("+[this.h,this.s,this.b]+")"},oe=function(){return"hsl("+[this.h,this.s,this.l]+")"},ne=function(){return this.hex},ae=function(e,i,r){if(null==i&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,i=e.g,e=e.r),null==i&&t.is(e,D)){var o=t.getRGB(e);e=o.r,i=o.g,r=o.b}return(e>1||i>1||r>1)&&(e/=255,i/=255,r/=255),[e,i,r]},se=function(e,i,r,o){var n={r:e*=255,g:i*=255,b:r*=255,hex:t.rgb(e,i,r),toString:ne};return t.is(o,"finite")&&(n.opacity=o),n};function ue(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return e.push(e.splice(i,1)[0])}function le(e,t,i){return function r(){var o=Array.prototype.slice.call(arguments,0),n=o.join("␀"),a=r.cache=r.cache||{},s=r.count=r.count||[];return a[l](n)?(ue(s,n),i?i(a[n]):a[n]):(s.length>=1e3&&delete a[s.shift()],s.push(n),a[n]=e[h](t,o),i?i(a[n]):a[n])}}function de(){return this.hex}function ce(e,t){for(var i=[],r=0,o=e.length;o-2*!t>r;r+=2){var n=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?o-4==r?n[3]={x:+e[0],y:+e[1]}:o-2==r&&(n[2]={x:+e[0],y:+e[1]},n[3]={x:+e[2],y:+e[3]}):n[0]={x:+e[o-2],y:+e[o-1]}:o-4==r?n[3]=n[2]:r||(n[0]={x:+e[r],y:+e[r+1]}),i.push(["C",(-n[0].x+6*n[1].x+n[2].x)/6,(-n[0].y+6*n[1].y+n[2].y)/6,(n[1].x+6*n[2].x-n[3].x)/6,(n[1].y+6*n[2].y-n[3].y)/6,n[2].x,n[2].y])}return i}t.color=function(e){var i;return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(i=t.hsb2rgb(e),e.r=i.r,e.g=i.g,e.b=i.b,e.hex=i.hex):t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(i=t.hsl2rgb(e),e.r=i.r,e.g=i.g,e.b=i.b,e.hex=i.hex):(t.is(e,"string")&&(e=t.getRGB(e)),t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(i=t.rgb2hsl(e),e.h=i.h,e.s=i.s,e.l=i.l,i=t.rgb2hsb(e),e.v=i.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=ne,e},t.hsb2rgb=function(e,t,i,r){var o,n,a,s,u;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(i=e.b,t=e.s,r=e.o,e=e.h),s=(u=i*t)*(1-C((e=(e*=360)%360/60)%2-1)),o=n=a=i-u,se(o+=[u,s,0,0,s,u][e=~~e],n+=[s,u,u,s,0,0][e],a+=[0,0,s,u,u,s][e],r)},t.hsl2rgb=function(e,t,i,r){var o,n,a,s,u;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(i=e.l,t=e.s,e=e.h),(e>1||t>1||i>1)&&(e/=360,t/=100,i/=100),s=(u=2*t*(i<.5?i:1-i))*(1-C((e=(e*=360)%360/60)%2-1)),o=n=a=i-u/2,se(o+=[u,s,0,0,s,u][e=~~e],n+=[s,u,u,s,0,0][e],a+=[0,0,s,u,u,s][e],r)},t.rgb2hsb=function(e,t,i){var r,o;return e=(i=ae(e,t,i))[0],t=i[1],i=i[2],{h:((0==(o=(r=_(e,t,i))-w(e,t,i))?null:r==e?(t-i)/o:r==t?(i-e)/o+2:(e-t)/o+4)+360)%6*60/360,s:0==o?0:o/r,b:r,toString:re}},t.rgb2hsl=function(e,t,i){var r,o,n,a;return e=(i=ae(e,t,i))[0],t=i[1],i=i[2],r=((o=_(e,t,i))+(n=w(e,t,i)))/2,{h:((0==(a=o-n)?null:o==e?(t-i)/a:o==t?(i-e)/a+2:(e-t)/a+4)+360)%6*60/360,s:0==a?0:r<.5?a/(2*r):a/(2-2*r),l:r,toString:oe}},t._path2string=function(){return this.join(",").replace(z,"$1")},t._preload=function(e,t){var i=d.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){t.call(this),this.onload=null,d.doc.body.removeChild(this)},i.onerror=function(){d.doc.body.removeChild(this)},d.doc.body.appendChild(i),i.src=e},t.getRGB=le((function(e){if(!e||(e=m(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:de};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:de};!U[l](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=ie(e));var i,r,o,n,a,s,u=e.match(N);return u?(u[2]&&(o=L(u[2].substring(5),16),r=L(u[2].substring(3,5),16),i=L(u[2].substring(1,3),16)),u[3]&&(o=L((a=u[3].charAt(3))+a,16),r=L((a=u[3].charAt(2))+a,16),i=L((a=u[3].charAt(1))+a,16)),u[4]&&(s=u[4].split(H),i=B(s[0]),"%"==s[0].slice(-1)&&(i*=2.55),r=B(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),o=B(s[2]),"%"==s[2].slice(-1)&&(o*=2.55),"rgba"==u[1].toLowerCase().slice(0,4)&&(n=B(s[3])),s[3]&&"%"==s[3].slice(-1)&&(n/=100)),u[5]?(s=u[5].split(H),i=B(s[0]),"%"==s[0].slice(-1)&&(i*=2.55),r=B(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),o=B(s[2]),"%"==s[2].slice(-1)&&(o*=2.55),("deg"==s[0].slice(-3)||"°"==s[0].slice(-1))&&(i/=360),"hsba"==u[1].toLowerCase().slice(0,4)&&(n=B(s[3])),s[3]&&"%"==s[3].slice(-1)&&(n/=100),t.hsb2rgb(i,r,o,n)):u[6]?(s=u[6].split(H),i=B(s[0]),"%"==s[0].slice(-1)&&(i*=2.55),r=B(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),o=B(s[2]),"%"==s[2].slice(-1)&&(o*=2.55),("deg"==s[0].slice(-3)||"°"==s[0].slice(-1))&&(i/=360),"hsla"==u[1].toLowerCase().slice(0,4)&&(n=B(s[3])),s[3]&&"%"==s[3].slice(-1)&&(n/=100),t.hsl2rgb(i,r,o,n)):((u={r:i,g:r,b:o,toString:de}).hex="#"+(16777216|o|r<<8|i<<16).toString(16).slice(1),t.is(n,"finite")&&(u.opacity=n),u)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:de}}),t),t.hsb=le((function(e,i,r){return t.hsb2rgb(e,i,r).hex})),t.hsl=le((function(e,i,r){return t.hsl2rgb(e,i,r).hex})),t.rgb=le((function(e,t,i){function r(e){return e+.5|0}return"#"+(16777216|r(i)|r(t)<<8|r(e)<<16).toString(16).slice(1)})),t.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},i=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),i.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=function(e){if(!e)return null;var i=pe(e);if(i.arr)return ve(i.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},o=[];return t.is(e,k)&&t.is(e[0],k)&&(o=ve(e)),o.length||m(e).replace(K,(function(e,t,i){var n=[],a=t.toLowerCase();if(i.replace(j,(function(e,t){t&&n.push(+t)})),"m"==a&&n.length>2&&(o.push([t].concat(n.splice(0,2))),a="l",t="m"==t?"l":"L"),"r"==a)o.push([t].concat(n));else for(;n.length>=r[a]&&(o.push([t].concat(n.splice(0,r[a]))),r[a]););})),o.toString=t._path2string,i.arr=ve(o),o},t.parseTransformString=le((function(e){if(!e)return null;var i=[];return t.is(e,k)&&t.is(e[0],k)&&(i=ve(e)),i.length||m(e).replace(V,(function(e,t,r){var o=[];y.call(t),r.replace(j,(function(e,t){t&&o.push(+t)})),i.push([t].concat(o))})),i.toString=t._path2string,i}));var pe=function(e){var t=pe.ps=pe.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout((function(){for(var i in t)t[l](i)&&i!=e&&(t[i].sleep--,!t[i].sleep&&delete t[i])})),t[e]};function he(e,t,i,r,o){return e*(e*(-3*t+9*i-9*r+3*o)+6*t-12*i+6*r)-3*t+3*i}function fe(e,t,i,r,o,n,a,s,u){null==u&&(u=1);for(var l=(u=u>1?1:u<0?0:u)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],c=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,h=0;h<12;h++){var f=l*d[h]+l,x=he(f,e,i,o,a),g=he(f,t,r,n,s),m=x*x+g*g;p+=c[h]*A.sqrt(m)}return l*p}function xe(e,t,i,r,o,n,a,s){if(!(_(e,i)<w(o,a)||w(e,i)>_(o,a)||_(t,r)<w(n,s)||w(t,r)>_(n,s))){var u=(e-i)*(n-s)-(t-r)*(o-a);if(u){var l=((e*r-t*i)*(o-a)-(e-i)*(o*s-n*a))/u,d=((e*r-t*i)*(n-s)-(t-r)*(o*s-n*a))/u,c=+l.toFixed(2),p=+d.toFixed(2);if(!(c<+w(e,i).toFixed(2)||c>+_(e,i).toFixed(2)||c<+w(o,a).toFixed(2)||c>+_(o,a).toFixed(2)||p<+w(t,r).toFixed(2)||p>+_(t,r).toFixed(2)||p<+w(n,s).toFixed(2)||p>+_(n,s).toFixed(2)))return{x:l,y:d}}}}function ge(e,i,r){var o=t.bezierBBox(e),n=t.bezierBBox(i);if(!t.isBBoxIntersect(o,n))return r?0:[];for(var a=fe.apply(0,e),s=fe.apply(0,i),u=_(~~(a/5),1),l=_(~~(s/5),1),d=[],c=[],p={},h=r?0:[],f=0;f<u+1;f++){var x=t.findDotsAtSegment.apply(t,e.concat(f/u));d.push({x:x.x,y:x.y,t:f/u})}for(f=0;f<l+1;f++)x=t.findDotsAtSegment.apply(t,i.concat(f/l)),c.push({x:x.x,y:x.y,t:f/l});for(f=0;f<u;f++)for(var g=0;g<l;g++){var m=d[f],b=d[f+1],v=c[g],y=c[g+1],A=C(b.x-m.x)<.001?"y":"x",I=C(y.x-v.x)<.001?"y":"x",E=xe(m.x,m.y,b.x,b.y,v.x,v.y,y.x,y.y);if(E){if(p[E.x.toFixed(4)]==E.y.toFixed(4))continue;p[E.x.toFixed(4)]=E.y.toFixed(4);var S=m.t+C((E[A]-m[A])/(b[A]-m[A]))*(b.t-m.t),D=v.t+C((E[I]-v[I])/(y[I]-v[I]))*(y.t-v.t);S>=0&&S<=1.001&&D>=0&&D<=1.001&&(r?h++:h.push({x:E.x,y:E.y,t1:w(S,1),t2:w(D,1)}))}}return h}function me(e,i,r){e=t._path2curve(e),i=t._path2curve(i);for(var o,n,a,s,u,l,d,c,p,h,f=r?0:[],x=0,g=e.length;x<g;x++){var m=e[x];if("M"==m[0])o=u=m[1],n=l=m[2];else{"C"==m[0]?(p=[o,n].concat(m.slice(1)),o=p[6],n=p[7]):(p=[o,n,o,n,u,l,u,l],o=u,n=l);for(var b=0,v=i.length;b<v;b++){var y=i[b];if("M"==y[0])a=d=y[1],s=c=y[2];else{"C"==y[0]?(h=[a,s].concat(y.slice(1)),a=h[6],s=h[7]):(h=[a,s,a,s,d,c,d,c],a=d,s=c);var A=ge(p,h,r);if(r)f+=A;else{for(var _=0,w=A.length;_<w;_++)A[_].segment1=x,A[_].segment2=b,A[_].bez1=p,A[_].bez2=h;f=f.concat(A)}}}}}return f}t.findDotsAtSegment=function(e,t,i,r,o,n,a,s,u){var l=1-u,d=I(l,3),c=I(l,2),p=u*u,h=p*u,f=d*e+3*c*u*i+3*l*u*u*o+h*a,x=d*t+3*c*u*r+3*l*u*u*n+h*s,g=e+2*u*(i-e)+p*(o-2*i+e),m=t+2*u*(r-t)+p*(n-2*r+t),b=i+2*u*(o-i)+p*(a-2*o+i),v=r+2*u*(n-r)+p*(s-2*n+r),y=l*e+u*i,_=l*t+u*r,w=l*o+u*a,C=l*n+u*s,S=90-180*A.atan2(g-b,m-v)/E;return(g>b||m<v)&&(S+=180),{x:f,y:x,m:{x:g,y:m},n:{x:b,y:v},start:{x:y,y:_},end:{x:w,y:C},alpha:S}},t.bezierBBox=function(e,i,r,o,n,a,s,u){t.is(e,"array")||(e=[e,i,r,o,n,a,s,u]);var l=Ee.apply(null,e);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},t.isPointInsideBBox=function(e,t,i){return t>=e.x&&t<=e.x2&&i>=e.y&&i<=e.y2},t.isBBoxIntersect=function(e,i){var r=t.isPointInsideBBox;return r(i,e.x,e.y)||r(i,e.x2,e.y)||r(i,e.x,e.y2)||r(i,e.x2,e.y2)||r(e,i.x,i.y)||r(e,i.x2,i.y)||r(e,i.x,i.y2)||r(e,i.x2,i.y2)||(e.x<i.x2&&e.x>i.x||i.x<e.x2&&i.x>e.x)&&(e.y<i.y2&&e.y>i.y||i.y<e.y2&&i.y>e.y)},t.pathIntersection=function(e,t){return me(e,t)},t.pathIntersectionNumber=function(e,t){return me(e,t,1)},t.isPointInsidePath=function(e,i,r){var o=t.pathBBox(e);return t.isPointInsideBBox(o,i,r)&&me(e,[["M",i,r],["H",o.x2+10]],1)%2==1},t._removedFactory=function(t){return function(){e("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var be=t.pathBBox=function(e){var t=pe(e);if(t.bbox)return te(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var i,r=0,o=0,n=[],a=[],s=0,u=(e=Se(e)).length;s<u;s++)if("M"==(i=e[s])[0])r=i[1],o=i[2],n.push(r),a.push(o);else{var l=Ee(r,o,i[1],i[2],i[3],i[4],i[5],i[6]);n=n.concat(l.min.x,l.max.x),a=a.concat(l.min.y,l.max.y),r=i[5],o=i[6]}var d=w[h](0,n),c=w[h](0,a),p=_[h](0,n),f=_[h](0,a),x=p-d,g=f-c,m={x:d,y:c,x2:p,y2:f,width:x,height:g,cx:d+x/2,cy:c+g/2};return t.bbox=te(m),m},ve=function(e){var i=te(e);return i.toString=t._path2string,i},ye=t._pathToRelative=function(e){var i=pe(e);if(i.rel)return ve(i.rel);t.is(e,k)&&t.is(e&&e[0],k)||(e=t.parsePathString(e));var r=[],o=0,n=0,a=0,s=0,u=0;"M"==e[0][0]&&(a=o=e[0][1],s=n=e[0][2],u++,r.push(["M",o,n]));for(var l=u,d=e.length;l<d;l++){var c=r[l]=[],p=e[l];if(p[0]!=y.call(p[0]))switch(c[0]=y.call(p[0]),c[0]){case"a":c[1]=p[1],c[2]=p[2],c[3]=p[3],c[4]=p[4],c[5]=p[5],c[6]=+(p[6]-o).toFixed(3),c[7]=+(p[7]-n).toFixed(3);break;case"v":c[1]=+(p[1]-n).toFixed(3);break;case"m":a=p[1],s=p[2];default:for(var h=1,f=p.length;h<f;h++)c[h]=+(p[h]-(h%2?o:n)).toFixed(3)}else{c=r[l]=[],"m"==p[0]&&(a=p[1]+o,s=p[2]+n);for(var x=0,g=p.length;x<g;x++)r[l][x]=p[x]}var m=r[l].length;switch(r[l][0]){case"z":o=a,n=s;break;case"h":o+=+r[l][m-1];break;case"v":n+=+r[l][m-1];break;default:o+=+r[l][m-2],n+=+r[l][m-1]}}return r.toString=t._path2string,i.rel=ve(r),r},Ae=t._pathToAbsolute=function(e){var i=pe(e);if(i.abs)return ve(i.abs);if(t.is(e,k)&&t.is(e&&e[0],k)||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var r=[],o=0,n=0,a=0,s=0,u=0;"M"==e[0][0]&&(a=o=+e[0][1],s=n=+e[0][2],u++,r[0]=["M",o,n]);for(var l,d,c=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),p=u,h=e.length;p<h;p++){if(r.push(l=[]),(d=e[p])[0]!=F.call(d[0]))switch(l[0]=F.call(d[0]),l[0]){case"A":l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=+(d[6]+o),l[7]=+(d[7]+n);break;case"V":l[1]=+d[1]+n;break;case"H":l[1]=+d[1]+o;break;case"R":for(var f=[o,n].concat(d.slice(1)),x=2,g=f.length;x<g;x++)f[x]=+f[x]+o,f[++x]=+f[x]+n;r.pop(),r=r.concat(ce(f,c));break;case"M":a=+d[1]+o,s=+d[2]+n;default:for(x=1,g=d.length;x<g;x++)l[x]=+d[x]+(x%2?o:n)}else if("R"==d[0])f=[o,n].concat(d.slice(1)),r.pop(),r=r.concat(ce(f,c)),l=["R"].concat(d.slice(-2));else for(var m=0,b=d.length;m<b;m++)l[m]=d[m];switch(l[0]){case"Z":o=a,n=s;break;case"H":o=l[1];break;case"V":n=l[1];break;case"M":a=l[l.length-2],s=l[l.length-1];default:o=l[l.length-2],n=l[l.length-1]}}return r.toString=t._path2string,i.abs=ve(r),r},_e=function(e,t,i,r){return[e,t,i,r,i,r]},we=function(e,t,i,r,o,n){var a=1/3,s=2/3;return[a*e+s*i,a*t+s*r,a*o+s*i,a*n+s*r,o,n]},Ce=function(e,t,i,r,o,n,a,s,u,l){var d,c=120*E/180,p=E/180*(+o||0),h=[],f=le((function(e,t,i){return{x:e*A.cos(i)-t*A.sin(i),y:e*A.sin(i)+t*A.cos(i)}}));if(l)I=l[0],S=l[1],_=l[2],w=l[3];else{e=(d=f(e,t,-p)).x,t=d.y,s=(d=f(s,u,-p)).x,u=d.y,A.cos(E/180*o),A.sin(E/180*o);var x=(e-s)/2,g=(t-u)/2,m=x*x/(i*i)+g*g/(r*r);m>1&&(i*=m=A.sqrt(m),r*=m);var b=i*i,v=r*r,y=(n==a?-1:1)*A.sqrt(C((b*v-b*g*g-v*x*x)/(b*g*g+v*x*x))),_=y*i*g/r+(e+s)/2,w=y*-r*x/i+(t+u)/2,I=A.asin(((t-w)/r).toFixed(9)),S=A.asin(((u-w)/r).toFixed(9));(I=e<_?E-I:I)<0&&(I=2*E+I),(S=s<_?E-S:S)<0&&(S=2*E+S),a&&I>S&&(I-=2*E),!a&&S>I&&(S-=2*E)}var D=S-I;if(C(D)>c){var k=S,$=s,N=u;S=I+c*(a&&S>I?1:-1),s=_+i*A.cos(S),u=w+r*A.sin(S),h=Ce(s,u,i,r,o,0,a,$,N,[S,k,_,w])}D=S-I;var M=A.cos(I),T=A.sin(I),R=A.cos(S),B=A.sin(S),L=A.tan(D/4),F=4/3*i*L,O=4/3*r*L,P=[e,t],H=[e+F*T,t-O*M],U=[s+F*B,u-O*R],z=[s,u];if(H[0]=2*P[0]-H[0],H[1]=2*P[1]-H[1],l)return[H,U,z].concat(h);for(var K=[],V=0,j=(h=[H,U,z].concat(h).join().split(",")).length;V<j;V++)K[V]=V%2?f(h[V-1],h[V],p).y:f(h[V],h[V+1],p).x;return K},Ie=function(e,t,i,r,o,n,a,s,u){var l=1-u;return{x:I(l,3)*e+3*I(l,2)*u*i+3*l*u*u*o+I(u,3)*a,y:I(l,3)*t+3*I(l,2)*u*r+3*l*u*u*n+I(u,3)*s}},Ee=le((function(e,t,i,r,o,n,a,s){var u,l=o-2*i+e-(a-2*o+i),d=2*(i-e)-2*(o-i),c=e-i,p=(-d+A.sqrt(d*d-4*l*c))/2/l,f=(-d-A.sqrt(d*d-4*l*c))/2/l,x=[t,s],g=[e,a];return C(p)>"1e12"&&(p=.5),C(f)>"1e12"&&(f=.5),p>0&&p<1&&(u=Ie(e,t,i,r,o,n,a,s,p),g.push(u.x),x.push(u.y)),f>0&&f<1&&(u=Ie(e,t,i,r,o,n,a,s,f),g.push(u.x),x.push(u.y)),l=n-2*r+t-(s-2*n+r),c=t-r,p=(-(d=2*(r-t)-2*(n-r))+A.sqrt(d*d-4*l*c))/2/l,f=(-d-A.sqrt(d*d-4*l*c))/2/l,C(p)>"1e12"&&(p=.5),C(f)>"1e12"&&(f=.5),p>0&&p<1&&(u=Ie(e,t,i,r,o,n,a,s,p),g.push(u.x),x.push(u.y)),f>0&&f<1&&(u=Ie(e,t,i,r,o,n,a,s,f),g.push(u.x),x.push(u.y)),{min:{x:w[h](0,g),y:w[h](0,x)},max:{x:_[h](0,g),y:_[h](0,x)}}})),Se=t._path2curve=le((function(e,t){var i=!t&&pe(e);if(!t&&i.curve)return ve(i.curve);for(var r=Ae(e),o=t&&Ae(t),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=function(e,t,i){var r,o;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(Ce[h](0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==i||"S"==i?(r=2*t.x-t.bx,o=2*t.y-t.by):(r=t.x,o=t.y),e=["C",r,o].concat(e.slice(1));break;case"T":"Q"==i||"T"==i?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(we(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(we(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(_e(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(_e(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(_e(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(_e(t.x,t.y,t.X,t.Y))}return e},u=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)d[t]="A",o&&(c[t]="A"),e.splice(t++,0,["C"].concat(i.splice(0,6)));e.splice(t,1),g=_(r.length,o&&o.length||0)}},l=function(e,t,i,n,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",n.x,n.y]),i.bx=0,i.by=0,i.x=e[a][1],i.y=e[a][2],g=_(r.length,o&&o.length||0))},d=[],c=[],p="",f="",x=0,g=_(r.length,o&&o.length||0);x<g;x++){r[x]&&(p=r[x][0]),"C"!=p&&(d[x]=p,x&&(f=d[x-1])),r[x]=s(r[x],n,f),"A"!=d[x]&&"C"==p&&(d[x]="C"),u(r,x),o&&(o[x]&&(p=o[x][0]),"C"!=p&&(c[x]=p,x&&(f=c[x-1])),o[x]=s(o[x],a,f),"A"!=c[x]&&"C"==p&&(c[x]="C"),u(o,x)),l(r,o,n,a,x),l(o,r,a,n,x);var m=r[x],b=o&&o[x],v=m.length,y=o&&b.length;n.x=m[v-2],n.y=m[v-1],n.bx=B(m[v-4])||n.x,n.by=B(m[v-3])||n.y,a.bx=o&&(B(b[y-4])||a.x),a.by=o&&(B(b[y-3])||a.y),a.x=o&&b[y-2],a.y=o&&b[y-1]}return o||(i.curve=ve(r)),o?[r,o]:r}),null,ve),De=(t._parseDots=le((function(e){for(var i=[],r=0,o=e.length;r<o;r++){var n={},a=e[r].match(/^([^:]*):?([\d\.]*)/);if(n.color=t.getRGB(a[1]),n.color.error)return null;n.opacity=n.color.opacity,n.color=n.color.hex,a[2]&&(n.offset=a[2]+"%"),i.push(n)}for(r=1,o=i.length-1;r<o;r++)if(!i[r].offset){for(var s=B(i[r-1].offset||0),u=0,l=r+1;l<o;l++)if(i[l].offset){u=i[l].offset;break}u||(u=100,l=o);for(var d=((u=B(u))-s)/(l-r+1);r<l;r++)s+=d,i[r].offset=s+"%"}return i})),t._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),ke=(t._tofront=function(e,t){t.top!==e&&(De(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},t._toback=function(e,t){t.bottom!==e&&(De(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},t._insertafter=function(e,t,i){De(e,i),t==i.top&&(i.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},t._insertbefore=function(e,t,i){De(e,i),t==i.bottom&&(i.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},t.toMatrix=function(e,t){var i=be(e),r={_:{transform:x},getBBox:function(){return i}};return $e(r,t),r.matrix}),$e=(t.transformPath=function(e,t){return Z(e,ke(e,t))},t._extractTransform=function(e,i){if(null==i)return e._.transform;i=m(i).replace(/\.{3}|\u2026/g,e._.transform||x);var r,o,n=t.parseTransformString(i),a=0,s=1,u=1,l=e._,d=new Te;if(l.transform=n||[],n)for(var c=0,p=n.length;c<p;c++){var h,f,g,b,v,y=n[c],A=y.length,_=m(y[0]).toLowerCase(),w=y[0]!=_,C=w?d.invert():0;"t"==_&&3==A?w?(h=C.x(0,0),f=C.y(0,0),g=C.x(y[1],y[2]),b=C.y(y[1],y[2]),d.translate(g-h,b-f)):d.translate(y[1],y[2]):"r"==_?2==A?(v=v||e.getBBox(1),d.rotate(y[1],v.x+v.width/2,v.y+v.height/2),a+=y[1]):4==A&&(w?(g=C.x(y[2],y[3]),b=C.y(y[2],y[3]),d.rotate(y[1],g,b)):d.rotate(y[1],y[2],y[3]),a+=y[1]):"s"==_?2==A||3==A?(v=v||e.getBBox(1),d.scale(y[1],y[A-1],v.x+v.width/2,v.y+v.height/2),s*=y[1],u*=y[A-1]):5==A&&(w?(g=C.x(y[3],y[4]),b=C.y(y[3],y[4]),d.scale(y[1],y[2],g,b)):d.scale(y[1],y[2],y[3],y[4]),s*=y[1],u*=y[2]):"m"==_&&7==A&&d.add(y[1],y[2],y[3],y[4],y[5],y[6]),l.dirtyT=1,e.matrix=d}e.matrix=d,l.sx=s,l.sy=u,l.deg=a,l.dx=r=d.e,l.dy=o=d.f,1==s&&1==u&&!a&&l.bbox?(l.bbox.x+=+r,l.bbox.y+=+o):l.dirtyT=1}),Ne=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}},Me=t._equaliseTransform=function(e,i){i=m(i).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],i=t.parseTransformString(i)||[];for(var r,o,n,a,s=_(e.length,i.length),u=[],l=[],d=0;d<s;d++){if(n=e[d]||Ne(i[d]),a=i[d]||Ne(n),n[0]!=a[0]||"r"==n[0].toLowerCase()&&(n[2]!=a[2]||n[3]!=a[3])||"s"==n[0].toLowerCase()&&(n[3]!=a[3]||n[4]!=a[4]))return;for(u[d]=[],l[d]=[],r=0,o=_(n.length,a.length);r<o;r++)r in n&&(u[d][r]=n[r]),r in a&&(l[d][r]=a[r])}return{from:u,to:l}};function Te(e,t,i,r,o,n){null!=e?(this.a=+e,this.b=+t,this.c=+i,this.d=+r,this.e=+o,this.f=+n):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}t._getContainer=function(e,i,r,o){var n;if(null!=(n=null!=o||t.is(e,"object")?e:d.doc.getElementById(e)))return n.tagName?null==i?{container:n,width:n.style.pixelWidth||n.offsetWidth,height:n.style.pixelHeight||n.offsetHeight}:{container:n,width:i,height:r}:{container:1,x:e,y:i,width:r,height:o}},t.pathToRelative=ye,t._engine={},t.path2curve=Se,t.matrix=function(e,t,i,r,o,n){return new Te(e,t,i,r,o,n)},function(e){function i(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=A.sqrt(i(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}e.add=function(e,t,i,r,o,n){var a,s,u,l,d=[[],[],[]],c=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],p=[[e,i,o],[t,r,n],[0,0,1]];for(e&&e instanceof Te&&(p=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),a=0;a<3;a++)for(s=0;s<3;s++){for(l=0,u=0;u<3;u++)l+=c[a][u]*p[u][s];d[a][s]=l}this.a=d[0][0],this.b=d[1][0],this.c=d[0][1],this.d=d[1][1],this.e=d[0][2],this.f=d[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new Te(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new Te(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,i,r){null==t&&(t=e),(i||r)&&this.add(1,0,0,1,i,r),this.add(e,0,0,t,0,0),(i||r)&&this.add(1,0,0,1,-i,-r)},e.rotate=function(e,i,r){e=t.rad(e),i=i||0,r=r||0;var o=+A.cos(e).toFixed(9),n=+A.sin(e).toFixed(9);this.add(o,n,-n,o,i,r),this.add(1,0,0,1,-i,-r)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[m.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return t.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var o=[[this.a,this.c],[this.b,this.d]];e.scalex=A.sqrt(i(o[0])),r(o[0]),e.shear=o[0][0]*o[1][0]+o[0][1]*o[1][1],o[1]=[o[1][0]-o[0][0]*e.shear,o[1][1]-o[0][1]*e.shear],e.scaley=A.sqrt(i(o[1])),r(o[1]),e.shear/=e.scaley;var n=-o[0][1],a=o[1][1];return a<0?(e.rotate=t.deg(A.acos(a)),n<0&&(e.rotate=360-e.rotate)):e.rotate=t.deg(A.asin(n)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this.split();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:x)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:x)+(t.rotate?"r"+[t.rotate,0,0]:x)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(Te.prototype);for(var Re=function(){this.returnValue=!1},Be=function(){return this.originalEvent.preventDefault()},Le=function(){this.cancelBubble=!0},Fe=function(){return this.originalEvent.stopPropagation()},Oe=function(e){var t=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,i=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft;return{x:e.clientX+i,y:e.clientY+t}},Pe=d.doc.addEventListener?function(e,t,i,r){var o=function(e){var t=Oe(e);return i.call(r,e,t.x,t.y)};if(e.addEventListener(t,o,!1),f&&v[t]){var n=function(t){for(var o=Oe(t),n=t,a=0,s=t.targetTouches&&t.targetTouches.length;a<s;a++)if(t.targetTouches[a].target==e){(t=t.targetTouches[a]).originalEvent=n,t.preventDefault=Be,t.stopPropagation=Fe;break}return i.call(r,t,o.x,o.y)};e.addEventListener(v[t],n,!1)}return function(){return e.removeEventListener(t,o,!1),f&&v[t]&&e.removeEventListener(v[t],n,!1),!0}}:d.doc.attachEvent?function(e,t,i,r){var o=function(e){e=e||d.win.event;var t=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,o=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft,n=e.clientX+o,a=e.clientY+t;return e.preventDefault=e.preventDefault||Re,e.stopPropagation=e.stopPropagation||Le,i.call(r,e,n,a)};return e.attachEvent("on"+t,o),function(){return e.detachEvent("on"+t,o),!0}}:void 0,He=[],Ue=function(t){for(var i,r=t.clientX,o=t.clientY,n=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,a=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft,s=He.length;s--;){if(i=He[s],f&&t.touches){for(var u,l=t.touches.length;l--;)if((u=t.touches[l]).identifier==i.el._drag.id){r=u.clientX,o=u.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var c,p=i.el.node,h=p.nextSibling,x=p.parentNode,g=p.style.display;d.win.opera&&x.removeChild(p),p.style.display="none",c=i.el.paper.getElementByPoint(r,o),p.style.display=g,d.win.opera&&(h?x.insertBefore(p,h):x.appendChild(p)),c&&e("raphael.drag.over."+i.el.id,i.el,c),r+=a,o+=n,e("raphael.drag.move."+i.el.id,i.move_scope||i.el,r-i.el._drag.x,o-i.el._drag.y,r,o,t)}},ze=function(i){t.unmousemove(Ue).unmouseup(ze);for(var r,o=He.length;o--;)(r=He[o]).el._drag={},e("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,i);He=[]},Ke=t.el={},Ve=b.length;Ve--;)!function(e){t[e]=Ke[e]=function(i,r){return t.is(i,"function")&&(this.events=this.events||[],this.events.push({name:e,f:i,unbind:Pe(this.shape||this.node||d.doc,e,i,r||this)})),this},t["un"+e]=Ke["un"+e]=function(i){for(var r=this.events||[],o=r.length;o--;)r[o].name!=e||!t.is(i,"undefined")&&r[o].f!=i||(r[o].unbind(),r.splice(o,1),!r.length&&delete this.events);return this}}(b[Ve]);Ke.data=function(i,r){var o=Y[this.id]=Y[this.id]||{};if(0==arguments.length)return o;if(1==arguments.length){if(t.is(i,"object")){for(var n in i)i[l](n)&&this.data(n,i[n]);return this}return e("raphael.data.get."+this.id,this,o[i],i),o[i]}return o[i]=r,e("raphael.data.set."+this.id,this,r,i),this},Ke.removeData=function(e){return null==e?Y[this.id]={}:Y[this.id]&&delete Y[this.id][e],this},Ke.getData=function(){return te(Y[this.id]||{})},Ke.hover=function(e,t,i,r){return this.mouseover(e,i).mouseout(t,r||i)},Ke.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var je=[];function Ye(){return this.x+g+this.y+g+this.width+" × "+this.height}Ke.drag=function(i,r,o,n,a,s){function u(u){if("which"in u?2!=u.which&&3!=u.which:4!=u.button&&2!=u.button){(u.originalEvent||u).preventDefault();var l=u.clientX,c=u.clientY,p=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,h=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft;if(this._drag.id=u.identifier,f&&u.touches)for(var x,g=u.touches.length;g--;)if(x=u.touches[g],this._drag.id=x.identifier,x.identifier==this._drag.id){l=x.clientX,c=x.clientY;break}this._drag.x=l+h,this._drag.y=c+p,!He.length&&t.mousemove(Ue).mouseup(ze),He.push({el:this,move_scope:n,start_scope:a,end_scope:s}),r&&e.on("raphael.drag.start."+this.id,r),i&&e.on("raphael.drag.move."+this.id,i),o&&e.on("raphael.drag.end."+this.id,o),e("raphael.drag.start."+this.id,a||n||this,u.clientX+h,u.clientY+p,u)}}return this._drag={},je.push({el:this,start:u}),this.mousedown(u),this},Ke.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Ke.undrag=function(){for(var i=je.length;i--;)je[i].el==this&&(this.unmousedown(je[i].start),je.splice(i,1),e.unbind("raphael.drag.*."+this.id));!je.length&&t.unmousemove(Ue).unmouseup(ze),He=[]},r.circle=function(e,i,r){var o=t._engine.circle(this,e||0,i||0,r||0);return this.__set__&&this.__set__.push(o),o},r.rect=function(e,i,r,o,n){var a=t._engine.rect(this,e||0,i||0,r||0,o||0,n||0);return this.__set__&&this.__set__.push(a),a},r.ellipse=function(e,i,r,o){var n=t._engine.ellipse(this,e||0,i||0,r||0,o||0);return this.__set__&&this.__set__.push(n),n},r.path=function(e){e&&!t.is(e,D)&&!t.is(e[0],k)&&(e+=x);var i=t._engine.path(t.format[h](t,arguments),this);return this.__set__&&this.__set__.push(i),i},r.image=function(e,i,r,o,n){var a=t._engine.image(this,e||"about:blank",i||0,r||0,o||0,n||0);return this.__set__&&this.__set__.push(a),a},r.text=function(e,i,r){var o=t._engine.text(this,e||0,i||0,m(r));return this.__set__&&this.__set__.push(o),o},r.set=function(e){!t.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var i=new lt(e);return this.__set__&&this.__set__.push(i),i.paper=this,i.type="set",i},r.setStart=function(e){this.__set__=e||this.set()},r.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},r.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},r.setSize=function(e,i){return t._engine.setSize.call(this,e,i)},r.setViewBox=function(e,i,r,o,n){return t._engine.setViewBox.call(this,e,i,r,o,n)},r.top=r.bottom=null,r.raphael=t,r.getElementByPoint=function(e,t){var i,r,o,n,a,s,u,l=this,c=l.canvas,p=d.doc.elementFromPoint(e,t);if(d.win.opera&&"svg"==p.tagName){var h=(r=(i=c).getBoundingClientRect(),o=i.ownerDocument,n=o.body,a=o.documentElement,s=a.clientTop||n.clientTop||0,u=a.clientLeft||n.clientLeft||0,{y:r.top+(d.win.pageYOffset||a.scrollTop||n.scrollTop)-s,x:r.left+(d.win.pageXOffset||a.scrollLeft||n.scrollLeft)-u}),f=c.createSVGRect();f.x=e-h.x,f.y=t-h.y,f.width=f.height=1;var x=c.getIntersectionList(f,null);x.length&&(p=x[x.length-1])}if(!p)return null;for(;p.parentNode&&p!=c.parentNode&&!p.raphael;)p=p.parentNode;return p==l.canvas.parentNode&&(p=c),p=p&&p.raphael?l.getById(p.raphaelid):null},r.getElementsByBBox=function(e){var i=this.set();return this.forEach((function(r){t.isBBoxIntersect(r.getBBox(),e)&&i.push(r)})),i},r.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},r.forEach=function(e,t){for(var i=this.bottom;i;){if(!1===e.call(t,i))return this;i=i.next}return this},r.getElementsByPoint=function(e,t){var i=this.set();return this.forEach((function(r){r.isPointInside(e,t)&&i.push(r)})),i},Ke.isPointInside=function(e,i){var r=this.realPath=q[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(r=t.transformPath(r,this.attr("transform"))),t.isPointInsidePath(r,e,i)},Ke.getBBox=function(e){if(this.removed)return{};var t=this._;return e?(!t.dirty&&t.bboxwt||(this.realPath=q[this.type](this),t.bboxwt=be(this.realPath),t.bboxwt.toString=Ye,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&(!t.dirty&&this.realPath||(t.bboxwt=0,this.realPath=q[this.type](this)),t.bbox=be(Z(this.realPath,this.matrix)),t.bbox.toString=Ye,t.dirty=t.dirtyT=0),t.bbox)},Ke.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Ke.glow=function(e){if("text"==this.type)return null;var t={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:null==e.opacity?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},i=t.width/2,r=this.paper,o=r.set(),n=this.realPath||q[this.type](this);n=this.matrix?Z(n,this.matrix):n;for(var a=1;a<i+1;a++)o.push(r.path(n).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/i*a).toFixed(3),opacity:+(t.opacity/i).toFixed(3)}));return o.insertBefore(this).translate(t.offsetx,t.offsety)};var Ge=function(e,i,r,o,n,a,s,u,l){return null==l?fe(e,i,r,o,n,a,s,u):t.findDotsAtSegment(e,i,r,o,n,a,s,u,function(e,t,i,r,o,n,a,s,u){if(!(u<0||fe(e,t,i,r,o,n,a,s)<u)){var l,d=.5,c=1-d;for(l=fe(e,t,i,r,o,n,a,s,c);C(l-u)>.01;)l=fe(e,t,i,r,o,n,a,s,c+=(l<u?1:-1)*(d/=2));return c}}(e,i,r,o,n,a,s,u,l))},We=function(e,i){return function(r,o,n){for(var a,s,u,l,d,c="",p={},h=0,f=0,x=(r=Se(r)).length;f<x;f++){if("M"==(u=r[f])[0])a=+u[1],s=+u[2];else{if(h+(l=Ge(a,s,u[1],u[2],u[3],u[4],u[5],u[6]))>o){if(i&&!p.start){if(c+=["C"+(d=Ge(a,s,u[1],u[2],u[3],u[4],u[5],u[6],o-h)).start.x,d.start.y,d.m.x,d.m.y,d.x,d.y],n)return c;p.start=c,c=["M"+d.x,d.y+"C"+d.n.x,d.n.y,d.end.x,d.end.y,u[5],u[6]].join(),h+=l,a=+u[5],s=+u[6];continue}if(!e&&!i)return{x:(d=Ge(a,s,u[1],u[2],u[3],u[4],u[5],u[6],o-h)).x,y:d.y,alpha:d.alpha}}h+=l,a=+u[5],s=+u[6]}c+=u.shift()+u}return p.end=c,(d=e?h:i?p:t.findDotsAtSegment(a,s,u[0],u[1],u[2],u[3],u[4],u[5],1)).alpha&&(d={x:d.x,y:d.y,alpha:d.alpha}),d}},Xe=We(1),Qe=We(),qe=We(0,1);t.getTotalLength=Xe,t.getPointAtLength=Qe,t.getSubpath=function(e,t,i){if(this.getTotalLength(e)-i<1e-6)return qe(e,t).end;var r=qe(e,i,1);return t?qe(r,t).end:r},Ke.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():Xe(e)},Ke.getPointAtLength=function(e){var t=this.getPath();if(t)return Qe(t,e)},Ke.getPath=function(){var e,i=t._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return i&&(e=i(this)),e},Ke.getSubpath=function(e,i){var r=this.getPath();if(r)return t.getSubpath(r,e,i)};var Ze=t.easing_formulas={linear:function(e){return e},"<":function(e){return I(e,1.7)},">":function(e){return I(e,.48)},"<>":function(e){var t=.48-e/1.04,i=A.sqrt(.1734+t*t),r=i-t,o=-i-t,n=I(C(r),1/3)*(r<0?-1:1)+I(C(o),1/3)*(o<0?-1:1)+.5;return 3*(1-n)*n*n+n*n*n},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:I(2,-10*e)*A.sin(2*E*(e-.075)/.3)+1},bounce:function(e){var t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375}};Ze.easeIn=Ze["ease-in"]=Ze["<"],Ze.easeOut=Ze["ease-out"]=Ze[">"],Ze.easeInOut=Ze["ease-in-out"]=Ze["<>"],Ze["back-in"]=Ze.backIn,Ze["back-out"]=Ze.backOut;var Je=[],et=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},tt=function(){for(var i=+new Date,r=0;r<Je.length;r++){var o=Je[r];if(!o.el.removed&&!o.paused){var n,a,s=i-o.start,u=o.ms,d=o.easing,c=o.from,p=o.diff,h=o.to,f=(o.t,o.el),x={},m={};if(o.initstatus?(s=(o.initstatus*o.anim.top-o.prev)/(o.percent-o.prev)*u,o.status=o.initstatus,delete o.initstatus,o.stop&&Je.splice(r--,1)):o.status=(o.prev+(o.percent-o.prev)*(s/u))/o.anim.top,!(s<0))if(s<u){var b=d(s/u);for(var v in c)if(c[l](v)){switch(P[v]){case S:n=+c[v]+b*u*p[v];break;case"colour":n="rgb("+[it(R(c[v].r+b*u*p[v].r)),it(R(c[v].g+b*u*p[v].g)),it(R(c[v].b+b*u*p[v].b))].join(",")+")";break;case"path":n=[];for(var y=0,A=c[v].length;y<A;y++){n[y]=[c[v][y][0]];for(var _=1,w=c[v][y].length;_<w;_++)n[y][_]=+c[v][y][_]+b*u*p[v][y][_];n[y]=n[y].join(g)}n=n.join(g);break;case"transform":if(p[v].real)for(n=[],y=0,A=c[v].length;y<A;y++)for(n[y]=[c[v][y][0]],_=1,w=c[v][y].length;_<w;_++)n[y][_]=c[v][y][_]+b*u*p[v][y][_];else{var C=function(e){return+c[v][e]+b*u*p[v][e]};n=[["m",C(0),C(1),C(2),C(3),C(4),C(5)]]}break;case"csv":if("clip-rect"==v)for(n=[],y=4;y--;)n[y]=+c[v][y]+b*u*p[v][y];break;default:var I=[].concat(c[v]);for(n=[],y=f.paper.customAttributes[v].length;y--;)n[y]=+I[y]+b*u*p[v][y]}x[v]=n}f.attr(x),function(t,i,r){setTimeout((function(){e("raphael.anim.frame."+t,i,r)}))}(f.id,f,o.anim)}else{if(function(i,r,o){setTimeout((function(){e("raphael.anim.frame."+r.id,r,o),e("raphael.anim.finish."+r.id,r,o),t.is(i,"function")&&i.call(r)}))}(o.callback,f,o.anim),f.attr(h),Je.splice(r--,1),o.repeat>1&&!o.next){for(a in h)h[l](a)&&(m[a]=o.totalOrigin[a]);o.el.attr(m),nt(o.anim,o.el,o.anim.percents[0],null,o.totalOrigin,o.repeat-1)}o.next&&!o.stop&&nt(o.anim,o.el,o.next,null,o.totalOrigin,o.repeat)}}}Je.length&&et(tt)},it=function(e){return e>255?255:e<0?0:e};function rt(e,t,i,r,o,n){var a=3*t,s=3*(r-t)-a,u=1-a-s,l=3*i,d=3*(o-i)-l,c=1-l-d;function p(e){return((u*e+s)*e+a)*e}return function(e,t){var i=function(e,t){var i,r,o,n,l,d;for(o=e,d=0;d<8;d++){if(n=p(o)-e,C(n)<t)return o;if(C(l=(3*u*o+2*s)*o+a)<1e-6)break;o-=n/l}if(r=1,(o=e)<(i=0))return i;if(o>r)return r;for(;i<r;){if(n=p(o),C(n-e)<t)return o;e>n?i=o:r=o,o=(r-i)/2+i}return o}(e,t);return((c*i+d)*i+l)*i}(e,1/(200*n))}function ot(e,t){var i=[],r={};if(this.ms=t,this.times=1,e){for(var o in e)e[l](o)&&(r[B(o)]=e[o],i.push(B(o)));i.sort(G)}this.anim=r,this.top=i[i.length-1],this.percents=i}function nt(i,r,o,n,s,u){o=B(o);var d,c,p,h,f,x,g=i.ms,b={},v={},y={};if(n)for(var A=0,_=Je.length;A<_;A++){var w=Je[A];if(w.el.id==r.id&&w.anim==i){w.percent!=o?(Je.splice(A,1),p=1):c=w,r.attr(w.totalOrigin);break}}else n=+v;for(A=0,_=i.percents.length;A<_;A++){if(i.percents[A]==o||i.percents[A]>n*i.top){o=i.percents[A],f=i.percents[A-1]||0,g=g/i.top*(o-f),h=i.percents[A+1],d=i.anim[o];break}n&&r.attr(i.anim[i.percents[A]])}if(d){if(c)c.initstatus=n,c.start=new Date-c.ms*n;else{for(var C in d)if(d[l](C)&&(P[l](C)||r.paper.customAttributes[l](C)))switch(b[C]=r.attr(C),null==b[C]&&(b[C]=O[C]),v[C]=d[C],P[C]){case S:y[C]=(v[C]-b[C])/g;break;case"colour":b[C]=t.getRGB(b[C]);var I=t.getRGB(v[C]);y[C]={r:(I.r-b[C].r)/g,g:(I.g-b[C].g)/g,b:(I.b-b[C].b)/g};break;case"path":var E=Se(b[C],v[C]),D=E[1];for(b[C]=E[0],y[C]=[],A=0,_=b[C].length;A<_;A++){y[C][A]=[0];for(var k=1,$=b[C][A].length;k<$;k++)y[C][A][k]=(D[A][k]-b[C][A][k])/g}break;case"transform":var N=r._,M=Me(N[C],v[C]);if(M)for(b[C]=M.from,v[C]=M.to,y[C]=[],y[C].real=!0,A=0,_=b[C].length;A<_;A++)for(y[C][A]=[b[C][A][0]],k=1,$=b[C][A].length;k<$;k++)y[C][A][k]=(v[C][A][k]-b[C][A][k])/g;else{var R=r.matrix||new Te,L={_:{transform:N.transform},getBBox:function(){return r.getBBox(1)}};b[C]=[R.a,R.b,R.c,R.d,R.e,R.f],$e(L,v[C]),v[C]=L._.transform,y[C]=[(L.matrix.a-R.a)/g,(L.matrix.b-R.b)/g,(L.matrix.c-R.c)/g,(L.matrix.d-R.d)/g,(L.matrix.e-R.e)/g,(L.matrix.f-R.f)/g]}break;case"csv":var F=m(d[C]).split(a),H=m(b[C]).split(a);if("clip-rect"==C)for(b[C]=H,y[C]=[],A=H.length;A--;)y[C][A]=(F[A]-b[C][A])/g;v[C]=F;break;default:for(F=[].concat(d[C]),H=[].concat(b[C]),y[C]=[],A=r.paper.customAttributes[C].length;A--;)y[C][A]=((F[A]||0)-(H[A]||0))/g}var U=d.easing,z=t.easing_formulas[U];if(!z)if((z=m(U).match(T))&&5==z.length){var K=z;z=function(e){return rt(e,+K[1],+K[2],+K[3],+K[4],g)}}else z=W;if(w={anim:i,percent:o,timestamp:x=d.start||i.start||+new Date,start:x+(i.del||0),status:0,initstatus:n||0,stop:!1,ms:g,easing:z,from:b,diff:y,to:v,el:r,callback:d.callback,prev:f,next:h,repeat:u||i.times,origin:r.attr(),totalOrigin:s},Je.push(w),n&&!c&&!p&&(w.stop=!0,w.start=new Date-g*n,1==Je.length))return tt();p&&(w.start=new Date-w.ms*n),1==Je.length&&et(tt)}e("raphael.anim.start."+r.id,r,i)}}function at(e){for(var t=0;t<Je.length;t++)Je[t].el.paper==e&&Je.splice(t--,1)}Ke.animateWith=function(e,i,r,o,n,a){var s=this;if(s.removed)return a&&a.call(s),s;var u=r instanceof ot?r:t.animation(r,o,n,a);nt(u,s,u.percents[0],null,s.attr());for(var l=0,d=Je.length;l<d;l++)if(Je[l].anim==i&&Je[l].el==e){Je[d-1].start=Je[l].start;break}return s},Ke.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},ot.prototype.delay=function(e){var t=new ot(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},ot.prototype.repeat=function(e){var t=new ot(this.anim,this.ms);return t.del=this.del,t.times=A.floor(_(e,0))||1,t},t.animation=function(e,i,r,o){if(e instanceof ot)return e;!t.is(r,"function")&&r||(o=o||r||null,r=null),e=Object(e),i=+i||0;var n,a,s={};for(a in e)e[l](a)&&B(a)!=a&&B(a)+"%"!=a&&(n=!0,s[a]=e[a]);if(n)return r&&(s.easing=r),o&&(s.callback=o),new ot({100:s},i);if(o){var u=0;for(var d in e){var c=L(d);e[l](d)&&c>u&&(u=c)}!e[u+="%"].callback&&(e[u].callback=o)}return new ot(e,i)},Ke.animate=function(e,i,r,o){var n=this;if(n.removed)return o&&o.call(n),n;var a=e instanceof ot?e:t.animation(e,i,r,o);return nt(a,n,a.percents[0],null,n.attr()),n},Ke.setTime=function(e,t){return e&&null!=t&&this.status(e,w(t,e.ms)/e.ms),this},Ke.status=function(e,t){var i,r,o=[],n=0;if(null!=t)return nt(e,this,-1,w(t,1)),this;for(i=Je.length;n<i;n++)if((r=Je[n]).el.id==this.id&&(!e||r.anim==e)){if(e)return r.status;o.push({anim:r.anim,status:r.status})}return e?0:o},Ke.pause=function(t){for(var i=0;i<Je.length;i++)Je[i].el.id!=this.id||t&&Je[i].anim!=t||!1!==e("raphael.anim.pause."+this.id,this,Je[i].anim)&&(Je[i].paused=!0);return this},Ke.resume=function(t){for(var i=0;i<Je.length;i++)if(Je[i].el.id==this.id&&(!t||Je[i].anim==t)){var r=Je[i];!1!==e("raphael.anim.resume."+this.id,this,r.anim)&&(delete r.paused,this.status(r.anim,r.status))}return this},Ke.stop=function(t){for(var i=0;i<Je.length;i++)Je[i].el.id!=this.id||t&&Je[i].anim!=t||!1!==e("raphael.anim.stop."+this.id,this,Je[i].anim)&&Je.splice(i--,1);return this},e.on("raphael.remove",at),e.on("raphael.clear",at),Ke.toString=function(){return"Raphaël’s object"};var st,ut,lt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,i=e.length;t<i;t++)!e[t]||e[t].constructor!=Ke.constructor&&e[t].constructor!=lt||(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},dt=lt.prototype;for(var ct in dt.push=function(){for(var e,t,i=0,r=arguments.length;i<r;i++)!(e=arguments[i])||e.constructor!=Ke.constructor&&e.constructor!=lt||(this[t=this.items.length]=this.items[t]=e,this.length++);return this},dt.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},dt.forEach=function(e,t){for(var i=0,r=this.items.length;i<r;i++)if(!1===e.call(t,this.items[i],i))return this;return this},Ke)Ke[l](ct)&&(dt[ct]=function(e){return function(){var t=arguments;return this.forEach((function(i){i[e][h](i,t)}))}}(ct));return dt.attr=function(e,i){if(e&&t.is(e,k)&&t.is(e[0],"object"))for(var r=0,o=e.length;r<o;r++)this.items[r].attr(e[r]);else for(var n=0,a=this.items.length;n<a;n++)this.items[n].attr(e,i);return this},dt.clear=function(){for(;this.length;)this.pop()},dt.splice=function(e,t,i){e=e<0?_(this.length+e,0):e,t=_(0,w(this.length-e,t));var r,o=[],n=[],a=[];for(r=2;r<arguments.length;r++)a.push(arguments[r]);for(r=0;r<t;r++)n.push(this[e+r]);for(;r<this.length-e;r++)o.push(this[e+r]);var s=a.length;for(r=0;r<s+o.length;r++)this.items[e+r]=this[e+r]=r<s?a[r]:o[r-s];for(r=this.items.length=this.length-=t-s;this[r];)delete this[r++];return new lt(n)},dt.exclude=function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]==e)return this.splice(t,1),!0},dt.animate=function(e,i,r,o){(t.is(r,"function")||!r)&&(o=r||null);var n,a,s=this.items.length,u=s,l=this;if(!s)return this;o&&(a=function(){!--s&&o.call(l)}),r=t.is(r,D)?r:a;var d=t.animation(e,i,r,a);for(n=this.items[--u].animate(d);u--;)this.items[u]&&!this.items[u].removed&&this.items[u].animateWith(n,d,d),this.items[u]&&!this.items[u].removed||s--;return this},dt.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},dt.getBBox=function(){for(var e=[],t=[],i=[],r=[],o=this.items.length;o--;)if(!this.items[o].removed){var n=this.items[o].getBBox();e.push(n.x),t.push(n.y),i.push(n.x+n.width),r.push(n.y+n.height)}return{x:e=w[h](0,e),y:t=w[h](0,t),x2:i=_[h](0,i),y2:r=_[h](0,r),width:i-e,height:r-t}},dt.clone=function(e){e=this.paper.set();for(var t=0,i=this.items.length;t<i;t++)e.push(this.items[t].clone());return e},dt.toString=function(){return"Raphaël‘s set"},dt.glow=function(e){var t=this.paper.set();return this.forEach((function(i,r){var o=i.glow(e);null!=o&&o.forEach((function(e,i){t.push(e)}))})),t},dt.isPointInside=function(e,t){var i=!1;return this.forEach((function(r){if(r.isPointInside(e,t))return i=!0,!1})),i},t.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},i=e.face["font-family"];for(var r in e.face)e.face[l](r)&&(t.face[r]=e.face[r]);if(this.fonts[i]?this.fonts[i].push(t):this.fonts[i]=[t],!e.svg)for(var o in t.face["units-per-em"]=L(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[l](o)){var n=e.glyphs[o];if(t.glyphs[o]={w:n.w,k:{},d:n.d&&"M"+n.d.replace(/[mlcxtrv]/g,(function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"}))+"z"},n.k)for(var a in n.k)n[l](a)&&(t.glyphs[o].k[a]=n.k[a])}return e},r.getFont=function(e,i,r,o){if(o=o||"normal",r=r||"normal",i=+i||{normal:400,bold:700,lighter:300,bolder:800}[i]||400,t.fonts){var n,a=t.fonts[e];if(!a){var s=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,x)+"(\\s|$)","i");for(var u in t.fonts)if(t.fonts[l](u)&&s.test(u)){a=t.fonts[u];break}}if(a)for(var d=0,c=a.length;d<c&&((n=a[d]).face["font-weight"]!=i||n.face["font-style"]!=r&&n.face["font-style"]||n.face["font-stretch"]!=o);d++);return n}},r.print=function(e,i,r,o,n,s,u,l){s=s||"middle",u=_(w(u||0,1),-1),l=_(w(l||1,3),1);var d,c=m(r).split(x),p=0,h=0,f=x;if(t.is(o,"string")&&(o=this.getFont(o)),o){d=(n||16)/o.face["units-per-em"];for(var g=o.face.bbox.split(a),b=+g[0],v=g[3]-g[1],y=0,A=+g[1]+("baseline"==s?v+ +o.face.descent:v/2),C=0,I=c.length;C<I;C++){if("\n"==c[C])p=0,S=0,h=0,y+=v*l;else{var E=h&&o.glyphs[c[C-1]]||{},S=o.glyphs[c[C]];p+=h?(E.w||o.w)+(E.k&&E.k[c[C]]||0)+o.w*u:0,h=1}S&&S.d&&(f+=t.transformPath(S.d,["t",p*d,y*d,"s",d,d,b,A,"t",(e-b)/d,(i-A)/d]))}}return this.path(f).attr({fill:"#000",stroke:"none"})},r.add=function(e){if(t.is(e,"array"))for(var i,r=this.set(),o=0,n=e.length;o<n;o++)i=e[o]||{},s[l](i.type)&&r.push(this[i.type]().attr(i));return r},t.format=function(e,i){var r=t.is(i,k)?[0].concat(i):arguments;return e&&t.is(e,D)&&r.length-1&&(e=e.replace(u,(function(e,t){return null==r[++t]?x:r[t]}))),e||x},t.fullfill=(st=/\{([^\}]+)\}/g,ut=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,t){return String(e).replace(st,(function(e,i){return function(e,t,i){var r=i;return t.replace(ut,(function(e,t,i,o,n){t=t||o,r&&(t in r&&(r=r[t]),"function"==typeof r&&n&&(r=r()))})),r=(null==r||r==i?e:r)+""}(e,i,t)}))}),t.ninja=function(){if(c.was)d.win.Raphael=c.is;else{window.Raphael=undefined;try{delete window.Raphael}catch(e){}}return t},t.st=dt,e.on("raphael.DOMload",(function(){i=!0})),function(e,i,r){null==e.readyState&&e.addEventListener&&(e.addEventListener(i,r=function(){e.removeEventListener(i,r,!1),e.readyState="complete"},!1),e.readyState="loading"),function i(){/in/.test(e.readyState)?setTimeout(i,9):t.eve("raphael.DOMload")}()}(document,"DOMContentLoaded"),t}.apply(t,r))===undefined||(e.exports=o)},function(e,t,i){var r,o,n,a,s,u,l,d,c,p;a="0.4.2",s="hasOwnProperty",u=/[\.\/]/,l=function(){},d=function(e,t){return e-t},(p=function(e,t){e=String(e);var i,r=n,a=Array.prototype.slice.call(arguments,2),s=p.listeners(e),u=0,l=[],c={},h=[],f=o;o=e,n=0;for(var x=0,g=s.length;x<g;x++)"zIndex"in s[x]&&(l.push(s[x].zIndex),s[x].zIndex<0&&(c[s[x].zIndex]=s[x]));for(l.sort(d);l[u]<0;)if(i=c[l[u++]],h.push(i.apply(t,a)),n)return n=r,h;for(x=0;x<g;x++)if("zIndex"in(i=s[x]))if(i.zIndex==l[u]){if(h.push(i.apply(t,a)),n)break;do{if((i=c[l[++u]])&&h.push(i.apply(t,a)),n)break}while(i)}else c[i.zIndex]=i;else if(h.push(i.apply(t,a)),n)break;return n=r,o=f,h.length?h:null})._events=c={n:{}},p.listeners=function(e){var t,i,r,o,n,a,s,l,d=e.split(u),p=c,h=[p],f=[];for(o=0,n=d.length;o<n;o++){for(l=[],a=0,s=h.length;a<s;a++)for(i=[(p=h[a].n)[d[o]],p["*"]],r=2;r--;)(t=i[r])&&(l.push(t),f=f.concat(t.f||[]));h=l}return f},p.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var i=e.split(u),r=c,o=0,n=i.length;o<n;o++)r=(r=r.n).hasOwnProperty(i[o])&&r[i[o]]||(r[i[o]]={n:{}});for(r.f=r.f||[],o=0,n=r.f.length;o<n;o++)if(r.f[o]==t)return l;return r.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},p.f=function(e){var t=[].slice.call(arguments,1);return function(){p.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},p.stop=function(){n=1},p.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(o):o},p.nts=function(){return o.split(u)},p.off=p.unbind=function(e,t){if(e){var i,r,o,n,a,l,d,h=e.split(u),f=[c];for(n=0,a=h.length;n<a;n++)for(l=0;l<f.length;l+=o.length-2){if(o=[l,1],i=f[l].n,"*"!=h[n])i[h[n]]&&o.push(i[h[n]]);else for(r in i)i[s](r)&&o.push(i[r]);f.splice.apply(f,o)}for(n=0,a=f.length;n<a;n++)for(i=f[n];i.n;){if(t){if(i.f){for(l=0,d=i.f.length;l<d;l++)if(i.f[l]==t){i.f.splice(l,1);break}!i.f.length&&delete i.f}for(r in i.n)if(i.n[s](r)&&i.n[r].f){var x=i.n[r].f;for(l=0,d=x.length;l<d;l++)if(x[l]==t){x.splice(l,1);break}!x.length&&delete i.n[r].f}}else for(r in delete i.f,i.n)i.n[s](r)&&i.n[r].f&&delete i.n[r].f;i=i.n}}else p._events=c={n:{}}},p.once=function(e,t){var i=function(){return p.unbind(e,i),t.apply(this,arguments)};return p.on(e,i)},p.version=a,p.toString=function(){return"You are running Eve 0.4.2"},void 0!==e&&e.exports?e.exports=p:(r=function(){return p}.apply(t,[]))===undefined||(e.exports=r)},function(e,t,i){var r,o;r=[i(1)],(o=function(e){if(!e||e.svg){var t="hasOwnProperty",i=String,r=parseFloat,o=parseInt,n=Math,a=n.max,s=n.abs,u=n.pow,l=/[, ]+/,d=e.eve,c="",p=" ",h="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},x={};e.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var g=function(r,o){if(o)for(var n in"string"==typeof r&&(r=g(r)),o)o[t](n)&&("xlink:"==n.substring(0,6)?r.setAttributeNS(h,n.substring(6),i(o[n])):r.setAttribute(n,i(o[n])));else(r=e._g.doc.createElementNS("http://www.w3.org/2000/svg",r)).style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},m=function(t,o){var l="linear",d=t.id+o,p=.5,h=.5,f=t.node,x=t.paper,m=f.style,v=e._g.doc.getElementById(d);if(!v){if(o=(o=i(o).replace(e._radial_gradient,(function(e,t,i){if(l="radial",t&&i){p=r(t);var o=2*((h=r(i))>.5)-1;u(p-.5,2)+u(h-.5,2)>.25&&(h=n.sqrt(.25-u(p-.5,2))*o+.5)&&.5!=h&&(h=h.toFixed(5)-1e-5*o)}return c}))).split(/\s*\-\s*/),"linear"==l){var y=o.shift();if(y=-r(y),isNaN(y))return null;var A=[0,0,n.cos(e.rad(y)),n.sin(e.rad(y))],_=1/(a(s(A[2]),s(A[3]))||1);A[2]*=_,A[3]*=_,A[2]<0&&(A[0]=-A[2],A[2]=0),A[3]<0&&(A[1]=-A[3],A[3]=0)}var w=e._parseDots(o);if(!w)return null;if(d=d.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&d!=t.gradient.id&&(x.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){v=g(l+"Gradient",{id:d}),t.gradient=v,g(v,"radial"==l?{fx:p,fy:h}:{x1:A[0],y1:A[1],x2:A[2],y2:A[3],gradientTransform:t.matrix.invert()}),x.defs.appendChild(v);for(var C=0,I=w.length;C<I;C++)v.appendChild(g("stop",{offset:w[C].offset?w[C].offset:C?"100%":"0%","stop-color":w[C].color||"#fff","stop-opacity":isFinite(w[C].opacity)?w[C].opacity:1}))}}return g(f,{fill:b(d),opacity:1,"fill-opacity":1}),m.fill=c,m.opacity=1,m.fillOpacity=1,1},b=function(e){if((t=document.documentMode)&&(9===t||10===t))return"url('#"+e+"')";var t,i=document.location;return"url('"+i.protocol+"//"+i.host+i.pathname+i.search+"#"+e+"')"},v=function(e){var t=e.getBBox(1);g(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},y=function(r,o,n){if("path"==r.type){for(var a,s,u,l,d,p=i(o).toLowerCase().split("-"),h=r.paper,m=n?"end":"start",b=r.node,v=r.attrs,y=v["stroke-width"],A=p.length,_="classic",w=3,C=3,I=5;A--;)switch(p[A]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=p[A];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":w=5;break;case"short":w=2}if("open"==_?(w+=2,C+=2,I+=2,u=1,l=n?4:1,d={fill:"none",stroke:v.stroke}):(l=u=w/2,d={fill:v.stroke,stroke:"none"}),r._.arrows?n?(r._.arrows.endPath&&x[r._.arrows.endPath]--,r._.arrows.endMarker&&x[r._.arrows.endMarker]--):(r._.arrows.startPath&&x[r._.arrows.startPath]--,r._.arrows.startMarker&&x[r._.arrows.startMarker]--):r._.arrows={},"none"!=_){var E="raphael-marker-"+_,S="raphael-marker-"+m+_+w+C+"-obj"+r.id;e._g.doc.getElementById(E)?x[E]++:(h.defs.appendChild(g(g("path"),{"stroke-linecap":"round",d:f[_],id:E})),x[E]=1);var D,k=e._g.doc.getElementById(S);k?(x[S]++,D=k.getElementsByTagName("use")[0]):(k=g(g("marker"),{id:S,markerHeight:C,markerWidth:w,orient:"auto",refX:l,refY:C/2}),D=g(g("use"),{"xlink:href":"#"+E,transform:(n?"rotate(180 "+w/2+" "+C/2+") ":c)+"scale("+w/I+","+C/I+")","stroke-width":(1/((w/I+C/I)/2)).toFixed(4)}),k.appendChild(D),h.defs.appendChild(k),x[S]=1),g(D,d);var $=u*("diamond"!=_&&"oval"!=_);n?(a=r._.arrows.startdx*y||0,s=e.getTotalLength(v.path)-$*y):(a=$*y,s=e.getTotalLength(v.path)-(r._.arrows.enddx*y||0)),(d={})["marker-"+m]="url(#"+S+")",(s||a)&&(d.d=e.getSubpath(v.path,a,s)),g(b,d),r._.arrows[m+"Path"]=E,r._.arrows[m+"Marker"]=S,r._.arrows[m+"dx"]=$,r._.arrows[m+"Type"]=_,r._.arrows[m+"String"]=o}else n?(a=r._.arrows.startdx*y||0,s=e.getTotalLength(v.path)-a):(a=0,s=e.getTotalLength(v.path)-(r._.arrows.enddx*y||0)),r._.arrows[m+"Path"]&&g(b,{d:e.getSubpath(v.path,a,s)}),delete r._.arrows[m+"Path"],delete r._.arrows[m+"Marker"],delete r._.arrows[m+"dx"],delete r._.arrows[m+"Type"],delete r._.arrows[m+"String"];for(d in x)if(x[t](d)&&!x[d]){var N=e._g.doc.getElementById(d);N&&N.parentNode.removeChild(N)}}},A={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},_=function(t,r,o){if(r=i(r).replace(/\s+/,""),r=A[r]||e.svg&&!/[^\d,]/.test(r)&&r.split(/,/)){for(var n=t.attrs["stroke-width"]||"1",a={round:n,square:n,butt:0}[t.attrs["stroke-linecap"]||o["stroke-linecap"]]||0,s=[],u=r.length;u--;)s[u]=r[u]*n+(u%2?1:-1)*a;g(t.node,{"stroke-dasharray":s.join(",")})}else g(t.node,{"stroke-dasharray":"none"})},w=function(r,n){var u=r.node,d=r.attrs,p=u.style.visibility;for(var f in u.style.visibility="hidden",n)if(n[t](f)){if(!e._availableAttrs[t](f))continue;var x=n[f];switch(d[f]=x,f){case"blur":r.blur(x);break;case"title":var b=u.getElementsByTagName("title");if(b.length&&(b=b[0]))b.firstChild.nodeValue=x;else{b=g("title");var A=e._g.doc.createTextNode(x);b.appendChild(A),u.appendChild(b)}break;case"href":case"target":var w=u.parentNode;if("a"!=w.tagName.toLowerCase()){var I=g("a");w.insertBefore(I,u),I.appendChild(u),w=I}"target"==f?w.setAttributeNS(h,"show","blank"==x?"new":x):w.setAttributeNS(h,f,x);break;case"cursor":u.style.cursor=x;break;case"transform":r.transform(x);break;case"arrow-start":y(r,x);break;case"arrow-end":y(r,x,1);break;case"clip-rect":var E=i(x).split(l);if(4==E.length){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var S=g("clipPath"),D=g("rect");S.id=e.createUUID(),g(D,{x:E[0],y:E[1],width:E[2],height:E[3]}),S.appendChild(D),r.paper.defs.appendChild(S),g(u,{"clip-path":"url(#"+S.id+")"}),r.clip=D}if(!x){var k=u.getAttribute("clip-path");if(k){var $=e._g.doc.getElementById(k.replace(/(^url\(#|\)$)/g,c));$&&$.parentNode.removeChild($),g(u,{"clip-path":c}),delete r.clip}}break;case"path":"path"==r.type&&(g(u,{d:x?d.path=e._pathToAbsolute(x):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&y(r,r._.arrows.startString),"endString"in r._.arrows&&y(r,r._.arrows.endString,1)));break;case"width":if(u.setAttribute(f,x),r._.dirty=1,!d.fx)break;f="x",x=d.x;case"x":d.fx&&(x=-d.x-(d.width||0));case"rx":if("rx"==f&&"rect"==r.type)break;case"cx":u.setAttribute(f,x),r.pattern&&v(r),r._.dirty=1;break;case"height":if(u.setAttribute(f,x),r._.dirty=1,!d.fy)break;f="y",x=d.y;case"y":d.fy&&(x=-d.y-(d.height||0));case"ry":if("ry"==f&&"rect"==r.type)break;case"cy":u.setAttribute(f,x),r.pattern&&v(r),r._.dirty=1;break;case"r":"rect"==r.type?g(u,{rx:x,ry:x}):u.setAttribute(f,x),r._.dirty=1;break;case"src":"image"==r.type&&u.setAttributeNS(h,"href",x);break;case"stroke-width":1==r._.sx&&1==r._.sy||(x/=a(s(r._.sx),s(r._.sy))||1),u.setAttribute(f,x),d["stroke-dasharray"]&&_(r,d["stroke-dasharray"],n),r._.arrows&&("startString"in r._.arrows&&y(r,r._.arrows.startString),"endString"in r._.arrows&&y(r,r._.arrows.endString,1));break;case"stroke-dasharray":_(r,x,n);break;case"stroke-dashoffset":e.svg&&u.setAttribute(f,x);break;case"fill":var N=i(x).match(e._ISURL);if(N){S=g("pattern");var M=g("image");S.id=e.createUUID(),g(S,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),g(M,{x:0,y:0,"xlink:href":N[1]}),S.appendChild(M),function(t){e._preload(N[1],(function(){var e=this.offsetWidth,i=this.offsetHeight;g(t,{width:e,height:i}),g(M,{width:e,height:i})}))}(S),r.paper.defs.appendChild(S),g(u,{fill:"url(#"+S.id+")"}),r.pattern=S,r.pattern&&v(r);break}var T=e.getRGB(x);if(T.error){if(("circle"==r.type||"ellipse"==r.type||"r"!=i(x).charAt())&&m(r,x)){if("opacity"in d||"fill-opacity"in d){var R=e._g.doc.getElementById(u.getAttribute("fill").replace(/^url\(#|\)$/g,c));if(R){var B=R.getElementsByTagName("stop");g(B[B.length-1],{"stop-opacity":("opacity"in d?d.opacity:1)*("fill-opacity"in d?d["fill-opacity"]:1)})}}d.gradient=x,d.fill="none";break}}else delete n.gradient,delete d.gradient,!e.is(d.opacity,"undefined")&&e.is(n.opacity,"undefined")&&g(u,{opacity:d.opacity}),!e.is(d["fill-opacity"],"undefined")&&e.is(n["fill-opacity"],"undefined")&&g(u,{"fill-opacity":d["fill-opacity"]});T[t]("opacity")&&g(u,{"fill-opacity":T.opacity>1?T.opacity/100:T.opacity});case"stroke":T=e.getRGB(x),u.setAttribute(f,T.hex),"stroke"==f&&T[t]("opacity")&&g(u,{"stroke-opacity":T.opacity>1?T.opacity/100:T.opacity}),"stroke"==f&&r._.arrows&&("startString"in r._.arrows&&y(r,r._.arrows.startString),"endString"in r._.arrows&&y(r,r._.arrows.endString,1));break;case"gradient":("circle"==r.type||"ellipse"==r.type||"r"!=i(x).charAt())&&m(r,x);break;case"opacity":d.gradient&&!d[t]("stroke-opacity")&&g(u,{"stroke-opacity":x>1?x/100:x});case"fill-opacity":if(d.gradient){(R=e._g.doc.getElementById(u.getAttribute("fill").replace(/^url\(#|\)$/g,c)))&&(B=R.getElementsByTagName("stop"),g(B[B.length-1],{"stop-opacity":x}));break}default:"font-size"==f&&(x=o(x,10)+"px");var L=f.replace(/(\-.)/g,(function(e){return e.substring(1).toUpperCase()}));u.style[L]=x,r._.dirty=1,u.setAttribute(f,x)}}C(r,n),u.style.visibility=p},C=function(r,n){if("text"==r.type&&(n[t]("text")||n[t]("font")||n[t]("font-size")||n[t]("x")||n[t]("y"))){var a=r.attrs,s=r.node,u=s.firstChild?o(e._g.doc.defaultView.getComputedStyle(s.firstChild,c).getPropertyValue("font-size"),10):10;if(n[t]("text")){for(a.text=n.text;s.firstChild;)s.removeChild(s.firstChild);for(var l,d=i(n.text).split("\n"),p=[],h=0,f=d.length;h<f;h++)l=g("tspan"),h&&g(l,{dy:1.2*u,x:a.x}),l.appendChild(e._g.doc.createTextNode(d[h])),s.appendChild(l),p[h]=l}else for(h=0,f=(p=s.getElementsByTagName("tspan")).length;h<f;h++)h?g(p[h],{dy:1.2*u,x:a.x}):g(p[0],{dy:0});g(s,{x:a.x,y:a.y}),r._.dirty=1;var x=r._getBBox(),m=a.y-(x.y+x.height/2);m&&e.is(m,"finite")&&g(p[0],{dy:m})}},I=function(e){return e.parentNode&&"a"===e.parentNode.tagName.toLowerCase()?e.parentNode:e},E=function(t,i){this[0]=this.node=t,t.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=i,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},S=e.el;E.prototype=S,S.constructor=E,e._engine.path=function(e,t){var i=g("path");t.canvas&&t.canvas.appendChild(i);var r=new E(i,t);return r.type="path",w(r,{fill:"none",stroke:"#000",path:e}),r},S.rotate=function(e,t,o){if(this.removed)return this;if((e=i(e).split(l)).length-1&&(t=r(e[1]),o=r(e[2])),e=r(e[0]),null==o&&(t=o),null==t||null==o){var n=this.getBBox(1);t=n.x+n.width/2,o=n.y+n.height/2}return this.transform(this._.transform.concat([["r",e,t,o]])),this},S.scale=function(e,t,o,n){if(this.removed)return this;if((e=i(e).split(l)).length-1&&(t=r(e[1]),o=r(e[2]),n=r(e[3])),e=r(e[0]),null==t&&(t=e),null==n&&(o=n),null==o||null==n)var a=this.getBBox(1);return o=null==o?a.x+a.width/2:o,n=null==n?a.y+a.height/2:n,this.transform(this._.transform.concat([["s",e,t,o,n]])),this},S.translate=function(e,t){return this.removed||((e=i(e).split(l)).length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]]))),this},S.transform=function(i){var r=this._;if(null==i)return r.transform;if(e._extractTransform(this,i),this.clip&&g(this.clip,{transform:this.matrix.invert()}),this.pattern&&v(this),this.node&&g(this.node,{transform:this.matrix}),1!=r.sx||1!=r.sy){var o=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":o})}return this},S.hide=function(){return this.removed||(this.node.style.display="none"),this},S.show=function(){return this.removed||(this.node.style.display=""),this},S.remove=function(){var t=I(this.node);if(!this.removed&&t.parentNode){var i=this.paper;for(var r in i.__set__&&i.__set__.exclude(this),d.unbind("raphael.*.*."+this.id),this.gradient&&i.defs.removeChild(this.gradient),e._tear(this,i),t.parentNode.removeChild(t),this.removeData(),this)this[r]="function"==typeof this[r]?e._removedFactory(r):null;this.removed=!0}},S._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var t,i=!1;this.paper.canvas.parentElement?t=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(t=this.paper.canvas.parentNode.style),t&&"none"==t.display&&(i=!0,t.display="");var r={};try{r=this.node.getBBox()}catch(e){r={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{r=r||{},i&&(t.display="none")}return e&&this.hide(),r},S.attr=function(i,r){if(this.removed)return this;if(null==i){var o={};for(var n in this.attrs)this.attrs[t](n)&&(o[n]=this.attrs[n]);return o.gradient&&"none"==o.fill&&(o.fill=o.gradient)&&delete o.gradient,o.transform=this._.transform,o}if(null==r&&e.is(i,"string")){if("fill"==i&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==i)return this._.transform;for(var a=i.split(l),s={},u=0,c=a.length;u<c;u++)(i=a[u])in this.attrs?s[i]=this.attrs[i]:e.is(this.paper.customAttributes[i],"function")?s[i]=this.paper.customAttributes[i].def:s[i]=e._availableAttrs[i];return c-1?s:s[a[0]]}if(null==r&&e.is(i,"array")){for(s={},u=0,c=i.length;u<c;u++)s[i[u]]=this.attr(i[u]);return s}if(null!=r){var p={};p[i]=r}else null!=i&&e.is(i,"object")&&(p=i);for(var h in p)d("raphael.attr."+h+"."+this.id,this,p[h]);for(h in this.paper.customAttributes)if(this.paper.customAttributes[t](h)&&p[t](h)&&e.is(this.paper.customAttributes[h],"function")){var f=this.paper.customAttributes[h].apply(this,[].concat(p[h]));for(var x in this.attrs[h]=p[h],f)f[t](x)&&(p[x]=f[x])}return w(this,p),this},S.toFront=function(){if(this.removed)return this;var t=I(this.node);t.parentNode.appendChild(t);var i=this.paper;return i.top!=this&&e._tofront(this,i),this},S.toBack=function(){if(this.removed)return this;var t=I(this.node),i=t.parentNode;return i.insertBefore(t,i.firstChild),e._toback(this,this.paper),this.paper,this},S.insertAfter=function(t){if(this.removed||!t)return this;var i=I(this.node),r=I(t.node||t[t.length-1].node);return r.nextSibling?r.parentNode.insertBefore(i,r.nextSibling):r.parentNode.appendChild(i),e._insertafter(this,t,this.paper),this},S.insertBefore=function(t){if(this.removed||!t)return this;var i=I(this.node),r=I(t.node||t[0].node);return r.parentNode.insertBefore(i,r),e._insertbefore(this,t,this.paper),this},S.blur=function(t){var i=this;if(0!=+t){var r=g("filter"),o=g("feGaussianBlur");i.attrs.blur=t,r.id=e.createUUID(),g(o,{stdDeviation:+t||1.5}),r.appendChild(o),i.paper.defs.appendChild(r),i._blur=r,g(i.node,{filter:"url(#"+r.id+")"})}else i._blur&&(i._blur.parentNode.removeChild(i._blur),delete i._blur,delete i.attrs.blur),i.node.removeAttribute("filter");return i},e._engine.circle=function(e,t,i,r){var o=g("circle");e.canvas&&e.canvas.appendChild(o);var n=new E(o,e);return n.attrs={cx:t,cy:i,r:r,fill:"none",stroke:"#000"},n.type="circle",g(o,n.attrs),n},e._engine.rect=function(e,t,i,r,o,n){var a=g("rect");e.canvas&&e.canvas.appendChild(a);var s=new E(a,e);return s.attrs={x:t,y:i,width:r,height:o,rx:n||0,ry:n||0,fill:"none",stroke:"#000"},s.type="rect",g(a,s.attrs),s},e._engine.ellipse=function(e,t,i,r,o){var n=g("ellipse");e.canvas&&e.canvas.appendChild(n);var a=new E(n,e);return a.attrs={cx:t,cy:i,rx:r,ry:o,fill:"none",stroke:"#000"},a.type="ellipse",g(n,a.attrs),a},e._engine.image=function(e,t,i,r,o,n){var a=g("image");g(a,{x:i,y:r,width:o,height:n,preserveAspectRatio:"none"}),a.setAttributeNS(h,"href",t),e.canvas&&e.canvas.appendChild(a);var s=new E(a,e);return s.attrs={x:i,y:r,width:o,height:n,src:t},s.type="image",s},e._engine.text=function(t,i,r,o){var n=g("text");t.canvas&&t.canvas.appendChild(n);var a=new E(n,t);return a.attrs={x:i,y:r,"text-anchor":"middle",text:o,"font-family":e._availableAttrs["font-family"],"font-size":e._availableAttrs["font-size"],stroke:"none",fill:"#000"},a.type="text",w(a,a.attrs),a},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),i=t&&t.container,r=t.x,o=t.y,n=t.width,a=t.height;if(!i)throw new Error("SVG container not found.");var s,u=g("svg"),l="overflow:hidden;";return r=r||0,o=o||0,g(u,{height:a=a||342,version:1.1,width:n=n||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==i?(u.style.cssText=l+"position:absolute;left:"+r+"px;top:"+o+"px",e._g.doc.body.appendChild(u),s=1):(u.style.cssText=l+"position:relative",i.firstChild?i.insertBefore(u,i.firstChild):i.appendChild(u)),(i=new e._Paper).width=n,i.height=a,i.canvas=u,i.clear(),i._left=i._top=0,s&&(i.renderfix=function(){}),i.renderfix(),i},e._engine.setViewBox=function(e,t,i,r,o){d("raphael.setViewBox",this,this._viewBox,[e,t,i,r,o]);var n,s,u=this.getSize(),l=a(i/u.width,r/u.height),c=this.top,h=o?"xMidYMid meet":"xMinYMin";for(null==e?(this._vbSize&&(l=1),delete this._vbSize,n="0 0 "+this.width+p+this.height):(this._vbSize=l,n=e+p+t+p+i+p+r),g(this.canvas,{viewBox:n,preserveAspectRatio:h});l&&c;)s="stroke-width"in c.attrs?c.attrs["stroke-width"]:1,c.attr({"stroke-width":s}),c._.dirty=1,c._.dirtyT=1,c=c.prev;return this._viewBox=[e,t,i,r,!!o],this},e.prototype.renderfix=function(){var e,t=this.canvas,i=t.style;try{e=t.getScreenCTM()||t.createSVGMatrix()}catch(i){e=t.createSVGMatrix()}var r=-e.e%1,o=-e.f%1;(r||o)&&(r&&(this._left=(this._left+r)%1,i.left=this._left+"px"),o&&(this._top=(this._top+o)%1,i.top=this._top+"px"))},e.prototype.clear=function(){e.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=g("desc")).appendChild(e._g.doc.createTextNode("Created with Raphaël "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=g("defs"))},e.prototype.remove=function(){for(var t in d("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null};var D=e.st;for(var k in S)S[t](k)&&!D[t](k)&&(D[k]=function(e){return function(){var t=arguments;return this.forEach((function(i){i[e].apply(i,t)}))}}(k))}}.apply(t,r))===undefined||(e.exports=o)},function(e,t,i){var r,o;r=[i(1)],(o=function(e){if(!e||e.vml){var t="hasOwnProperty",i=String,r=parseFloat,o=Math,n=o.round,a=o.max,s=o.min,u=o.abs,l="fill",d=/[, ]+/,c=e.eve,p=" ",h="",f={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},x=/([clmz]),?([^clmz]*)/gi,g=/ progid:\S+Blur\([^\)]+\)/g,m=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",v=21600,y={path:1,rect:1,image:1},A={circle:1,ellipse:1},_=function(t,i,r){var o=e.matrix();return o.rotate(-t,.5,.5),{dx:o.x(i,r),dy:o.y(i,r)}},w=function(e,t,i,r,o,n){var a=e._,s=e.matrix,d=a.fillpos,c=e.node,h=c.style,f=1,x="",g=v/t,m=v/i;if(h.visibility="hidden",t&&i){if(c.coordsize=u(g)+p+u(m),h.rotation=n*(t*i<0?-1:1),n){var b=_(n,r,o);r=b.dx,o=b.dy}if(t<0&&(x+="x"),i<0&&(x+=" y")&&(f=-1),h.flip=x,c.coordorigin=r*-g+p+o*-m,d||a.fillsize){var y=c.getElementsByTagName(l);y=y&&y[0],c.removeChild(y),d&&(b=_(n,s.x(d[0],d[1]),s.y(d[0],d[1])),y.position=b.dx*f+p+b.dy*f),a.fillsize&&(y.size=a.fillsize[0]*u(t)+p+a.fillsize[1]*u(i)),c.appendChild(y)}h.visibility="visible"}};e.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var C,I=function(e,t,r){for(var o=i(t).toLowerCase().split("-"),n=r?"end":"start",a=o.length,s="classic",u="medium",l="medium";a--;)switch(o[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=o[a];break;case"wide":case"narrow":l=o[a];break;case"long":case"short":u=o[a]}var d=e.node.getElementsByTagName("stroke")[0];d[n+"arrow"]=s,d[n+"arrowlength"]=u,d[n+"arrowwidth"]=l},E=function(o,u){o.attrs=o.attrs||{};var c=o.node,g=o.attrs,b=c.style,_=y[o.type]&&(u.x!=g.x||u.y!=g.y||u.width!=g.width||u.height!=g.height||u.cx!=g.cx||u.cy!=g.cy||u.rx!=g.rx||u.ry!=g.ry||u.r!=g.r),E=A[o.type]&&(g.cx!=u.cx||g.cy!=u.cy||g.r!=u.r||g.rx!=u.rx||g.ry!=u.ry),D=o;for(var k in u)u[t](k)&&(g[k]=u[k]);if(_&&(g.path=e._getPath[o.type](o),o._.dirty=1),u.href&&(c.href=u.href),u.title&&(c.title=u.title),u.target&&(c.target=u.target),u.cursor&&(b.cursor=u.cursor),"blur"in u&&o.blur(u.blur),(u.path&&"path"==o.type||_)&&(c.path=function(t){var r=/[ahqstv]/gi,o=e._pathToAbsolute;if(i(t).match(r)&&(o=e._path2curve),r=/[clmz]/g,o==e._pathToAbsolute&&!i(t).match(r)){var a=i(t).replace(x,(function(e,t,i){var r=[],o="m"==t.toLowerCase(),a=f[t];return i.replace(m,(function(e){o&&2==r.length&&(a+=r+f["m"==t?"l":"L"],r=[]),r.push(n(e*v))})),a+r}));return a}var s,u,l=o(t);a=[];for(var d=0,c=l.length;d<c;d++){s=l[d],"z"==(u=l[d][0].toLowerCase())&&(u="x");for(var g=1,b=s.length;g<b;g++)u+=n(s[g]*v)+(g!=b-1?",":h);a.push(u)}return a.join(p)}(~i(g.path).toLowerCase().indexOf("r")?e._pathToAbsolute(g.path):g.path),o._.dirty=1,"image"==o.type&&(o._.fillpos=[g.x,g.y],o._.fillsize=[g.width,g.height],w(o,1,1,0,0,0))),"transform"in u&&o.transform(u.transform),E){var $=+g.cx,N=+g.cy,M=+g.rx||+g.r||0,T=+g.ry||+g.r||0;c.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",n(($-M)*v),n((N-T)*v),n(($+M)*v),n((N+T)*v),n($*v)),o._.dirty=1}if("clip-rect"in u){var R=i(u["clip-rect"]).split(d);if(4==R.length){R[2]=+R[2]+ +R[0],R[3]=+R[3]+ +R[1];var B=c.clipRect||e._g.doc.createElement("div"),L=B.style;L.clip=e.format("rect({1}px {2}px {3}px {0}px)",R),c.clipRect||(L.position="absolute",L.top=0,L.left=0,L.width=o.paper.width+"px",L.height=o.paper.height+"px",c.parentNode.insertBefore(B,c),B.appendChild(c),c.clipRect=B)}u["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="auto")}if(o.textpath){var F=o.textpath.style;u.font&&(F.font=u.font),u["font-family"]&&(F.fontFamily='"'+u["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,h)+'"'),u["font-size"]&&(F.fontSize=u["font-size"]),u["font-weight"]&&(F.fontWeight=u["font-weight"]),u["font-style"]&&(F.fontStyle=u["font-style"])}if("arrow-start"in u&&I(D,u["arrow-start"]),"arrow-end"in u&&I(D,u["arrow-end"],1),null!=u.opacity||null!=u.fill||null!=u.src||null!=u.stroke||null!=u["stroke-width"]||null!=u["stroke-opacity"]||null!=u["fill-opacity"]||null!=u["stroke-dasharray"]||null!=u["stroke-miterlimit"]||null!=u["stroke-linejoin"]||null!=u["stroke-linecap"]){var O=c.getElementsByTagName(l);if(!(O=O&&O[0])&&(O=C(l)),"image"==o.type&&u.src&&(O.src=u.src),u.fill&&(O.on=!0),null!=O.on&&"none"!=u.fill&&null!==u.fill||(O.on=!1),O.on&&u.fill){var P=i(u.fill).match(e._ISURL);if(P){O.parentNode==c&&c.removeChild(O),O.rotate=!0,O.src=P[1],O.type="tile";var H=o.getBBox(1);O.position=H.x+p+H.y,o._.fillpos=[H.x,H.y],e._preload(P[1],(function(){o._.fillsize=[this.offsetWidth,this.offsetHeight]}))}else O.color=e.getRGB(u.fill).hex,O.src=h,O.type="solid",e.getRGB(u.fill).error&&(D.type in{circle:1,ellipse:1}||"r"!=i(u.fill).charAt())&&S(D,u.fill,O)&&(g.fill="none",g.gradient=u.fill,O.rotate=!1)}if("fill-opacity"in u||"opacity"in u){var U=((+g["fill-opacity"]+1||2)-1)*((+g.opacity+1||2)-1)*((+e.getRGB(u.fill).o+1||2)-1);U=s(a(U,0),1),O.opacity=U,O.src&&(O.color="none")}c.appendChild(O);var z=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0],K=!1;!z&&(K=z=C("stroke")),(u.stroke&&"none"!=u.stroke||u["stroke-width"]||null!=u["stroke-opacity"]||u["stroke-dasharray"]||u["stroke-miterlimit"]||u["stroke-linejoin"]||u["stroke-linecap"])&&(z.on=!0),("none"==u.stroke||null===u.stroke||null==z.on||0==u.stroke||0==u["stroke-width"])&&(z.on=!1);var V=e.getRGB(u.stroke);z.on&&u.stroke&&(z.color=V.hex),U=((+g["stroke-opacity"]+1||2)-1)*((+g.opacity+1||2)-1)*((+V.o+1||2)-1);var j=.75*(r(u["stroke-width"])||1);if(U=s(a(U,0),1),null==u["stroke-width"]&&(j=g["stroke-width"]),u["stroke-width"]&&(z.weight=j),j&&j<1&&(U*=j)&&(z.weight=1),z.opacity=U,u["stroke-linejoin"]&&(z.joinstyle=u["stroke-linejoin"]||"miter"),z.miterlimit=u["stroke-miterlimit"]||8,u["stroke-linecap"]&&(z.endcap="butt"==u["stroke-linecap"]?"flat":"square"==u["stroke-linecap"]?"square":"round"),"stroke-dasharray"in u){var Y={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};z.dashstyle=Y[t](u["stroke-dasharray"])?Y[u["stroke-dasharray"]]:h}K&&c.appendChild(z)}if("text"==D.type){D.paper.canvas.style.display=h;var G=D.paper.span,W=g.font&&g.font.match(/\d+(?:\.\d*)?(?=px)/);b=G.style,g.font&&(b.font=g.font),g["font-family"]&&(b.fontFamily=g["font-family"]),g["font-weight"]&&(b.fontWeight=g["font-weight"]),g["font-style"]&&(b.fontStyle=g["font-style"]),W=r(g["font-size"]||W&&W[0])||10,b.fontSize=100*W+"px",D.textpath.string&&(G.innerHTML=i(D.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=G.getBoundingClientRect();D.W=g.w=(X.right-X.left)/100,D.H=g.h=(X.bottom-X.top)/100,D.X=g.x,D.Y=g.y+D.H/2,("x"in u||"y"in u)&&(D.path.v=e.format("m{0},{1}l{2},{1}",n(g.x*v),n(g.y*v),n(g.x*v)+1));for(var Q=["x","y","text","font","font-family","font-weight","font-style","font-size"],q=0,Z=Q.length;q<Z;q++)if(Q[q]in u){D._.dirty=1;break}switch(g["text-anchor"]){case"start":D.textpath.style["v-text-align"]="left",D.bbx=D.W/2;break;case"end":D.textpath.style["v-text-align"]="right",D.bbx=-D.W/2;break;default:D.textpath.style["v-text-align"]="center",D.bbx=0}D.textpath.style["v-text-kern"]=!0}},S=function(t,n,a){t.attrs=t.attrs||{},t.attrs;var s=Math.pow,u="linear",l=".5 .5";if(t.attrs.gradient=n,n=(n=i(n).replace(e._radial_gradient,(function(e,t,i){return u="radial",t&&i&&(t=r(t),i=r(i),s(t-.5,2)+s(i-.5,2)>.25&&(i=o.sqrt(.25-s(t-.5,2))*(2*(i>.5)-1)+.5),l=t+p+i),h}))).split(/\s*\-\s*/),"linear"==u){var d=n.shift();if(d=-r(d),isNaN(d))return null}var c=e._parseDots(n);if(!c)return null;if(t=t.shape||t.node,c.length){t.removeChild(a),a.on=!0,a.method="none",a.color=c[0].color,a.color2=c[c.length-1].color;for(var f=[],x=0,g=c.length;x<g;x++)c[x].offset&&f.push(c[x].offset+p+c[x].color);a.colors=f.length?f.join():"0% "+a.color,"radial"==u?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=l,a.angle=0):(a.type="gradient",a.angle=(270-d)%360),t.appendChild(a)}return 1},D=function(t,i){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},k=e.el;D.prototype=k,k.constructor=D,k.transform=function(t){if(null==t)return this._.transform;var r,o=this.paper._viewBoxShift,n=o?"s"+[o.scale,o.scale]+"-1-1t"+[o.dx,o.dy]:h;o&&(r=t=i(t).replace(/\.{3}|\u2026/g,this._.transform||h)),e._extractTransform(this,n+t);var a,s=this.matrix.clone(),u=this.skew,l=this.node,d=~i(this.attrs.fill).indexOf("-"),c=!i(this.attrs.fill).indexOf("url(");if(s.translate(1,1),c||d||"image"==this.type)if(u.matrix="1 0 0 1",u.offset="0 0",a=s.split(),d&&a.noRotation||!a.isSimple){l.style.filter=s.toFilter();var f=this.getBBox(),x=this.getBBox(1),g=f.x-x.x,m=f.y-x.y;l.coordorigin=g*-v+p+m*-v,w(this,1,1,g,m,0)}else l.style.filter=h,w(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else l.style.filter=h,u.matrix=i(s),u.offset=s.offset();return null!==r&&(this._.transform=r,e._extractTransform(this,r)),this},k.rotate=function(e,t,o){if(this.removed)return this;if(null!=e){if((e=i(e).split(d)).length-1&&(t=r(e[1]),o=r(e[2])),e=r(e[0]),null==o&&(t=o),null==t||null==o){var n=this.getBBox(1);t=n.x+n.width/2,o=n.y+n.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,o]])),this}},k.translate=function(e,t){return this.removed||((e=i(e).split(d)).length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]]))),this},k.scale=function(e,t,o,n){if(this.removed)return this;if((e=i(e).split(d)).length-1&&(t=r(e[1]),o=r(e[2]),n=r(e[3]),isNaN(o)&&(o=null),isNaN(n)&&(n=null)),e=r(e[0]),null==t&&(t=e),null==n&&(o=n),null==o||null==n)var a=this.getBBox(1);return o=null==o?a.x+a.width/2:o,n=null==n?a.y+a.height/2:n,this.transform(this._.transform.concat([["s",e,t,o,n]])),this._.dirtyT=1,this},k.hide=function(){return!this.removed&&(this.node.style.display="none"),this},k.show=function(){return!this.removed&&(this.node.style.display=h),this},k.auxGetBBox=e.el.getBBox,k.getBBox=function(){var e=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var t={},i=1/this.paper._viewBoxShift.scale;return t.x=e.x-this.paper._viewBoxShift.dx,t.x*=i,t.y=e.y-this.paper._viewBoxShift.dy,t.y*=i,t.width=e.width*i,t.height=e.height*i,t.x2=t.x+t.width,t.y2=t.y+t.height,t}return e},k._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},k.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("raphael.*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;this.removed=!0}},k.attr=function(i,r){if(this.removed)return this;if(null==i){var o={};for(var n in this.attrs)this.attrs[t](n)&&(o[n]=this.attrs[n]);return o.gradient&&"none"==o.fill&&(o.fill=o.gradient)&&delete o.gradient,o.transform=this._.transform,o}if(null==r&&e.is(i,"string")){if(i==l&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=i.split(d),s={},u=0,p=a.length;u<p;u++)(i=a[u])in this.attrs?s[i]=this.attrs[i]:e.is(this.paper.customAttributes[i],"function")?s[i]=this.paper.customAttributes[i].def:s[i]=e._availableAttrs[i];return p-1?s:s[a[0]]}if(this.attrs&&null==r&&e.is(i,"array")){for(s={},u=0,p=i.length;u<p;u++)s[i[u]]=this.attr(i[u]);return s}var h;for(var f in null!=r&&((h={})[i]=r),null==r&&e.is(i,"object")&&(h=i),h)c("raphael.attr."+f+"."+this.id,this,h[f]);if(h){for(f in this.paper.customAttributes)if(this.paper.customAttributes[t](f)&&h[t](f)&&e.is(this.paper.customAttributes[f],"function")){var x=this.paper.customAttributes[f].apply(this,[].concat(h[f]));for(var g in this.attrs[f]=h[f],x)x[t](g)&&(h[g]=x[g])}h.text&&"text"==this.type&&(this.textpath.string=h.text),E(this,h)}return this},k.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},k.toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this},k.insertAfter=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper)),this},k.insertBefore=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper)),this},k.blur=function(t){var i=this.node.runtimeStyle,r=i.filter;return r=r.replace(g,h),0!=+t?(this.attrs.blur=t,i.filter=r+p+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",i.margin=e.format("-{0}px 0 0 -{0}px",n(+t||1.5))):(i.filter=r,i.margin=0,delete this.attrs.blur),this},e._engine.path=function(e,t){var i=C("shape");i.style.cssText=b,i.coordsize=v+p+v,i.coordorigin=t.coordorigin;var r=new D(i,t),o={fill:"none",stroke:"#000"};e&&(o.path=e),r.type="path",r.path=[],r.Path=h,E(r,o),t.canvas&&t.canvas.appendChild(i);var n=C("skew");return n.on=!0,i.appendChild(n),r.skew=n,r.transform(h),r},e._engine.rect=function(t,i,r,o,n,a){var s=e._rectPath(i,r,o,n,a),u=t.path(s),l=u.attrs;return u.X=l.x=i,u.Y=l.y=r,u.W=l.width=o,u.H=l.height=n,l.r=a,l.path=s,u.type="rect",u},e._engine.ellipse=function(e,t,i,r,o){var n=e.path();return n.attrs,n.X=t-r,n.Y=i-o,n.W=2*r,n.H=2*o,n.type="ellipse",E(n,{cx:t,cy:i,rx:r,ry:o}),n},e._engine.circle=function(e,t,i,r){var o=e.path();return o.attrs,o.X=t-r,o.Y=i-r,o.W=o.H=2*r,o.type="circle",E(o,{cx:t,cy:i,r:r}),o},e._engine.image=function(t,i,r,o,n,a){var s=e._rectPath(r,o,n,a),u=t.path(s).attr({stroke:"none"}),d=u.attrs,c=u.node,p=c.getElementsByTagName(l)[0];return d.src=i,u.X=d.x=r,u.Y=d.y=o,u.W=d.width=n,u.H=d.height=a,d.path=s,u.type="image",p.parentNode==c&&c.removeChild(p),p.rotate=!0,p.src=i,p.type="tile",u._.fillpos=[r,o],u._.fillsize=[n,a],c.appendChild(p),w(u,1,1,0,0,0),u},e._engine.text=function(t,r,o,a){var s=C("shape"),u=C("path"),l=C("textpath");r=r||0,o=o||0,a=a||"",u.v=e.format("m{0},{1}l{2},{1}",n(r*v),n(o*v),n(r*v)+1),u.textpathok=!0,l.string=i(a),l.on=!0,s.style.cssText=b,s.coordsize=v+p+v,s.coordorigin="0 0";var d=new D(s,t),c={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:a};d.shape=s,d.path=u,d.textpath=l,d.type="text",d.attrs.text=i(a),d.attrs.x=r,d.attrs.y=o,d.attrs.w=1,d.attrs.h=1,E(d,c),s.appendChild(l),s.appendChild(u),t.canvas.appendChild(s);var f=C("skew");return f.on=!0,s.appendChild(f),d.skew=f,d.transform(h),d},e._engine.setSize=function(t,i){var r=this.canvas.style;return this.width=t,this.height=i,t==+t&&(t+="px"),i==+i&&(i+="px"),r.width=t,r.height=i,r.clip="rect(0 "+t+" "+i+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,i,r,o,n){e.eve("raphael.setViewBox",this,this._viewBox,[t,i,r,o,n]);var a,s,u=this.getSize(),l=u.width,d=u.height;return n&&(r*(a=d/o)<l&&(t-=(l-r*a)/2/a),o*(s=l/r)<d&&(i-=(d-o*s)/2/s)),this._viewBox=[t,i,r,o,!!n],this._viewBoxShift={dx:-t,dy:-i,scale:u},this.forEach((function(e){e.transform("...")})),this},e._engine.initWin=function(e){var t=e.document;t.styleSheets.length<31?t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):t.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),C=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(e){C=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),i=t.container,r=t.height,o=t.width,n=t.x,a=t.y;if(!i)throw new Error("VML container not found.");var s=new e._Paper,u=s.canvas=e._g.doc.createElement("div"),l=u.style;return n=n||0,a=a||0,o=o||512,r=r||342,s.width=o,s.height=r,o==+o&&(o+="px"),r==+r&&(r+="px"),s.coordsize="21600000 21600000",s.coordorigin="0 0",s.span=e._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",u.appendChild(s.span),l.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",o,r),1==i?(e._g.doc.body.appendChild(u),l.left=n+"px",l.top=a+"px",l.position="absolute"):i.firstChild?i.insertBefore(u,i.firstChild):i.appendChild(u),s.renderfix=function(){},s},e.prototype.clear=function(){e.eve("raphael.clear",this),this.canvas.innerHTML=h,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){for(var t in e.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;return!0};var $=e.st;for(var N in k)k[t](N)&&!$[t](N)&&($[N]=function(e){return function(){var t=arguments;return this.forEach((function(i){i[e].apply(i,t)}))}}(N))}}.apply(t,r))===undefined||(e.exports=o)}])},"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("Raphael",[],factory):"object"==typeof exports?exports.Raphael=factory():root.Raphael=factory(),xui.Class("xui.svg","xui.UI",{Before:function(e,t,i){return xui.absBox.$type[e.replace("xui.","")]=xui.absBox.$type[e]=e,!0},Initialize:function(){if("function"==typeof Raphael){Raphael._availableAttrs.href="",Raphael._availableAttrs.title="",Raphael.el.shadow=function(){var e=this;if("text"==e.type)return null;e._.dirty=!0;var t=e.attr("stroke-width"),i=e.attr("fill"),r=e.attr("opacity"),o=e.attr("fill-opacity"),n=e.attr("transform"),a=e.paper,s=a.set(),u=e._getBBox(!1),l=u.width?(u.width+t-4-4)/u.width:0,d=u.height?(u.height+t-4-4)/u.height:0,c=e.getPath();c="none"!==i&&0!==o?Raphael.transformPath(c,"t"+t/2+","+t/2+"s"+l+","+d+","+(u.x+u.width+t)+","+(u.y+u.height+t)):Raphael.transformPath(c,"t2,2");for(var p,h=1;h<5;h++)(p=a.path(c).attr({stroke:"#666",fill:"none"==i?"none":"#555","fill-opacity":o,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":2*h,opacity:(.2*(1-h/4)+.05)*r}))._decoration=1,s.push(p);return n&&n.length&&s.transform(n),s.insertBefore(e)};var e=function(){for(var e,t=arguments,i=t.length,r=0;r<i;r++)if((e=t[r])||!1===e||0===e)return e},t=function(){for(var e,t=arguments,i=t.length,r=0;r<i;r++)if(((e=t[r])||!1===e||0===e)&&!isNaN(e=Number(e)))return e},i=function(e){return"matrix("+[e.get(0),e.get(1),e.get(2),e.get(3),e.get(4),e.get(5)].join()+")"},r=/^matrix\(|\)$/g,o=/\,/g,n=/\n|<br\s*?\/?>/gi,a=/[^\d\.]/gi,s=/[\(\)\s,\xb0#]/g,u=/group/gi,l=/&/g,d=/"/g,c=/'/g,p=/</g,h=/>/g,f=0,x=Math,g=parseFloat,m=x.max,b=x.abs,v=x.pow,y=String,A=/[, ]+/,_=[{reg:/xmlns\=\"http\:\/\/www.w3.org\/2000\/svg\"/gi,str:""},{reg:/^.*<svg /,str:'<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" '},{reg:/\/svg>.*$/,str:"/svg>"},{reg:/\<desc[\s\>][^\<]*\<\/desc\>/,str:""},{reg:/zIndex="[^"]+"/g,str:""},{reg:/url\((\\?[\'\"])[^#]+#/g,str:"url($1#"},{reg:/ href=/g,str:" xlink:href="},{reg:/(id|class|width|height)=([^" >]+)/g,str:'$1="$2"'},{reg:/:(path|rect)/g,str:"$1"},{reg:/\<ima?ge? ([^\>]+?)[^\/]\>/gi,str:"<image $1 />"},{reg:/\<\/ima?ge?\>/g,str:""},{reg:/style="([^"]+)"/g,str:function(e){return e.toLowerCase()}}],w={blur:function(){},transform:function(){},src:function(e,t){t.attrSTR+=' xlink:href="'+t.attrs.src+'"'},path:function(e,t){var i=t.attrs.path;i=Raphael._pathToAbsolute(i||""),t.attrSTR+=' d="'+(i.toString&&i.toString()||"").replace(o," ")+'"'},gradient:function(e,t,i){var r,o,n=e.attrs.gradient,a="linear",u=.5,l=.5,d=o="",c="";if(!i[r=n.replace(s,"_")]){if(n=(n=y(n).replace(Raphael._radial_gradient,(function(e,t,i){return a="radial",t&&i&&(u=g(t),e=2*((l=g(i))>.5)-1,v(u-.5,2)+v(l-.5,2)>.25&&(l=x.sqrt(.25-v(u-.5,2))*e+.5)&&.5!=l&&(l=l.toFixed(5)-1e-5*e)),""}))).split(/\s*\-\s*/),"linear"===a){if(o=n.shift(),o=-g(o),isNaN(o))return null;var p=[0,0,x.cos(Raphael.rad(o)),x.sin(Raphael.rad(o))];o=1/(m(b(p[2]),b(p[3]))||1),p[2]*=o,p[3]*=o,p[2]<0&&(p[0]=-p[2],p[2]=0),p[3]<0&&(p[1]=-p[3],p[3]=0)}if(!(n=Raphael._parseDots(n)))return null;for("radial"===a?(o='<radialGradient fx = "'+u+'" fy = "'+l+'" id = "'+r+'">',d="</radialGradient>"):(o='<linearGradient x1 = "'+p[0]+'" y1 = "'+p[1]+'" x2 = "'+p[2]+'" y2 = "'+p[3]+'" gradientTransform ="matrix('+e.matrix.invert()+')" id = "'+r+'">',d="</linearGradient>"),e=0,p=n.length;e<p;e++)c+='<stop offset="'+(n[e].offset?n[e].offset:e?"100%":"0%")+'" stop-color="'+(n[e].color||"#fff")+'" stop-opacity="'+(void 0===n[e].opacity?1:n[e].opacity)+'" />';i[r]=!0,i.str+=o+c+d}t.attrSTR+=" fill=\"url('#"+r+"')\""},fill:function(e,t){var i,r=t.attrs,o=r.fill;e.attrs.gradient||(i=(o=Raphael.color(o)).opacity,"text"===e.type?t.styleSTR+="fill:"+o+"; stroke-opacity:0; ":(t.attrSTR+=' fill="'+o+'"',r["fill-opacity"]||!i&&0!==i||(t.attrSTR+=' fill-opacity="'+i+'"')))},stroke:function(e,t){var i,r,o=t.attrs;r=(i=Raphael.color(o.stroke)).opacity,"text"===e.type||(t.attrSTR+=' stroke="'+i+'"',o["stroke-opacity"]||!r&&0!==r)||(t.attrSTR+=' stroke-opacity="'+r+'"')},"clip-rect":function(e,t,o){var n=(a=y(t.attrs["clip-rect"])).split(A),a=a.replace(s,"_")+"__"+f++;4===n.length&&(o[a]||(o[a]=!0,o.str+='<clipPath id="'+a+'"><rect x="'+n[0]+'" y="'+n[1]+'" width="'+n[2]+'" height="'+n[3]+'" transform="matrix('+i(e.matrix.invert()).replace(r,"")+')"/></clipPath>'),t.attrSTR+=' clip-path="url(#'+a+')"')},cursor:function(e,t){var i=t.attrs.cursor;i&&(t.styleSTR+="cursor:"+i+"; ")},font:function(e,t){t.styleSTR+="font:"+t.attrs.font.replace(/\"/gi," ")+"; "},"font-size":function(t,i){var r=e(i.attrs["font-size"],"10");r&&r.replace&&(r=r.replace(a,"")),i.styleSTR+="font-size:"+r+"px; "},"font-weight":function(e,t){t.styleSTR+="font-weight:"+t.attrs["font-weight"]+"; "},"font-family":function(e,t){t.styleSTR+="font-family:"+t.attrs["font-family"]+"; "},"line-height":function(){},"clip-path":function(){},visibility:function(){},"vertical-align":function(){},"text-anchor":function(e,t){var i=t.attrs["text-anchor"]||"middle";"text"===e.type&&(t.attrSTR+=' text-anchor="'+i+'"')},title:function(){},text:function(i,r){var o,s=(g=r.attrs).text,u=e(g["font-size"],g.font,"10"),f=e(g["line-height"]);u&&u.replace&&(u=u.replace(a,"")),u=t(u),f&&f.replace&&(f=f.replace(a,"")),f=t(f,u&&1.2*u),o=u?.85*u:.75*f,u=g.x;var x=e(g["vertical-align"],"middle").toLowerCase(),g=(s=y(s).split(n)).length,m=0;for(x="top"===x?o:"bottom"===x?o-f*g:o-f*g*.5;m<g;m++)r.textSTR+="<tspan ",o=(s[m]||"").replace(l,"&amp;").replace(d,"&quot;").replace(c,"&#39;").replace(p,"&lt;").replace(h,"&gt;"),r.textSTR+=m?'dy="'+f+'" x="'+u+'" ':'dy="'+x+'"',r.textSTR+=">"+o+"</tspan>"}},C=function(e,t){var o,n,a="",s={attrSTR:"",styleSTR:"",textSTR:"",attrs:e.attr()},l="",d="",c="",p=s.attrs;if("none"!==e.node.style.display){for(o in p)"gradient"===o||void 0===Raphael._availableAttrs[o]&&!w[o]||(w[o]?w[o](e,s,t):s.attrSTR+=" "+o+'="'+p[o]+'"');for(n in e.attrs.gradient&&w.gradient(e,s,t),"rect"===e.type&&p.r&&(s.attrSTR+=' rx="'+p.r+'" ry="'+p.r+'"'),e.styles)s.styleSTR+=n+":"+e.styles[n]+"; ";"image"===e.type&&(s.attrSTR+=' preserveAspectRatio="none"'),e.bottom&&(d=C(e.bottom,t)),e.next&&(c=C(e.next,t)),(l=e.type).match(u)&&(l="g"),a+="<"+l+' transform="matrix('+i(e.matrix).replace(r,"")+')" style="'+s.styleSTR+'"'+s.attrSTR+">"+s.textSTR+d+"</"+l+">"+c}else e.next&&(a+=C(e.next,t));return a};Raphael.fn.toSVG=function(e){var t="",i={str:""},r=0,o=_.length,n="";if(Raphael.svg){if(this.canvas&&this.canvas.parentNode)for(t=this.canvas.parentNode.innerHTML;r<o;r+=1)i=_[r],t=t.replace(i.reg,i.str)}else t='<svg style="overflow: hidden; position: relative;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.width+'" version="1.1" height="'+this.height+'">',this.bottom&&(n=C(this.bottom,i),t+="<defs>"+i.str+"</defs>"+n+"</svg>");return e||(t=t.replace(/\<image [^\>]*\>/gi,"")),t}}var I={"arrow-start":1,"arrow-end":1,"clip-rect":1,fill:1,"fill-opacity":1,title:1,cursor:1,transform:1,opacity:1,stroke:1,"stroke-dasharray":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-dashoffset":1,"stroke-width":1};this.$attr={circle:{cx:1,cy:1,r:1},ellipse:{cx:1,cy:1,rx:1,ry:1},rect:{x:1,y:1,r:1,width:1,height:1},text:{x:1,y:1,text:1,font:1,"font-family":1,"font-style":1,"font-size":1,"font-weight":1,"text-anchor":1,"letter-spacing":1},image:{src:1,x:1,y:1,width:1,height:1},path:{path:1}},xui.each(this.$attr,(function(e){xui.merge(e,I)}));var E=this.$attr.text;delete E["arrow-start"],delete E["arrow-end"],delete E["stroke-dasharray"],delete E["stroke-linecap"],delete E["stroke-linejoin"],delete E["stroke-miterlimit"],delete E["stroke-opacity"],delete E["stroke-dashoffset"],delete E["stroke-width"],delete this.prototype.toHtml},Instance:{initialize:function(){if("function"!=typeof Raphael)throw new Error("Browser doesn't suppor SVG or VML, all diagram functions were disabled!")},getAttr:function(e){var t=this.get(0);if(t){var i,r=t.properties,o=Raphael._availableAttrs,n=t.box.ISCOMBO?r.attr:{KEY:r.attr};t._elset&&t._elset.forEach((function(r){var a=r.type,s=t.getKey(r.node.id,!0);if((!e||e===s)&&(i=r.node)&&"raphaelid"in i){var u=t.boxing().getPaper();if(u&&(i=u.getById(i.raphaelid))){var l=i.attr();xui.filter(l,(function(e,r){if("transform"==r&&xui.isArr(e)&&0===e.length&&(e=""),"transform"==r&&e&&(e=i.matrix.toTransformString()),"text"==a){if("stroke"==r)return"none"!=e;if("fill"==r)return"#000"!=e;if("KEY"!=s&&"hAlign"in t.box.$DataModel&&("x"==r||"y"==r))return!1}return("KEY"==s||"transform"!=r)&&e!=o[r]})),"src"in l&&"src"in n[s]&&(l.src=n[s].src),n[s]=l}}}))}return n=t.box._adjustAttr(n),t.box.ISCOMBO?e?n[e]:n:n.KEY},setAttr:function(e,t,i,r){if(xui.isHash(e))t=e;else{var o={};o[e]=t,t=o,e=e||"KEY"}return i=!1!==i,this.each((function(o){var n,a=o.properties,s=Raphael._availableAttrs,u=o.box._adjustAttr(a.attr),l=o.box._adjustAttr(t);if(i&&xui.each(u,(function(e,t){t in l||(l[t]={}),xui.each(e,(function(e,i){i in l[t]||(l[t][i]=s[i],"text"==(o.box.$tagName[t]||t.split("_")[0].toLowerCase())&&("stroke"==i&&(l[t][i]="none"),"fill"==i&&(l[t][i]="#000")))})),"text"==(o.box.$tagName[t]||t.split("_")[0].toLowerCase())&&"KEY"!=t&&"hAlign"in o.box.$DataModel&&(delete l[t].x,delete l[t].y),"KEY"!=t&&delete l[t].transform})),o._elset){o._elset.forEach((function(t){t.type;var i=o.getKey(t.node.id,!0);if((xui.isHash(e)||e===i)&&(n=t.node)&&"raphaelid"in n){var r=o.boxing().getPaper();if(r&&(n=r.getById(n.raphaelid))){var a=xui.copy(l[i]);a&&("src"in a&&(a.src=xui.adjustRes(a.src)),n.attr(a))}}}));var d=l.KEY,c=d&&("x"in d||"y"in d||"width"in d||"height"in d||"r"in d||"rx"in d||"ry"in d||"path"in d||"transform"in d||"arrow-start"in d||"arrow-end"in d);if(d){var p=o._elset;if(p[1]&&"transform"in d)for(var h=1,f=p.length;h<f;h++)p[h].attr("transform",d.transform);!1!==r&&o.box._notify(o,d,c)}}o.box.ISCOMBO?(a.attr=xui.merge(a.attr,l,(function(e,t){if("object"!=typeof e)return!0;t in a.attr?xui.merge(a.attr[t],e,"all"):a.attr[t]=xui.copy(e)})),xui.each(a.attr,(function(e,t){xui.filter(e,(function(e,i){if("transform"==i&&xui.isArr(s[i])&&0===s[i].length&&(s[i]=""),"text"==(o.box.$tagName[t]||t.split("_")[0].toLowerCase())){if("stroke"==i)return"none"!=e;if("fill"==i)return"#000"!=e;if("KEY"!=t&&"hAlign"in o.box.$DataModel&&("x"==i||"y"==i))return!1}return("KEY"==t||"transform"!=i)&&s[i]!==e}))}))):(xui.merge(a.attr,l.KEY,"all"),xui.filter(a.attr,(function(e,t){if("transform"==t&&xui.isArr(s[t])&&0===s[t].length&&(s[t]=""),"text"==(o.box.$tagName.KEY||h.split("_")[0].toLowerCase())){if("stroke"==t)return"none"!=e;if("fill"==t)return"#000"!=e}return s[t]!==e})))}))},toFront:function(){return this.each((function(e){e._shadow&&e._shadow.toFront(),e._elset&&xui.arr.each(e._elset.items,(function(e){e.toFront()}));var t=xui.get(e,["parent","children"]);if(t&&t.length){var i,r=xui.arr.subIndexOf(t,"0",e);-1!=r&&(i=t[r],t.splice(r,1),t.push(i))}}))},toBack:function(){return this.each((function(e){e._elset&&xui.arr.each(e._elset.items,(function(e){e.toBack()}),null,!0),e._shadow&&e._shadow.toBack();var t=xui.get(e,["parent","children"]);if(t&&t.length){var i,r=xui.arr.subIndexOf(t,"0",e);-1!=r&&(i=t[r],t.splice(r,1),t.unshift(i))}}))},getAllNodes:function(){var e=this.get(0),t=[];return e&&e._elset&&(e._elset.forEach((function(e){t.push(e.node)})),e._shadow&&e._shadow.forEach((function(e){t.push(e.node)}))),xui(t)},getPaper:function(){var e=this.get(0);return e&&e.parent&&e.parent._paper},elemsAnimate:function(e,t,i,r){var o=this.get(0);return o&&o._elset&&o._elset.animate(e,t,i,r),this},getElemSet:function(){var e=this.get(0);e&&e._elset},getLeft:function(){return this._getBBox("x")},setLeft:function(e){return this._setBBox("x",e)},getTop:function(){return this._getBBox("y")},setTop:function(e){return this._setBBox("y",e)},getWidth:function(){return this._getBBox("width")},getHeight:function(){return this._getBBox("height")},setWidth:function(e){return this._setBBox("width",parseFloat(e))},setHeight:function(e){return this._setBBox("height",parseFloat(e))},_getBBox:function(e,t){var i,r,o=this.get(0);if((i=o._elset)&&i.length){i[0]._.dirty=1,r={},xui.merge(r,i[0]._getBBox(!1!==t),"all",!0);for(var n,a=1,s=i.length;a<s;a++)"text"==i[a].type&&"hAlign"in o.box.$DataModel||(i[a]._.dirty=1,n=i[a]._getBBox(!1!==t),r.x=Math.min(n.x,r.x),r.y=Math.min(n.y,r.y),r.x2=Math.max("x2"in n?n.x2:n.x+n.width,"x2"in r?r.x2:r.x+r.width),r.y2=Math.max("y2"in n?n.y2:n.y+n.height,"y2"in r?r.y2:r.y+r.height));return"x2"in r&&(r.width=r.x2-r.x),"y2"in r&&(r.height=r.y2-r.y),delete r.x2,delete r.y2,e?r[e]:r}},_setBBox:function(e,t){},_getConnectAnchors:function(){var e,t=this.get(0);if(t){if(xui.get(t._pathCached,["_connAnchors"]))return xui.get(t._pathCached,["_connAnchors"]);var i=t._elset;if(i&&i[0]){i[0]._.dirty=1;var r,o=Raphael.parseTransformString(i[0].transform());o&&o.length&&(r=i[0].matrix);var n=i[0]._getBBox(!0),a=180,s=270,u=0,l=90,d=n.x,c=n.y+n.height/2,p=n.x+n.width/2,h=n.y,f=n.x+n.width,x=n.y+n.height/2,g=n.x+n.width/2,m=n.y+n.height;if(r){var b=d,v=p,y=f,A=g,_=c,w=h,C=x,I=m;d=r.x(b,_),c=r.y(b,_),p=r.x(v,w),h=r.y(v,w),f=r.x(y,C),x=r.y(y,C);var E=(d+p+f+(g=r.x(A,I)))/4,S=(c+h+x+(m=r.y(A,I)))/4;a=Raphael.angle(d,c,E,S),s=Raphael.angle(p,h,E,S),u=Raphael.angle(f,x,E,S),l=Raphael.angle(g,m,E,S)}return e={left:{x:d,y:c,alpha:a,solid:1},top:{x:p,y:h,alpha:s,solid:1},right:{x:f,y:x,alpha:u,solid:1},bottom:{x:g,y:m,alpha:l,solid:1}},t._pathCached&&xui.set(t._pathCached,["_connAnchors"],e),e}}},_getConnectPath:function(){var e,t=this.get(0);if(xui.get(t._pathCached,["_connPath"]))return xui.get(t._pathCached,["_connPath"]);if(t&&(e=t._elset)&&e[0]){var i,r=Raphael.parseTransformString(e[0].transform());r&&r.length&&(i=e[0].matrix);var o=e[0].getPath();return i&&(o=Raphael.mapPath(o,i)),t._pathCached&&xui.set(t._pathCached,["_connPath"],o),o}},_getConnectPoint:function(e){if(e){var t,i=this.get(0);if(xui.get(i._pathCached,["_connPoint",e]))return xui.get(i._pathCached,["_connPoint",e]);if(/^[1-9][0-9]*:((1([.][0]+)?)|(0\.[0-9]+))$/.test(e)){var r=e.split(":");if(r[0]=+r[0],r[1]=+r[1],r[0]>=1&&r[1]>=0&&r[1]<=1){i=this.get(0);var o=this._getConnectPath();if(o){var n,a,s=Raphael.path2curve(o);(n=s[r[0]])&&(a=s[r[0]-1])&&(t=Raphael.findDotsAtSegment(a[a.length-2],a[a.length-1],n[1],n[2],n[3],n[4],n[5],n[6],r[1]))}}}else{var u=this._getConnectAnchors();t=u&&u[e]}return i._pathCached&&xui.set(i._pathCached,["_connPoint",e],t),t}},_removeHandler:function(){return this.each((function(e){var t,i,r;if(i=e._pathHandler){if(r=i.handlers)for(var o,n,a=0,s=r.length;a<s;a++)for(var u in o=r[a])(n=o[u])&&"function"==typeof n.remove&&n.remove(),o[a]=null;t=i.el,delete i.el,delete e._pathHandler}delete e._ddstartFun,delete e._ddendFun,t&&t._shape&&(t._shape.remove(),delete t._shape)}))},_addHandler:function(e,t){return t=t||"adv",this._removeHandler(),this.each((function(i){if(i._elset&&i._elset[0]){var r,o,n,a=i.boxing().getPaper(),s=i.box.ISCOMBO,u=i._elset[0],l=i.box._CONNECTOR,d=i.properties.type,c={fill:"#fff",stroke:"#000",r:5},p={fill:"#fff",stroke:"#000",r:4},h={fill:"#fff",stroke:"#000",r:3},f={fill:"#fff",stroke:"#000",r:4},x={fill:"#bf5600",stroke:"#bf5600",r:5,"fill-opacity":.5},g={stroke:"#0000FF","stroke-dasharray":". "},m={rect:function(e){var t=e.attr(),i={};return i.dot=A(a.circle(t.x+t.width/2,t.y+t.height/2).attr(c).attr("cursor","move"),e,(function(r,o,n,a){var s,u=_(this,r,o,n,a);return t.x+=u.rx,t.y+=u.ry,s={x:t.x,y:t.y},e.attr(s),e._shape&&e._shape.attr(s),xui.tryF(e.onShapeChanged,[s]),_(i.dot1,r,o,n,a),_(i.dot2,r,o,n,a),_(i.dot3,r,o,n,a),{dx:u.dx,dy:u.dy}}),"main"),i.dot1=A(a.circle(t.x,t.y).attr(p).attr("cursor","nw-resize"),e,(function(r,o,n,a){var s,u=e.attr("x")+e.attr("width"),l=e.attr("y")+e.attr("height"),d=_(this,r,o,n,a,null,u,null,l);t.x=d.cx,t.y=d.cy,t.height=l-d.cy,t.width=u-d.cx,s={x:t.x,y:t.y,width:t.width,height:t.height},e.attr(s),e._shape&&e._shape.attr(s),xui.tryF(e.onShapeChanged,[s]),i.dot.attr({cx:t.x+t.width/2,cy:t.y+t.height/2});var c=Math.min(e.attr("width"),e.attr("height"));return e.attr("r")>c&&(e.attr("r",t.r=c),e._shape&&e._shape.attr("r",c),xui.tryF(e.onShapeChanged,[{r:c}])),i.dot3.attr({cx:e.attr("x")+e.attr("width")-e.attr("r"),cy:e.attr("y")}),{dx:d.dx,dy:d.dy}}),"w"),i.dot2=A(a.circle(t.x+t.width,t.y+t.height).attr(p).attr("cursor","se-resize"),e,(function(r,o,n,a){var s,u=_(this,r,o,n,a,t.x,null,t.y,null);t.width=u.cx-t.x,t.height=u.cy-t.y,s={width:t.width,height:t.height},e.attr(s),e._shape&&e._shape.attr(s),xui.tryF(e.onShapeChanged,[s]),i.dot.attr({cx:t.x+t.width/2,cy:t.y+t.height/2});var l=Math.min(e.attr("width"),e.attr("height"));return e.attr("r")>l&&(e.attr("r",t.r=l),e._shape&&e._shape.attr("r",l),xui.tryF(e.onShapeChanged,[{r:l}])),i.dot3.attr({cx:e.attr("x")+e.attr("width")-e.attr("r"),cy:e.attr("y")}),{dx:u.dx,dy:u.dy}}),"h"),i.dot3=A(a.circle(t.x+t.width-(t.r||0),t.y).attr(h).attr("cursor","e-resize"),e,(function(t,i,r,o){var n,a=e.attr(),s=_(this,t,i,r,o,a.x+a.width-Math.max(a.width,a.height)/2,a.x+a.width,a.y,a.y);return n={r:a.width-(s.cx-a.x)},e.attr(n),e._shape&&e._shape.attr(n),xui.tryF(e.onShapeChanged,[n]),{dx:s.dx,dy:s.dy}}),"r"),{el:e,handlers:[i]}},circle:function(e){var t=e.attr(),i={};return i.dot=A(a.circle(t.cx,t.cy).attr(c).attr("cursor","move"),e,(function(r,o){var n=_(this,r,o),a={cx:n.cx,cy:n.cy};t.cx=a.cx,t.cy=a.cy,e.attr(a),e._shape&&e._shape.attr(a),xui.tryF(e.onShapeChanged,[a]),a.cx+=e.attr("r"),i.dotr.attr(a)}),"main"),i.dotr=A(a.circle(t.cx+t.r,t.cy).attr(p).attr("cursor","e-resize"),e,(function(t,i,r,o){var n,a=e.attr(),s=_(this,t,i,r,o,a.cx,null,a.cy,a.cy);return a.r=s.cx-a.cx,n={r:a.r},e.attr(n),e._shape&&e._shape.attr(n),xui.tryF(e.onShapeChanged,[n]),{dx:s.dx,dy:s.dy}}),"r"),{el:e,handlers:[i]}},ellipse:function(e){var t=e.attr(),i={};return i.dot=A(a.circle(t.cx,t.cy).attr(c).attr("cursor","move"),e,(function(r,o){var n=_(this,r,o),a={cx:n.cx,cy:n.cy};t.cx=a.cx,t.cy=a.cy,e.attr(a),e._shape&&e._shape.attr(a),xui.tryF(e.onShapeChanged,[a]),i.dotrx.attr({cx:a.cx+e.attr("rx"),cy:a.cy}),i.dotry.attr({cy:a.cy-e.attr("ry"),cx:a.cx})}),"main"),i.dotrx=A(a.circle(t.cx+t.rx,t.cy).attr(p).attr("cursor","w-resize"),e,(function(t,i,r,o){var n,a=e.attr(),s=_(this,t,i,r,o,a.cx,null,a.cy,a.cy);return a.rx=s.cx-a.cx,n={rx:a.rx},e.attr(n),e._shape&&e._shape.attr(n),xui.tryF(e.onShapeChanged,[n]),{dx:s.dx,dy:s.dy}}),"rx"),i.dotry=A(a.circle(t.cx,t.cy-t.ry).attr(p).attr("cursor","n-resize"),e,(function(t,i,r,o){var n,a=e.attr(),s=_(this,t,i,r,o,a.cx,a.cx,null,a.cy);return a.ry=a.cy-s.cy,n={ry:a.ry},e.attr(n),e._shape&&e._shape.attr(n),xui.tryF(e.onShapeChanged,[n]),{dx:s.dx,dy:s.dy}}),"ry"),{el:e,handlers:[i]}},path:function(r){var s,u,p,m,b,v,y,_,w,C,I,E,S,D=r.getPath(),k=function(e,t,i,r,a,s,u,l){var p=e.circle(i,r);return"from"==u||"to"==u?p.attr(f):p.attr(c).attr("cursor","move"),A(p,t,(function(e,i,r,c,p,h,f,g,m,b,v){var y,A=t.paper,_=this.attr("cx"),w=this.attr("cy"),C=xui.isSet(g)?g:_+e,E=xui.isSet(m)?m:w+i;if(xui.isSet(g)&&(e=C-_),xui.isSet(m)&&(i=E-w),"from"==u||"to"==u){var S=t.node.ownerDocument||document;this.hide(),l._elset.hide(),t._shape.hide(),xui.arr.each(B,(function(e,t){(t=e.dot)&&t.hide(),(t=e.dot1)&&t.hide(),(t=e.dot2)&&t.hide(),(t=e.dot3)&&t.hide(),(t=e.dotPrev)&&t.hide(),(t=e.dotNext)&&t.hide(),(t=e.linePrev)&&t.hide(),(t=e.lineNext)&&t.hide()}));var k=S.elementFromPoint(h,f);if(this.show(),l._elset.show(),t._shape.show(),xui.arr.each(B,(function(e,t){(t=e.dot)&&t.show(),(t=e.dot1)&&t.show(),(t=e.dot2)&&t.show(),(t=e.dot3)&&t.show(),(t=e.dotPrev)&&t.show(),(t=e.dotNext)&&t.show(),(t=e.linePrev)&&t.show(),(t=e.lineNext)&&t.show()})),k._rootNode&&(k=k._rootNode),!k)return;if(k&&k.raphael){var $=A.getById(k.raphaelid);$&&$._attached&&(k=$._attached)}for(;k&&(!k.id||k.id==xui.$localeDomId||"tspan"==k.tagName)&&k!==A.canvas.parentNode&&k.parentNode!==S;)k=k.parentNode;if(!k)return;var N,M,T,R,L,F,O=A._anchorShadow;if(k!==A.canvas){var P=xui.UIProfile.getFromDom(k.id);if(P&&P.parent&&P.parent._paper==A)if(P.box["xui.svg"]){if(T=P.getRootNode(),!P.box._CONNECTOR){var H;R=P.boxing()._getConnectAnchors(),(L=P.boxing()._getConnectPath())&&((H=xui.get(P._pathCached,["_connBBox"]))||(H=Raphael.pathBBox(L),xui.set(P._pathCached,["_connBBox"],H)),F={x:H.x+H.width/2,y:H.y+H.height/2}),N=P.alias}}else P.box["xui.UI"]}if(!O||(R||L)&&O._attached===T||(O.remove(),O.clear(),O=null,delete A._anchorShadow,this.show()),R||L){if(!O){(O=A.set())._attached=T;var U=A.circle(-100,-100);for(var z in U._attached=T,U.hide(),O.push(U),R)$=R[z],(U=A.circle($.x,$.y))._attached=T,U._anchorKey=z,O.push(U);O.attr(x),A._anchorShadow=O}var K=null;for(var z in R)(ce=Math.pow(Math.pow(Math.abs(g-R[z].x),2)+Math.pow(Math.abs(m-R[z].y),2),.5))<=16&&(null===K||K>ce)&&(K=ce,y=R[z],M=z);if(!y&&L){var V=16,j="M,"+C+","+E+"m,0,-16a,16,16,0,1,1,0,32a,16,16,0,1,1,0,-32z",Y=(Raphael.getTotalLength(j),Raphael.pathIntersection(L,j));if(Y.length>=2){var G=(Y[0].x+Y[1].x)/2,W=(Y[0].y+Y[1].y)/2,X=Raphael.angle(G,W,C,E);Math.abs(G-F.x)+Math.abs(W-F.y)<Math.abs(C-F.x)+Math.abs(E-F.y)&&(X+=180);var Q=Raphael.rad(X),q=C-V*Math.cos(Q),Z=C+V*Math.cos(Q),J=E-V*Math.sin(Q),ee=E+V*Math.sin(Q);if(1===(Y=Raphael.pathIntersection(L,"M"+q+","+J+",L"+Z+","+ee)).length){var te=Y[0].bez1,ie="M"+te[0]+","+te[1]+"C"+te[2]+","+te[3]+","+te[4]+","+te[5]+","+te[6]+","+te[7];Raphael.getPointAtLength(ie,Y[0].t1*Raphael.getTotalLength(ie)),M=Y[0].segment1+":"+Y[0].t1,y={x:Y[0].x,y:Y[0].y,alpha:X,_path:!0}}}}y&&(o?o.x==y.x&&o.y==y.y?(e=i=0,r=n.x,c=n.y):(e=y.x-o.x,i=y.y-o.y,r=n.x+e,c=n.y+i,o={x:y.x,y:y.y},n={x:r,y:c},y._path?(O[0].attr({cx:y.x,cy:y.y}),O[0].show()):O[0].hide()):(e+=y.x-g,i+=y.y-m,r+=y.x-g,c+=y.y-m,o={x:y.x,y:y.y},n={x:r,y:c},y._path?(O[0].attr({cx:y.x,cy:y.y}),O[0].show()):O[0].hide()),C=y.x,E=y.y,oe={dx:r,dy:c})}!y&&o&&(e=g-o.x,i=m-o.y,r=n.x+e,c=n.y+i,o=n=null,O&&O[0].hide()),l.properties["from"==u?"fromObj":"toObj"]=N||"",l.properties["from"==u?"fromPoint":"toPoint"]=M||""}var re,oe={cx:C,cy:E};if(p||!1!==xui.tryF(I,[a,D,C,E,this,oe])){z=this._handlerIndex;var ne,ae,se=D[z].length,ue=B[z];p||("V"==s?(B.length-1==z+1&&"H"==B[z+1].type?(delete oe.cy,i=c=0):D[z][se-1]=E,0!=z-1&&(ne=B[z-1])?"H"==ne.type?(D[z-1][1]=C,(S=ne.dot)&&S.update(e,0,r,0,!0,h,f)):"V"==ne.type?delete oe.cx:"L"==ne.type?(D[z-1][D[z-1].length-2]=C,(S=ne.dot)&&S.update(e,0,r,0,!0,h,f)):delete oe.cx:delete oe.cx):"H"==s?(B.length-1==z+1&&"V"==B[z+1].type?(delete oe.cx,e=r=0):D[z][se-1]=C,0!=z-1&&(ne=B[z-1])?"H"==ne.type?delete oe.cy:"V"==ne.type?(D[z-1][1]=E,(S=ne.dot)&&S.update(0,i,r,c,!0,h,f)):"L"==ne.type?(D[z-1][D[z-1].length-1]=E,(S=ne.dot)&&S.update(0,i,r,c,!0,h,f)):delete oe.cy:delete oe.cy):(D[z][se-2]=C,D[z][se-1]=E),(ne=B[z+1])&&(S=ne.dot)&&("V"==ne.type?S.update(e,0,r,0,!0,h,f):"H"==ne.type&&S.update(0,i,0,c,!0,h,f))),this.attr(oe),(ae=ue.linePrevPath)&&(ae[0][1]=C,ae[0][2]=E),(ae=ue.lineNextPath)&&(ae[0][1]=C,ae[0][2]=E),(S=ue.dotPrev)&&(S.update(C-_,E-w,r,c,!0),re=!0),(S=ue.dotNext)&&(S.update(C-_,E-w,r,c,!0),re=!0)}if(!re){var le={path:D};t.attr(le),t._shape&&t._shape.attr(le),xui.tryF(t.onShapeChanged,[le])}if(("from"==u||"to"==u)&&"bezier"==d&&y&&(C!==_||E!==w)){var de="from"==u?B[0].dotNext:B[D.length-1].dotPrev;if(de){G=de.attr("cx"),W=de.attr("cy");var ce=Math.pow(Math.pow(Math.abs(C-G),2)+Math.pow(Math.abs(E-W),2),.5);Q=Raphael.rad(y.alpha),q=C+ce*Math.cos(Q),J=E+ce*Math.sin(Q),de.update(q-G,J-W,null,null,!0)}}if(oe)return oe}),"main",a)},$=function(e,t,i,r,o,n,a){return A(e.circle(i,r).attr(h),t,(function(e,i){var r,o=this.attr("cx")+e,n=this.attr("cy")+i;this.attr({cx:o,cy:n});var a,s,u=this._handlerIndex,l=B[u];(a=l.lineNextPath)&&(a[1][1]=o,a[1][2]=n),(s=l.lineNext)&&s.attr({path:a}),D[u+1][1]=o,D[u+1][2]=n,r={path:D},t.attr(r),t._shape&&t._shape.attr(r),xui.tryF(t.onShapeChanged,[r])}),"path2",o)},N=function(e,t,i,r,o,n,a){return A(e.circle(i,r).attr(h),t,(function(e,i){var r,o=this.attr("cx")+e,n=this.attr("cy")+i;this.attr({cx:o,cy:n});var a,s,u=this._handlerIndex,l=B[u];(a=l.linePrevPath)&&(a[1][1]=o,a[1][2]=n),(s=l.linePrev)&&s.attr({path:a}),D[u][D[u].length-4]=o,D[u][D[u].length-3]=n,r={path:D},t.attr(r),t._shape&&t._shape.attr(r),xui.tryF(t.onShapeChanged,[r])}),"path1",o)},M=1,T=1,R=0,B=[];xui.isStr(D)&&(D=Raphael.parsePathString(D)),l&&"flowchart"==d&&(i._ddstartFun=function(e,t,i){0!==t&&t!==e._pathHandler.handlers.length-1||xui.arr.each(e._pathHandler.handlers,(function(t,i){0!==i&&i!==e._pathHandler.handlers.length-1&&t.dot.attr({opacity:0,r:0})}))},i._ddendFun=function(t,i,r){0!==i&&i!==t._pathHandler.handlers.length-1||t.boxing()._addHandler(e)},I=function(e,t,r,o,n,a){if(0===e||e===i._pathHandler.handlers.length-1){n.attr(a);var s=i.box._redrawBrokenLine(i,0===e?"start":"end",r,o);return t.length=0,xui.arr.each(s,(function(e){t.push(e)})),!1}});for(var L=0,F=D.length;L<F;L++){var O;switch(l&&(O=0===L?"from":L===F-1?"to":null),B.push(S={dot:0,dotPrev:0,dotNext:0,linePrev:0,lineNext:0,linePrevPath:0,lineNextPath:0,type:D[L][0]}),E=D[L].length,R=0,D[L][0]){case"M":s=w=p=D[L][E-2],u=C=m=D[L][E-1],M=0,T=1;break;case"L":M=T=1,w=p=D[L][E-2],C=m=D[L][E-1];break;case"H":M=T=1,C=m=u,w=p=D[L][1],R="H";break;case"V":M=T=1,w=p=s,C=m=D[L][1],R="V";break;case"C":M=T=2,b=D[L][E-6],v=D[L][E-5],y=D[L][E-4],_=D[L][E-3],p=w=D[L][E-2],m=C=D[L][E-1];break;case"Q":M=2,T=1,b=D[L][E-4],v=D[L][E-3],p=w=D[L][E-2],m=C=D[L][E-1];break;case"S":M=1,T=2,y=D[L][E-4],_=D[L][E-3],p=w=D[L][E-2],m=C=D[L][E-1];break;case"T":M=T=1,p=w=D[L][E-2],m=C=D[L][E-1];break;case"A":M=T=0,p=w=D[L][E-2],m=C=D[L][E-1];continue;default:continue}switch(M){case 0:case 1:break;case 2:"adv"==t&&(B[L-1].lineNextPath=[["M",s,u],["L",b,v]],B[L-1].lineNext=a.path(B[L-1].lineNextPath).attr(g),B[L-1].dotNext=$(a,r,b,v,L-1))}switch(T){case 1:B[L].dot=k(a,r,w,C,L,R,O,i),l&&"flowchart"==d&&3===F&&1===L&&B[L].dot.attr({opacity:0,r:0});break;case 2:B[L].dot=k(a,r,w,C,L,null,O,i),"adv"==t&&(B[L].linePrevPath=[["M",w,C],["L",y,_]],B[L].linePrev=a.path(B[L].linePrevPath).attr(g),B[L].dotPrev=N(a,r,y,_,L))}p!=undefined&&(s=p),m!=undefined&&(u=m)}for(L=0,F=D.length;L<F;L++)(S=B[L]).dot&&S.dot.toFront();return{el:r,handlers:B}}},b=function(t,i,o,n,a){var s=this.update(t-(this.dx||0),i-(this.dy||0),t,i,!1,o,n,o-r.left,n-r.top,a);this.dx=s&&s.dx||t,this.dy=s&&s.dy||i,e&&e(this,a,"drag",this._attached)},v=function(t,s,u){e&&e(this,u,"beforedragstart",this._attached),this.toFront(),this.dx=this.dy=0,o=n=null,r=xui(this.paper.canvas.parentNode).offset(null);var l,d=this.attr("cursor");this._oldCursor=(l=a.canvas.style).cursor||"",l.cursor=d,(l=this._attached)&&(l._oldCursor=l.attr("cursor")||"",l.attr("cursor",d),l._opath=l.getPath(),l._obbox=Raphael.pathBBox(l._opath),i._ddstartFun&&xui.tryF(i._ddstartFun,[i,this._handlerIndex,this])),e&&e(this,u,"dragstart",this._attached)},y=function(t){e&&e(this,t,"beforedragend",this._attached),r=null,o=n=null;var u,l=this.paper;if(a.canvas.style.cursor=this._oldCursor,delete this._oldCursor,u=this._attached){u.attr("cursor",u._oldCursor),delete u._oldCursor,delete u._obbox,delete u._opath;var d=u.attr();s?(xui.merge(i.properties.attr.KEY,d,"all"),d=i.properties.attr.KEY):(xui.merge(i.properties.attr,d,"all"),d=i.properties.attr),d.path&&(d.path=u.getPath().join("")),i.box._notify(i,{path:1},!0),i._ddendFun&&xui.tryF(i._ddendFun,[i,this._handlerIndex,this])}(u=l._anchorShadow)&&(u.remove(),u.clear(),delete l._anchorShadow),e&&e(this,t,"dragend",this._attached)},A=function(t,i,r,o,n){return t._handlerIndex=n||0,t._attached=i,r&&(t.drag(b,v,y),t.update=r,t.dblclick((function(t){e&&e(this,t,"dblclick",i,o,n)})),t.click((function(t){e&&e(this,t,"click",i,o,n),xui.Event.stopBubble(t),xui.Event.stopDefault(t)})),t.contextmenu((function(t){e&&e(this,t,"contextmenu",i,o,n)}))),t.toFront(),t},_=function(e,t,i,r,o,n,a,s,u){switch(e.type){case"path":for(var l,d=e.getPath(),c=0,p=d.length;c<p;c++)switch(l=d[c].length,d[c][0]){case"M":case"L":d[c][1]+=t,d[c][2]+=i;break;case"H":d[c][1]+=t;break;case"V":d[c][1]+=i;break;case"C":d[c][1]+=t,d[c][2]+=i,d[c][3]+=t,d[c][4]+=i,d[c][5]+=t,d[c][6]+=i;break;case"Q":case"S":d[c][1]+=t,d[c][2]+=i,d[c][3]+=t,d[c][4]+=i;break;case"T":d[c][1]+=t,d[c][2]+=i;break;case"A":d[c][l-2]+=t,d[c][l-1]+=i;continue;default:continue}b={path:d},e.attr(b),e._shape&&e._shape.attr(b),xui.tryF(e.onShapeChanged,[b]);break;case"circle":var h,f=e.attr("cx")+t,x=e.attr("cy")+i,g=0,m=0;return(0===n||n)&&f<n+1&&(g=f-(n+1),f=n+1),(0===a||a)&&f>a&&(g=f-a,f=a),(0===s||s)&&x<s+1&&(m=x-(s+1),x=s+1),(0===u||u)&&x>u&&(m=x-u,x=u),h={cx:f,cy:x,rx:t,ry:i},e.attr(h),e._shape&&e._shape.attr(h),xui.tryF(e.onShapeChanged,[h]),h.dx=r-g,h.dy=o-m,h;case"ellipse":var b={cx:f=e.attr("cx")+t,cy:x=e.attr("cy")+i};e.attr(b),e._shape&&e._shape.attr(b),xui.tryF(e.onShapeChanged,[b]);break;case"rect":b={x:f=e.attr("x")+t,y:x=e.attr("y")+i},e.attr(b),e._shape&&e._shape.attr(b),xui.tryF(e.onShapeChanged,[b]);break;case"text":b={x:f=e.attr("x")+t,y:x=e.attr("y")+i},e.attr(b),e._shape&&e._shape.attr(b),xui.tryF(e.onShapeChanged,[b])}};m[u.type]&&(i._pathHandler=m[u.type](u),(u=u._shape=u.clone()).attr({"arrow-start":"none","arrow-end":"none"}),u.transform("").attr("text"==u.type?{opacity:.8}:{stroke:"#ccc","stroke-dasharray":"- ",opacity:.8}).toBack())}}))}},Static:{$abstract:!0,_objectProp:{attr:1},DataModel:{selectable:null,defaultFocus:null,renderer:null,position:null,tabindex:{hidden:!0},zIndex:{hidden:!0},disableClickEffect:null,disableHoverEffect:null,disableTips:null,disabled:null,left:null,top:null,right:null,bottom:null,width:null,height:null,svgTag:{ini:""},attr:{ini:{}},shadow:{ini:!1,action:function(e){e&&!this._shadow?this._shadow=this._elset[0].shadow():this._shadow&&(this._shadow.remove(),this._shadow.clear(),delete this._shadow)}},animDraw:{ini:"",combobox:["2s linear","2s ease","2s ease-in","2s ease-out","2s ease-in-out"],action:function(e){if(e&&Raphael.svg&&!this.box.$noShape){var t=this,i=t._elset[0],r=i&&i.node;if(r){var o=r.getTotalLength(),n=r.style,a=function(e){n.transition=n[xui.browser.cssTag2+"Transition"]=e},s=n.strokeDasharray||"",u=n.strokeDashoffset||"";a("none"),n.strokeDasharray=o+","+o,n.strokeDashoffset=o,r.getBoundingClientRect(),a("stroke-dashoffset "+e),n.strokeDashoffset=0,t._flowthread&&xui.Thread.abort(t._flowthread),xui.setTimeout((function(e){!t.destroyed&&i&&r&&(a("none"),n.strokeDasharray=s,n.strokeDashoffset=u,(e=t.properties.offsetFlow)&&t.boxing().setOffsetFlow(e,!0))}),1e3*parseInt(e,10))}}}},offsetFlow:{ini:"",combobox:["none","2x","4x","8x","-2x","-4x","-8x"],action:function(e){if(Raphael.svg&&!this.box.$noShape){var t,i=this,r=i._elset[0],o=0;if(i._flowthread&&xui.Thread.abort(i._flowthread),e){if(!(t=xui(r.node).attr("stroke-dasharray")))return;for(var n=0,a=(t=t.replace(/\s+/,"").split(",")).length;n<a;n++)o+=parseInt(t[n],10);if(o>0){o*=2;var s=0,u=parseInt(e,10);u&&(i._flowthread=xui.Thread.repeat((function(){if(i.destroyed||!r||!r.attr)return!1;r.attr("stroke-dashoffset",s=(s+u)%o)}),100).id)}}}}}},Behaviors:{HotKeyAllowed:!1,HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},onClick:function(e,t,i){return!e.$inDesign&&!e.properties.disabled&&(e.onClick?e.boxing().onClick(e,t,i):void 0)},onDblclick:function(e,t,i){return!e.$inDesign&&!e.properties.disabled&&(e.onDblClick?e.boxing().onDblClick(e,t,i):void 0)},onContextmenu:function(e,t,i){if(e.onContextmenu)return!1!==e.boxing().onContextmenu(e,t,i)}},EventHandlers:{onClick:function(e,t,i){},onDblClick:function(e,t,i){},onContextmenu:function(e,t,i){},onHotKeydown:null,onHotKeypress:null,onHotKeyup:null},_beforeSerialized:function(e){var t=arguments.callee.upper.call(this,e),i=t.properties;return i.attr=xui.clone(i.attr,!0),xui.filter(i.attr,(function(e,t){return!("transform"==t&&(!e||e.length<1))&&"href"!=t&&"target"!=t&&void("path"==t&&xui.isArr(i.attr.path)&&(i.attr.path=e.join("")))})),t},RenderTrigger:function(){var e=this;(e.$beforeDestroy=e.$beforeDestroy||{}).svgClear=function(){e._flowthread&&xui.Thread.abort(e._flowthread),e._elset&&(e._elset.forEach((function(e){e&&delete e._rootNode})),e._elset.remove(),e._elset.clear(),delete e._elset),e._shadow&&(e._shadow.remove(),e._shadow.clear(),delete e._shadow)},e.box._initAttr2UI(e),xui.setTimeout((function(){if(!e.destroyed){var t,i,r=e.properties,o=e.boxing(),n=o.getAllNodes();(t=r.animDraw)?o.setAnimDraw(t,!0):(t=r.offsetFlow)&&o.setOffsetFlow(t,!0),(i=r.visibility)&&n.css("visibility",i),(i=r.display)&&n.css("display",i),(i=r.className)&&n.addClass(i)}}))},_RenderSVG:function(e){e._pathCached={};var t=e.parent;if(t&&t._paper&&t._canvas){e._elset=this._draw(t._paper,e,e.properties);for(var i=1,r=e._elset.length;i<r;i++)e._elset._rootNode=e._elset[0]}},_adjustAttr:function(e){var t=this,i={},r=xui.svg.$attr;return xui.each(e,(function(e,o){/^[A-Z_]+(_[0-9]+)?$/.test(o)&&xui.isHash(e)&&(-1!=o.indexOf("_")||o in t.$tagName)?(i[o]=i[o]||{},xui.each(e,(function(e,n){r[t.$tagName[o]||o.split("_")[0].toLowerCase()][n]&&(i[o][n]=e)}))):r[t.$tagName.KEY][o]&&(i.KEY=i.KEY||{},i.KEY[o]=e)})),i},_initAttr2UI:function(e){var t=this._adjustAttr(e.properties.attr);e._elset&&e.boxing().setAttr(t),e.properties.shadow&&e.boxing().setShadow(!0,!0)},$adjustBB:function(e,t){var i="object"==typeof e?e:{},r="left,top,right,bottom,x,y,x2,y2,width,height".split(",");return"string"==typeof e&&(i[e]=t),xui.filter(i,(function(e,t){return-1!=xui.arr.indexOf(r,t)&&"auto"!==e&&""!==e&&(xui.isNumb(e)?void 0:(i[t]=parseFloat(e)||0,!1))})),"left"in i&&(i.x=i.left,delete i.left),"top"in i&&(i.y=i.top,delete i.top),"right"in i&&(i.x2=i.right,delete i.right),"bottom"in i&&(i.y2=i.bottom,delete i.bottom),"x"in i&&"width"in i&&delete i.x2,"y"in i&&"height"in i&&delete i.y2,"x2"in i&&("width"in i?i.x=i.x2-i.width:i.width=i.x2-i.x,delete i.x2),"y2"in i&&("height"in i?i.y=i.y2-i.height:i.height=i.y2-i.y,delete i.y2),i},$transform:function(e,t){xui.isStr(e)||(e=e.join("")),e=/[mlhvcsqtaz]/.test(e)?Raphael._pathToAbsolute(e):Raphael.parsePathString(e);for(var i,r,o=Raphael.transformPath(e,t),n=/[r]/.test(t),a=0,s=o.length;a<s;a++)if(o[a][0]!=e[a][0])switch(i=o[a].length,r=e[a][0]){case"M":break;case"L":o[a]=[r,o[a][i-2],o[a][i-1]];break;case"H":o[a]=n?["L",o[a][i-2],o[a][i-1]]:[r,o[a][i-2]];break;case"V":o[a]=n?["L",o[a][i-2],o[a][i-1]]:[r,o[a][i-1]];break;case"C":break;case"Q":o[a]=[r,o[a][i-6],o[a][i-5],o[a][i-2],o[a][i-1]];break;case"S":o[a]=[r,o[a][i-4],o[a][i-3],o[a][i-2],o[a][i-1]];break;case"T":o[a]=[r,o[a][i-2],o[a][i-1]];break;case"A":break;case"Z":o[a]=[r];break;default:continue}return o.join("")},$setBB:function(e,t,i,r,o,n){var a={},s=function(e){var t={};for(var i in e)t[i]=e[i];return t};switch(t){case"circle":xui.isNumb(i.width)&&(a.r=i.width/2),xui.isNumb(i.height)&&(i.height/2>=r.r&&(!xui.isSet(a.r)||a.r>=r.r)?a.r=xui.isSet(a.r)?Math.max(a.r,i.height/2):i.height/2:a.r=xui.isSet(a.r)?Math.min(a.r,i.height/2):i.height/2),a.cx=xui.isNumb(i.x)?i.x+(xui.isSet(a.r)?a.r:r.r):r.cx+(xui.isSet(a.r)?a.r-r.r:0),a.cy=xui.isNumb(i.y)?i.y+(xui.isSet(a.r)?a.r:r.r):r.cy+(xui.isSet(a.r)?a.r-r.r:0);break;case"ellipse":xui.isNumb(i.width)&&(a.rx=i.width/2),xui.isNumb(i.height)&&(a.ry=i.height/2),a.cx=xui.isNumb(i.x)?i.x+(xui.isSet(a.rx)?a.rx:r.rx):r.cx+(xui.isSet(a.rx)?a.rx-r.rx:0),a.cy=xui.isNumb(i.y)?i.y+(xui.isSet(a.ry)?a.ry:r.ry):r.cy+(xui.isSet(a.ry)?a.ry-r.ry:0);break;case"rect":case"image":xui.isNumb(i.x)&&(a.x=i.x),xui.isNumb(i.y)&&(a.y=i.y),xui.isNumb(i.width)&&(a.width=i.width),xui.isNumb(i.height)&&(a.height=i.height);break;case"text":var u;if(o)o._.dirty=1,h=s(o._getBBox(!0)),u=o.attr("text-anchor");else{var l=xui.Dom.getEmptyDiv();h=s((x=(f=Raphael(l.get(0).id,1,1)).text(0,0,r.text))._getBBox(!0)),u=x.attr("text-anchor"),x.remove(),f.remove(),l.empty()}xui.isNumb(i.x)&&(h.x=i.x),xui.isNumb(i.y)&&(h.y=i.y);var d=r.hAlign||"center",c=r.vAlign||"middle",p=h?"start"==u?-h.width/2:"middle"==u?0:h.width/2:0;xui.isNumb(i.x)&&("center"==d?xui.isNumb(i.width)?a.x=i.x+i.width/2:a.x=i.x+(h?h.width/2:0):"left"==d?a.x=i.x+(h?h.width/2:0):"outterleft"==d?a.x=i.x-(h?h.width/2:0):"right"==d?xui.isNumb(i.width)&&(a.x=i.x+i.width-(h?h.width/2:0)):"outterright"==d?xui.isNumb(i.width)&&(a.x=i.x+i.width+(h?h.width/2:0)):xui.isNumb(i.width)?a.x=i.x+i.width*parseFloat(d)/100:a.x=i.x+(h?h.width*parseFloat(d)/100:0),a.x+=p),xui.isNumb(i.y)&&("middle"==c?xui.isNumb(i.height)?a.y=i.y+i.height/2:a.y=i.y+(h?h.height/2:0):"top"==c?a.y=i.y+(h?h.height/2:0):"outtertop"==c?a.y=i.y-(h?h.height/2:0):"bottom"==c?xui.isNumb(i.height)&&(a.y=i.y+i.height-(h?h.height/2:0)):"outterbottom"==c?xui.isNumb(i.height)&&(a.y=i.y+i.height+(h?h.height/2:0)):xui.isNumb(i.height)?a.y=i.y+i.height*parseFloat(c)/100:a.y=i.y+(h?h.height*parseFloat(c)/100:0));break;case"path":var h,f,x;if(o)o._.dirty=1,h=s(o._getBBox(!0));else l=xui.Dom.getEmptyDiv(),(x=(f=Raphael(l.get(0).id,1,1)).path("")).attr(r),h=s(x._getBBox(!0)),x.remove(),f.remove(),l.empty();var g=s(h);if(xui.isNumb(i.x)&&(a.x=i.x),xui.isNumb(i.y)&&(a.y=i.y),xui.isNumb(i.width)&&(a.width=i.width),xui.isNumb(i.height)&&(a.height=i.height),"x"in a&&h.x!==a.x||"y"in a&&h.y!==a.y){var m=0,b=0;"x"in a&&(m=a.x-h.x,h.x=a.x),"y"in a&&(b=a.y-h.y,h.y=a.y);for(var v=Raphael.parsePathString(r.path),y=0,A=v.length;y<A;y++)switch(M=v[y].length,v[y][0]){case"M":case"L":v[y][1]+=m,v[y][2]+=b;break;case"H":v[y][1]+=m;break;case"V":v[y][1]+=b;break;case"C":v[y][1]+=m,v[y][2]+=b,v[y][3]+=m,v[y][4]+=b,v[y][5]+=m,v[y][6]+=b;break;case"Q":case"S":v[y][1]+=m,v[y][2]+=b,v[y][3]+=m,v[y][4]+=b;break;case"T":v[y][1]+=m,v[y][2]+=b;break;case"A":v[y][M-2]+=m,v[y][M-1]+=b;continue;default:continue}a.path=v.join("")}if("width"in a&&h.width!==a.width||"height"in a&&h.height!==a.height){var _="width"in a?a.width:null,w="height"in a?a.height:null,C=a.path||r.path,I=xui.svg.$transform(C,"s"+(xui.isSet(_)&&_!==g.width?0===g.width?_>=0?1.1:.9:_/g.width:"1")+","+(xui.isSet(w)&&w!==g.height?0===g.height?w>=0?1.1:.9:w/g.height:"1")+","+h.x+","+h.y);a.path=I}}var E=xui.svg.$attr[t];if(xui.filter(a,(function(e,t){if(!xui.isSet(e)||!(t in E))return!1;r[t]=e})),o&&!xui.isEmpty(a)){var S,D=Raphael.parseTransformString(o.transform());if(D&&D.length){S=1,o.transform("");for(var k,$=-1,N=-1,M=(y=0,D.length);y<M;y++)"r"==D[y][0]?($=y,k=D[y][1]):"t"==D[y][0]&&(N=y);if(-1!=N&&-1!=$){o.rotate(k);var T=Raphael.parseTransformString(o.transform());o.transform(""),D[N][1]-=T[0][1],D[N][2]-=T[0][2],D[N][1]||D[N][2]||xui.arr.removeFrom(D,N)}}o.attr(a),S&&o.transform("r"+k),!1!==n&&e.box._notify(e,{bBox:1},!0)}},_syncAttr:function(e,t,i){e._pathCached={}},_notify:function(e,t,i){e.box._syncAttr&&e.box._syncAttr(e,t,i),i&&!e.box._CONNECTOR&&e.box._syncConnectors&&e.box._syncConnectors(e),i&&e._shadow&&e.boxing().setShadow(!1).setShadow(!0)},_draw:function(){},_syncConnectors:function(e){if("xui.UI.SVGPaper"===e.parent.key){var t=xui.get(e,["parent","children"]),i=e.alias;t&&t.length&&xui.arr.each(t,(function(t,r){!t[0].destroyed&&e.renderCompleted&&t[0].renderCompleted&&"xui.svg.connector"===t[0].key&&(i===xui.get(t[0],["properties","fromObj"])&&t[0].box._reconnect(t[0],e),i===xui.get(t[0],["properties","toObj"])&&t[0].box._reconnect(t[0],null,e))}))}},_syncAlias:function(e,t,i){var r=xui.get(e,["parent","children"]);r&&r.length&&xui.arr.each(r,(function(e,r){"xui.svg.connector"===e[0].key&&(t===xui.get(e[0],["properties","fromObj"])&&xui.set(e[0],["properties","fromObj"],i),t===xui.get(e[0],["properties","toObj"])&&xui.set(e[0],["properties","toObj"],i))}))}}}),xui.Class("xui.svg.circle","xui.svg",{Instance:{_setBBox:function(e,t){var i=xui.svg.$adjustBB(e,t);return this.each((function(e){xui.svg.$setBB(e,"circle",i,e.properties.attr,e._elset&&e._elset[0])}))}},Static:{DataModel:{attr:{ini:{cx:0,cy:0,r:20}}},Templates:{tagName:"circle"},_draw:function(e,t,i){i=i.attr;var r=e.circle(i.cx,i.cy,i.r);return r.node.id=t.box.KEY+":"+t.serialId+":",e.set().push(r)}}}),xui.Class("xui.svg.ellipse","xui.svg",{Instance:{_setBBox:function(e,t){var i=xui.svg.$adjustBB(e,t);return this.each((function(e){xui.svg.$setBB(e,"ellipse",i,e.properties.attr,e._elset&&e._elset[0])}))}},Static:{DataModel:{attr:{ini:{cx:0,cy:0,rx:20,ry:40}}},Templates:{tagName:"ellipse"},_draw:function(e,t,i){i=i.attr;var r=e.ellipse(i.cx,i.cy,i.rx,i.ry);return r.node.id=t.box.KEY+":"+t.serialId+":",e.set().push(r)}}}),xui.Class("xui.svg.rect","xui.svg",{Instance:{_setBBox:function(e,t){var i=xui.svg.$adjustBB(e,t);return this.each((function(e){xui.svg.$setBB(e,"rect",i,e.properties.attr,e._elset&&e._elset[0])}))}},Static:{DataModel:{attr:{ini:{x:0,y:0,r:0,width:40,height:40}}},Templates:{tagName:"rect"},_draw:function(e,t,i){i=i.attr;var r=e.rect(i.x,i.y,i.width,i.height,i.r);return r.node.id=t.box.KEY+":"+t.serialId+":",e.set().push(r)}}}),xui.Class("xui.svg.image","xui.svg",{Instance:{_setBBox:function(e,t){var i=xui.svg.$adjustBB(e,t);return this.each((function(e){xui.svg.$setBB(e,"image",i,e.properties.attr,e._elset&&e._elset[0])}))}},Static:{$noShape:1,IMGNODE:1,DataModel:{attr:{ini:{src:"",x:0,y:0,width:20,height:20}}},Templates:{tagName:"image"},_draw:function(e,t,i){i=i.attr;var r=e.image(xui.adjustRes(i.src),i.x,i.y,i.width,i.height);return r.node.id=t.box.KEY+":"+t.serialId+":",e.set().push(r)}}}),xui.Class("xui.svg.text","xui.svg",{Instance:{_setBBox:function(e,t){var i=xui.svg.$adjustBB(e,t);return this.each((function(e){xui.svg.$setBB(e,"text",i,e.properties.attr,e._elset&&e._elset[0])}))}},Static:{$noShape:1,DataModel:{attr:{ini:{x:0,y:0,text:"text"}},text:{ini:undefined,hidden:!0,set:function(e){this.boxing().setAttr("KEY",{text:this.properties.text=e||""},!1)}}},Templates:{tagName:"text"},_draw:function(e,t,i){i=i.attr;var r=e.text(i.x,i.y,i.text);return xui.isSet(i.text)&&r.attr("text",i.text),r.node.id=t.box.KEY+":"+t.serialId+":",e.set().push(r)}}}),xui.Class("xui.svg.path","xui.svg",{Instance:{getPath:function(){var e=this.get(0),t=e.properties;return e._elset&&e._elset[0]&&(t.path=e._elset[0].attr("path").join("")),t.path},_getConnectAnchors:function(){},_setBBox:function(e,t){var i=xui.svg.$adjustBB(e,t);return this.each((function(e){xui.svg.$setBB(e,"path",i,e.properties.attr,e._elset&&e._elset[0])}))}},Static:{$abstract:!0,_draw:function(e,t,i){i=i.attr;var r=e.path(i.path);return r.node.id=t.box.KEY+":"+t.serialId+":",e.set().push(r)},DataModel:{attr:{ini:{path:""}}},Templates:{tagName:"path"}}}),xui.Class("xui.svg.absComb","xui.svg",{Instance:{_setBBox:function(e,t,i){var r=xui.svg.$adjustBB(e,t);return this.each((function(e){var t=e.properties,o=e._elset;if(xui.svg.$setBB(e,e.box._type,r,t.attr.KEY,o&&o[0]),e.renderId&&o&&o[0]&&t.attr.TEXT&&t.attr.TEXT.text){var n=xui.copy(t.attr.TEXT||{}),a=o[0]._getBBox(!0);n.hAlign=t.hAlign,n.vAlign=t.vAlign,"x"in r||(r.x=a.x),"y"in r||(r.y=a.y),"width"in r||(r.width=a.width),"height"in r||(r.height=a.height),xui.svg.$setBB(e,"text",r,n,o&&o[1],i)}}))},_adjustText:function(){return this.each((function(e){var t=e.properties,i=e._elset;if(e.renderId&&i&&i[0]&&t.attr.TEXT&&t.attr.TEXT.text){var r=xui.copy(t.attr.TEXT||{}),o=i[0]._getBBox(!0);r.hAlign=t.hAlign,r.vAlign=t.vAlign,xui.svg.$setBB(e,"text",o,r,i[1],!1)}}))},setAttr:function(e,t,i,r){var o;return xui.isHash(e)?o=e:(o={})[e]=t,arguments.callee.upper.call(this,e,t,i,r),this.each((function(e){e._elset&&(o=o.TEXT)&&o["text-anchor"]&&e.boxing()._adjustText()}))}},Static:{$abstract:!0,ISCOMBO:1,_beforeSerialized:function(e){var t=arguments.callee.upper.call(this,e),i=t.properties;return i.attr=xui.clone(i.attr,!0),xui.filter(i.attr.KEY,(function(e,t){return!("transform"==t&&(!e||e.length<1))&&"href"!=t&&"target"!=t&&void("path"==t&&xui.isArr(i.attr.KEY.path)&&(i.attr.KEY.path=e.join("")))})),i.attr.TEXT&&xui.filter(i.attr.TEXT,(function(e,t){return"transform"!=t&&"x"!=t&&"y"!=t&&"href"!=t&&"target"!=t&&void 0})),delete i.text,t},DataModel:{attr:{ini:{KEY:{},TEXT:{}}},hAlign:{ini:"center",combobox:["left","25%","center","75%","right","outterleft","outterright"],action:function(){this.boxing()._adjustText()}},vAlign:{ini:"middle",combobox:["top","25%","middle","75%","bottom","outtertop","outterbottom"],action:function(){this.boxing()._adjustText()}},text:{ini:undefined,hidden:!0,get:function(){var e=this.boxing().getAttr("TEXT");return e&&e.text},set:function(e){this.boxing().setAttr("TEXT",{text:e||""},!1)}},shadow:!0},Behaviors:{onClick:function(e,t,i){return!e.$inDesign&&!e.properties.disabled&&(e.onClick?e.boxing().onClick(e,t,i):void 0)},onDblclick:function(e,t,i){return!e.$inDesign&&!e.properties.disabled&&(e.onDblClick?e.boxing().onDblClick(e,t,i):void 0)},onContextmenu:function(e,t,i){if(e.onContextmenu)return!1!==e.boxing().onContextmenu(e,t,i)},TEXT:{onClick:function(e,t,i){return!e.$inDesign&&!e.properties.disabled&&(e.onTextClick&&(r=e.boxing().onTextClick(e,t,i)),!1!==r&&e.onClick?e.boxing().onClick(e,t,i):void 0);var r},onDblclick:function(e,t,i){return!e.$inDesign&&!e.properties.disabled&&(e.onDblClick?e.boxing().onDblClick(e,t,i):void 0)},onContextmenu:function(e,t,i){if(e.onContextmenu)return!1!==e.boxing().onContextmenu(e,t,i)}}},EventHandlers:{onTextClick:function(e,t,i){}},_initAttr2UI:function(e){arguments.callee.upper.call(this,e),e.boxing()._adjustText();var t=e._elset;if(t&&t[1])for(var i=t[0].attr("transform"),r=1,o=t.length;r<o;r++)t[r].attr("transform",i)},_syncAttr:function(e,t,i){var r=arguments.callee.upper,o=xui.toArr(arguments);r.apply(this,o),r=null,i&&e.boxing()._adjustText()},_draw:function(e,t,i){var r=e.set(),o=i.attr.KEY,n=i.attr.TEXT,a=this._drawRoot(e,o);return a.node.id=t.box.KEY+":"+t.serialId+":",r.push(a),(a=e.text(o.x,o.y,n.text)).node.id=t.box.KEY+"-TEXT:"+t.serialId+":",r.push(a),r}}}),xui.Class("xui.svg.rectComb","xui.svg.absComb",{Static:{_type:"rect",Templates:{tagName:"rect",TEXT:{tagName:"text",svg:1}},_drawRoot:function(e,t){return e.rect(t.x,t.y,t.width,t.height)}}}),xui.Class("xui.svg.circleComb","xui.svg.absComb",{Static:{_type:"circle",Templates:{tagName:"circle",TEXT:{tagName:"text",svg:1}},_drawRoot:function(e,t){return e.circle(t.cx,t.cy,t.r)}}}),xui.Class("xui.svg.ellipseComb","xui.svg.absComb",{Static:{_type:"ellipse",Templates:{tagName:"ellipse",TEXT:{tagName:"text",svg:1}},_drawRoot:function(e,t){return e.ellipse(t.cx,t.cy,t.rx,t.ry)}}}),xui.Class("xui.svg.pathComb","xui.svg.absComb",{Static:{_type:"path",Templates:{tagName:"path",TEXT:{tagName:"text",svg:1}},_drawRoot:function(e,t){return e.path(t.path)}}}),xui.Class("xui.svg.imageComb","xui.svg.absComb",{Static:{IMGNODE:1,$noShape:1,_type:"image",Templates:{tagName:"image",TEXT:{tagName:"text",svg:1}},_drawRoot:function(e,t){return e.image(t.src,t.x,t.y,t.width,t.height)}}}),xui.Class("xui.svg.connector","xui.svg.absComb",{Instance:{_getConnectAnchors:null,_getConnectPath:null,_getConnectPoint:null,toFront:function(){return this.each((function(e){(e=e._elset)&&(e[1].toFront(),e[0].toFront());var t=xui.get(e,["parent","children"]);if(t&&t.length){var i,r=xui.arr.subIndexOf(t,"0",e);-1!=r&&(i=t[r],t.splice(r,1),t.push(i))}}))},toBack:function(){return this.each((function(e){(e=e._elset)&&(e[0].toBack(),e[1].toBack());var t=xui.get(e,["parent","children"]);if(t&&t.length){var i,r=xui.arr.subIndexOf(t,"0",e);-1!=r&&(i=t[r],t.splice(r,1),t.unshift(i))}}))}},Static:{_CONNECTOR:!0,_beforeSerialized:function(e){var t=arguments.callee.upper.call(this,e),i=t.properties;return i.attr.BG&&(delete i.attr.BG.path,delete i.attr.BG["arrow-start"],delete i.attr.BG["arrow-end"]),t},DataModel:{hAlign:null,vAlign:null,shadow:null,bgLine:{ini:!0,action:function(e){this._bg&&(e?this._bg.show():this._bg.hide())}},attr:{ini:{KEY:{path:""}}},type:{ini:"straight",listbox:["straight","bezier","flowchart"],action:function(e,t){this.renderId&&(this.properties.type=t)}},fromObj:"",fromPoint:{ini:"",combobox:["left","top","right","bottom"]},toObj:"",toPoint:{ini:"",combobox:["left","top","right","bottom"]}},_type:"path",Templates:{tagName:"path",BG:{tagName:"path",svg:1}},_draw:function(e,t,i){var r,o,n=e.set(),a=i.attr.KEY;return(o=e.path(a.path)).node.id=t.box.KEY+":"+t.serialId+":",o.onShapeChanged=function(e){e.path&&r.attr({path:e.path},null,!1)},n.push(o),r=e.path(a.path),t.properties.bgLine||r.hide(),r.node.id=t.box.KEY+"-BG:"+t.serialId+":",n.push(r),r.insertBefore(o),t._bg=r,(t.$beforeDestroy=t.$beforeDestroy||{}).unbind=function(){o.onShapeChanged=null,o=null},n},_syncAttr:function(e,t,i){var r=arguments.callee.upper,o=xui.toArr(arguments);if(r.apply(this,o),r=null,e._pathCached={},e._bg){var n,a,s=this,u=e.properties,l=e._elset[0],d={};((a="path")in t||"bBox"in t)&&(d[a]=l.attr(a)),(a="arrow-start")in t&&("none"!=(n=(n=l.attr(a)).split("-"))[0]?d[a]=n[0]+"-narrow-short":d[a]="none"),(a="arrow-end")in t&&("none"!=(n=(n=l.attr(a)).split("-"))[0]?d[a]=n[0]+"-narrow-short":d[a]="none"),e._bg.attr(d,null,!1),"bBox"in t&&e.parent&&(u.fromObj&&u.fromPoint&&xui.arr.each(e.parent.children,(function(t){if(t[0].alias==u.fromObj)return s._reconnect(e,t[0]),!1})),u.toObj&&u.toPoint&&xui.arr.each(e.parent.children,(function(t){if(t[0].alias==u.toObj)return s._reconnect(e,null,t[0]),!1})))}},_reconnect:function(e,t,i){if(!e.destroyed){var r,o=e.properties,n=o.type,a=Raphael.parsePathString(o.attr.KEY.path),s=e.boxing();if(t&&o.fromObj&&o.fromPoint&&(r=t.boxing()._getConnectPoint(o.fromPoint))){switch(n){case"flowchart":(c=this._redrawBrokenLine(e))&&(a.length=0,xui.arr.each(c,(function(e){a.push(e)})));break;case"straight":a[0][1]=r.x,a[0][2]=r.y;break;case"bezier":var u=r.x-a[0][1],l=r.y-a[0][2];a[0][1]=r.x,a[0][2]=r.y,a[1][1]+=u,a[1][2]+=l}s.setAttr("KEY",{path:a},!1)}if(i&&o.toObj&&o.toPoint&&(r=i.boxing()._getConnectPoint(o.toPoint))){var d=a.length-1;switch("Z"==(a[d][0]||"").toUpperCase()&&d--,n){case"flowchart":var c;(c=this._redrawBrokenLine(e))&&(a.length=0,xui.arr.each(c,(function(e){a.push(e)})));break;case"straight":a[d][1]=r.x,a[d][2]=r.y;break;case"bezier":u=r.x-a[d][5],l=r.y-a[d][6],a[d][5]=r.x,a[d][6]=r.y,a[d][3]+=u,a[d][4]+=l}s.setAttr("KEY",{path:a},!1)}}},_redrawBrokenLine:function(e,t,i,r){var o,n,a,s,u,l,d,c,p,h,f,x,g,m,b,v=30,y=30,A=30,_=e.properties,w=_.attr.KEY,C=Raphael.parsePathString(w.path),I=_.fromObj&&_.fromPoint,E=_.toObj&&_.toPoint,S=[],D=[],k=[],$=[];if(I&&(a=null,xui.arr.each(e.parent.children,(function(e){if(e[0].alias==_.fromObj)return a=e[0].boxing(),(c=a._getConnectPoint(_.fromPoint))&&(s=a._getConnectPath(),(l=xui.get(e[0]._pathCached,["_connBBox"]))||(l=Raphael.pathBBox(s),xui.set(e[0]._pathCached,["_connBBox"],l)),h=c.solid?c.alpha:c.alpha-90,f={x:l.x+l.width/2,y:l.y+l.height/2},"down"==(g=h>45&&h<=135?"down":h>135&&h<=225?"left":h>225&&h<=315?"up":"right")&&c.y<f.y&&(g="up"),"right"==g&&c.x<f.x&&(g="left")),!1}))),E&&(a=null,xui.arr.each(e.parent.children,(function(e){if(e[0].alias==_.toObj)return a=e[0].boxing(),(p=a._getConnectPoint(_.toPoint))&&(u=a._getConnectPath(),(d=xui.get(e[0]._pathCached,["_connBBox"]))||(d=Raphael.pathBBox(u),xui.set(e[0]._pathCached,["_connBBox"],d)),h=p.solid?p.alpha:p.alpha-90,x={x:d.x+d.width/2,y:d.y+d.height/2},"down"==(m=h>45&&h<=135?"down":h>135&&h<=225?"left":h>225&&h<=315?"up":"right")&&p.y<x.y&&(m="up"),"right"==m&&p.x<x.x&&(m="left")),!1}))),c&&p&&(("left"==g&&"right"==m&&p.x>=c.x||"right"==g&&"left"==m&&p.x<=c.x)&&(y=Math.min(y,Math.abs(p.x-c.x)/2)),("down"==g&&"up"==m&&p.y>=c.y||"up"==g&&"down"==m&&p.y<=c.y)&&(A=Math.min(A,Math.abs(p.y-c.y)/2))),c)switch(g){case"down":o=[{x:c.x,y:b=c.y+A},{x:l.x-v,y:b},{x:l.x+v+l.width,y:b}],S=[[["M",c.x,c.y],["V",o[0].y]],[["M",c.x,c.y],["V",o[0].y],["H",o[1].x]],[["M",c.x,c.y],["V",o[0].y],["H",o[2].x]]],k=[A,A+Math.abs(o[1].x-o[0].x),A+Math.abs(o[2].x-o[0].x)];break;case"left":o=[{x:b=c.x-y,y:c.y},{x:b,y:l.y-v},{x:b,y:l.y+v+l.height}],S=[[["M",c.x,c.y],["H",o[0].x]],[["M",c.x,c.y],["H",o[0].x],["V",o[1].y]],[["M",c.x,c.y],["H",o[0].x],["V",o[2].y]]],k=[y,y+Math.abs(o[1].y-o[0].y),y+Math.abs(o[2].y-o[0].y)];break;case"up":o=[{x:c.x,y:b=c.y-A},{x:l.x-v,y:b},{x:l.x+v+l.width,y:b}],S=[[["M",c.x,c.y],["V",o[0].y]],[["M",c.x,c.y],["V",o[0].y],["H",o[1].x]],[["M",c.x,c.y],["V",o[0].y],["H",o[2].x]]],k=[A,A+Math.abs(o[1].x-o[0].x),A+Math.abs(o[2].x-o[0].x)];break;case"right":o=[{x:b=c.x+y,y:c.y},{x:b,y:l.y-v},{x:b,y:l.y+v+l.height}],S=[[["M",c.x,c.y],["H",o[0].x]],[["M",c.x,c.y],["H",o[0].x],["V",o[1].y]],[["M",c.x,c.y],["H",o[0].x],["V",o[2].y]]],k=[y,y+Math.abs(o[1].y-o[0].y),y+Math.abs(o[2].y-o[0].y)]}else o="start"==t?[{x:i,y:r}]:[{x:C[0][1],y:C[0][2]}],S=[[["M",o[0].x,o[0].y]]],k=[0];if(p)switch(m){case"down":n=[{x:p.x,y:b=p.y+A},{x:d.x-v,y:b},{x:d.x+v+d.width,y:b}],D=[[["V",p.y]],[["H",p.x],["V",p.y]],[["H",p.x],["V",p.y]]],$=[A,A+Math.abs(n[1].x-n[0].x),A+Math.abs(n[2].x-n[0].x)];break;case"left":n=[{x:b=p.x-y,y:p.y},{x:b,y:d.y-v},{x:b,y:d.y+v+d.height}],D=[[["H",p.x]],[["V",p.y],["H",p.x]],[["V",p.y],["H",p.x]]],$=[y,y+Math.abs(n[1].y-n[0].y),y+Math.abs(n[2].y-n[0].y)];break;case"up":n=[{x:p.x,y:b=p.y-A},{x:d.x-v,y:b},{x:d.x+v+d.width,y:b}],D=[[["V",p.y]],[["H",p.x],["V",p.y]],[["H",p.x],["V",p.y]]],$=[A,A+Math.abs(n[1].x-n[0].x),A+Math.abs(n[2].x-n[0].x)];break;case"right":n=[{x:b=p.x+y,y:p.y},{x:b,y:d.y-v},{x:b,y:d.y+v+d.height}],D=[[["H",p.x]],[["V",p.y],["H",p.x]],[["V",p.y],["H",p.x]]],$=[y,y+Math.abs(n[1].y-n[0].y),y+Math.abs(n[2].y-n[0].y)]}else{if("end"==t)n=[{x:i,y:r}];else{var N={x:C[0][1],y:C[0][2]};xui.arr.each(C,(function(e){"H"==e[0]?N.x=e[1]:N.y=e[1]})),n=[N]}D=[],$=[0]}var M,T,R=[];return xui.arr.each(o,(function(e,t){xui.arr.each(n,(function(i,r){for(var o=0;o<=1;o++)M=xui.clone(S[t],!0),0===o?(i.x!==e.x&&M.push(["H",i.x]),i.y!==e.y&&M.push(["V",i.y])):(i.y!==e.y&&M.push(["V",i.y]),i.x!==e.x&&M.push(["H",i.x])),D[r]&&D[r].length&&xui.arr.insertAny(M,D[r]),R.push({path:M,len:M.length,len2:(k[t]||0)+($[r]||0)+Math.abs(i.x-e.x)+Math.abs(i.y-e.y)})}))})),xui.filter(R,(function(e){for(var t,i,r,o=e.path[0][1],n=e.path[0][2],a=1,s=e.path.length;a<s;a++){if(r==e.path[a][0]){if("H"==r){if(e.path[a][1]>o===t){e.path.splice(a-1,1),e.len--,s--,a--;continue}return!1}if(e.path[a][1]>n===i){e.path.splice(a-1,1),e.len--,s--,a--;continue}return!1}"H"==e.path[a][0]?(t=e.path[a][1]>o,o=e.path[a][1]):(i=e.path[a][1]>n,n=e.path[a][1]),r=e.path[a][0]}})),xui.arr.each(R,(function(e){var t,i;T=0,(l||d)&&(t=e.path[0][1],i=e.path[0][2],xui.arr.each(e.path,(function(e,r){0!==r&&("H"==e[0]?(l&&i>=l.y&&i<=l.y2&&Math.max(t,e[1])>Math.min(l.x,l.x2)&&Math.min(t,e[1])<Math.max(l.x,l.x2)&&T++,d&&i>=d.y&&i<=d.y2&&Math.max(t,e[1])>Math.min(d.x,d.x2)&&Math.min(t,e[1])<Math.max(d.x,d.x2)&&T++,t=e[1]):(l&&t>=l.x&&t<=l.x2&&Math.max(i,e[1])>Math.min(l.y,l.y2)&&Math.min(i,e[1])<Math.max(l.y,l.y2)&&T++,d&&t>=d.x&&t<=d.x2&&Math.max(i,e[1])>Math.min(d.y,d.y2)&&Math.min(i,e[1])<Math.max(d.y,d.y2)&&T++,i=e[1]))}))),e.inter=T})),xui.arr.stableSort(R,(function(e,t){return e.inter>t.inter?1:e.inter<t.inter?-1:e.len>t.len?1:e.len<t.len?-1:e.len2>t.len2?1:e.len2==t.len2?0:-1})),e.boxing().setAttr("KEY",{path:R[0].path},!1),R[0].path}}}),xui.Class("xui.svg.group","xui.svg.absComb",{Instance:{_adjustText:function(){return this},_setBBox:function(e,t,i){var r=xui.svg.$adjustBB(e,t);return this.each((function(e){var t=e.properties,o=e._elset,n=t.attr;if(e.renderId&&o&&o[0]){var a=e.boxing()._getBBox();o.forEach((function(t){var o=n[e.getKey(t.node.id,!0)],s={};"text"==t.type?(s={x:o.x,y:o.y},"x"in r&&(s.x+=r.x-a.x),"y"in r&&(s.y+=r.y-a.y),o.x=s.x,o.y=s.y,t.attr(s)):(xui.merge(s,t._getBBox(!0),"all",!0),"x"in r&&(s.x+=r.x-a.x),"y"in r&&(s.y+=r.y-a.y),"width"in r&&(s.width+=r.width-a.width),"height"in r&&(s.height+=r.height-a.height),xui.svg.$setBB(e,t.type,s,o,t,i))}))}else e._init_bbox||(e._init_bbox={}),xui.merge(e._init_bbox,r,"all",!0)}))}},Static:{ISCOMBO:1,_beforeSerialized:function(e){var t=arguments.callee.upper.call(this,e),i=t.properties,r=i.attr=xui.clone(i.attr,!0);return xui.filter(r.KEY,(function(e,t){return!("transform"==t&&(!e||e.length<1))&&"href"!=t&&"target"!=t&&void("path"==t&&xui.isArr(i.attr.KEY.path)&&(i.attr.KEY.path=e.join("")))})),xui.each(r,(function(e,t){"KEY"!=t&&(xui.filter(e,(function(e,t){if("transform"==t)return!1})),"path"==t.split("_")[0]&&xui.each(e,(function(t,i){"path"==i&&xui.isArr(t)&&(e.path=t.join(""))})))})),t},_type:"path",Templates:{tagName:"path"},DataModel:{attr:{ini:{KEY:{}}},hAlign:null,vAlign:null,shadow:!1},RenderTrigger:function(){var e,t=this;(e=t._init_bbox)&&(t.boxing()._setBBox(e),delete t._init_bbox)},_draw:function(e,t,i){var r=e.set(),o=i.attr,n=o.KEY||{path:""},a=e.path(n.path||"");return a._isGroupFirst=1,a.node.id=t.box.KEY+":"+t.serialId+":",r.push(a),xui.each(o,(function(i,o){if("KEY"!=o){var n=o.split("_")[0].toLowerCase();switch(n){case"rect":a=e.rect(i.x,i.y,i.width,i.height);break;case"circle":a=e.circle(i.cx,i.cy,i.r);break;case"ellipse":a=e.ellipse(i.cx,i.cy,i.rx,i.ry);break;case"image":a=e.image(i.src,i.x,i.y,i.width,i.height);break;case"path":a=e.path(i.path);break;case"text":a=e.text(i.x,i.y,i.text);break;default:return}var s=xui(this.node).xid();"text"==n?a.click((function(e){return!t.$inDesign&&!t.properties.disabled&&(t.onTextClick&&(i=t.boxing().onTextClick(t,e,s)),!1!==i&&t.onClick?t.boxing().onClick(t,e,s):void 0);var i})):a.click((function(e){return!t.$inDesign&&!t.properties.disabled&&(t.onClick?t.boxing().onClick(t,e,s):void 0)})),a.dblclick((function(e){return!t.$inDesign&&!t.properties.disabled&&(t.onDblClick?t.boxing().onDblClick(t,e,s):void 0)})),a.contextmenu((function(e){if(t.onContextmenu)return!1!==t.boxing().onContextmenu(t,e,s)})),a.node.id=t.box.KEY+"-"+o+":"+t.serialId+":",r.push(a)}})),r}}}),xui.Class("xui.UI.SVGPaper","xui.UI.Div",{Initialize:function(){this.addTemplateKeys(["SVG"])},Instance:{append:function(e,t,i){(xui.isHash(e)||xui.isStr(e))&&(e=xui.create(e)),e["xui.UIProfile"]&&(e=e.boxing());var r,o,n=this,a=arguments.callee.upper;return e.each((function(e){(r=!!e.box["xui.svg"])&&e.renderId&&(e.clearCache(),e.$beforeDestroy.svgClear(),delete e.renderId,delete e.rendered,o=1),a.call(n,e,null,t,i,r,n.get(0)&&xui(n.get(0)._canvas)),o&&e.box._initAttr2UI(e)})),this},getPaper:function(){return xui.get(this.get(0),["_paper"])},getSVGString:function(){var e=xui.get(this.get(0),["_paper"]);return e?e.toSVG():""}},Static:{DataModel:{iframeAutoLoad:null,html:null,width:{$spaceunit:1,ini:"32em"},height:{$spaceunit:1,ini:"25em"},scaleChildren:{ini:!1},overflow:{ini:undefined},graphicZIndex:{ini:0,action:function(e){this.getSubNode("SVG").css("zIndex",e)}}},RenderTrigger:function(){var e=this,t=e.getRootNode(),i=e.properties,r=xui.CSS.$px(i.width,t,!0),o=xui.CSS.$px(i.height,t,!0);(e.$beforeDestroy=e.$beforeDestroy||{}).svgClear=function(){e._paper&&(e._paper.clear(),e._paper.remove())},e._paper=Raphael(e.$domId,r,o),e._canvas=e._paper.canvas,e._canvas.id=e.box.KEY+"-SVG:"+e.serialId+":";var n=e._canvas.style;n.position="absolute",n.left=0,n.top=0,n.zIndex=i.graphicZIndex;var a=[];xui.arr.each(e.children,(function(e){e[0].box["xui.svg"]&&a.push(e[0])})),a.length&&(e.boxing().append(xui.svg.pack(a)),Raphael.svg||xui.setTimeout((function(){e&&!e.destroyed&&e.boxing().append(xui.svg.pack(a))}))),e._paper&&xui.setTimeout((function(){if(e&&!e.destroyed){var t=e._paper.getSize();e.$designerRoot?e._frame=e._paper.rect(0,0,1,1,0).attr({"stroke-width":"0px"}):e.$inDesign&&(e._frame=e._paper.rect(0,0,t.width,t.height,8).attr({"stroke-dasharray":". ",stroke:"#666"})),e._frame&&(e._frame._decoration=1)}}))},_onresize:function(e,t,i){var r,o,n=e._paper,a=e.properties.scaleChildren;if(xui.$us(e),t=t?e.$px(t,null,!0):t,i=i?e.$px(i,null,!0):i,a&&(r=e.$px(n.width,null,!0),o=e.$px(n.height,null,!0)),n){var s=e.$px(n.width,null,!0),u=e.$px(n.height,null,!0);if(t&&s!=t||i&&u!=i){var l={},d=e.getSubNode("SVG");n.setSize(t,i),e.$inDesign&&e._frame&&((t||0===t)&&e._frame.attr("width",t),(i||0===i)&&e._frame.attr("height",i)),t||0===t||(t=s),l.width=t,(i||0===i)&&(i=u),l.height=i,!xui.isEmpty(l)&&xui.Dom.$hasEventHandler(d.get(0),"onsize")&&d.onSize(!0,l),a&&n.forEach((function(n){var a,s=t/r,u=i/o,l=function(e,t){var i=xui.UIProfile.getFromDom(e.node.id);if(i){var r,o=e.attr();switch(e.type){case"circle":r={cx:o.cx*s,cy:o.cy*u,r:o.r*(s+u)/2};break;case"ellipse":r={cx:o.cx*s,cy:o.cy*u,rx:o.rx*s,ry:o.ry*u};break;case"rect":case"image":r={x:o.x*s,y:o.y*u,width:o.width*s,height:o.height*u};break;case"text":r={x:o.x*s,y:o.y*u};break;case"path":r={path:Raphael.transformPath(xui.isArr(o.path)?o.path.join(""):o.path,"s"+s+","+u+",0,0")}}r&&i.boxing().setAttr(t||"KEY",r,!1,!0)}};e._frame!==n&&n.node.$xid&&n.node.id&&!/^[^:]+-/.test(n.node.id)&&(n._isGroupFirst?(a=xui.UIProfile.getFromDom(n.node.id))&&a._elset.forEach((function(e){l(e,a.getKey(e.node.id,!0))})):l(n))}))}}}}}),xui.Class("xui.UI.FusionChartsXT","xui.UI",{Initialize:function(){window.JSON||(window.JSON={parse:function(e){return xui.unserialize(e)},stringify:function(e){return xui.stringify(e)}})},Instance:{initialize:function(){},refreshChart:function(e){return this.each((function(t){t&&t.box&&(t.boxing().busy(!1,""),t.renderId)&&xui.resetRun("xui.UI.FusionChartsXT:"+t.$xid,(function(){if(t&&t.box){var i=t.properties;t._chartId&&(s=window.FusionCharts(t._chartId))&&(s.dispose(),t.getSubNode("BOX").html("",!1));var r,o=new window.FusionCharts(i.chartType,t._chartId,t.$isEm(i.width)?t.$em2px(i.width):i.width,t.$isEm(i.height)?t.$em2px(i.height):i.height);switch(e){case"XMLUrl":(n=xui.getFileSync(i.XMLUrl))&&o.setXMLData(n);break;case"JSONUrl":(a=xui.getFileSync(i.JSONUrl))&&o.setJSONData(a);break;case"XMLData":o.setXMLData(i.XMLData);break;default:var n;if(i.XMLUrl)(n=xui.getFileSync(i.XMLUrl))&&o.setXMLData(n);else if(i.JSONUrl){var a;(a=xui.getFileSync(i.JSONUrl))&&o.setJSONData(a)}else i.XMLData?o.setXMLData(i.XMLData):xui.isEmpty(i.JSONData)||(r=1,o.setJSONData(t.box._prepareFCData(t,i.JSONData)))}r||o.setJSONData(t.box._prepareFCData(t,o.getJSONData())),o.setTransparent(!0),o.render(t.getSubNode("BOX").id());var s=window.FusionCharts(t._chartId),u=function(e,i){t.onDataClick&&t.boxing().onDataClick(t,i)};t._f1&&s.removeEventListener("dataplotClick",t._f1),t._f2&&s.removeEventListener("dataLabelClick",t._f2),t._f3&&s.removeEventListener("annotationClick",t._f3),s.addEventListener("dataplotClick",t._f1=u),s.addEventListener("dataLabelClick",t._f2=u),s.addEventListener("annotationClick",t._f3=u),t.boxing().free()}}),200)}))},setTransparent:function(e){return this.each((function(t){var i;xui.set(t.properties,["JSONData","chart","bgalpha"],e?"0,0":""),t.renderId&&t._chartId&&(i=window.FusionCharts(t._chartId))&&i.setTransparent(e)}))},getChartAttribute:function(e){var t=this.get(0);return xui.isStr(e)?xui.get(t.properties,["JSONData","chart",e]):xui.get(t.properties,["JSONData","chart"])},setChartAttribute:function(e,t){var i={};return xui.isStr(e)?i[e]=t:i=e,this.each((function(e){var t;if(e.renderId&&e._chartId&&(t=window.FusionCharts(e._chartId)))t.setChartAttribute(i),xui.set(e.properties,["JSONData","chart"],t.getChartAttribute());else{var r=xui.get(e.properties,["JSONData","chart"]);r&&xui.merge(r,i,"all")}}))},getFCObject:function(){var e=this.get(0);return e.renderId&&e._chartId&&window.FusionCharts(e._chartId)},getSVGString:function(){var e=this.get(0),t=e.renderId&&e._chartId&&window.FusionCharts(e._chartId);return t?t.getSVGString():null},fillData:function(e,t,i){return this.each((function(r){var o=r.properties.JSONData;e=xui.clone(e),xui.isArr(e)&&xui.isArr(e[0])?i?o.lineset=e:"dataset"in o?o.dataset=e:o.data=e[0]:i?"lineset"in o&&xui.set(o,["lineset",t||0,"data"],e):"dataset"in o?xui.set(o,["dataset",t||0,"data"],e):o.data=e})),this.refreshChart()},updateData:function(e,t){return this.each((function(i){var r;i.renderId&&i._chartId&&(r=window.FusionCharts(i._chartId))&&r.setData&&r.setData(e,t)}))},updateDataById:function(e,t){return this.each((function(i){var r;i.renderId&&i._chartId&&(r=window.FusionCharts(i._chartId))&&r.setDataForId&&r.setDataForId(e,t)}))},callFC:function(e,t){var i;if((i=this.getFCObject())&&xui.isFun(i[e]))return i[e].apply(i,t||[])},configure:function(e){var t,i=this.get(0);i.renderId&&i._chartId&&(t=window.FusionCharts(i._chartId))&&t.configure(e)},setTheme:function(e){return"string"==typeof e&&e||(e=null),this.each((function(t){e!=t.theme&&(null===e?delete t.theme:t.theme=e)})),this.setChartAttribute("theme",e)}},Static:{_objectProp:{JSONData:1,configure:1,plotData:1,feedData:1},Appearances:{KEY:{overflow:"hidden"},BOX:{position:"absolute",left:0,top:0,"z-index":1},COVER:{position:"absolute",left:"-1px",top:"-1px",width:0,height:0,"z-index":4}},Templates:{tagName:"div",className:"{_className}",style:"{_style}",BOX:{tagName:"div"},COVER:{tagName:"div",style:"background-image:url("+xui.ini.img_bg+");"}},Behaviors:{HotKeyAllowed:!1},DataModel:{tabindex:null,defaultFocus:null,disableClickEffect:null,disableHoverEffect:null,disableTips:null,disabled:null,renderer:null,selectable:null,tips:null,width:{$spaceunit:1,ini:"30em"},height:{$spaceunit:1,ini:"25em"},chartCDN:"https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js",chartType:{ini:"Column2D",listbox:["Column2D","Column3D","Line","Area2D","Bar2D","Bar3D","Pie2D","Pie3D","Doughnut2D","Doughnut3D","Pareto2D","Pareto3D","MSColumn2D","MSColumn3D","MSLine","MSBar2D","MSBar3D","MSArea","Marimekko","ZoomLine","StackedColumn3D","StackedColumn2D","StackedBar2D","StackedBar3D","StackedArea2D","MSStackedColumn2D","MSCombi3D","MSCombi2D","MSColumnLine3D","StackedColumn2DLine","StackedColumn3DLine","MSCombiDY2D","MSColumn3DLineDY","StackedColumn3DLineDY","MSStackedColumn2DLineDY","Scatter","Bubble","ScrollColumn2D","ScrollLine2D","ScrollArea2D","ScrollStackedColumn2D","ScrollCombi2D","ScrollCombiDY2D","Funnel","RealTimeLine","RealTimeArea","RealTimeColumn","RealTimeLineDY","RealTimeStackedArea","RealTimeStackedColumn","HLinearGauge","Cylinder","HLED","VLED","Thermometer","AngularGauge","Pyramid ","Radar"],action:function(){this.renderId&&this.boxing().refreshChart()}},JSONData:{ini:{},get:function(){var e,t=this,i=t.properties;return xui.isEmpty(i.JSONData)?(e=t.boxing().getFCObject())?t.box._cleanData(t,e.getJSONData()):void 0:i.JSONData},set:function(e){var t=this,i=t.properties;xui.isStr(e)&&(e=xui.unserialize(e)),e&&(i.XMLData=i.XMLUrl=i.JSONUrl="",i.JSONData=xui.clone(e),t.renderId&&t.boxing().refreshChart("JSONData"))}},XMLUrl:{ini:"",set:function(e){var t=this,i=t.properties;i.XMLUrl=e,i.JSONUrl=i.XMLData="",i.JSONData={},t.renderId&&t.boxing().refreshChart("XMLUrl")}},XMLData:{ini:"",get:function(e){var t,i=this.properties;return i.XMLData?i.XMLData:(t=this.boxing().getFCObject())?t.getXMLData():void 0},set:function(e){var t=this,i=t.properties;i.XMLData=e,i.XMLUrl=i.JSONUrl="",i.JSONData={},t.renderId&&t.boxing().refreshChart("XMLData")}},JSONUrl:{ini:"",set:function(e){var t=this,i=t.properties;i.JSONUrl=e,i.XMLUrl=i.XMLData="",i.JSONData={},t.renderId&&t.boxing().refreshChart("JSONUrl")}},plotData:{ini:{},get:function(e){return(e=this.properties.JSONData).dataset||e.data||{}},set:function(e){var t=this.properties.JSONData;"dataset"in t||xui.isArr(e)&&xui.isArr(e[0])?t.dataset=xui.clone(e):t.data=xui.clone(e);var i=t.chart.animation;return t.chart.animation="0",this.boxing().refreshChart(),i?t.chart.animation=i:delete t.chart.animation,this}},feedData:{ini:"",set:function(e){var t,i=this;i.renderId&&i._chartId&&(t=window.FusionCharts(i._chartId))&&t.feedData&&(xui.isFinite(e)&&(e="value="+e),t.feedData(e||""))}}},_cleanData:function(e,t){var i="Javascript:void(0)";return t.dataset?xui.arr.each(t.dataset,(function(e,t){xui.arr.each(e.dataset,(function(e,t){xui.arr.each(e.data,(function(e,t){e.link==i&&delete e.link}))})),xui.arr.each(e.data,(function(e,t){e.link==i&&delete e.link}))})):t.data&&xui.arr.each(t.data,(function(e,t){e.link==i&&delete e.link,e.labelLink==i&&delete e.labelLink})),t.categories&&xui.arr.each(t.categories,(function(e,t){xui.arr.each(e.category,(function(e,t){e.link==i&&delete e.link}))})),t},_prepareFCData:function(e,t){e.$xid,t=xui.clone(t);var i="Javascript:void(0)";return t.dataset?xui.arr.each(t.dataset,(function(e,t){xui.arr.each(e.dataset,(function(e,t){xui.arr.each(e.data,(function(e,t){e.link||(e.link=i)}))})),xui.arr.each(e.data,(function(e,t){e.link||(e.link=i)}))})):t.data&&xui.arr.each(t.data,(function(e,t){e.link||(e.link=i),e.labelLink||(e.labelLink=i)})),t.categories&&xui.arr.each(t.categories,(function(e,t){xui.arr.each(e.category,(function(e,t){e.link||(e.link=i)}))})),t},RenderTrigger:function(){var e=this,t=e.properties,i=function(){e&&e.box&&(e._chartId="FC_"+e.properties.chartType+"_"+e.$xid,xui.isEmpty(e.properties.configure)||e.boxing().setConfigure(e.properties.configure,!0),e.theme&&e.boxing().setTheme(e.theme),e.boxing().refreshChart(),(e.$beforeDestroy=e.$beforeDestroy||{}).unsubscribe=function(){var t;this._chartId&&(t=window.FusionCharts(this._chartId))&&(t.removeEventListener("dataplotClick",e._f1),t.removeEventListener("dataLabelClick",e._f2),t.removeEventListener("annotationClick",e._f3),e._f1=e._f2=e._f3=null,t.dispose())})};window.FusionCharts?i():(e.boxing().busy(!1,"Loading charts ..."),xui.include("FusionCharts",t.chartCDN,(function(){e&&e.box&&(e.boxing().free(),i())}),null,!1,{cache:!0}))},EventHandlers:{onFusionChartsEvent:function(e,t,i){},onDataClick:function(e,t){},onLabelClick:function(e,t){},onAnnotationClick:function(e,t){},onShowTips:null},_onresize:function(e,t,i){var r,o=e.getSubNode("BOX").cssSize(),n=e.properties,a=xui.$us(e),s=function(t,i){return e.$forceu(t,a>0?"em":"px",i)},u=(e.getRoot(),t?e.$px(t):t),l=i?e.$px(i):i;(t&&!xui.compareNumber(o.width,u,6)||i&&!xui.compareNumber(o.height,l,6))&&(t&&(n.width=s(u)),i&&(n.height=s(l)),o={width:t?n.width:null,height:i?n.height:null},e.getSubNode("BOX").cssSize(o,!0),(e.$inDesign||n.cover)&&e.getSubNode("COVER").cssSize(o,!0),e.renderId&&e._chartId&&(r=window.FusionCharts(e._chartId))&&r.resizeTo(u||void 0,l||void 0))}}}),xui.Class("xui.UI.ECharts","xui.UI",{Initialize:function(){for(var e={},t=0;t<9;t++)e["dataValue"+(t+1)]={ini:"",dynamic:!0,get:function(e){return function(t){var i=this.boxing().getECharts();if(!i)return"";var r=i.getOption();if(!r.series)return"[x]";for(var o,n=[],a=0,s=r.series.length;a<s;a++){var u=r.series[a].data;if(!u)return"";e<u.length?(u=u&&u[e],n.push(xui.isSet(u)?xui.isHash(u)?u.value:u:""),o=1):n.push("")}return o?n.join(":"):""}}(t),set:function(e){return function(t,i){var r=this.boxing().getECharts();if(r){var o,n=r.getOption();if(n.series){var a,s,u=this.properties.optionUpdater;u.series||(u.series=n.series);for(var l=(t+"").split(":"),d=0,c=l.length;d<c;d++)d>=u.series.length&&(u.series[d]={type:u.series[0]&&u.series[0].type||"line",data:[]}),a=u.series[d],""!==l[d]&&(a.data||(a.data=[]),s=a.data,t=parseFloat(l[d])||0,(i||t!==(xui.isHash(s[e])?s[e].value:s[e]))&&(xui.isHash(s[e])?s[e].value=t:s[e]=t,o=1));o&&this.boxing().setOptionUpdater(u,!0)}}}}(t)},e["realTimeData"+(t+1)]={ini:"",dynamic:!0,get:function(e){return function(t){var i=this.boxing().getECharts();if(!i)return"";var r=i.getOption();if(!r.series||!r.xAxis)return"[x]";var o=r.series[e]&&r.series[e].data,n=o&&o[o.length-1];return xui.isSet(n)?xui.isHash(n)?n.value:n:""}}(t),set:function(e){return function(t){t=parseFloat(t)||0;var i=this.boxing().getECharts();if(i){var r=i.getOption();if(r.series&&r.xAxis){var o,n,a=this.properties.optionUpdater,s=this.properties.realTimePoints;a.xAxis||(a.xAxis=r.xAxis),a.series||(a.series=r.series);var u=xui.Date.format(new Date,this.properties.xAxisDateFormatter);if((o=a.xAxis[e])&&(n=o.data))for(n.push(u),n.length>=s&&n.shift();n.length<s;)n.unshift(0);if(e>=a.series.length)for(var l=a.series.length-1;l<=e;l++)a.series[l]={type:a.series[0]&&a.series[0].type||"line",data:[]};for((o=a.series[e]).data||(o.data=[]),(n=o.data).push(t),n.length>=s&&n.shift();n.length<s;)n.unshift(0);this.boxing().setOptionUpdater(a,!0)}}}}(t)};xui.UI.ECharts.setDataModel(e)},Instance:{_reBindProp:function(e,t,i){var r,o=e.boxing(),n={};if("optionUpdater"==i&&xui.isHash(t)){for(var a in t)n[a]=xui.isFun(t[a])?t[a](e):xui.adjustVar(t[a]);return xui.isFun(o[r="set"+xui.str.initial(i)])&&o[r](n,!0),!1}},getECharts:function(){return this.get(0)&&this.get(0).$echarts},optionAdapter:function(e){return e},echarts_call:function(e,t){var i=this.getECharts();if(i&&i[e])return i[e].apply(i,t||[])},echarts_dispatchAction:function(e){return this.echarts_call("dispatchAction",[e])},echarts_showLoading:function(e,t){return this.echarts_call("showLoading",[e,t])},echarts_hideLoading:function(){return this.echarts_call("hideLoading")},echarts_getOption:function(){return this.echarts_call("getOption",[])},echarts_setOption:function(e,t,i,r){return this.echarts_call("setOption",[e,t,i,r])},echarts_getDataURL:function(e){return this.echarts_call("getDataURL",[e])},echarts_getConnectedDataURL:function(e){return this.echarts_call("getConnectedDataURL",[e])},echarts_appendData:function(e){return this.echarts_call("appendData",[e])},echarts_clear:function(){return this.echarts_call("clear")},echarts_isDisposed:function(){return!this.get(0)||!this.get(0).$echarts||this.echarts_call("isDisposed")}},Static:{_objectProp:{chartOption:1,optionUpdater:1,dataset:1},Appearances:{KEY:{overflow:"hidden"},BOX:{position:"absolute",left:0,top:0,"z-index":1},COVER:{position:"absolute",left:"-1px",top:"-1px",width:0,height:0,"z-index":4}},Templates:{tagName:"div",className:"{_className}",style:"{_style}",BOX:{tagName:"div"},COVER:{tagName:"div",style:"background-image:url("+xui.ini.img_bg+");"}},Behaviors:{HotKeyAllowed:!1},DataModel:{tabindex:null,defaultFocus:null,disableClickEffect:null,disableHoverEffect:null,disableTips:null,disabled:null,renderer:null,selectable:null,tips:null,autoTips:null,width:{$spaceunit:1,ini:"30em"},height:{$spaceunit:1,ini:"25em"},chartCDN:"https://cdn.jsdelivr.net/npm/echarts@4.2.0-rc.2/dist/echarts.min.js",chartCDNGL:"https://cdn.jsdelivr.net/npm/echarts-gl@1.1.1/dist/echarts-gl.min.js",chartTheme:{ini:"",action:function(e){this.boxing().refresh()}},chartRenderer:{ini:"canvas",listbox:["","canvas","svg"],action:function(e){this.boxing().refresh()}},chartDevicePixelRatio:{ini:window.devicePixelRatio,action:function(e){this.boxing().refresh()}},chartResizeSilent:!1,chartOption:{ini:{},action:function(e){var t=this,i=t.boxing(),r=t.properties;if(!i.echarts_isDisposed()&&t.$echarts){var o=xui.isFun(e.getOption)?e.getOption():e,n=r.optionUpdater;for(var a in n)xui.set(o,a.split("."),n[a]);if("dataset"in o&&!xui.isEmpty(o.dataset)){var s=o.dataset,u=(s.dimensions||s.source&&s.source[0]||[0]).length;o.xAxis&&xui.isHash(o.xAxis)&&(o.xAxis=[o.xAxis]),o.yAxis&&xui.isHash(o.yAxis)&&(o.yAxis=[o.yAxis]),a=0;for(var l=u-1;a<l;a++){var d=o.series[0]&&o.series[0].type||"line";o.series[a]?delete o.series[a].data:o.series[a]={type:d}}if(s=o.xAxis)for(a=0,l=s.length;a<l;a++)delete s[a].data;if(s=o.yAxis)for(a=0,l=s.length;a<l;a++)delete s[a].data;var c=t.$echarts.getOption();if(c){if(s=c.series)for(a=0,l=s.length;a<l;a++)delete s[a].data;if(s=c.xAxis)for(a=0,l=s.length;a<l;a++)delete s[a].data;if(s=c.yAxis)for(a=0,l=s.length;a<l;a++)delete s[a].data;try{t.$echarts.setOption(c,!0,!0,!0)}catch(e){xui.log(e)}}}if((e=r.tagVar.optionAdapter)&&xui.isFun(e)&&(o=e.call(i,o,t)),(e=i.optionAdapter)&&xui.isFun(e)&&(o=e.call(i,o,t)),!i.beforeSetOption||!1!==i.beforeSetOption(t,o))try{t.$echarts.setOption(o)}catch(e){xui.log(e)}}}},optionUpdater:{ini:{},action:function(e){var t=this;xui.resetRun("echart-data-setting:"+t.$xid,(function(){t&&t.box&&t.boxing().setChartOption(t.properties.chartOption,!0)}))}},dataset:{ini:{},get:function(){return this.properties.optionUpdater.dataset||{}},set:function(e,t){var i=this.properties,r=i.xAxisDateFormatter,o=i.optionUpdater;if(e!==o.dataset||t)return e&&xui.isHash(e)?(o.dataset=e,r&&xui.each(o.dataset.source,(function(e,t){xui.isNumb(e[0])&&(e[0]=xui.Date.format(e[0],r))}))):delete o.dataset,this.boxing().setOptionUpdater(o,!0)}},xAxisDateFormatter:"hh:mm:ss",realTimePoints:5},RenderTrigger:function(){var e=this,t=e.properties,i=function(){if(e&&e.box){var i={width:e.$px(t.width),height:e.$px(t.height)};"canvas"!=t.chartRenderer&&(i.chartRenderer=t.chartRenderer),t.chartDevicePixelRatio!=window.devicePixelRatio&&(i.chartDevicePixelRatio=t.chartDevicePixelRatio);var r=window.echarts.init(e.getSubNode("BOX").get(0),t.chartTheme,i);e.$echarts=r,e.boxing().setChartOption(t.chartOption,!0);var o="click,dblclick,mousedown,mouseup,mouseover,mouseout,globalout,contextmenu".split(",");e.onMouseEvent&&xui.arr.each(o,(function(t){r.on(t,(function(i){e&&e.onMouseEvent&&e.onMouseEvent(e,t,i)}))}));var n="legendselectchanged,legendunselected,legendscroll,datazoom,datarangeselected,timelinechanged,timelineplaychanged,restore,dataviewchanged,magictypechanged,geoselectchanged,geoselected,geounselected,pieselectchanged,pieselected,pieunselected,mapselectchanged,mapselected,mapunselected,axisareaselected,focusnodeadjacency,unfocusnodeadjacency,brush,brushselected,rendered,finished".split(",");e.onChartEvent&&xui.arr.each(n,(function(t){r.on(t,(function(i){e&&e.onChartEvent&&e.onChartEvent(e,t,i)}))})),(e.$beforeDestroy=e.$beforeDestroy||{}).destroyechart=function(){var e=this.$echarts;e&&(xui.arr.each(o,(function(t){e.off(t)})),xui.arr.each(n,(function(t){e.off(t)})),e.dispose(),delete this.$echarts)}}};if(window.echarts)i();else{e.boxing().busy(!1,"Loading charts ...");var r=t.chartCDNGL;xui.include("echarts",t.chartCDN,(function(){r&&xui.include("",r,(function(){e&&e.box&&(e.boxing().free(),i())}),null,!1,{cache:!0})}),null,!1,{cache:!0})}},EventHandlers:{onMouseEvent:function(e,t,i){},onChartEvent:function(e,t,i){},beforeSetOption:function(e,t){},onShowTips:null},_beforeSerialized:function(e){for(var t=xui.UI._beforeSerialized.call(this,e),i=t.properties,r=0;r<9;r++)delete i["realTimeData"+(r+1)],delete i["dataValue"+(r+1)];return delete i.optionUpdater,t},_onresize:function(e,t,i){var r,o=e.getSubNode("BOX").cssSize(),n=e.properties,a=xui.$us(e),s=function(t,i){return e.$forceu(t,a>0?"em":"px",i)},u=(e.getRoot(),t?e.$px(t):t),l=i?e.$px(i):i;(t&&!xui.compareNumber(o.width,u,6)||i&&!xui.compareNumber(o.height,l,6))&&(t&&(n.width=s(u)),i&&(n.height=s(l)),o={width:t?n.width:null,height:i?n.height:null},e.getSubNode("BOX").cssSize(o,!0),(e.$inDesign||n.cover)&&e.getSubNode("COVER").cssSize(o,!0),e.renderId&&(r=e.$echarts)&&r.resize({width:u,height:l,silent:n.chartResizeSilent}))}}}),xui.Class("xui.UI.FormLayout",["xui.UI","xui.absList"],{Initialize:function(){this.addTemplateKeys(["ITEM","TABLE","CBORDER","CBT","CBL","HOLDER","HIDER","SPREADER"])},Instance:{_isDesignMode:function(){return"design"==this.getMode()},getContainer:function(e){var t=this.get(0);return t.ItemIdMapSubSerialId&&t.ItemIdMapSubSerialId[e]?arguments.callee.upper.apply(this,[e]):this.getSubNode("POOL")}},Static:{HasHtmlTableNode:1,_CONTAINERKEY:"ITEM",_ITEMCONTAINER:1,_getActiveHanders:function(e){return e.boxing()._isDesignMode()?["KEY","HOLDER"]:null},_NoProp:{conLayoutColumns:1},_objectProp:{layoutData:1},Appearances:{KEY:{overflow:"hidden"},BOX:{position:"relative",left:0,top:0,"z-index":1},CBORDER:{position:"absolute",left:0,top:0},"CBORDER div":{position:"absolute",display:"block"},POOL:{position:"absolute",left:"-100%",top:"-100%",width:0,height:0},HOLDER:{overflow:"auto",position:"relative"},TABLE:{overflow:"hidden","border-collapse":"separate","border-spacing":"0",margin:"0","border-width":"0","table-layout":"fixed",width:"0","outline-width":"0",cursor:"default","max-width":"none","max-height":"none"},"ITEM:empty:after":{"text-align":"center",color:"#ccc",content:"attr(data-coord)",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",margin:"auto",height:"1.5em","-moz-user-select":xui.browser.gek?"-moz-none":null,"-khtml-user-select":xui.browser.kde?"none":null,"-webkit-user-select":xui.browser.kde?"none":null,"-o-user-select":xui.browser.opr?"none":null,"-ms-user-select":xui.browser.ie||xui.browser.newie?"none":null,"user-select":"none","touch-action":"none"},"ITEM.layoutcell":{"border-right":"1px solid transparent","border-bottom":"1px solid transparent","border-left":"none","border-top":"none",$order:1},"ITEM.layoutcell.firstrow":{"border-top":"1px solid transparent",$order:2},"ITEM.layoutcell.firstcol":{"border-left":"1px solid transparent",$order:2},"BOX.solidgridline ITEM.layoutcell":{"border-right":"1px solid #444","border-bottom":"1px solid #444","border-left":"none","border-top":"none",$order:3},"BOX.solidgridline ITEM.layoutcell.firstrow":{"border-top":"1px solid #444",$order:4},"BOX.solidgridline ITEM.layoutcell.firstcol":{"border-left":"1px solid #444",$order:4},"KEY ITEM":{position:"relative",background:"transparent",height:"22px",padding:"0 4px",overflow:"hidden","outline-width":"0","white-space":"pre-line","empty-cells":"show","line-height":"1.22","text-align":"left","vertical-align":"middle","background-clip":"padding-box"},"KEY .handsontableInput":{"line-height":"1.22"},"KEY .handsontable tr":{background:"transparent"},"BOX.handsontable tr:first-child td, BOX.handsontable tr:first-child th":{"border-top":"none"},"BOX.handsontable tr:first-child > td, BOX.handsontable tr:first-child > th":{"border-top":"1px solid #ccc"},".handsontable.solidgridline td":{"border-right":"1px solid #444","border-bottom":"1px solid #444"},".handsontable.solidgridline tr:first-child > td":{"border-top":"1px solid #444"},".handsontable.solidgridline th:nth-child(2), .handsontable.solidgridline td:first-of-type, .handsontable.solidgridline .htNoFrame + th, .handsontable.solidgridline .htNoFrame + td":{"border-left":"1px solid #444"},".handsontable.nogridline td":{"border-right":"1px solid transparent","border-bottom":"1px solid transparent"},".handsontable.nogridline tr:first-child > td":{"border-top":"1px solid transparent"},".handsontable.nogridline th:nth-child(2), .handsontable.nogridline td:first-of-type, .handsontable.nogridline .htNoFrame + th, .handsontable.nogridline .htNoFrame + td":{"border-left":"1px solid transparent"}},Templates:{tagName:"div",className:"{_className}",style:"{_style}",BOX:{tagName:"div"},POOL:{tagName:"div"}},Behaviors:{DroppableKeys:["ITEM"],PanelKeys:["ITEM"],HotKeyAllowed:!1,ITEM:{}},DataModel:{tabindex:null,defaultFocus:null,disableClickEffect:null,disableHoverEffect:null,disableTips:null,disabled:null,renderer:null,selectable:null,tips:null,autoTips:null,overflow:null,items:{hidden:!0},listKey:null,dragSortable:null,mode:{ini:"write",listbox:["design","write","read"],get:function(){return this.$inDesign&&!this.getModule()?"design":this.properties.mode||"read"},action:function(){this.boxing().refresh()}},width:{$spaceunit:1,ini:"30em"},height:{$spaceunit:1,ini:"25em"},solidGridlines:{ini:!0,action:function(e){var t=e?"solidgridline":this.boxing()._isDesignMode()?"":"nogridline",i=this.getSubNode("BOX");i.removeClass("solidgridline nogridline"),t&&i.addClass(t)}},stretchH:{ini:"all",listbox:["none","last","all"],action:function(){this.boxing()._isDesignMode()?this.box._updateSetting(this,"stretchH"):this.box._resizeTable(this,this.getSubNode("BOX").cssSize(),!0)}},rowHeaderWidth:{ini:25,action:function(){if(this.boxing()._isDesignMode()){this.box._updateSetting(this,"rowHeaderWidth");var e=this.getRoot().cssSize();xui.UI.$tryResize(this,e.width,e.height)}}},columnHeaderHeight:{ini:25,action:function(){if(this.boxing()._isDesignMode()){this.box._updateSetting(this,"columnHeaderHeight");var e=this.getRoot().cssSize();xui.UI.$tryResize(this,e.width,e.height)}}},floatHandler:{ini:!0,action:function(){if(this.boxing()._isDesignMode()){var e=this.getRoot().cssSize();xui.UI.$tryResize(this,e.width,e.height,!0)}}},defaultRowSize:5,defaultColumnSize:5,defaultRowHeight:50,_defaultColumnWidth:50,layoutData:{ini:{},action:function(){this.boxing().refresh()}},rendererCDNJS:{hidden:!0,ini:"https://cdn.jsdelivr.net/gh/linb/handsontable622/handsontable.full.min.js"},rendererCDNCSS:{hidden:!0,ini:"https://cdn.jsdelivr.net/gh/linb/handsontable622/handsontable.full.min.css"}},RenderTrigger:function(){var e=this,t=e.properties,i=e.box;if(e.boxing()._isDesignMode())if(window.Handsontable)i._renderAsHandsontable(e);else{var r="xui.UI.HTable:Handsontable";xui.CSS.includeLink(t.rendererCDNCSS,r),xui.include("Handsontable",t.rendererCDNJS,(function(){if(xui(r).get(0)){i._renderAsHandsontable(e);var t=e.getRoot().cssSize();xui.UI.$tryResize(e,t.width,t.height)}else xui.Thread.repeat((function(){if(xui(r).get(0)){i._renderAsHandsontable(e);var t=e.getRoot().cssSize();return xui.UI.$tryResize(e,t.width,t.height),!1}}),200)}),null,!1,{cache:!0})}else i._renderAsH5Table(e);e.$handleCustomVars=function(t){t||xui.arr.each(e.children,(function(e){delete e[0]._attached2cell,delete e[0]._autoexpand}))},e.boxing().setSolidGridlines(t.solidGridlines,!0)},EventHandlers:{onShowTips:null,onGetCellData:function(e,t,i){}},_getHeaderOffset:function(e){var t=e.properties,i={left:0,top:0};return t.floatHandler&&e.boxing()._isDesignMode()&&(i.left=t.rowHeaderWidth,i.top=t.columnHeaderHeight+1),i},_layoutChanged:function(e,t){(t||e._$tableInited)&&xui.resetRun(e.getUid("layoutchanged"),(function(){var t=e.properties.layoutData;e.properties.layoutData=e.box._getLayoutData(e),e.$onLayoutChanged&&e.$onLayoutChanged(e,t,e.properties.layoutData)}))},_getLayoutData:function(e){e.properties;var t,i,r,o,n,a,s={},u={},l={},d=[],c={};if(r=e.$htable){c.rows=r.countRows(),c.cols=r.countCols(),d=xui.copy(xui.get(r.getPlugin("mergeCells"),["mergedCellsCollection","mergedCells"])),xui.isEmpty(d)||(c.merged=d),n=r.getSettings(),o=r.getPlugin("ManualRowResize");for(var p=0,h=c.rows;p<h;p++){var f=r.toPhysicalRow(p);o.manualRowHeights&&o.manualRowHeights[f]&&xui.set(u,[p+1,"manualHeight"],o.manualRowHeights[f]),(a=xui.isArr(n.rowHeights)?n.rowHeights[f]:n.rowHeights)&&xui.set(u,[p+1,"height"],a)}for(xui.isEmpty(u)||(c.rowSetting=u),o=r.getPlugin("ManualColumnResize"),p=0,h=c.cols;p<h;p++){var x=r.toPhysicalColumn(p);o.manualColumnWidths&&o.manualColumnWidths[x]&&xui.set(l,[xui.ExcelFormula.toColumnChr(p+1),"manualWidth"],o.manualColumnWidths[x])}for(xui.isEmpty(l)||(c.colSetting=l),p=0,h=(i=r.getData()).length;p<h;p++)for(var g=0,m=(f=i[p]).length;g<m;g++)xui.isSet(i[p][g])&&""!==i[p][g]&&xui.set(s,[xui.ExcelFormula.toCellId(g,p),"value"],i[p][g]);for(p=0,h=c.rows;p<h;p++){f=r.toPhysicalRow(p);var b=r.getCellMetaAtRow(f);for(g=0,m=b.length;g<m;g++)x=r.toPhysicalColumn(g),xui.isEmpty(b[x].style)||xui.set(s,[xui.ExcelFormula.toCellId(g,p),"style"],xui.copy(b[x].style))}xui.isEmpty(s)||(c.cells=s),(t=r.getPlugin("customBorders").getBorders()).length&&(c.customBorders=xui.clone(t,(function(e,t){return"id"!=t&&"border"!=t})))}return c},_renderAsH5Table:function(e){var t,i,r,o,n,a,s=e.getSubNode("BOX").get(0),u=e.properties,l=u.layoutData,d=l.rows||u.defaultRowSize,c=l.cols||u.defaultColumnSize,p={},h={},f={},x=function(t,i){var r=e.onGetCellData&&e.boxing().onGetCellData(e,i,xui.get(l,["cells",i]),t[i]);if(!xui.isSet(r))if(t[i]){var o=t[i],n=o&&o.boxing();r="xui.UI.RichEditor"==o.key?"":"xui.UI.CheckBox"==o.key||"xui.UI.SCheckBox"==o.key?'<input type="checkbox" disabled tabindex="-1"  onclick="javascript:return false;"'+(n.getUIValue()?"checked":"")+">"+n.getCaption():n.getShowValue?n.getShowValue():n.getValue?"$UIvalue"in o.properties?n.getUIValue():n.getValue():n.getCaption?n.getCaption():n.getHtml?n.getHtml():n.getLabel?n.getLabel():""}else r=xui.get(l,["cells",i,"value"]);return xui.isSet(r)?r:""},g=[];xui.arr.each(e.children,(function(e){p[e[1]]=e[0]})),xui.arr.each(l.merged,(function(e){h[e.row+":"+e.col]=(e.rowspan>1?" rowspan="+e.rowspan:"")+(e.colspan?" colspan = "+e.colspan:"")+" ";for(var t=0,i=e.rowspan;t<i;t++)for(var r=0,o=e.colspan;r<o;r++)0===t&&0===r||(f[e.row+t+":"+(e.col+r)]=1)})),g.push("<div id='"+e.key+"-HOLDER:"+e.serialId+":' class='"+e.getClass("HOLDER")+"' style='width:"+u.width+"; height:"+u.height+"' >"),g.push("<table id='"+e.key+"-TABLE:"+e.serialId+":' class='"+e.getClass("TABLE")+"'"+("none"!=u.stretchH?" style='width:"+u.width+";'":"")+">");var m=e.box._getColWidths(e,e.$px(u.width));g.push("<colgroup><col style='width:0;border:0;margin:0;padding:0;'></col>");for(var b=0,v=c;b<v;b++)g.push("<col style='width:"+m[b]+";'></col>");g.push("</colgroup>"),g.push("<tbody>");for(var y=0,A=d;y<A;y++){for(g.push("<tr><th style='width:0;border:0;margin:0;padding:0;"),(t=xui.get(l,["rowSetting",y+1,"height"])||xui.get(l,["rowSetting",y+1,"manualHeight"])||u.defaultRowHeight)&&g.push("height:"+(t-1)+"px;"),g.push("'></th>"),b=0,v=c;b<v;b++)r={_serialId:i=e.pickSubId("items"),col:b,row:y,id:o=xui.ExcelFormula.toCellId(b,y),value:x(p,o),style:xui.get(l,["cells",o,"style"])||{}},e.ItemIdMapSubSerialId[o]=i,e.SubSerialIdMapItem[i]=r,n=e.key+"-ITEM:"+e.serialId+":"+i,a=[],xui.each(r.style,(function(e,t){a.push(t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))+":"+e)})),f[y+":"+b]||(g.push("<td id='"+n+"' class='layoutcell "+(0===y?"firstrow ":"")+(0===b?"firstcol ":"")+e.getClass("ITEM")+"' style='"+a.join(";")+"' "+(h[y+":"+b]||"")+">"),g.push(r.value),g.push("</td>"));g.push("</tr>")}g.push("</tbody></table>"),g.push("<div id='"+e.key+"-CBORDER:"+e.serialId+":' class='"+e.getClass("CBORDER")+"' ></div>"),g.push("</div>"),s.innerHTML=g.join(""),xui.UI.$addEventsHandler(e,s,!1),e.box._setCustomBorders(e);var _=[];xui.each(e.children,(function(e){_.push(e)})),e.children=[],xui.arr.each(_,(function(t){e.boxing().append(t[0],t[1])}))},_renderAsHandsontable:function(e){if(e&&e.box){var t,i=function(e,t){e.box._layoutChanged(e,t)},r=e.getSubNode("BOX").get(0),o=e.properties,n=o.layoutData,a=!0,s={autoWrapRow:!0,renderAllRows:!0,persistentState:!1,readOnly:!1,readOnlyCellClassName:"no",comments:!1,disableVisualSelection:!1,enterBeginsEditing:a,manualRowMove:a,manualColumnMove:a,contextMenu:a,copyable:a,copyPaste:a,beforeOnCellMouseDown:function(e,t){-1===t.row&&-1===t.col&&e.stopImmediatePropagation()},afterOnCellMouseUp:function(t,i){-1===i.row&&-1===i.col&&(this.deselectCell(),e.getRoot().onClick(!0),t.stopImmediatePropagation())},beforeRenderer:function(t,i,r,n,a,s){var u=e.pickSubId("items"),l=xui.ExcelFormula.toCellId(r,i);for(var d in s.oid=s.id,s.id=l,s.oid&&s.oid!=s.id&&(e.$cellIdChangedMap[s.oid]=s.id),s._serialId=u,e.ItemIdMapSubSerialId[l]=u,e.SubSerialIdMapItem[u]=s,s.style||(s.style=xui.get(o.layoutData,["cells",xui.ExcelFormula.toCellId(r,i),"style"])||{}),t.id=e.key+"-ITEM:"+e.serialId+":"+u,xui.UI.$addEventsHandler(e,t,!0),s.style)t.style[d]=s.style[d];t.className=(t.className||"")+e.getClass("ITEM"),t.setAttribute("data-coord",l),s._child_autoexpandH?t.style.height=s._child_autoexpandH+"px":t.style.height=""},beforeRender:function(t){if(e._$tableInited){e.$cellIdChangedMap={};var i=e.getSubNode("POOL").get(0),r=[];for(var o in xui.arr.each(e.children,(function(e){e[0]&&e[0].rendered&&(i.appendChild(e[0].getRootNode()),r.push(e))})),r.length&&(e._pool_children=r),e.children=[],e.SubSerialIdMapItem)e.reclaimSubId(o,"items");e.ItemIdMapSubSerialId={},e.SubSerialIdMapItem={}}},afterInit:function(){e._$tableInited=1},afterRender:function(t){var i=this;xui.tryF(e.$onrender,[],e);var r=e.getSubNode("BOX");if((r=r.first()).id(e.key+"-MASTER:"+e.serialId+":"),(r=r.first()).id(e.key+"-HOLDER:"+e.serialId+":"),(r=r.first()).id(e.key+"-HIDER:"+e.serialId+":"),(r=r.first()).id(e.key+"-SPREADER:"+e.serialId+":"),"auto"==e.properties.height&&e.getSubNodes("BOX").height("auto"),e._$tableInited){var o=e.$cellIdChangedMap,n=e.ItemIdMapSubSerialId;xui.each(e.SubSerialIdMapItem,(function(e){var t,r=i.getDataAtCell(e.row,e.col);if(r&&"="==(r+"").charAt(0)){var a=(t=r,xui.replace(t,[[/\/\*[^*]*\*+([^\/][^*]*\*+)*\//,"$0"],[/\/\/[^\n]*/,"$0"],[/\/(\\[\/\\]|[^*\/])(\\.|[^\/\n\\])*\/[gim]*/,"$0"],[/"(\\.|[^"\\])*"/,"$0"],[/'(\\.|[^'\\])*'/,"$0"],[/[\w]+\(/,"$0"],[/\b([A-Z]+[\d]+)\b/,function(e){return o[e[0]]||(n[e[0]]?e[0]:"'"+e[0]+"'")}]]));a!==r&&i.setDataAtCell(e.row,e.col,a)}})),e._pool_children&&(xui.arr.each(e._pool_children,(function(t){delete t[0].$dockParent,e.boxing().append(t[0],o[t[1]]||t[1])})),delete e._pool_children)}else{var a=[];xui.each(e.children,(function(e){a.push(e)})),e.children=[],xui.arr.each(a,(function(t){e.boxing().append(t[0],t[1])})),e.getRoot().onMouseup((function(t,i){e.$lastMousePos=xui.Event.getPos(i)}))}},afterSelection:function(){o.floatHandler&&e.getRoot().css("overflow","visible")},outsideClickDeselects:function(t){for(;(!t.id||t.id==xui.$localeDomId||"tspan"==t.tagName)&&t.parentNode!==document&&t.parentNode!==window;)t=t.parentNode;var i=xui.UIProfile.getFromDom(t);if(i&&e.$popmenu){var r=e.$popmenu.get(0);if(i==r||i.$parentPopMenu==r||i.$popGrp==r.$popGrp)return!1}return e.getRoot().css("overflow",""),!0},afterContextMenuShow:function(t){e.$onPopMenu&&(e.$popmenu=e.$onPopMenu(e,e.$popmenu,t.menu)),t.menu.container.style.display="none"},afterUpdateSettings:function(){},afterRedo:function(){i(e)},afterUndo:function(){i(e)},afterChange:function(t,r){"loadData"!=r&&"populateFromArray"!=r&&i(e)},beforeCellAlignment:function(){i(e)},afterMergeCells:function(t,r,o){o||i(e)},afterUnmergeCells:function(t,r,o){o||i(e)},afterRowResize:function(t,r,o){i(e);for(var n=this.getCellMetaAtRow(t),a=0,s=n.length;a<s;a++){var u=e.boxing().getChildren(n[a].id);u["xui.UI.Input"]&&u.getMultiLines&&u.getMultiLines()&&u.setAutoexpand&&(u.get(0)._autoexpand=r-1+"px")}"auto"==e.properties.height&&e.box._resizeTable(e,{height:"auto"})},afterColumnResize:function(){i(e)},afterColumnSort:function(){i(e)},afterRowMove:function(t,r){i(e)},afterColumnMove:function(){i(e)},afterCreateCol:function(t,r){i(e);for(var n=this.getPlugin("ManualColumnResize"),a=[],s=0;s<r;s++)a.push(o._defaultColumnWidth);for(n.manualColumnWidths||(n.manualColumnWidths=[]),s=0;s<t;s++)n.manualColumnWidths[s]=n.manualColumnWidths[s]||void 0;n.manualColumnWidths.splice.apply(n.manualColumnWidths,[t,0].concat(a)),this.deselectCell();var u=this;xui.asyRun((function(){u.selectColumns(t)}))},afterCreateRow:function(t,r){i(e);for(var n=this.getPlugin("ManualRowResize"),a=[],s=0;s<r;s++)a.push(o.defaultRowHeight);for(n.manualRowHeights||(n.manualRowHeights=[]),s=0;s<t;s++)n.manualRowHeights[s]=n.manualRowHeights[s]||void 0;n.manualRowHeights.splice.apply(n.manualRowHeights,[t,0].concat(a)),this.deselectCell();var u=this;xui.asyRun((function(){u.selectRows(t)})),"auto"==e.properties.height&&e.box._resizeTable(e,{height:"auto"})},afterRemoveCol:function(t,r){i(e);var o=this.getPlugin("ManualColumnResize");o.manualColumnWidths&&o.manualColumnWidths.splice(t,r),this.deselectCell()},afterRemoveRow:function(t,r){i(e);var o=this.getPlugin("ManualRowResize");o.manualRowHeights&&o.manualRowHeights.splice(t,r),this.deselectCell(),"auto"==e.properties.height&&e.box._resizeTable(e,{height:"auto"})}},u={},l=e.box._getHeaderOffset(e);if("auto"!=o.height&&(u.height=e.$px(o.height)+l.top),u.width=e.$px(o.width)+l.left,u.stretchH="last"==(t=o.stretchH)?"last":"all"==t?"all":"none",u.rowHeaderWidth=o.rowHeaderWidth,u.columnHeaderHeight=o.columnHeaderHeight,u.defaultColumnWidth=o._defaultColumnWidth,u.rowHeaders=a,u.colHeaders=a,n.merged?u.mergeCells=n.merged:u.mergeCells=a,n.cols){var d,c=[],p=[],h=[],f=[];xui.each(n.rowSetting,(function(e,t){xui.isSet(e.manualHeight||e)&&(p[parseInt(t,10)-1]=parseInt(e.manualHeight||e,10)),xui.isSet(e.height||e)&&(c[parseInt(t,10)-1]=parseInt(e.height||e,10))})),xui.each(n.colSetting,(function(e,t){t=xui.ExcelFormula.toColumnNum(t),xui.isSet(e.manualWidth||e)&&(h[t-1]=parseInt(e.manualWidth||e,10))}));for(var x=0,g=n.rows||o.defaultRowSize;x<g;x++){f.push(d=[]);for(var m=0,b=n.cols||o.defaultColumnSize;m<b;m++)d.push(null)}for(xui.each(n.cells,(function(e,t){var i=xui.ExcelFormula.toCoordinate(t);f[i.row][i.col]=xui.isSet(e.value)?e.value:null})),x=0;x<n.rows;x++)p[x]=p[x]||o.defaultRowHeight;u.manualRowResize=p,u.manualColumnResize=xui.isEmpty(h)?a:h,xui.isEmpty(c)||(u.rowHeights=c),u.data=f,n.customBorders&&(u.customBorders=n.customBorders)}else{for(u.manualColumnResize=a,p=[],x=0;x<o.defaultRowSize;x++)p[x]=o.defaultRowHeight;u.manualRowResize=p}e.$htable=new window.Handsontable(r,xui.merge(u,s,"all")),n.cols||(e.properties.layoutData=e.box._getLayoutData(e)),(e.$beforeDestroy=e.$beforeDestroy||{}).destroyhtable=function(){var e;if(e=this.$htable){var t=this.getSubNode("BOX").get(0);t&&xui.$purgeChildren(t),e.isDestroyed||(window.Handsontable.hooks.destroy(e),e.destroy()),delete this.$htable}(e=this.$popmenu)&&e.destroy()}}},_getColWidths:function(e,t){var i,r,o=e.properties,n=o.layoutData,a=n.cols||o.defaultColumnSize,s=[],u=[],l=0,d=0,c=0;if("all"==o.stretchH){for(var p=0,h=a;p<h;p++){var f=xui.ExcelFormula.toColumnChr(p+1);(i=xui.get(n,["colSetting",f,"manualWidth"]))?(l+=i,s.push(i)):(d++,s.push(null))}r=(t-l)/d,Math.round(r)}for(p=0,h=a;p<h;p++){var x;switch(f=xui.ExcelFormula.toColumnChr(p+1),i=xui.get(n,["colSetting",f,"manualWidth"])||o._defaultColumnWidth,e.properties.stretchH){case"all":c+=x=null===s[p]?Math.max(o._defaultColumnWidth,Math.round(r)):s[p],u.push((p==a-1?Math.round(t-c+x):x)+"px");break;case"last":u.push(p==a-1?"100%":i+"px");break;default:u.push(i+"px")}}return u},_setCustomBorders:function(e){xui.resetRun(e.getUid()+":cborder",(function(){if(e.renderId){var t=e.getSubNode("CBORDER").get(0);xui.arr.each(e.properties.layoutData.customBorders,(function(i){var r,o,n,a=xui.ExcelFormula.toCellId(i.col,i.row),s=e.ItemIdMapSubSerialId[a],u=e.getSubNode("TABLE").get(0),l=e.getSubNode("ITEM",s),d=l.offset(null,u);i.top&&i.top.width&&(r=e.key+"-CBT:"+e.serialId+":"+s,n=(o=xui.Dom.byId(r))&&o.style,o||((o=document.createElement("div")).id=r,t.appendChild(o)),(n=o.style).backgroundColor=i.top.color,n.left=d.left-1+"px",n.top=d.top-1+"px",n.width=l.offsetWidth()+"px",n.height="1px"),i.left&&i.left.width&&(r=e.key+"-CBL:"+e.serialId+":"+s,(o=xui.Dom.byId(r))||((o=document.createElement("div")).id=r,t.appendChild(o)),(n=o.style).backgroundColor=i.left.color,n.left=d.left-1+"px",n.top=d.top-1+"px",n.width="1px",n.height=l.offsetHeight()+"px")}))}}))},_resizeTable:function(e,t,i){var r=e.getSubNode("HOLDER"),o="auto"==e.properties.height;if(r.get(0))if(e.boxing()._isDesignMode()){var n;if(n=e.$htable){var a=r.cssSize();o&&(t.height=e.getSubNode("HIDER").height()),a.width==t.width&&a.height==t.height||(t.mergeCells=xui.copy(xui.get(n.getPlugin("mergeCells"),["mergedCellsCollection","mergedCells"])),n.updateSettings(t))}}else{o&&(t.height="auto"),r.cssSize(t);var s=e.getSubNode("TABLE");if(s.get(0)){if(!o&&"none"!=e.properties.stretchH){var u=t.width-(s.offsetHeight()>t.height?xui.Dom.getScrollBarSize():0);s.width(u)}if(i||"all"==e.properties.stretchH){var l=this._getColWidths(e,u);s.first().children().each((function(e,t){0!==t&&(e.style.width=l[t-1])}))}var d=[];e.getSubNodes("ITEM",!0).each((function(e){xui.Dom.$hasEventHandler(e,"onsize")&&d.push(e)})),d.length&&xui(d).onSize(!0),e.box._setCustomBorders(e)}}},_updateSetting:function(e,t){var i=e.$htable;if("string"==typeof t){var r={};r[t]=e.properties[t],t=r}t.mergeCells=xui.copy(xui.get(i.getPlugin("mergeCells"),["mergedCellsCollection","mergedCells"])),i.updateSettings(t)},$beforeAppend:function(e,t,i){if(!i)return!1;1==t.size()&&xui.arr.each(e.children,(function(e){e[0]&&i==e[1]&&e[0]!==t.get(0)&&e[0].boxing().destroy()}),!0)},$afterAppend:function(e,t,i){if(i&&e.renderId&&t["xui.UI"]&&1==t.size()){var r=e.getItemByItemId(i),o=t.get(0),n=o.properties;if(r){var a=e.getSubNode("ITEM",r._serialId),s=o.box._isFormField?o.box._isFormField(o):!!xui.get(o,["properties","isFormField"]),u=e.boxing().getMode(),l="read"!=u||t["xui.UI.RichEditor"];if(!s||n.name&&!e.ItemIdMapSubSerialId[n.name]||(n.name=r.id),a&&a.get(0)&&o._cellresizeP!=a){var d=function(){a.get(0)&&(t.setPosition("absolute").setLeft(0).setTop(0),t.setWidth&&t.setWidth(a.offsetWidth()-(r.col?1:2)),t.setHeight&&t.setHeight(a.offsetHeight()-(r.row?1:2)))};d(),a.onSize(d,"cellresize"),o._cellresizeP=a}o._attached2cell||(o._attached2cell=1,s&&(l?(o.locked=1,o.boxing().setDisplay(""),t.setLabelPos&&t.setLabelPos("none").setLabelCaption("").setLabelSize("0"),t.setVAlign&&t.setVAlign("middle"),t["xui.UI.Input"]&&t.getMultiLines&&t.getMultiLines()&&t.setAutoexpand&&(parseFloat(o._autoexpand)||(o._autoexpand=a.offsetHeight()-1+"px",o.getSubNode("INPUT").addClass("autoexpand"),o.$beforeAutoexpand=function(i,o){return o=t.getAutoexpandHeight(),r._child_autoexpandH=o,e.boxing()._isDesignMode()?xui.resetRun(e.getUid("autoex"),(function(){e.$htable&&e.$htable.render()})):a.height(o),e.boxing()._isDesignMode()||e.box._setCustomBorders(e),!1},o.box._checkAutoexpand(o))),"read"==u&&t.setReadonly&&t.setReadonly(!0,!0)):o.boxing().setDisplay("none")),o.$handleCustomVars=function(e){if(!e)return{_attached2cell:this._attached2cell,_autoexpand:this._autoexpand,$beforeAutoexpand:this.$beforeAutoexpand};for(var t in e)e[t]&&(this[t]=e[t])})}}},_onresize:function(e,t,i){var r=e.properties,o="auto"==r.height,n=xui.$us(e),a=function(t,i){return e.$forceu(t,n>0?"em":"px",i)},s=(e.getRoot(),e.getSubNode("BOX")),u=e.box._getHeaderOffset(e),l=t?e.$px(t):t,d=i?e.$px(i):i;o&&(i=null),(t||i)&&(t&&(r.width=a(l)),i&&(r.height=a(d)),s.css({marginLeft:-u.left+"px",marginTop:-u.top+"px",width:t?l+u.left+"px":null,height:o?"auto":i?d+u.top+"px":null}),xui.resetRun(e.getUid("resize"),(function(){e&&e.box&&e.box._resizeTable(e,e.getSubNode("BOX").cssSize())})))}}}),xui},"function"==typeof define&&define.amd?define((function(){return factory.call(root)})):"object"==typeof module&&module.exports?module.exports=root&&root.document?factory.call(root):function(e){if(!e.document)throw new Error("xui requires a window with a document");return factory.call(e)}:root.xui=factory.call(root);